function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},s=n.parcelRequire63a1;null==s&&((s=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){i[t]=e},n.parcelRequire63a1=s),s.register("27Lyk",(function(e,n){var r,i;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>i),(t=>i=t));var s={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)s[e[n]]=t[e[n]]},i=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("27Lyk").register(JSON.parse('{"jAywl":"index.ffe43587.js","bqd2F":"v1_5.098f7a17.png","h70yT":"index.32f8921b.css"}'));var a={value:()=>{}};function o(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new h(r)}function h(t){this._=t}function u(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function l(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}h.prototype=o.prototype={constructor:h,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,o=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=s[a]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++a<o;)if((n=(t=s[a]).type)&&(n=u(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new h(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var c=o;function f(){}function g(t){return null==t?f:function(){return this.querySelector(t)}}function d(){return[]}function p(t){return null==t?d:function(){return this.querySelectorAll(t)}}function y(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function m(t){return function(){return this.matches(t)}}function x(t){return function(e){return e.matches(t)}}var v=Array.prototype.find;function b(){return this.firstElementChild}var w=Array.prototype.filter;function _(){return Array.from(this.children)}function A(t){return new Array(t.length)}function S(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function T(t,e,n,r,i,s){for(var a,o=0,h=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new S(t,s[o]);for(;o<h;++o)(a=e[o])&&(i[o]=a)}function k(t,e,n,r,i,s,a){var o,h,u,l=new Map,c=e.length,f=s.length,g=new Array(c);for(o=0;o<c;++o)(h=e[o])&&(g[o]=u=a.call(h,h.__data__,o,e)+"",l.has(u)?i[o]=h:l.set(u,h));for(o=0;o<f;++o)u=a.call(t,s[o],o,s)+"",(h=l.get(u))?(r[o]=h,h.__data__=s[o],l.delete(u)):n[o]=new S(t,s[o]);for(o=0;o<c;++o)(h=e[o])&&l.get(g[o])===h&&(i[o]=h)}function C(t){return t.__data__}function N(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function E(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}S.prototype={constructor:S,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var P="http://www.w3.org/1999/xhtml",M={svg:"http://www.w3.org/2000/svg",xhtml:P,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),M.hasOwnProperty(e)?{space:M[e],local:t}:t}function V(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function I(t,e){return function(){this.setAttribute(t,e)}}function L(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function D(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function B(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function H(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function z(t){return function(){this.style.removeProperty(t)}}function X(t,e,n){return function(){this.style.setProperty(t,e,n)}}function U(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function F(t,e){return t.style.getPropertyValue(e)||H(t).getComputedStyle(t,null).getPropertyValue(e)}function Y(t){return function(){delete this[t]}}function $(t,e){return function(){this[t]=e}}function q(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function W(t){return t.trim().split(/^|\s+/)}function Q(t){return t.classList||new j(t)}function j(t){this._node=t,this._names=W(t.getAttribute("class")||"")}function G(t,e){for(var n=Q(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Z(t,e){for(var n=Q(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function J(t){return function(){G(this,t)}}function K(t){return function(){Z(this,t)}}function tt(t,e){return function(){(e.apply(this,arguments)?G:Z)(this,t)}}function et(){this.textContent=""}function nt(t){return function(){this.textContent=t}}function rt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function it(){this.innerHTML=""}function st(t){return function(){this.innerHTML=t}}function at(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ot(){this.nextSibling&&this.parentNode.appendChild(this)}function ht(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ut(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===P&&e.documentElement.namespaceURI===P?e.createElement(t):e.createElementNS(n,t)}}function lt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ct(t){var e=O(t);return(e.local?lt:ut)(e)}function ft(){return null}function gt(){var t=this.parentNode;t&&t.removeChild(this)}function dt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function mt(t,e,n){return function(){var r,i=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function xt(t,e,n){var r=H(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function vt(t,e){return function(){return xt(this,t,e)}}function bt(t,e){return function(){return xt(this,t,e.apply(this,arguments))}}j.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wt=[null];function _t(t,e){this._groups=t,this._parents=e}function At(){return new _t([[document.documentElement]],wt)}_t.prototype=At.prototype={constructor:_t,select:function(t){"function"!=typeof t&&(t=g(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,a,o=e[i],h=o.length,u=r[i]=new Array(h),l=0;l<h;++l)(s=o[l])&&(a=t.call(s,s.__data__,l,o))&&("__data__"in s&&(a.__data__=s.__data__),u[l]=a);return new _t(r,this._parents)},selectAll:function(t){t="function"==typeof t?y(t):p(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a,o=e[s],h=o.length,u=0;u<h;++u)(a=o[u])&&(r.push(t.call(a,a.__data__,u,o)),i.push(a));return new _t(r,i)},selectChild:function(t){return this.select(null==t?b:function(t){return function(){return v.call(this.children,t)}}("function"==typeof t?t:x(t)))},selectChildren:function(t){return this.selectAll(null==t?_:function(t){return function(){return w.call(this.children,t)}}("function"==typeof t?t:x(t)))},filter:function(t){"function"!=typeof t&&(t=m(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,a=e[i],o=a.length,h=r[i]=[],u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&h.push(s);return new _t(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,C);var n,r=e?k:T,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=s.length,o=new Array(a),h=new Array(a),u=new Array(a),l=0;l<a;++l){var c=i[l],f=s[l],g=f.length,d=N(t.call(c,c&&c.__data__,l,i)),p=d.length,y=h[l]=new Array(p),m=o[l]=new Array(p);r(c,f,y,m,u[l]=new Array(g),d,e);for(var x,v,b=0,w=0;b<p;++b)if(x=y[b]){for(b>=w&&(w=b+1);!(v=m[w])&&++w<p;);x._next=v||null}}return(o=new _t(o,i))._enter=h,o._exit=u,o},enter:function(){return new _t(this._enter||this._groups.map(A),this._parents)},exit:function(){return new _t(this._exit||this._groups.map(A),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),h=0;h<a;++h)for(var u,l=n[h],c=r[h],f=l.length,g=o[h]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(g[d]=u);for(;h<i;++h)o[h]=n[h];return new _t(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,a=i[s];--s>=0;)(r=i[s])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=E);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a,o=n[s],h=o.length,u=i[s]=new Array(h),l=0;l<h;++l)(a=o[l])&&(u[l]=a);u.sort(e)}return new _t(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],a=0,o=s.length;a<o;++a)(i=s[a])&&t.call(i,i.__data__,a,s);return this},attr:function(t,e){var n=O(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?R:V:"function"==typeof e?n.local?B:D:n.local?L:I)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?z:"function"==typeof e?U:X)(t,e,null==n?"":n)):F(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Y:"function"==typeof e?q:$)(t,e)):this.node()[t]},classed:function(t,e){var n=W(t+"");if(arguments.length<2){for(var r=Q(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?tt:e?J:K)(n,e))},text:function(t){return arguments.length?this.each(null==t?et:("function"==typeof t?rt:nt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?it:("function"==typeof t?at:st)(t)):this.node().innerHTML},raise:function(){return this.each(ot)},lower:function(){return this.each(ht)},append:function(t){var e="function"==typeof t?t:ct(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ct(t),r=null==e?ft:"function"==typeof e?e:g(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(gt)},clone:function(t){return this.select(t?pt:dt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=s.length;if(!(arguments.length<2)){for(o=e?mt:yt,r=0;r<a;++r)this.each(o(s[r],e,n));return this}var o=this.node().__on;if(o)for(var h,u=0,l=o.length;u<l;++u)for(r=0,h=o[u];r<a;++r)if((i=s[r]).type===h.type&&i.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?bt:vt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,a=i.length;s<a;++s)(r=i[s])&&(yield r)}};var St=At;function Tt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ct(){}var Nt=.7,Et=1.4285714285714286,Pt="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vt=/^#([0-9a-f]{3,8})$/,Rt=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),It=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),Lt=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${Mt}\\)$`),Dt=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Mt}\\)$`),Bt=new RegExp(`^hsl\\(${Mt},${Ot},${Ot}\\)$`),Ht=new RegExp(`^hsla\\(${Mt},${Ot},${Ot},${Mt}\\)$`),zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xt(){return this.rgb().formatHex()}function Ut(){return this.rgb().formatRgb()}function Ft(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yt(e):3===n?new Wt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?$t(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?$t(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Rt.exec(t))?new Wt(e[1],e[2],e[3],1):(e=It.exec(t))?new Wt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Lt.exec(t))?$t(e[1],e[2],e[3],e[4]):(e=Dt.exec(t))?$t(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Bt.exec(t))?Kt(e[1],e[2]/100,e[3]/100,1):(e=Ht.exec(t))?Kt(e[1],e[2]/100,e[3]/100,e[4]):zt.hasOwnProperty(t)?Yt(zt[t]):"transparent"===t?new Wt(NaN,NaN,NaN,0):null}function Yt(t){return new Wt(t>>16&255,t>>8&255,255&t,1)}function $t(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wt(t,e,n,r)}function qt(t,e,n,r){return 1===arguments.length?((i=t)instanceof Ct||(i=Ft(i)),i?new Wt((i=i.rgb()).r,i.g,i.b,i.opacity):new Wt):new Wt(t,e,n,null==r?1:r);var i}function Wt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Qt(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function jt(){const t=Gt(this.opacity);return`${1===t?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${1===t?")":`, ${t})`}`}function Gt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return((t=Zt(t))<16?"0":"")+t.toString(16)}function Kt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ee(t,e,n,r)}function te(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=Ft(t)),!t)return new ee;if(t instanceof ee)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,h=(s+i)/2;return o?(a=e===s?(n-r)/o+6*(n<r):n===s?(r-e)/o+2:(e-n)/o+4,o/=h<.5?s+i:2-s-i,a*=60):o=h>0&&h<1?0:a,new ee(a,o,h,t.opacity)}function ee(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ne(t){return(t=(t||0)%360)<0?t+360:t}function re(t){return Math.max(0,Math.min(1,t||0))}function ie(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function se(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}Tt(Ct,Ft,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xt,formatHex:Xt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return te(this).formatHsl()},formatRgb:Ut,toString:Ut}),Tt(Wt,qt,kt(Ct,{brighter(t){return t=null==t?Et:Math.pow(Et,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Nt:Math.pow(Nt,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wt(Zt(this.r),Zt(this.g),Zt(this.b),Gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatHex8:function(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:jt,toString:jt})),Tt(ee,(function(t,e,n,r){return 1===arguments.length?te(t):new ee(t,e,n,null==r?1:r)}),kt(Ct,{brighter(t){return t=null==t?Et:Math.pow(Et,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Nt:Math.pow(Nt,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wt(ie(t>=240?t-240:t+120,i,r),ie(t,i,r),ie(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ee(ne(this.h),re(this.s),re(this.l),Gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gt(this.opacity);return`${1===t?"hsl(":"hsla("}${ne(this.h)}, ${100*re(this.s)}%, ${100*re(this.l)}%${1===t?")":`, ${t})`}`}}));var ae=t=>()=>t;function oe(t,e){return function(n){return t+n*e}}function he(t){return 1==(t=+t)?ue:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ae(isNaN(e)?n:e)}}function ue(t,e){var n=e-t;return n?oe(t,n):ae(isNaN(t)?e:t)}var le=function t(e){var n=he(e);function r(t,e){var r=n((t=qt(t)).r,(e=qt(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),a=ue(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ce(t){return function(e){var n,r,i=e.length,s=new Array(i),a=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=qt(e[n]),s[n]=r.r||0,a[n]=r.g||0,o[n]=r.b||0;return s=t(s),a=t(a),o=t(o),r.opacity=1,function(t){return r.r=s(t),r.g=a(t),r.b=o(t),r+""}}}ce((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,o=r<e-1?t[r+2]:2*s-i;return se((n-r/e)*e,a,i,s,o)}})),ce((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],s=t[r%e],a=t[(r+1)%e],o=t[(r+2)%e];return se((n-r/e)*e,i,s,a,o)}}));function fe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ge=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,de=new RegExp(ge.source,"g");function pe(t,e){var n,r,i,s=ge.lastIndex=de.lastIndex=0,a=-1,o=[],h=[];for(t+="",e+="";(n=ge.exec(t))&&(r=de.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),o[a]?o[a]+=i:o[++a]=i),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,h.push({i:a,x:fe(n,r)})),s=de.lastIndex;return s<e.length&&(i=e.slice(s),o[a]?o[a]+=i:o[++a]=i),o.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)o[(n=h[r]).i]=n.x(t);return o.join("")})}var ye,me,xe=0,ve=0,be=0,we=1e3,_e=0,Ae=0,Se=0,Te="object"==typeof performance&&performance.now?performance:Date,ke="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ce(){return Ae||(ke(Ne),Ae=Te.now()+Se)}function Ne(){Ae=0}function Ee(){this._call=this._time=this._next=null}function Pe(t,e,n){var r=new Ee;return r.restart(t,e,n),r}function Me(){Ae=(_e=Te.now())+Se,xe=ve=0;try{!function(){Ce(),++xe;for(var t,e=ye;e;)(t=Ae-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xe}()}finally{xe=0,function(){var t,e,n=ye,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ye=e);me=t,Ve(r)}(),Ae=0}}function Oe(){var t=Te.now(),e=t-_e;e>we&&(Se-=e,_e=t)}function Ve(t){xe||(ve&&(ve=clearTimeout(ve)),t-Ae>24?(t<1/0&&(ve=setTimeout(Me,t-Te.now()-Se)),be&&(be=clearInterval(be))):(be||(_e=Te.now(),be=setInterval(Oe,we)),xe=1,ke(Me)))}function Re(t,e,n){var r=new Ee;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Ee.prototype=Pe.prototype={constructor:Ee,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ce():+n)+(null==e?0:+e),this._next||me===this||(me?me._next=this:ye=this,me=this),this._call=t,this._time=n,Ve()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ve())}};var Ie=c("start","end","cancel","interrupt"),Le=[],De=0,Be=1,He=2,ze=3,Xe=4,Ue=5,Fe=6;function Ye(t,e,n,r,i,s){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function s(t){n.state=Be,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(s){var u,l,c,f;if(n.state!==Be)return h();for(u in i)if((f=i[u]).name===n.name){if(f.state===ze)return Re(a);f.state===Xe?(f.state=Fe,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=Fe,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[u])}if(Re((function(){n.state===ze&&(n.state=Xe,n.timer.restart(o,n.delay,n.time),o(s))})),n.state=He,n.on.call("start",t,t.__data__,n.index,n.group),n.state===He){for(n.state=ze,r=new Array(c=n.tween.length),u=0,l=-1;u<c;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(h),n.state=Ue,1),s=-1,a=r.length;++s<a;)r[s].call(t,i);n.state===Ue&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){for(var r in n.state=Fe,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Pe(s,0,n.time)}(t,n,{name:e,index:r,group:i,on:Ie,tween:Le,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:De})}function $e(t,e){var n=We(t,e);if(n.state>De)throw new Error("too late; already scheduled");return n}function qe(t,e){var n=We(t,e);if(n.state>ze)throw new Error("too late; already running");return n}function We(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qe(t,e){var n,r,i,s=t.__transition,a=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>He&&n.state<Ue,n.state=Fe,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):a=!1;a&&delete t.__transition}}var je,Ge=180/Math.PI,Ze={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Je(t,e,n,r,i,s){var a,o,h;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(h=t*n+e*r)&&(n-=t*h,r-=e*h),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,h/=o),t*r<e*n&&(t=-t,e=-e,h=-h,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ge,skewX:Math.atan(h)*Ge,scaleX:a,scaleY:o}}function Ke(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(s,a){var o=[],h=[];return s=t(s),a=t(a),function(t,r,i,s,a,o){if(t!==i||r!==s){var h=a.push("translate(",null,e,null,n);o.push({i:h-4,x:fe(t,i)},{i:h-2,x:fe(r,s)})}else(i||s)&&a.push("translate("+i+e+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,h),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fe(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(s.rotate,a.rotate,o,h),function(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fe(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(s.skewX,a.skewX,o,h),function(t,e,n,r,s,a){if(t!==n||e!==r){var o=s.push(i(s)+"scale(",null,",",null,")");a.push({i:o-4,x:fe(t,n)},{i:o-2,x:fe(e,r)})}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,h),s=a=null,function(t){for(var e,n=-1,r=h.length;++n<r;)o[(e=h[n]).i]=e.x(t);return o.join("")}}}var tn=Ke((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ze:Je(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),en=Ke((function(t){return null==t?Ze:(je||(je=document.createElementNS("http://www.w3.org/2000/svg","g")),je.setAttribute("transform",t),(t=je.transform.baseVal.consolidate())?Je((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ze)}),", ",")",")");function nn(t,e){var n,r;return function(){var i=qe(this,t),s=i.tween;if(s!==n)for(var a=0,o=(r=n=s).length;a<o;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function rn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var s=qe(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},h=0,u=i.length;h<u;++h)if(i[h].name===e){i[h]=o;break}h===u&&i.push(o)}s.tween=i}}function sn(t,e,n){var r=t._id;return t.each((function(){var t=qe(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return We(t,r).value[e]}}function an(t,e){var n;return("number"==typeof e?fe:e instanceof Ft?le:(n=Ft(e))?(e=n,le):pe)(t,e)}function on(t){return function(){this.removeAttribute(t)}}function hn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function un(t,e,n){var r,i,s=n+"";return function(){var a=this.getAttribute(t);return a===s?null:a===r?i:i=e(r=a,n)}}function ln(t,e,n){var r,i,s=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===s?null:a===r?i:i=e(r=a,n)}}function cn(t,e,n){var r,i,s;return function(){var a,o,h=n(this);if(null!=h)return(a=this.getAttribute(t))===(o=h+"")?null:a===r&&o===i?s:(i=o,s=e(r=a,h));this.removeAttribute(t)}}function fn(t,e,n){var r,i,s;return function(){var a,o,h=n(this);if(null!=h)return(a=this.getAttributeNS(t.space,t.local))===(o=h+"")?null:a===r&&o===i?s:(i=o,s=e(r=a,h));this.removeAttributeNS(t.space,t.local)}}function gn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function dn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function pn(t,e){return function(){$e(this,t).delay=+e.apply(this,arguments)}}function yn(t,e){return e=+e,function(){$e(this,t).delay=e}}function mn(t,e){return function(){qe(this,t).duration=+e.apply(this,arguments)}}function xn(t,e){return e=+e,function(){qe(this,t).duration=e}}var vn=St.prototype.constructor;function bn(t){return function(){this.style.removeProperty(t)}}var wn=0;function _n(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function An(){return++wn}var Sn=St.prototype;_n.prototype=function(t){return St().transition(t)}.prototype={constructor:_n,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=g(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o,h,u=r[a],l=u.length,c=s[a]=new Array(l),f=0;f<l;++f)(o=u[f])&&(h=t.call(o,o.__data__,f,u))&&("__data__"in o&&(h.__data__=o.__data__),c[f]=h,Ye(c[f],e,n,f,c,We(o,n)));return new _n(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=p(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var h,u=r[o],l=u.length,c=0;c<l;++c)if(h=u[c]){for(var f,g=t.call(h,h.__data__,c,u),d=We(h,n),y=0,m=g.length;y<m;++y)(f=g[y])&&Ye(f,e,n,y,g,d);s.push(g),a.push(h)}return new _n(s,a,e,n)},selectChild:Sn.selectChild,selectChildren:Sn.selectChildren,filter:function(t){"function"!=typeof t&&(t=m(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,a=e[i],o=a.length,h=r[i]=[],u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&h.push(s);return new _n(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var h,u=e[o],l=n[o],c=u.length,f=a[o]=new Array(c),g=0;g<c;++g)(h=u[g]||l[g])&&(f[g]=h);for(;o<r;++o)a[o]=e[o];return new _n(a,this._parents,this._name,this._id)},selection:function(){return new vn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=An(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a,o=r[s],h=o.length,u=0;u<h;++u)if(a=o[u]){var l=We(a,e);Ye(a,t,n,u,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new _n(r,this._parents,t,n)},call:Sn.call,nodes:Sn.nodes,node:Sn.node,size:Sn.size,empty:Sn.empty,each:Sn.each,on:function(t,e){var n=this._id;return arguments.length<2?We(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?$e:qe;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=O(t),r="transform"===n?en:an;return this.attrTween(t,"function"==typeof e?(n.local?fn:cn)(n,r,sn(this,"attr."+t,e)):null==e?(n.local?hn:on)(n):(n.local?ln:un)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=O(t);return this.tween(n,(r.local?gn:dn)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?tn:an;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var s=F(this,t),a=(this.style.removeProperty(t),F(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}(t,r)).on("end.style."+t,bn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,s;return function(){var a=F(this,t),o=n(this),h=o+"";return null==o&&(this.style.removeProperty(t),h=o=F(this,t)),a===h?null:a===r&&h===i?s:(i=h,s=e(r=a,o))}}(t,r,sn(this,"style."+t,e))).each(function(t,e){var n,r,i,s,a="style."+e,o="end."+a;return function(){var h=qe(this,t),u=h.on,l=null==h.value[a]?s||(s=bn(e)):void 0;u===n&&i===l||(r=(n=u).copy()).on(o,i=l),h.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,s=n+"";return function(){var a=F(this,t);return a===s?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,s,n)),r}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(sn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=We(this.node(),n).tween,s=0,a=i.length;s<a;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?nn:rn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?pn:yn)(e,t)):We(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?mn:xn)(e,t)):We(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){qe(this,t).ease=e}}(e,t)):We(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;qe(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(s,a){var o={value:a},h={value:function(){0==--i&&s()}};n.each((function(){var n=qe(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(h)),n.on=e})),0===i&&s()}))},[Symbol.iterator]:Sn[Symbol.iterator]};var Tn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function kn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}St.prototype.interrupt=function(t){return this.each((function(){Qe(this,t)}))},St.prototype.transition=function(t){var e,n;t instanceof _n?(e=t._id,t=t._name):(e=An(),(n=Tn).time=Ce(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a,o=r[s],h=o.length,u=0;u<h;++u)(a=o[u])&&Ye(a,t,e,u,o,n||kn(a,e));return new _n(r,this._parents,t,e)};const{abs:Cn,max:Nn,min:En}=Math;function Pn(t){return[+t[0],+t[1]]}function Mn(t){return[Pn(t[0]),Pn(t[1])]}["w","e"].map(On),["n","s"].map(On),["n","w","e","s","nw","ne","sw","se"].map(On);function On(t){return{type:t}}function Vn(t){return((t=Math.exp(t))+1/t)/2}(function t(e,n,r){function i(t,i){var s,a,o=t[0],h=t[1],u=t[2],l=i[0],c=i[1],f=i[2],g=l-o,d=c-h,p=g*g+d*d;if(p<1e-12)a=Math.log(f/u)/e,s=function(t){return[o+t*g,h+t*d,u*Math.exp(e*t*a)]};else{var y=Math.sqrt(p),m=(f*f-u*u+r*p)/(2*u*n*y),x=(f*f-u*u-r*p)/(2*f*n*y),v=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(x*x+1)-x);a=(b-v)/e,s=function(t){var r,i=t*a,s=Vn(v),l=u/(n*y)*(s*(r=e*i+v,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[o+l*g,h+l*d,u*s/Vn(e*i+v)]}}return s.duration=1e3*a*e/Math.SQRT2,s}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i})(Math.SQRT2,2,4);function Rn(t,e,n){this.k=t,this.x=e,this.y=n}Rn.prototype={constructor:Rn,scale:function(t){return 1===t?this:new Rn(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Rn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Rn(1,0,0);Rn.prototype;var In,Ln,Dn,Bn={},Hn={},zn=Hn={};function Xn(){throw new Error("setTimeout has not been defined")}function Un(){throw new Error("clearTimeout has not been defined")}function Fn(t){if(Ln===setTimeout)return setTimeout(t,0);if((Ln===Xn||!Ln)&&setTimeout)return Ln=setTimeout,setTimeout(t,0);try{return Ln(t,0)}catch(e){try{return Ln.call(null,t,0)}catch(e){return Ln.call(this,t,0)}}}!function(){try{Ln="function"==typeof setTimeout?setTimeout:Xn}catch(t){Ln=Xn}try{Dn="function"==typeof clearTimeout?clearTimeout:Un}catch(t){Dn=Un}}();var Yn,$n=[],qn=!1,Wn=-1;function Qn(){qn&&Yn&&(qn=!1,Yn.length?$n=Yn.concat($n):Wn=-1,$n.length&&jn())}function jn(){if(!qn){var t=Fn(Qn);qn=!0;for(var e=$n.length;e;){for(Yn=$n,$n=[];++Wn<e;)Yn&&Yn[Wn].run();Wn=-1,e=$n.length}Yn=null,qn=!1,function(t){if(Dn===clearTimeout)return clearTimeout(t);if((Dn===Un||!Dn)&&clearTimeout)return Dn=clearTimeout,clearTimeout(t);try{return Dn(t)}catch(e){try{return Dn.call(null,t)}catch(e){return Dn.call(this,t)}}}(t)}}function Gn(t,e){this.fun=t,this.array=e}function Zn(){}zn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];$n.push(new Gn(t,e)),1!==$n.length||qn||Fn(jn)},Gn.prototype.run=function(){this.fun.apply(null,this.array)},zn.title="browser",zn.browser=!0,zn.env={},zn.argv=[],zn.version="",zn.versions={},zn.on=Zn,zn.addListener=Zn,zn.once=Zn,zn.off=Zn,zn.removeListener=Zn,zn.removeAllListeners=Zn,zn.emit=Zn,zn.prependListener=Zn,zn.prependOnceListener=Zn,zn.listeners=function(t){return[]},zn.binding=function(t){throw new Error("process.binding is not supported")},zn.cwd=function(){return"/"},zn.chdir=function(t){throw new Error("process.chdir is not supported")},zn.umask=function(){return 0},function(){var t,e,n,r,i,s;"undefined"!=typeof performance&&null!==performance&&performance.now?Bn=function(){return performance.now()}:null!=Hn&&Hn.hrtime?(Bn=function(){return(t()-i)/1e6},e=Hn.hrtime,r=(t=function(){var t;return 1e9*(t=e())[0]+t[1]})(),s=1e9*Hn.uptime(),i=r-s):Date.now?(Bn=function(){return Date.now()-n},n=Date.now()):(Bn=function(){return(new Date).getTime()-n},n=(new Date).getTime())}.call(Bn);for(var Jn="undefined"==typeof window?n:window,Kn=["moz","webkit"],tr="AnimationFrame",er=Jn["request"+tr],nr=Jn["cancel"+tr]||Jn["cancelRequest"+tr],rr=0;!er&&rr<Kn.length;rr++)er=Jn[Kn[rr]+"Request"+tr],nr=Jn[Kn[rr]+"Cancel"+tr]||Jn[Kn[rr]+"CancelRequest"+tr];if(!er||!nr){var ir=0,sr=0,ar=[];er=function(t){if(0===ar.length){var e=Bn(),n=Math.max(0,16.666666666666668-(e-ir));ir=n+e,setTimeout((function(){var t=ar.slice(0);ar.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(ir)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return ar.push({handle:++sr,callback:t,cancelled:!1}),sr},nr=function(t){for(var e=0;e<ar.length;e++)ar[e].handle===t&&(ar[e].cancelled=!0)}}(In=function(t){return er.call(Jn,t)}).cancel=function(){nr.apply(Jn,arguments)},In.polyfill=function(t){t||(t=Jn),t.requestAnimationFrame=er,t.cancelAnimationFrame=nr};var or;or=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);if(a){var o=s(a);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,r=0;r<n.length;r++)for(var i=n[r].example,s=0;s<i.length;s++)t[t.length]=i[s];for(var a in e)t[t.length]=a;var o=document.createElement("ul");o.setAttribute("id","rgbcolor-examples");for(r=0;r<t.length;r++)try{var h=document.createElement("li"),u=new RGBColor(t[r]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),l.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+t[r]+" -> "+u.toRGB()+" -> "+u.toHex());h.appendChild(l),h.appendChild(c),o.appendChild(h)}catch(t){}return o}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hr=function(t,e){return(hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ur(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}hr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function lr(t,e){var n=t[0],r=t[1];return[n*Math.cos(e)-r*Math.sin(e),n*Math.sin(e)+r*Math.cos(e)]}function cr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if("number"!=typeof t[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof t[n]+" == typeof "+t[n]);return!0}var fr=Math.PI;function gr(t,e,n){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var r=t.rX,i=t.rY,s=t.x,a=t.y;r=Math.abs(t.rX),i=Math.abs(t.rY);var o=lr([(e-s)/2,(n-a)/2],-t.xRot/180*fr),h=o[0],u=o[1],l=Math.pow(h,2)/Math.pow(r,2)+Math.pow(u,2)/Math.pow(i,2);1<l&&(r*=Math.sqrt(l),i*=Math.sqrt(l)),t.rX=r,t.rY=i;var c=Math.pow(r,2)*Math.pow(u,2)+Math.pow(i,2)*Math.pow(h,2),f=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-c)/c)),g=r*u/i*f,d=-i*h/r*f,p=lr([g,d],t.xRot/180*fr);t.cX=p[0]+(e+s)/2,t.cY=p[1]+(n+a)/2,t.phi1=Math.atan2((u-d)/i,(h-g)/r),t.phi2=Math.atan2((-u-d)/i,(-h-g)/r),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*fr),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*fr),t.phi1*=180/fr,t.phi2*=180/fr}function dr(t,e,n){cr(t,e,n);var r=t*t+e*e-n*n;if(0>r)return[];if(0===r)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var i=Math.sqrt(r);return[[(t*n+e*i)/(t*t+e*e),(e*n-t*i)/(t*t+e*e)],[(t*n-e*i)/(t*t+e*e),(e*n+t*i)/(t*t+e*e)]]}var pr,yr=Math.PI/180;function mr(t,e,n){return(1-n)*t+n*e}function xr(t,e,n,r){return t+Math.cos(r/180*fr)*e+Math.sin(r/180*fr)*n}function vr(t,e,n,r){var i=1e-6,s=e-t,a=n-e,o=3*s+3*(r-n)-6*a,h=6*(a-s),u=3*s;return Math.abs(o)<i?[-u/h]:function(t,e,n){void 0===n&&(n=1e-6);var r=t*t/4-e;if(r<-n)return[];if(r<=n)return[-t/2];var i=Math.sqrt(r);return[-t/2-i,-t/2+i]}(h/o,u/o,i)}function br(t,e,n,r,i){var s=1-i;return t*(s*s*s)+e*(3*s*s*i)+n*(3*s*i*i)+r*(i*i*i)}!function(t){function e(){return i((function(t,e,n){return t.relative&&(void 0!==t.x1&&(t.x1+=e),void 0!==t.y1&&(t.y1+=n),void 0!==t.x2&&(t.x2+=e),void 0!==t.y2&&(t.y2+=n),void 0!==t.x&&(t.x+=e),void 0!==t.y&&(t.y+=n),t.relative=!1),t}))}function n(){var t=NaN,e=NaN,n=NaN,r=NaN;return i((function(i,s,a){return i.type&kr.SMOOTH_CURVE_TO&&(i.type=kr.CURVE_TO,t=isNaN(t)?s:t,e=isNaN(e)?a:e,i.x1=i.relative?s-t:2*s-t,i.y1=i.relative?a-e:2*a-e),i.type&kr.CURVE_TO?(t=i.relative?s+i.x2:i.x2,e=i.relative?a+i.y2:i.y2):(t=NaN,e=NaN),i.type&kr.SMOOTH_QUAD_TO&&(i.type=kr.QUAD_TO,n=isNaN(n)?s:n,r=isNaN(r)?a:r,i.x1=i.relative?s-n:2*s-n,i.y1=i.relative?a-r:2*a-r),i.type&kr.QUAD_TO?(n=i.relative?s+i.x1:i.x1,r=i.relative?a+i.y1:i.y1):(n=NaN,r=NaN),i}))}function r(){var t=NaN,e=NaN;return i((function(n,r,i){if(n.type&kr.SMOOTH_QUAD_TO&&(n.type=kr.QUAD_TO,t=isNaN(t)?r:t,e=isNaN(e)?i:e,n.x1=n.relative?r-t:2*r-t,n.y1=n.relative?i-e:2*i-e),n.type&kr.QUAD_TO){t=n.relative?r+n.x1:n.x1,e=n.relative?i+n.y1:n.y1;var s=n.x1,a=n.y1;n.type=kr.CURVE_TO,n.x1=((n.relative?0:r)+2*s)/3,n.y1=((n.relative?0:i)+2*a)/3,n.x2=(n.x+2*s)/3,n.y2=(n.y+2*a)/3}else t=NaN,e=NaN;return n}))}function i(t){var e=0,n=0,r=NaN,i=NaN;return function(s){if(isNaN(r)&&!(s.type&kr.MOVE_TO))throw new Error("path must start with moveto");var a=t(s,e,n,r,i);return s.type&kr.CLOSE_PATH&&(e=r,n=i),void 0!==s.x&&(e=s.relative?e+s.x:s.x),void 0!==s.y&&(n=s.relative?n+s.y:s.y),s.type&kr.MOVE_TO&&(r=e,i=n),a}}function s(t,e,n,r,s,a){return cr(t,e,n,r,s,a),i((function(i,o,h,u){var l=i.x1,c=i.x2,f=i.relative&&!isNaN(u),g=void 0!==i.x?i.x:f?0:o,d=void 0!==i.y?i.y:f?0:h;function p(t){return t*t}i.type&kr.HORIZ_LINE_TO&&0!==e&&(i.type=kr.LINE_TO,i.y=i.relative?0:h),i.type&kr.VERT_LINE_TO&&0!==n&&(i.type=kr.LINE_TO,i.x=i.relative?0:o),void 0!==i.x&&(i.x=i.x*t+d*n+(f?0:s)),void 0!==i.y&&(i.y=g*e+i.y*r+(f?0:a)),void 0!==i.x1&&(i.x1=i.x1*t+i.y1*n+(f?0:s)),void 0!==i.y1&&(i.y1=l*e+i.y1*r+(f?0:a)),void 0!==i.x2&&(i.x2=i.x2*t+i.y2*n+(f?0:s)),void 0!==i.y2&&(i.y2=c*e+i.y2*r+(f?0:a));var y=t*r-e*n;if(void 0!==i.xRot&&(1!==t||0!==e||0!==n||1!==r))if(0===y)delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag,i.type=kr.LINE_TO;else{var m=i.xRot*Math.PI/180,x=Math.sin(m),v=Math.cos(m),b=1/p(i.rX),w=1/p(i.rY),_=p(v)*b+p(x)*w,A=2*x*v*(b-w),S=p(x)*b+p(v)*w,T=_*r*r-A*e*r+S*e*e,k=A*(t*r+e*n)-2*(_*n*r+S*t*e),C=_*n*n-A*t*n+S*t*t,N=(Math.atan2(k,T-C)+Math.PI)%Math.PI/2,E=Math.sin(N),P=Math.cos(N);i.rX=Math.abs(y)/Math.sqrt(T*p(P)+k*E*P+C*p(E)),i.rY=Math.abs(y)/Math.sqrt(T*p(E)-k*E*P+C*p(P)),i.xRot=180*N/Math.PI}return void 0!==i.sweepFlag&&0>y&&(i.sweepFlag=+!i.sweepFlag),i}))}t.ROUND=function(t){function e(e){return Math.round(e*t)/t}return void 0===t&&(t=1e13),cr(t),function(t){return void 0!==t.x1&&(t.x1=e(t.x1)),void 0!==t.y1&&(t.y1=e(t.y1)),void 0!==t.x2&&(t.x2=e(t.x2)),void 0!==t.y2&&(t.y2=e(t.y2)),void 0!==t.x&&(t.x=e(t.x)),void 0!==t.y&&(t.y=e(t.y)),void 0!==t.rX&&(t.rX=e(t.rX)),void 0!==t.rY&&(t.rY=e(t.rY)),t}},t.TO_ABS=e,t.TO_REL=function(){return i((function(t,e,n){return t.relative||(void 0!==t.x1&&(t.x1-=e),void 0!==t.y1&&(t.y1-=n),void 0!==t.x2&&(t.x2-=e),void 0!==t.y2&&(t.y2-=n),void 0!==t.x&&(t.x-=e),void 0!==t.y&&(t.y-=n),t.relative=!0),t}))},t.NORMALIZE_HVZ=function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),i((function(r,i,s,a,o){if(isNaN(a)&&!(r.type&kr.MOVE_TO))throw new Error("path must start with moveto");return e&&r.type&kr.HORIZ_LINE_TO&&(r.type=kr.LINE_TO,r.y=r.relative?0:s),n&&r.type&kr.VERT_LINE_TO&&(r.type=kr.LINE_TO,r.x=r.relative?0:i),t&&r.type&kr.CLOSE_PATH&&(r.type=kr.LINE_TO,r.x=r.relative?a-i:a,r.y=r.relative?o-s:o),r.type&kr.ARC&&(0===r.rX||0===r.rY)&&(r.type=kr.LINE_TO,delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag),r}))},t.NORMALIZE_ST=n,t.QT_TO_C=r,t.INFO=i,t.SANITIZE=function(t){void 0===t&&(t=0),cr(t);var e=NaN,n=NaN,r=NaN,s=NaN;return i((function(i,a,o,h,u){var l=Math.abs,c=!1,f=0,g=0;if(i.type&kr.SMOOTH_CURVE_TO&&(f=isNaN(e)?0:a-e,g=isNaN(n)?0:o-n),i.type&(kr.CURVE_TO|kr.SMOOTH_CURVE_TO)?(e=i.relative?a+i.x2:i.x2,n=i.relative?o+i.y2:i.y2):(e=NaN,n=NaN),i.type&kr.SMOOTH_QUAD_TO?(r=isNaN(r)?a:2*a-r,s=isNaN(s)?o:2*o-s):i.type&kr.QUAD_TO?(r=i.relative?a+i.x1:i.x1,s=i.relative?o+i.y1:i.y2):(r=NaN,s=NaN),i.type&kr.LINE_COMMANDS||i.type&kr.ARC&&(0===i.rX||0===i.rY||!i.lArcFlag)||i.type&kr.CURVE_TO||i.type&kr.SMOOTH_CURVE_TO||i.type&kr.QUAD_TO||i.type&kr.SMOOTH_QUAD_TO){var d=void 0===i.x?0:i.relative?i.x:i.x-a,p=void 0===i.y?0:i.relative?i.y:i.y-o;f=isNaN(r)?void 0===i.x1?f:i.relative?i.x:i.x1-a:r-a,g=isNaN(s)?void 0===i.y1?g:i.relative?i.y:i.y1-o:s-o;var y=void 0===i.x2?0:i.relative?i.x:i.x2-a,m=void 0===i.y2?0:i.relative?i.y:i.y2-o;l(d)<=t&&l(p)<=t&&l(f)<=t&&l(g)<=t&&l(y)<=t&&l(m)<=t&&(c=!0)}return i.type&kr.CLOSE_PATH&&l(a-h)<=t&&l(o-u)<=t&&(c=!0),c?[]:i}))},t.MATRIX=s,t.ROTATE=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),cr(t,e,n);var r=Math.sin(t),i=Math.cos(t);return s(i,r,-r,i,e-e*i+n*r,n-e*r-n*i)},t.TRANSLATE=function(t,e){return void 0===e&&(e=0),cr(t,e),s(1,0,0,1,t,e)},t.SCALE=function(t,e){return void 0===e&&(e=t),cr(t,e),s(t,0,0,e,0,0)},t.SKEW_X=function(t){return cr(t),s(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return cr(t),s(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),cr(t),s(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),cr(t),s(1,0,0,-1,0,t)},t.A_TO_C=function(){return i((function(t,e,n){return kr.ARC===t.type?function(t,e,n){var r,i,s,a;t.cX||gr(t,e,n);for(var o=Math.min(t.phi1,t.phi2),h=Math.max(t.phi1,t.phi2)-o,u=Math.ceil(h/90),l=new Array(u),c=e,f=n,g=0;g<u;g++){var d=mr(t.phi1,t.phi2,g/u),p=mr(t.phi1,t.phi2,(g+1)/u),y=p-d,m=4/3*Math.tan(y*yr/4),x=[Math.cos(d*yr)-m*Math.sin(d*yr),Math.sin(d*yr)+m*Math.cos(d*yr)],v=x[0],b=x[1],w=[Math.cos(p*yr),Math.sin(p*yr)],_=w[0],A=w[1],S=[_+m*Math.sin(p*yr),A-m*Math.cos(p*yr)],T=S[0],k=S[1];l[g]={relative:t.relative,type:kr.CURVE_TO};var C=function(e,n){var r=lr([e*t.rX,n*t.rY],t.xRot),i=r[0],s=r[1];return[t.cX+i,t.cY+s]};r=C(v,b),l[g].x1=r[0],l[g].y1=r[1],i=C(T,k),l[g].x2=i[0],l[g].y2=i[1],s=C(_,A),l[g].x=s[0],l[g].y=s[1],t.relative&&(l[g].x1-=c,l[g].y1-=f,l[g].x2-=c,l[g].y2-=f,l[g].x-=c,l[g].y-=f),c=(a=[l[g].x,l[g].y])[0],f=a[1]}return l}(t,t.relative?0:e,t.relative?0:n):t}))},t.ANNOTATE_ARCS=function(){return i((function(t,e,n){return t.relative&&(e=0,n=0),kr.ARC===t.type&&gr(t,e,n),t}))},t.CLONE=function(){return function(t){var e={};for(var n in t)e[n]=t[n];return e}},t.CALCULATE_BOUNDS=function(){var t=e(),s=r(),a=n(),o=i((function(e,n,r){var i=a(s(t(function(t){var e={};for(var n in t)e[n]=t[n];return e}(e))));function h(t){t>o.maxX&&(o.maxX=t),t<o.minX&&(o.minX=t)}function u(t){t>o.maxY&&(o.maxY=t),t<o.minY&&(o.minY=t)}if(i.type&kr.DRAWING_COMMANDS&&(h(n),u(r)),i.type&kr.HORIZ_LINE_TO&&h(i.x),i.type&kr.VERT_LINE_TO&&u(i.y),i.type&kr.LINE_TO&&(h(i.x),u(i.y)),i.type&kr.CURVE_TO){h(i.x),u(i.y);for(var l=0,c=vr(n,i.x1,i.x2,i.x);l<c.length;l++)0<(C=c[l])&&1>C&&h(br(n,i.x1,i.x2,i.x,C));for(var f=0,g=vr(r,i.y1,i.y2,i.y);f<g.length;f++)0<(C=g[f])&&1>C&&u(br(r,i.y1,i.y2,i.y,C))}if(i.type&kr.ARC){h(i.x),u(i.y),gr(i,n,r);for(var d=i.xRot/180*Math.PI,p=Math.cos(d)*i.rX,y=Math.sin(d)*i.rX,m=-Math.sin(d)*i.rY,x=Math.cos(d)*i.rY,v=i.phi1<i.phi2?[i.phi1,i.phi2]:-180>i.phi2?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],b=v[0],w=v[1],_=function(t){var e=t[0],n=t[1],r=180*Math.atan2(n,e)/Math.PI;return r<b?r+360:r},A=0,S=dr(m,-p,0).map(_);A<S.length;A++)(C=S[A])>b&&C<w&&h(xr(i.cX,p,m,C));for(var T=0,k=dr(x,-y,0).map(_);T<k.length;T++){var C;(C=k[T])>b&&C<w&&u(xr(i.cY,y,x,C))}}return e}));return o.minX=1/0,o.maxX=-1/0,o.minY=1/0,o.maxY=-1/0,o}}(pr||(pr={}));var wr,_r=function(){function t(){}return t.prototype.round=function(t){return this.transform(pr.ROUND(t))},t.prototype.toAbs=function(){return this.transform(pr.TO_ABS())},t.prototype.toRel=function(){return this.transform(pr.TO_REL())},t.prototype.normalizeHVZ=function(t,e,n){return this.transform(pr.NORMALIZE_HVZ(t,e,n))},t.prototype.normalizeST=function(){return this.transform(pr.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(pr.QT_TO_C())},t.prototype.aToC=function(){return this.transform(pr.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(pr.SANITIZE(t))},t.prototype.translate=function(t,e){return this.transform(pr.TRANSLATE(t,e))},t.prototype.scale=function(t,e){return this.transform(pr.SCALE(t,e))},t.prototype.rotate=function(t,e,n){return this.transform(pr.ROTATE(t,e,n))},t.prototype.matrix=function(t,e,n,r,i,s){return this.transform(pr.MATRIX(t,e,n,r,i,s))},t.prototype.skewX=function(t){return this.transform(pr.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(pr.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(pr.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(pr.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(pr.ANNOTATE_ARCS())},t}(),Ar=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},Sr=function(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)},Tr=function(t){function e(){var e=t.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return ur(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(" ",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,e){var n=this;void 0===e&&(e=[]);for(var r=function(t){e.push(t),n.curArgs.length=0,n.canParseCommandOrComma=!0},i=0;i<t.length;i++){var s=t[i],a=!(this.curCommandType!==kr.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),o=Sr(s)&&("0"===this.curNumber&&"0"===s||a);if(!Sr(s)||o)if("e"!==s&&"E"!==s)if("-"!==s&&"+"!==s||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==s||this.curNumberHasExp||this.curNumberHasDecimal||a){if(this.curNumber&&-1!==this.curCommandType){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===kr.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+i+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"');this.curArgs.push(h),this.curArgs.length===Cr[this.curCommandType]&&(kr.HORIZ_LINE_TO===this.curCommandType?r({type:kr.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):kr.VERT_LINE_TO===this.curCommandType?r({type:kr.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===kr.MOVE_TO||this.curCommandType===kr.LINE_TO||this.curCommandType===kr.SMOOTH_QUAD_TO?(r({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),kr.MOVE_TO===this.curCommandType&&(this.curCommandType=kr.LINE_TO)):this.curCommandType===kr.CURVE_TO?r({type:kr.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===kr.SMOOTH_CURVE_TO?r({type:kr.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===kr.QUAD_TO?r({type:kr.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===kr.ARC&&r({type:kr.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!Ar(s))if(","===s&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==s&&"-"!==s&&"."!==s)if(o)this.curNumber=s,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+s+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==s&&"Z"!==s)if("h"===s||"H"===s)this.curCommandType=kr.HORIZ_LINE_TO,this.curCommandRelative="h"===s;else if("v"===s||"V"===s)this.curCommandType=kr.VERT_LINE_TO,this.curCommandRelative="v"===s;else if("m"===s||"M"===s)this.curCommandType=kr.MOVE_TO,this.curCommandRelative="m"===s;else if("l"===s||"L"===s)this.curCommandType=kr.LINE_TO,this.curCommandRelative="l"===s;else if("c"===s||"C"===s)this.curCommandType=kr.CURVE_TO,this.curCommandRelative="c"===s;else if("s"===s||"S"===s)this.curCommandType=kr.SMOOTH_CURVE_TO,this.curCommandRelative="s"===s;else if("q"===s||"Q"===s)this.curCommandType=kr.QUAD_TO,this.curCommandRelative="q"===s;else if("t"===s||"T"===s)this.curCommandType=kr.SMOOTH_QUAD_TO,this.curCommandRelative="t"===s;else{if("a"!==s&&"A"!==s)throw new SyntaxError('Unexpected character "'+s+'" at index '+i+".");this.curCommandType=kr.ARC,this.curCommandRelative="a"===s}else e.push({type:kr.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=s,this.curNumberHasDecimal="."===s}else this.curNumber+=s,this.curNumberHasDecimal=!0;else this.curNumber+=s;else this.curNumber+=s,this.curNumberHasExp=!0;else this.curNumber+=s,this.curNumberHasExpDigits=this.curNumberHasExp}return e},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(e,n){void 0===n&&(n=[]);for(var r=0,i=Object.getPrototypeOf(this).parse.call(this,e);r<i.length;r++){var s=i[r],a=t(s);Array.isArray(a)?n.push.apply(n,a):n.push(a)}return n}}})},e}(_r),kr=function(t){function e(n){var r=t.call(this)||this;return r.commands="string"==typeof n?e.parse(n):n,r}return ur(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=pr.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var e=[],n=0,r=this.commands;n<r.length;n++){var i=t(r[n]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return this.commands=e,this},e.encode=function(t){return function(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.type===kr.CLOSE_PATH)e+="z";else if(r.type===kr.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===kr.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===kr.MOVE_TO)e+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===kr.LINE_TO)e+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===kr.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===kr.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===kr.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===kr.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==kr.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");e+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return e}(t)},e.parse=function(t){var e=new Tr,n=[];return e.parse(t,n),e.finish(n),n},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(_r),Cr=((wr={})[kr.MOVE_TO]=2,wr[kr.LINE_TO]=2,wr[kr.HORIZ_LINE_TO]=1,wr[kr.VERT_LINE_TO]=1,wr[kr.CLOSE_PATH]=0,wr[kr.QUAD_TO]=4,wr[kr.SMOOTH_QUAD_TO]=2,wr[kr.CURVE_TO]=6,wr[kr.SMOOTH_CURVE_TO]=4,wr[kr.ARC]=7,wr);function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}
/**
* StackBlur - a fast almost Gaussian Blur For Canvas
*
* In case you find this class useful - especially in commercial projects -
* I am not totally unhappy for a small donation to my PayPal account
* mario@quasimondo.de
*
* Or support me on flattr:
* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
*
* @module StackBlur
* @author Mario Klingemann
* Contact: mario@quasimondo.com
* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
* Twitter: @quasimondo
*
* @copyright (c) 2010 Mario Klingemann
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/
var Er=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Pr=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Mr(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==Nr(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=t.getContext("2d");try{return s.getImageData(e,n,r,i)}catch(t){throw new Error("unable to access image data: "+t)}}function Or(t,e,n,r,i,s){if(!(isNaN(s)||s<1)){s|=0;var a=Mr(t,e,n,r,i);a=function(t,e,n,r,i,s){for(var a,o=t.data,h=2*s+1,u=r-1,l=i-1,c=s+1,f=c*(c+1)/2,g=new Vr,d=g,p=1;p<h;p++)d=d.next=new Vr,p===c&&(a=d);d.next=g;for(var y=null,m=null,x=0,v=0,b=Er[s],w=Pr[s],_=0;_<i;_++){d=g;for(var A=o[v],S=o[v+1],T=o[v+2],k=o[v+3],C=0;C<c;C++)d.r=A,d.g=S,d.b=T,d.a=k,d=d.next;for(var N=0,E=0,P=0,M=0,O=c*A,V=c*S,R=c*T,I=c*k,L=f*A,D=f*S,B=f*T,H=f*k,z=1;z<c;z++){var X=v+((u<z?u:z)<<2),U=o[X],F=o[X+1],Y=o[X+2],$=o[X+3],q=c-z;L+=(d.r=U)*q,D+=(d.g=F)*q,B+=(d.b=Y)*q,H+=(d.a=$)*q,N+=U,E+=F,P+=Y,M+=$,d=d.next}y=g,m=a;for(var W=0;W<r;W++){var Q=H*b>>w;if(o[v+3]=Q,0!==Q){var j=255/Q;o[v]=(L*b>>w)*j,o[v+1]=(D*b>>w)*j,o[v+2]=(B*b>>w)*j}else o[v]=o[v+1]=o[v+2]=0;L-=O,D-=V,B-=R,H-=I,O-=y.r,V-=y.g,R-=y.b,I-=y.a;var G=W+s+1;G=x+(G<u?G:u)<<2,L+=N+=y.r=o[G],D+=E+=y.g=o[G+1],B+=P+=y.b=o[G+2],H+=M+=y.a=o[G+3],y=y.next;var Z=m,J=Z.r,K=Z.g,tt=Z.b,et=Z.a;O+=J,V+=K,R+=tt,I+=et,N-=J,E-=K,P-=tt,M-=et,m=m.next,v+=4}x+=r}for(var nt=0;nt<r;nt++){var rt=o[v=nt<<2],it=o[v+1],st=o[v+2],at=o[v+3],ot=c*rt,ht=c*it,ut=c*st,lt=c*at,ct=f*rt,ft=f*it,gt=f*st,dt=f*at;d=g;for(var pt=0;pt<c;pt++)d.r=rt,d.g=it,d.b=st,d.a=at,d=d.next;for(var yt=r,mt=0,xt=0,vt=0,bt=0,wt=1;wt<=s;wt++){v=yt+nt<<2;var _t=c-wt;ct+=(d.r=rt=o[v])*_t,ft+=(d.g=it=o[v+1])*_t,gt+=(d.b=st=o[v+2])*_t,dt+=(d.a=at=o[v+3])*_t,bt+=rt,mt+=it,xt+=st,vt+=at,d=d.next,wt<l&&(yt+=r)}v=nt,y=g,m=a;for(var At=0;At<i;At++){var St=v<<2;o[St+3]=at=dt*b>>w,at>0?(at=255/at,o[St]=(ct*b>>w)*at,o[St+1]=(ft*b>>w)*at,o[St+2]=(gt*b>>w)*at):o[St]=o[St+1]=o[St+2]=0,ct-=ot,ft-=ht,gt-=ut,dt-=lt,ot-=y.r,ht-=y.g,ut-=y.b,lt-=y.a,St=nt+((St=At+c)<l?St:l)*r<<2,ct+=bt+=y.r=o[St],ft+=mt+=y.g=o[St+1],gt+=xt+=y.b=o[St+2],dt+=vt+=y.a=o[St+3],y=y.next,ot+=rt=m.r,ht+=it=m.g,ut+=st=m.b,lt+=at=m.a,bt-=rt,mt-=it,xt-=st,vt-=at,m=m.next,v+=r}}return t}(a,0,0,r,i,s),t.getContext("2d").putImageData(a,e,n)}}var Vr=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Rr(t){return t.replace(/(?!\u3000)\s+/gm," ")}function Ir(t){const e=t.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return e?e.map(parseFloat):[]}const Lr=/^[A-Z-]+$/;function Dr(t){const e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t);return e&&(e[2]||e[3]||e[4])||""}const Br=/(\[[^\]]+\])/g,Hr=/(#[^\s+>~.[:]+)/g,zr=/(\.[^\s+>~.[:]+)/g,Xr=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Ur=/(:[\w-]+\([^)]*\))/gi,Fr=/(:[^\s+>~.[:]+)/g,Yr=/([^\s+>~.[:]+)/g;function $r(t,e){const n=e.exec(t);return n?[t.replace(e," "),n.length]:[t,0]}const qr=1e-8;function Wr(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function Qr(t,e){return(t[0]*e[0]+t[1]*e[1])/(Wr(t)*Wr(e))}function jr(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Qr(t,e))}function Gr(t){return t*t*t}function Zr(t){return 3*t*t*(1-t)}function Jr(t){return 3*t*(1-t)*(1-t)}function Kr(t){return(1-t)*(1-t)*(1-t)}function ti(t){return t*t}function ei(t){return 2*t*(1-t)}function ni(t){return(1-t)*(1-t)}class ri{static empty(t){return new ri(t,"EMPTY","")}split(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";const{document:e,name:n}=this;return Rr(this.getString()).trim().split(t).map((t=>new ri(e,n,t)))}hasValue(t){const e=this.value;return null!==e&&""!==e&&(t||0!==e)&&void 0!==e}isString(t){const{value:e}=this,n="string"==typeof e;return n&&t?t.test(e):n}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return void 0===t||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);const{value:e}=this;let n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}getString(t){return void 0===t||this.hasValue()?void 0===this.value?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=function(t){if(!t.startsWith("rgb"))return t;let e=3;return t.replace(/\d+(\.\d+)?/g,((t,n)=>e--&&n?String(Math.round(parseFloat(t))):t))}(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;const[n,r]="boolean"==typeof t?[void 0,t]:[t],{viewPort:i}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&r:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(n);default:{const t=this.getNumber();return e&&t<1?t*i.computeSize(n):t}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const t=this.getString(),e=/#([^)'"]+)/.exec(t),n=(null==e?void 0:e[1])||t;return this.document.definitions[n]}getFillStyleDefinition(t,e){let n=this.getDefinition();if(!n)return null;if("function"==typeof n.createGradient&&"getBoundingBox"in t)return n.createGradient(this.document.ctx,t,e);if("function"==typeof n.createPattern){if(n.getHrefAttribute().hasValue()){const t=n.getAttribute("patternTransform");n=n.getHrefAttribute().getDefinition(),n&&t.hasValue()&&n.getAttribute("patternTransform",!0).setValue(t.value)}if(n)return n.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;const t=this.getString();return ri.textBaselineMapping[t]||null}addOpacity(t){let n=this.getColor();const r=n.length;let i=0;for(let t=0;t<r&&(","===n[t]&&i++,3!==i);t++);if(t.hasValue()&&this.isString()&&3!==i){const r=new(e(or))(n);r.ok&&(r.alpha=t.getNumber(),n=r.toRGBA())}return new ri(this.document,this.name,n)}constructor(t,e,n){this.document=t,this.name=e,this.value=n,this.isNormalizedColor=!1}}ri.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ii{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[t]=this.viewPorts;return t||si()}getCurrent(){const{viewPorts:t}=this,e=t[t.length-1];return e||si()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}function si(){return{width:ii.DEFAULT_VIEWPORT_WIDTH,height:ii.DEFAULT_VIEWPORT_HEIGHT}}ii.DEFAULT_VIEWPORT_WIDTH=800,ii.DEFAULT_VIEWPORT_HEIGHT=600;class ai{static parse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n=e,r=e]=Ir(t);return new ai(n,r)}static parseScale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const[n=e,r=n]=Ir(t);return new ai(n,r)}static parsePath(t){const e=Ir(t),n=e.length,r=[];for(let t=0;t<n;t+=2)r.push(new ai(e[t],e[t+1]));return r}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){const{x:e,y:n}=this,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}constructor(t,e){this.x=t,this.y=e}}class oi{isWorking(){return this.working}start(){if(this.working)return;const{screen:t,onClick:e,onMouseMove:n}=this,r=t.ctx.canvas;r.onclick=e,r.onmousemove=n,this.working=!0}stop(){if(!this.working)return;const t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:t,events:e,eventElements:n}=this,{style:r}=t.ctx.canvas;let i;r&&(r.cursor=""),e.forEach(((t,e)=>{let{run:r}=t;for(i=n[e];i;)r(i),i=i.parent})),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;const{events:n,eventElements:r}=this;n.forEach(((n,i)=>{let{x:s,y:a}=n;!r[i]&&e.isPointInPath&&e.isPointInPath(s,a)&&(r[i]=t)}))}checkBoundingBox(t,e){if(!this.working||!e)return;const{events:n,eventElements:r}=this;n.forEach(((n,i)=>{let{x:s,y:a}=n;!r[i]&&e.isPointInBox(s,a)&&(r[i]=t)}))}mapXY(t,e){const{window:n,ctx:r}=this.screen,i=new ai(t,e);let s=r.canvas;for(;s;)i.x-=s.offsetLeft,i.y-=s.offsetTop,s=s.offsetParent;return(null==n?void 0:n.scrollX)&&(i.x+=n.scrollX),(null==n?void 0:n.scrollY)&&(i.y+=n.scrollY),i}onClick(t){const{x:e,y:n}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:n,run(t){t.onClick&&t.onClick()}})}onMouseMove(t){const{x:e,y:n}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:n,run(t){t.onMouseMove&&t.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const hi="undefined"!=typeof window?window:null,ui="undefined"!=typeof fetch?fetch.bind(void 0):void 0;class li{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const t=this.waits.every((t=>t()));return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:n,aspectRatio:r,width:i,desiredWidth:s,height:a,desiredHeight:o,minX:h=0,minY:u=0,refX:l,refY:c,clip:f=!1,clipX:g=0,clipY:d=0}=t;const p=Rr(r).replace(/^defer\s/,""),[y,m]=p.split(" "),x=y||"xMidYMid",v=m||"meet",b=i/s,w=a/o,_=Math.min(b,w),A=Math.max(b,w);let S=s,T=o;"meet"===v&&(S*=_,T*=_),"slice"===v&&(S*=A,T*=A);const k=new ri(e,"refX",l),C=new ri(e,"refY",c),N=k.hasValue()&&C.hasValue();if(N&&n.translate(-_*k.getPixels("x"),-_*C.getPixels("y")),f){const t=_*g,e=_*d;n.beginPath(),n.moveTo(t,e),n.lineTo(i,e),n.lineTo(i,a),n.lineTo(t,a),n.closePath(),n.clip()}if(!N){const t="meet"===v&&_===w,e="slice"===v&&A===w,r="meet"===v&&_===b,s="slice"===v&&A===b;x.startsWith("xMid")&&(t||e)&&n.translate(i/2-S/2,0),x.endsWith("YMid")&&(r||s)&&n.translate(0,a/2-T/2),x.startsWith("xMax")&&(t||e)&&n.translate(i-S,0),x.endsWith("YMax")&&(r||s)&&n.translate(0,a-T)}switch(!0){case"none"===x:n.scale(b,w);break;case"meet"===v:n.scale(_,_);break;case"slice"===v:n.scale(A,A)}n.translate(-h,-u)}start(t){let{enableRedraw:n=!1,ignoreMouse:r=!1,ignoreAnimation:i=!1,ignoreDimensions:s=!1,ignoreClear:a=!1,forceRedraw:o,scaleWidth:h,scaleHeight:u,offsetX:l,offsetY:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{mouse:f}=this,g=1e3/li.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=g,this.readyPromise=new Promise((t=>{this.resolveReady=t})),this.isReady()&&this.render(t,s,a,h,u,l,c),!n)return;let d=Date.now(),p=d,y=0;const m=()=>{d=Date.now(),y=d-p,y>=g&&(p=d-y%g,this.shouldUpdate(i,o)&&(this.render(t,s,a,h,u,l,c),f.runEvents())),this.intervalId=e(In)(m)};r||f.start(),this.intervalId=e(In)(m)}stop(){this.intervalId&&(e(In).cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){const{frameDuration:t}=this;if(this.animations.reduce(((e,n)=>n.update(t)||e),!1))return!0}return!("function"!=typeof e||!e())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}render(t,e,n,r,i,s,a){const{viewPort:o,ctx:h,isFirstRender:u}=this,l=h.canvas;o.clear(),l.width&&l.height&&o.setCurrent(l.width,l.height);const c=t.getStyle("width"),f=t.getStyle("height");!e&&(u||"number"!=typeof r&&"number"!=typeof i)&&(c.hasValue()&&(l.width=c.getPixels("x"),l.style&&(l.style.width="".concat(l.width,"px"))),f.hasValue()&&(l.height=f.getPixels("y"),l.style&&(l.style.height="".concat(l.height,"px"))));let g=l.clientWidth||l.width,d=l.clientHeight||l.height;if(e&&c.hasValue()&&f.hasValue()&&(g=c.getPixels("x"),d=f.getPixels("y")),o.setCurrent(g,d),"number"==typeof s&&t.getAttribute("x",!0).setValue(s),"number"==typeof a&&t.getAttribute("y",!0).setValue(a),"number"==typeof r||"number"==typeof i){const e=Ir(t.getAttribute("viewBox").getString());let n=0,s=0;if("number"==typeof r){const i=t.getStyle("width");i.hasValue()?n=i.getPixels("x")/r:e[2]&&!isNaN(e[2])&&(n=e[2]/r)}if("number"==typeof i){const n=t.getStyle("height");n.hasValue()?s=n.getPixels("y")/i:e[3]&&!isNaN(e[3])&&(s=e[3]/i)}n||(n=s),s||(s=n),t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i);const a=t.getStyle("transform",!0,!0);a.setValue("".concat(a.getString()," scale(").concat(1/n,", ").concat(1/s,")"))}n||h.clearRect(0,0,g,d),t.render(h),u&&(this.isFirstRender=!1)}constructor(t,{fetch:e=ui,window:n=hi}={}){if(this.ctx=t,this.viewPort=new ii,this.mouse=new oi(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=n,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}}li.defaultWindow=hi,li.defaultFetch=ui,li.FRAMERATE=30,li.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch:ci}=li,fi="undefined"!=typeof DOMParser?DOMParser:void 0;class gi{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){const e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(n){return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){const e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){const e=await this.fetch(t),n=await e.text();return this.parseFromString(n)}constructor({fetch:t=ci,DOMParser:e=fi}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}}class di{apply(t){const{originX:e,originY:n,matrix:r}=this,i=e.getPixels("x"),s=n.getPixels("y");t.translate(i,s),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.translate(-i,-s)}unapply(t){const{originX:e,originY:n,matrix:r}=this,i=r[0],s=r[2],a=r[4],o=r[1],h=r[3],u=r[5],l=1/(i*(1*h-0*u)-s*(1*o-0*u)+a*(0*o-0*h)),c=e.getPixels("x"),f=n.getPixels("y");t.translate(c,f),t.transform(l*(1*h-0*u),l*(0*u-1*o),l*(0*a-1*s),l*(1*i-0*a),l*(s*u-a*h),l*(a*o-i*u)),t.translate(-c,-f)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,n){this.type="matrix",this.matrix=function(t){const e=Ir(t);return[e[0]||0,e[1]||0,e[2]||0,e[3]||0,e[4]||0,e[5]||0]}(e),this.originX=n[0],this.originY=n[1]}}class pi extends di{constructor(t,e,n){super(t,e,n),this.type="skew",this.angle=new ri(t,"angle",e)}}class yi{static fromElement(t,e){const n=e.getStyle("transform",!1,!0);if(n.hasValue()){const[r,i=r]=e.getStyle("transform-origin",!1,!0).split();if(r&&i){const e=[r,i];return new yi(t,n.getString(),e)}}return null}apply(t){this.transforms.forEach((e=>e.apply(t)))}unapply(t){this.transforms.forEach((e=>e.unapply(t)))}applyToPoint(t){this.transforms.forEach((e=>e.applyToPoint(t)))}constructor(t,e,n){this.document=t,this.transforms=[];Rr(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/).forEach((t=>{if("none"===t)return;const[e,r]=function(t){const[e="",n=""]=t.split("(");return[e.trim(),n.trim().replace(")","")]}(t),i=yi.transformTypes[e];i&&this.transforms.push(new i(this.document,r,n))}))}}yi.transformTypes={translate:class{apply(t){const{x:e,y:n}=this.point;t.translate(e||0,n||0)}unapply(t){const{x:e,y:n}=this.point;t.translate(-1*e||0,-1*n||0)}applyToPoint(t){const{x:e,y:n}=this.point;t.applyTransform([1,0,0,1,e||0,n||0])}constructor(t,e){this.type="translate",this.point=ai.parse(e)}},rotate:class{apply(t){const{cx:e,cy:n,originX:r,originY:i,angle:s}=this,a=e+r.getPixels("x"),o=n+i.getPixels("y");t.translate(a,o),t.rotate(s.getRadians()),t.translate(-a,-o)}unapply(t){const{cx:e,cy:n,originX:r,originY:i,angle:s}=this,a=e+r.getPixels("x"),o=n+i.getPixels("y");t.translate(a,o),t.rotate(-1*s.getRadians()),t.translate(-a,-o)}applyToPoint(t){const{cx:e,cy:n,angle:r}=this,i=r.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}constructor(t,e,n){this.type="rotate";const r=Ir(e);this.angle=new ri(t,"angle",r[0]),this.originX=n[0],this.originY=n[1],this.cx=r[1]||0,this.cy=r[2]||0}},scale:class{apply(t){const{scale:{x:e,y:n},originX:r,originY:i}=this,s=r.getPixels("x"),a=i.getPixels("y");t.translate(s,a),t.scale(e,n||e),t.translate(-s,-a)}unapply(t){const{scale:{x:e,y:n},originX:r,originY:i}=this,s=r.getPixels("x"),a=i.getPixels("y");t.translate(s,a),t.scale(1/e,1/n||e),t.translate(-s,-a)}applyToPoint(t){const{x:e,y:n}=this.scale;t.applyTransform([e||0,0,0,n||0,0,0])}constructor(t,e,n){this.type="scale";const r=ai.parseScale(e);0!==r.x&&0!==r.y||(r.x=qr,r.y=qr),this.scale=r,this.originX=n[0],this.originY=n[1]}},matrix:di,skewX:class extends pi{constructor(t,e,n){super(t,e,n),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},skewY:class extends pi{constructor(t,e,n){super(t,e,n),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}};class mi{getAttribute(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.attributes[t];if(!n&&e){const e=new ri(this.document,t,"");return this.attributes[t]=e,e}return n||ri.empty(this.document)}getHrefAttribute(){let t;for(const e in this.attributes)if("href"===e||e.endsWith(":href")){t=this.attributes[e];break}return t||ri.empty(this.document)}getStyle(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.styles[t];if(r)return r;const i=this.getAttribute(t);if(i.hasValue())return this.styles[t]=i,i;if(!n){const{parent:e}=this;if(e){const n=e.getStyle(t);if(n.hasValue())return n}}if(e){const e=new ri(this.document,t,"");return this.styles[t]=e,e}return ri.empty(this.document)}render(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){const e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){const e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){const e=yi.fromElement(this.document,this);e&&e.apply(t);const n=this.getStyle("clip-path",!1,!0);if(n.hasValue()){const e=n.getDefinition();e&&e.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach((e=>{e.render(t)}))}addChild(t){const e=t instanceof mi?t:this.document.createElement(t);e.parent=this,mi.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;const{node:n}=this;if("function"==typeof n.matches)return n.matches(t);const r=null===(e=n.getAttribute)||void 0===e?void 0:e.call(n,"class");return!(!r||""===r)&&r.split(" ").some((e=>".".concat(e)===t))}addStylesFromStyleDefinition(){const{styles:t,stylesSpecificity:e}=this.document;let n;for(const r in t)if(!r.startsWith("@")&&this.matchesSelector(r)){const i=t[r],s=e[r];if(i)for(const t in i){let e=this.stylesSpecificity[t];void 0===e&&(e="000"),s&&s>=e&&(n=i[t],n&&(this.styles[t]=n),this.stylesSpecificity[t]=s)}}}removeStyles(t,e){return e.reduce(((e,n)=>{const r=t.getStyle(n);if(!r.hasValue())return e;const i=r.getString();return r.setValue(""),[...e,[n,i]]}),[])}restoreStyles(t,e){e.forEach((e=>{let[n,r]=e;t.getStyle(n,!0).setValue(r)}))}isFirstChild(){var t;return 0===(null===(t=this.parent)||void 0===t?void 0:t.children.indexOf(this))}constructor(t,e,n=!1){if(this.document=t,this.node=e,this.captureTextNodes=n,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||1!==e.nodeType)return;if(Array.from(e.attributes).forEach((e=>{const n=(r=e.nodeName,Lr.test(r)?r.toLowerCase():r);var r;this.attributes[n]=new ri(t,n,e.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){this.getAttribute("style").getString().split(";").map((t=>t.trim())).forEach((e=>{if(!e)return;const[n,r]=e.split(":").map((t=>t.trim()));n&&(this.styles[n]=new ri(t,n,r))}))}const{definitions:r}=t,i=this.getAttribute("id");i.hasValue()&&(r[i.getString()]||(r[i.getString()]=this)),Array.from(e.childNodes).forEach((e=>{if(1===e.nodeType)this.addChild(e);else if(n&&(3===e.nodeType||4===e.nodeType)){const n=t.createTextNode(e);n.getText().length>0&&this.addChild(n)}}))}}mi.ignoreChildTypes=["title"];class xi extends mi{constructor(t,e,n){super(t,e,n)}}function vi(t){const e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function bi(t){if(!t)return"";const e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function wi(t){if(!t)return"";const e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class _i{static parse(){let t=arguments.length>1?arguments[1]:void 0,e="",n="",r="",i="",s="";const a=Rr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),o={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return a.forEach((t=>{switch(!0){case!o.fontStyle&&_i.styles.includes(t):"inherit"!==t&&(e=t),o.fontStyle=!0;break;case!o.fontVariant&&_i.variants.includes(t):"inherit"!==t&&(n=t),o.fontStyle=!0,o.fontVariant=!0;break;case!o.fontWeight&&_i.weights.includes(t):"inherit"!==t&&(r=t),o.fontStyle=!0,o.fontVariant=!0,o.fontWeight=!0;break;case!o.fontSize:"inherit"!==t&&(i=t.split("/")[0]||""),o.fontStyle=!0,o.fontVariant=!0,o.fontWeight=!0,o.fontSize=!0;break;default:"inherit"!==t&&(s+=t)}})),new _i(e,n,r,i,s,t)}toString(){return[bi(this.fontStyle),this.fontVariant,wi(this.fontWeight),this.fontSize,(t=this.fontFamily,void 0===Hn?t:t.trim().split(",").map(vi).join(","))].join(" ").trim();var t}constructor(t,e,n,r,i,s){const a=s?"string"==typeof s?_i.parse(s):s:{};this.fontFamily=i||a.fontFamily,this.fontSize=r||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=n||a.fontWeight,this.fontVariant=e||a.fontVariant}}_i.styles="normal|italic|oblique|inherit",_i.variants="normal|small-caps|inherit",_i.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Ai{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;const{x1:e,y1:n,x2:r,y2:i}=t;this.addPoint(e,n),this.addPoint(r,i)}sumCubic(t,e,n,r,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i}bezierCurveAdd(t,e,n,r,i){const s=6*e-12*n+6*r,a=-3*e+9*n-9*r+3*i,o=3*n-3*e;if(0===a){if(0===s)return;const a=-o/s;return void(0<a&&a<1&&(t?this.addX(this.sumCubic(a,e,n,r,i)):this.addY(this.sumCubic(a,e,n,r,i))))}const h=Math.pow(s,2)-4*o*a;if(h<0)return;const u=(-s+Math.sqrt(h))/(2*a);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i)));const l=(-s-Math.sqrt(h))/(2*a);0<l&&l<1&&(t?this.addX(this.sumCubic(l,e,n,r,i)):this.addY(this.sumCubic(l,e,n,r,i)))}addBezierCurve(t,e,n,r,i,s,a,o){this.addPoint(t,e),this.addPoint(a,o),this.bezierCurveAdd(!0,t,n,i,a),this.bezierCurveAdd(!1,e,r,s,o)}addQuadraticCurve(t,e,n,r,i,s){const a=t+2/3*(n-t),o=e+2/3*(r-e),h=a+1/3*(i-t),u=o+1/3*(s-e);this.addBezierCurve(t,e,a,h,o,u,i,s)}isPointInBox(t,e){const{x1:n,y1:r,x2:i,y2:s}=this;return n<=t&&t<=i&&r<=e&&e<=s}constructor(t=Number.NaN,e=Number.NaN,n=Number.NaN,r=Number.NaN){this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.addPoint(t,e),this.addPoint(n,r)}}class Si extends mi{calculateOpacity(){let t=1,e=this;for(;e;){const n=e.getStyle("opacity",!1,!0);n.hasValue(!0)&&(t*=n.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){const e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),i=this.getStyle("stroke-opacity");if(e.isUrlDefinition()){const r=e.getFillStyleDefinition(this,n);r&&(t.fillStyle=r)}else if(e.hasValue()){"currentColor"===e.getString()&&e.setValue(this.getStyle("color").getColor());const n=e.getColor();"inherit"!==n&&(t.fillStyle="none"===n?"rgba(0,0,0,0)":n)}if(n.hasValue()){const e=new ri(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=e}if(r.isUrlDefinition()){const e=r.getFillStyleDefinition(this,i);e&&(t.strokeStyle=e)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());const e=r.getString();"inherit"!==e&&(t.strokeStyle="none"===e?"rgba(0,0,0,0)":e)}if(i.hasValue()){const e=new ri(this.document,"stroke",t.strokeStyle).addOpacity(i).getString();t.strokeStyle=e}const s=this.getStyle("stroke-width");if(s.hasValue()){const e=s.getPixels();t.lineWidth=e||qr}const a=this.getStyle("stroke-linecap"),o=this.getStyle("stroke-linejoin"),h=this.getStyle("stroke-miterlimit"),u=this.getStyle("stroke-dasharray"),l=this.getStyle("stroke-dashoffset");if(a.hasValue()&&(t.lineCap=a.getString()),o.hasValue()&&(t.lineJoin=o.getString()),h.hasValue()&&(t.miterLimit=h.getNumber()),u.hasValue()&&"none"!==u.getString()){const e=Ir(u.getString());void 0!==t.setLineDash?t.setLineDash(e):void 0!==t.webkitLineDash?t.webkitLineDash=e:void 0===t.mozDash||1===e.length&&0===e[0]||(t.mozDash=e);const n=l.getPixels();void 0!==t.lineDashOffset?t.lineDashOffset=n:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=n:void 0!==t.mozDashOffset&&(t.mozDashOffset=n)}}if(this.modifiedEmSizeStack=!1,void 0!==t.font){const e=this.getStyle("font"),n=this.getStyle("font-style"),r=this.getStyle("font-variant"),i=this.getStyle("font-weight"),s=this.getStyle("font-size"),a=this.getStyle("font-family"),o=new _i(n.getString(),r.getString(),i.getString(),s.hasValue()?"".concat(s.getPixels(!0),"px"):"",a.getString(),_i.parse(e.getString(),t.font));n.setValue(o.fontStyle),r.setValue(o.fontVariant),i.setValue(o.fontWeight),s.setValue(o.fontSize),a.setValue(o.fontFamily),t.font=o.toString(),s.isPixels()&&(this.document.emSize=s.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}}class Ti extends Si{setContext(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(t,e);const n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach(((n,r)=>{const i=this.getChildBoundingBox(t,this,this,r);e?e.addBoundingBox(i):e=i})),e}getFontSize(){const{document:t,parent:e}=this,n=_i.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(n)}getTElementBoundingBox(t){const e=this.getFontSize();return new Ai(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,n){const r=e[n];let i;if(t.isArabic){var s;const a=e.length,o=e[n-1],h=e[n+1];let u="isolated";(0===n||" "===o)&&n<a-1&&" "!==h&&(u="terminal"),n>0&&" "!==o&&n<a-1&&" "!==h&&(u="medial"),n>0&&" "!==o&&(n===a-1||" "===h)&&(u="initial"),i=(null===(s=t.arabicGlyphs[r])||void 0===s?void 0:s[u])||t.glyphs[r]}else i=t.glyphs[r];return i||(i=t.missingGlyph),i}getText(){return""}getTextFromNode(t){const e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1;let s=Rr(e.textContent||"");return 0===r&&(s=s.replace(/^[\n \t]+/,"")),r===i&&(s=function(t){return t.replace(/[\n \t]+$/,"")}(s)),s}renderChildren(t){if("text"!==this.type)return void this.renderTElementChildren(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach(((e,n)=>{this.renderChild(t,this,this,n)}));const{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){const{document:e,parent:n}=this,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i){const{unitsPerEm:s}=i.fontFace,a=_i.parse(e.ctx.font),o=n.getStyle("font-size").getNumber(a.fontSize),h=n.getStyle("font-style").getString(a.fontStyle),u=o/s,l=i.isRTL?r.split("").reverse().join(""):r,c=Ir(n.getAttribute("dx").getString()),f=l.length;for(let e=0;e<f;e++){const n=this.getGlyph(i,l,e);t.translate(this.x,this.y),t.scale(u,-u);const r=t.lineWidth;t.lineWidth=t.lineWidth*s/o,"italic"===h&&t.transform(1,0,.4,1,0,0),n.render(t),"italic"===h&&t.transform(1,0,-.4,1,0,0),t.lineWidth=r,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=o*(n.horizAdvX||i.horizAdvX)/s,void 0===c[e]||isNaN(c[e])||(this.x+=c[e])}return}const{x:s,y:a}=this;t.fillStyle&&t.fillText(r,s,a),t.strokeStyle&&t.strokeText(r,s,a)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start");let n=0;n="start"===e?t.x-this.minX:"end"===e?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(let t=this.textChunkStart;t<this.leafTexts.length;t++)this.leafTexts[t].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach(((e,n)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,n)})),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,n,r){const i=n.children[r];i.children.length>0?i.children.forEach(((n,r)=>{e.adjustChildCoordinatesRecursiveCore(t,e,i,r)})):this.adjustChildCoordinates(t,e,n,r)}adjustChildCoordinates(t,e,n,r){const i=n.children[r];if("function"!=typeof i.measureText)return i;t.save(),i.setContext(t,!0);const s=i.getAttribute("x"),a=i.getAttribute("y"),o=i.getAttribute("dx"),h=i.getAttribute("dy"),u=i.getStyle("font-family").getDefinition(),l=Boolean(null==u?void 0:u.isRTL);0===r&&(s.hasValue()||s.setValue(i.getInheritedAttribute("x")),a.hasValue()||a.setValue(i.getInheritedAttribute("y")),o.hasValue()||o.setValue(i.getInheritedAttribute("dx")),h.hasValue()||h.setValue(i.getInheritedAttribute("dy")));const c=i.measureText(t);return l&&(e.x-=c),s.hasValue()?(e.applyAnchoring(),i.x=s.getPixels("x"),o.hasValue()&&(i.x+=o.getPixels("x"))):(o.hasValue()&&(e.x+=o.getPixels("x")),i.x=e.x),e.x=i.x,l||(e.x+=c),a.hasValue()?(i.y=a.getPixels("y"),h.hasValue()&&(i.y+=h.getPixels("y"))):(h.hasValue()&&(e.y+=h.getPixels("y")),i.y=e.y),e.y=i.y,e.leafTexts.push(i),e.minX=Math.min(e.minX,i.x,i.x+c),e.maxX=Math.max(e.maxX,i.x,i.x+c),i.clearContext(t),t.restore(),i}getChildBoundingBox(t,e,n,r){const i=n.children[r];if("function"!=typeof i.getBoundingBox)return null;const s=i.getBoundingBox(t);return s&&i.children.forEach(((n,r)=>{const a=e.getChildBoundingBox(t,e,i,r);s.addBoundingBox(a)})),s}renderChild(t,e,n,r){const i=n.children[r];i.render(t),i.children.forEach(((n,r)=>{e.renderChild(t,e,i,r)}))}measureText(t){const{measureCache:e}=this;if(~e)return e;const n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r,r}measureTargetText(t,e){if(!e.length)return 0;const{parent:n}=this,r=n.getStyle("font-family").getDefinition();if(r){const t=this.getFontSize(),i=r.isRTL?e.split("").reverse().join(""):e,s=Ir(n.getAttribute("dx").getString()),a=i.length;let o=0;for(let e=0;e<a;e++){o+=(this.getGlyph(r,i,e).horizAdvX||r.horizAdvX)*t/r.fontFace.unitsPerEm,void 0===s[e]||isNaN(s[e])||(o+=s[e])}return o}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);const{width:i}=t.measureText(e);return this.clearContext(t),t.restore(),i}getInheritedAttribute(t){let e=this;for(;e instanceof Ti&&e.isFirstChild()&&e.parent;){const n=e.parent.getAttribute(t);if(n.hasValue(!0))return n.getString("0");e=e.parent}return null}constructor(t,e,n){super(t,e,new.target===Ti||n),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class ki extends Ti{getText(){return this.text}constructor(t,e,n){super(t,e,new.target===ki||n),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class Ci extends ki{constructor(...t){super(...t),this.type="textNode"}}class Ni extends kr{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new ai(0,0),this.control=new ai(0,0),this.current=new ai(0,0),this.points=[],this.angles=[]}isEnd(){const{i:t,commands:e}=this;return t>=e.length-1}next(){const t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";const n=new ai(this.command[t],this.command[e]);return this.makeAbsolute(n)}getAsControlPoint(t,e){const n=this.getPoint(t,e);return this.control=n,n}getAsCurrentPoint(t,e){const n=this.getPoint(t,e);return this.current=n,n}getReflectedControlPoint(){const t=this.previousCommand.type;if(t!==kr.CURVE_TO&&t!==kr.SMOOTH_CURVE_TO&&t!==kr.QUAD_TO&&t!==kr.SMOOTH_QUAD_TO)return this.current;const{current:{x:e,y:n},control:{x:r,y:i}}=this;return new ai(2*e-r,2*n-i)}makeAbsolute(t){if(this.command.relative){const{x:e,y:n}=this.current;t.x+=e,t.y+=n}return t}addMarker(t,e,n){const{points:r,angles:i}=this;n&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:t}=this,e=t.length;for(let n=0;n<e;n++)if(!t[n])for(let r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new ai(0,0),this.start=new ai(0,0),this.current=new ai(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class Ei extends Si{path(t){const{pathParser:e}=this,n=new Ai;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case Ni.MOVE_TO:this.pathM(t,n);break;case Ni.LINE_TO:this.pathL(t,n);break;case Ni.HORIZ_LINE_TO:this.pathH(t,n);break;case Ni.VERT_LINE_TO:this.pathV(t,n);break;case Ni.CURVE_TO:this.pathC(t,n);break;case Ni.SMOOTH_CURVE_TO:this.pathS(t,n);break;case Ni.QUAD_TO:this.pathQ(t,n);break;case Ni.SMOOTH_QUAD_TO:this.pathT(t,n);break;case Ni.ARC:this.pathA(t,n);break;case Ni.CLOSE_PATH:this.pathZ(t,n)}return n}getBoundingBox(t){return this.path()}getMarkers(){const{pathParser:t}=this,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map(((t,e)=>[t,n[e]]))}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);const e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());const n=this.getMarkers();if(n){const e=n.length-1,r=this.getStyle("marker-start"),i=this.getStyle("marker-mid"),s=this.getStyle("marker-end");if(r.isUrlDefinition()){const e=r.getDefinition(),[i,s]=n[0];e.render(t,i,s)}if(i.isUrlDefinition()){const r=i.getDefinition();for(let i=1;i<e;i++){const[e,s]=n[i];r.render(t,e,s)}}if(s.isUrlDefinition()){const r=s.getDefinition(),[i,a]=n[e];r.render(t,i,a)}}}static pathM(t){const e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){const{pathParser:n}=this,{point:r}=Ei.pathM(n),{x:i,y:s}=r;n.addMarker(r),e.addPoint(i,s),t&&t.moveTo(i,s)}static pathL(t){const{current:e}=t;return{current:e,point:t.getAsCurrentPoint()}}pathL(t,e){const{pathParser:n}=this,{current:r,point:i}=Ei.pathL(n),{x:s,y:a}=i;n.addMarker(i,r),e.addPoint(s,a),t&&t.lineTo(s,a)}static pathH(t){const{current:e,command:n}=t,r=new ai((n.relative?e.x:0)+n.x,e.y);return t.current=r,{current:e,point:r}}pathH(t,e){const{pathParser:n}=this,{current:r,point:i}=Ei.pathH(n),{x:s,y:a}=i;n.addMarker(i,r),e.addPoint(s,a),t&&t.lineTo(s,a)}static pathV(t){const{current:e,command:n}=t,r=new ai(e.x,(n.relative?e.y:0)+n.y);return t.current=r,{current:e,point:r}}pathV(t,e){const{pathParser:n}=this,{current:r,point:i}=Ei.pathV(n),{x:s,y:a}=i;n.addMarker(i,r),e.addPoint(s,a),t&&t.lineTo(s,a)}static pathC(t){const{current:e}=t;return{current:e,point:t.getPoint("x1","y1"),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}pathC(t,e){const{pathParser:n}=this,{current:r,point:i,controlPoint:s,currentPoint:a}=Ei.pathC(n);n.addMarker(a,s,i),e.addBezierCurve(r.x,r.y,i.x,i.y,s.x,s.y,a.x,a.y),t&&t.bezierCurveTo(i.x,i.y,s.x,s.y,a.x,a.y)}static pathS(t){const{current:e}=t;return{current:e,point:t.getReflectedControlPoint(),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}pathS(t,e){const{pathParser:n}=this,{current:r,point:i,controlPoint:s,currentPoint:a}=Ei.pathS(n);n.addMarker(a,s,i),e.addBezierCurve(r.x,r.y,i.x,i.y,s.x,s.y,a.x,a.y),t&&t.bezierCurveTo(i.x,i.y,s.x,s.y,a.x,a.y)}static pathQ(t){const{current:e}=t;return{current:e,controlPoint:t.getAsControlPoint("x1","y1"),currentPoint:t.getAsCurrentPoint()}}pathQ(t,e){const{pathParser:n}=this,{current:r,controlPoint:i,currentPoint:s}=Ei.pathQ(n);n.addMarker(s,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,s.x,s.y),t&&t.quadraticCurveTo(i.x,i.y,s.x,s.y)}static pathT(t){const{current:e}=t,n=t.getReflectedControlPoint();t.control=n;return{current:e,controlPoint:n,currentPoint:t.getAsCurrentPoint()}}pathT(t,e){const{pathParser:n}=this,{current:r,controlPoint:i,currentPoint:s}=Ei.pathT(n);n.addMarker(s,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,s.x,s.y),t&&t.quadraticCurveTo(i.x,i.y,s.x,s.y)}static pathA(t){const{current:e,command:n}=t;let{rX:r,rY:i,xRot:s,lArcFlag:a,sweepFlag:o}=n;const h=s*(Math.PI/180),u=t.getAsCurrentPoint(),l=new ai(Math.cos(h)*(e.x-u.x)/2+Math.sin(h)*(e.y-u.y)/2,-Math.sin(h)*(e.x-u.x)/2+Math.cos(h)*(e.y-u.y)/2),c=Math.pow(l.x,2)/Math.pow(r,2)+Math.pow(l.y,2)/Math.pow(i,2);c>1&&(r*=Math.sqrt(c),i*=Math.sqrt(c));let f=(a===o?-1:1)*Math.sqrt((Math.pow(r,2)*Math.pow(i,2)-Math.pow(r,2)*Math.pow(l.y,2)-Math.pow(i,2)*Math.pow(l.x,2))/(Math.pow(r,2)*Math.pow(l.y,2)+Math.pow(i,2)*Math.pow(l.x,2)));isNaN(f)&&(f=0);const g=new ai(f*r*l.y/i,f*-i*l.x/r),d=new ai((e.x+u.x)/2+Math.cos(h)*g.x-Math.sin(h)*g.y,(e.y+u.y)/2+Math.sin(h)*g.x+Math.cos(h)*g.y),p=jr([1,0],[(l.x-g.x)/r,(l.y-g.y)/i]),y=[(l.x-g.x)/r,(l.y-g.y)/i],m=[(-l.x-g.x)/r,(-l.y-g.y)/i];let x=jr(y,m);return Qr(y,m)<=-1&&(x=Math.PI),Qr(y,m)>=1&&(x=0),{currentPoint:u,rX:r,rY:i,sweepFlag:o,xAxisRotation:h,centp:d,a1:p,ad:x}}pathA(t,e){const{pathParser:n}=this,{currentPoint:r,rX:i,rY:s,sweepFlag:a,xAxisRotation:o,centp:h,a1:u,ad:l}=Ei.pathA(n),c=1-a?1:-1,f=u+c*(l/2),g=new ai(h.x+i*Math.cos(f),h.y+s*Math.sin(f));if(n.addMarkerAngle(g,f-c*Math.PI/2),n.addMarkerAngle(r,f-c*Math.PI),e.addPoint(r.x,r.y),t&&!isNaN(u)&&!isNaN(l)){const e=i>s?i:s,n=i>s?1:i/s,r=i>s?s/i:1;t.translate(h.x,h.y),t.rotate(o),t.scale(n,r),t.arc(0,0,e,u,u+l,Boolean(1-a)),t.scale(1/n,1/r),t.rotate(-o),t.translate(-h.x,-h.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){Ei.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,n){super(t,e,n),this.type="path",this.pathParser=new Ni(this.getAttribute("d").getString())}}class Pi extends Si{setContext(t){var e;const{document:n}=this,{screen:r,window:i}=n,s=t.canvas;if(r.setDefaults(t),"style"in s&&void 0!==t.font&&i&&void 0!==i.getComputedStyle){t.font=i.getComputedStyle(s).getPropertyValue("font");const e=new ri(n,"fontSize",_i.parse(t.font).fontSize);e.hasValue()&&(n.rootEmSize=e.getPixels("y"),n.emSize=n.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:a,height:o}=r.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const h=this.getAttribute("refX"),u=this.getAttribute("refY"),l=this.getAttribute("viewBox"),c=l.hasValue()?Ir(l.getString()):null,f=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden");let g=0,d=0,p=0,y=0;c&&(g=c[0],d=c[1]),this.root||(a=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y"),"marker"===this.type&&(p=g,y=d,g=0,d=0)),r.viewPort.setCurrent(a,o),!this.node||this.parent&&"foreignObject"!==(null===(e=this.node.parentNode)||void 0===e?void 0:e.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),c&&(a=c[2],o=c[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r.viewPort.width,desiredWidth:a,height:r.viewPort.height,desiredHeight:o,minX:g,minY:d,refX:h.getValue(),refY:u.getValue(),clip:f,clipX:p,clipY:y}),c&&(r.viewPort.removeCurrent(),r.viewPort.setCurrent(a,o))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.getAttribute("width",!0),i=this.getAttribute("height",!0),s=this.getAttribute("viewBox"),a=this.getAttribute("style"),o=r.getNumber(0),h=i.getNumber(0);if(n)if("string"==typeof n)this.getAttribute("preserveAspectRatio",!0).setValue(n);else{const t=this.getAttribute("preserveAspectRatio");t.hasValue()&&t.setValue(t.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(r.setValue(t),i.setValue(e),s.hasValue()||s.setValue("0 0 ".concat(o||t," ").concat(h||e)),a.hasValue()){const n=this.getStyle("width"),r=this.getStyle("height");n.hasValue()&&n.setValue("".concat(t,"px")),r.hasValue()&&r.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}}class Mi extends Ei{path(t){const e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),s=this.getAttribute("rx"),a=this.getAttribute("ry");let o=s.getPixels("x"),h=a.getPixels("y");if(s.hasValue()&&!a.hasValue()&&(h=o),a.hasValue()&&!s.hasValue()&&(o=h),o=Math.min(o,r/2),h=Math.min(h,i/2),t){const s=(Math.sqrt(2)-1)/3*4;t.beginPath(),i>0&&r>0&&(t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.bezierCurveTo(e+r-o+s*o,n,e+r,n+h-s*h,e+r,n+h),t.lineTo(e+r,n+i-h),t.bezierCurveTo(e+r,n+i-h+s*h,e+r-o+s*o,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.bezierCurveTo(e+o-s*o,n+i,e,n+i-h+s*h,e,n+i-h),t.lineTo(e,n+h),t.bezierCurveTo(e,n+h-s*h,e+o-s*o,n,e+o,n),t.closePath())}return new Ai(e,n,e+r,n+i)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}}class Oi extends Ei{path(t){const{points:e}=this,[{x:n,y:r}]=e,i=new Ai(n,r);return t&&(t.beginPath(),t.moveTo(n,r)),e.forEach((e=>{let{x:n,y:r}=e;i.addPoint(n,r),t&&t.lineTo(n,r)})),i}getMarkers(){const{points:t}=this,e=t.length-1,n=[];return t.forEach(((r,i)=>{i!==e&&n.push([r,r.angleTo(t[i+1])])})),n.length>0&&n.push([t[t.length-1],n[n.length-1][1]]),n}constructor(t,e,n){super(t,e,n),this.type="polyline",this.points=[],this.points=ai.parsePath(this.getAttribute("points").getString())}}class Vi extends Si{getBoundingBox(t){const e=new Ai;return this.children.forEach((n=>{e.addBoundingBox(n.getBoundingBox(t))})),e}constructor(...t){super(...t),this.type="g"}}class Ri extends mi{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,n){let r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));const{stops:i}=r,s=this.getGradient(t,e);if(!s)return this.addParentOpacity(n,i[i.length-1].color);if(i.forEach((t=>{s.addColorStop(t.offset,this.addParentOpacity(n,t.color))})),this.getAttribute("gradientTransform").hasValue()){const{document:t}=this,{MAX_VIRTUAL_PIXELS:e}=li,{viewPort:n}=t.screen,r=n.getRoot(),i=new Mi(t);i.attributes.x=new ri(t,"x",-e/3),i.attributes.y=new ri(t,"y",-e/3),i.attributes.width=new ri(t,"width",e),i.attributes.height=new ri(t,"height",e);const a=new Vi(t);a.attributes.transform=new ri(t,"transform",this.getAttribute("gradientTransform").getValue()),a.children=[i];const o=new Pi(t);o.attributes.x=new ri(t,"x",0),o.attributes.y=new ri(t,"y",0),o.attributes.width=new ri(t,"width",r.width),o.attributes.height=new ri(t,"height",r.height),o.children=[a];const h=t.createCanvas(r.width,r.height),u=h.getContext("2d");return u.fillStyle=s,o.render(u),u.createPattern(h,"no-repeat")}return s}inheritStopContainer(t){this.attributesToInherit.forEach((e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())}))}addParentOpacity(t,e){if(t.hasValue()){return new ri(this.document,"color",e).addOpacity(t).getColor()}return e}constructor(t,e,n){super(t,e,n),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:r,children:i}=this;i.forEach((t=>{"stop"===t.type&&r.push(t)}))}}class Ii extends mi{getProperty(){const t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){const{initialUnits:t}=this,{progress:e,from:n,to:r}=this.getProgress();let i=n.getNumber()+(r.getNumber()-n.getNumber())*e;return"%"===t&&(i*=100),"".concat(i).concat(t)}update(t){const{parent:e}=this,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){const t=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==t||this.frozen){if("remove"===t&&!this.removed)return this.removed=!0,e&&n&&n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e&&n&&(e.animationFrozen=!0,e.animationFrozenValue=n.getString());return!1}this.duration+=t;let r=!1;if(this.begin<this.duration){let t=this.calcValue();const e=this.getAttribute("type");if(e.hasValue()){const n=e.getString();t="".concat(n,"(").concat(t,")")}n.setValue(t),r=!0}return r}getProgress(){const{document:t,values:e}=this;let n,r,i=(this.duration-this.begin)/(this.maxDuration-this.begin);if(e.hasValue()){const s=i*(e.getValue().length-1),a=Math.floor(s),o=Math.ceil(s);let h;h=e.getValue()[a],n=new ri(t,"from",h?parseFloat(h):0),h=e.getValue()[o],r=new ri(t,"to",h?parseFloat(h):0),i=(s-a)/(o-a)}else n=this.from,r=this.to;return{progress:i,from:n,to:r}}constructor(t,e,n){super(t,e,n),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new ri(t,"values",null);const r=this.getAttribute("values");r.hasValue()&&this.values.setValue(r.getString().split(";"))}}class Li extends mi{constructor(t,e,n){super(t,e,n),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class Di extends Ei{constructor(t,e,n){super(t,e,n),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class Bi extends Di{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}}const Hi=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class zi{async load(t,e){try{const{document:n}=this,r=(await n.canvg.parser.load(e)).getElementsByTagName("font");Array.from(r).forEach((e=>{const r=n.createElement(e);n.definitions[t]=r}))}catch(t){console.error('Error while loading font "'.concat(e,'":'),t)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}}class Xi extends mi{constructor(t,e,n){super(t,e,n),this.type="style";Rr(Array.from(e.childNodes).map((t=>t.textContent)).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach((e=>{const n=e.trim();if(!n)return;const r=n.split("{"),i=r[0].split(","),s=r[1].split(";");i.forEach((e=>{const n=e.trim();if(!n)return;const r=t.styles[n]||{};if(s.forEach((e=>{const n=e.indexOf(":"),i=e.substr(0,n).trim(),s=e.substr(n+1,e.length-n).trim();i&&s&&(r[i]=new ri(t,i,s))})),t.styles[n]=r,t.stylesSpecificity[n]=function(t){const e=[0,0,0];let n=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0;return[n,r]=$r(n,Br),e[1]+=r,[n,r]=$r(n,Hr),e[0]+=r,[n,r]=$r(n,zr),e[1]+=r,[n,r]=$r(n,Xr),e[2]+=r,[n,r]=$r(n,Ur),e[1]+=r,[n,r]=$r(n,Fr),e[1]+=r,n=n.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[n,r]=$r(n,Yr),e[2]+=r,e.join("")}(n),"@font-face"===n){const e=r["font-family"].getString().replace(/"|'/g,"");r.src.getString().split(",").forEach((n=>{if(n.indexOf('format("svg")')>0){const r=Dr(n);r&&new zi(t).load(e,r)}}))}}))}))}}Xi.parseExternalUrl=Dr;function Ui(t,e,n,r,i,s){return t[n*r*4+4*e+s]}function Fi(t,e,n,r,i,s,a){t[n*r*4+4*e+s]=a}function Yi(t,e,n){return t[e]*n}function $i(t,e,n,r){return e+Math.cos(t)*n+Math.sin(t)*r}class qi extends mi{apply(t,e,n,r,i){const{includeOpacity:s,matrix:a}=this,o=t.getImageData(0,0,r,i);for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=Ui(o.data,e,t,r,0,0),i=Ui(o.data,e,t,r,0,1),h=Ui(o.data,e,t,r,0,2),u=Ui(o.data,e,t,r,0,3);let l=Yi(a,0,n)+Yi(a,1,i)+Yi(a,2,h)+Yi(a,3,u)+Yi(a,4,1),c=Yi(a,5,n)+Yi(a,6,i)+Yi(a,7,h)+Yi(a,8,u)+Yi(a,9,1),f=Yi(a,10,n)+Yi(a,11,i)+Yi(a,12,h)+Yi(a,13,u)+Yi(a,14,1),g=Yi(a,15,n)+Yi(a,16,i)+Yi(a,17,h)+Yi(a,18,u)+Yi(a,19,1);s&&(l=0,c=0,f=0,g*=u/255),Fi(o.data,e,t,r,0,0,l),Fi(o.data,e,t,r,0,1,c),Fi(o.data,e,t,r,0,2,f),Fi(o.data,e,t,r,0,3,g)}t.clearRect(0,0,r,i),t.putImageData(o,0,0)}constructor(t,e,n){super(t,e,n),this.type="feColorMatrix";let r=Ir(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const t=r[0];r=[.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const t=r[0]*Math.PI/180;r=[$i(t,.213,.787,-.213),$i(t,.715,-.715,-.715),$i(t,.072,-.072,.928),0,0,$i(t,.213,-.213,.143),$i(t,.715,.285,.14),$i(t,.072,-.072,-.283),0,0,$i(t,.213,-.213,-.787),$i(t,.715,-.715,.715),$i(t,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=r,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class Wi extends mi{apply(t,e){const{document:n}=this;let r=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(!s&&!a){const e=new Ai;this.children.forEach((n=>{e.addBoundingBox(n.getBoundingBox(t))})),r=Math.floor(e.x1),i=Math.floor(e.y1),s=Math.floor(e.width),a=Math.floor(e.height)}const o=this.removeStyles(e,Wi.ignoreStyles),h=n.createCanvas(r+s,i+a),u=h.getContext("2d");n.screen.setDefaults(u),this.renderChildren(u),new qi(n,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,r+s,i+a);const l=n.createCanvas(r+s,i+a),c=l.getContext("2d");n.screen.setDefaults(c),e.render(c),c.globalCompositeOperation="destination-in",c.fillStyle=u.createPattern(h,"no-repeat"),c.fillRect(0,0,r+s,i+a),t.fillStyle=c.createPattern(l,"no-repeat"),t.fillRect(0,0,r+s,i+a),this.restoreStyles(e,o)}render(t){}constructor(...t){super(...t),this.type="mask"}}Wi.ignoreStyles=["mask","transform","clip-path"];const Qi=()=>{};class ji extends mi{apply(t,e){const{document:n,children:r}=this,i="getBoundingBox"in e?e.getBoundingBox(t):null;if(!i)return;let s=0,a=0;r.forEach((t=>{const e=t.extraFilterDistance||0;s=Math.max(s,e),a=Math.max(a,e)}));const o=Math.floor(i.width),h=Math.floor(i.height),u=o+2*s,l=h+2*a;if(u<1||l<1)return;const c=Math.floor(i.x),f=Math.floor(i.y),g=this.removeStyles(e,ji.ignoreStyles),d=n.createCanvas(u,l),p=d.getContext("2d");n.screen.setDefaults(p),p.translate(-c+s,-f+a),e.render(p),r.forEach((t=>{"function"==typeof t.apply&&t.apply(p,0,0,u,l)})),t.drawImage(d,0,0,u,l,c-s,f-a,u,l),this.restoreStyles(e,g)}render(t){}constructor(...t){super(...t),this.type="filter"}}ji.ignoreStyles=["filter","transform","clip-path"];const Gi={svg:Pi,rect:Mi,circle:class extends Ei{path(t){const e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&r>0&&(t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()),new Ai(e-r,n-r,e+r,n+r)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},ellipse:class extends Ei{path(t){const e=(Math.sqrt(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y");return t&&n>0&&r>0&&(t.beginPath(),t.moveTo(i+n,s),t.bezierCurveTo(i+n,s+e*r,i+e*n,s+r,i,s+r),t.bezierCurveTo(i-e*n,s+r,i-n,s+e*r,i-n,s),t.bezierCurveTo(i-n,s-e*r,i-e*n,s-r,i,s-r),t.bezierCurveTo(i+e*n,s-r,i+n,s-e*r,i+n,s),t.closePath()),new Ai(i-n,s-r,i+n,s+r)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},line:class extends Ei{getPoints(){return[new ai(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new ai(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){const[{x:e,y:n},{x:r,y:i}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,n),t.lineTo(r,i)),new Ai(e,n,r,i)}getMarkers(){const[t,e]=this.getPoints(),n=t.angleTo(e);return[[t,n],[e,n]]}constructor(...t){super(...t),this.type="line"}},polyline:Oi,polygon:class extends Oi{path(t){const e=super.path(t),[{x:n,y:r}]=this.points;return t&&(t.lineTo(n,r),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},path:Ei,pattern:class extends mi{createPattern(t,e,n){const r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),s=new Pi(this.document,null);s.attributes.viewBox=new ri(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.width=new ri(this.document,"width","".concat(r,"px")),s.attributes.height=new ri(this.document,"height","".concat(i,"px")),s.attributes.transform=new ri(this.document,"transform",this.getAttribute("patternTransform").getValue()),s.children=this.children;const a=this.document.createCanvas(r,i),o=a.getContext("2d"),h=this.getAttribute("x"),u=this.getAttribute("y");h.hasValue()&&u.hasValue()&&o.translate(h.getPixels("x",!0),u.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(let t=-1;t<=1;t++)for(let e=-1;e<=1;e++)o.save(),s.attributes.x=new ri(this.document,"x",t*a.width),s.attributes.y=new ri(this.document,"y",e*a.height),s.render(o),o.restore();return t.createPattern(a,"repeat")}constructor(...t){super(...t),this.type="pattern"}},marker:class extends mi{render(t,e,n){if(!e)return;const{x:r,y:i}=e,s=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(r,i),"auto"===s&&t.rotate(n),"strokeWidth"===a&&t.scale(t.lineWidth,t.lineWidth),t.save();const o=new Pi(this.document);o.type=this.type,o.attributes.viewBox=new ri(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.refX=new ri(this.document,"refX",this.getAttribute("refX").getValue()),o.attributes.refY=new ri(this.document,"refY",this.getAttribute("refY").getValue()),o.attributes.width=new ri(this.document,"width",this.getAttribute("markerWidth").getValue()),o.attributes.height=new ri(this.document,"height",this.getAttribute("markerHeight").getValue()),o.attributes.overflow=new ri(this.document,"overflow",this.getAttribute("overflow").getValue()),o.attributes.fill=new ri(this.document,"fill",this.getAttribute("fill").getColor("black")),o.attributes.stroke=new ri(this.document,"stroke",this.getAttribute("stroke").getValue("none")),o.children=this.children,o.render(t),t.restore(),"strokeWidth"===a&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===s&&t.rotate(-n),t.translate(-r,-i)}constructor(...t){super(...t),this.type="marker"}},defs:class extends mi{render(){}constructor(...t){super(...t),this.type="defs"}},linearGradient:class extends Ri{getGradient(t,e){const n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),s=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),o=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===a&&s===o?null:t.createLinearGradient(i,s,a,o)}constructor(t,e,n){super(t,e,n),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},radialGradient:class extends Ri{getGradient(t,e){const n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),s=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let a=i,o=s;this.getAttribute("fx").hasValue()&&(a=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(o=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const h=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,o,u,i,s,h)}constructor(t,e,n){super(t,e,n),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},stop:class extends mi{constructor(t,e,n){super(t,e,n),this.type="stop";const r=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),i=this.getStyle("stop-opacity");let s=this.getStyle("stop-color",!0);""===s.getString()&&s.setValue("#000"),i.hasValue()&&(s=s.addOpacity(i)),this.offset=r,this.color=s.getColor()}},animate:Ii,animateColor:class extends Ii{calcValue(){const{progress:t,from:n,to:r}=this.getProgress(),i=new(e(or))(n.getColor()),s=new(e(or))(r.getColor());if(i.ok&&s.ok){const e=i.r+(s.r-i.r)*t,n=i.g+(s.g-i.g)*t,r=i.b+(s.b-i.b)*t;return"rgb(".concat(Math.floor(e),", ").concat(Math.floor(n),", ").concat(Math.floor(r),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},animateTransform:class extends Ii{calcValue(){const{progress:t,from:e,to:n}=this.getProgress(),r=Ir(e.getString()),i=Ir(n.getString());return r.map(((e,n)=>e+(i[n]-e)*t)).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},font:class extends mi{render(){}constructor(t,e,n){super(t,e,n),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:r}=t,{children:i}=this;for(const t of i)if(t instanceof Li){this.fontFace=t;const e=t.getStyle("font-family");e.hasValue()&&(r[e.getString()]=this)}else if(t instanceof Bi)this.missingGlyph=t;else if(t instanceof Di)if(t.arabicForm){this.isRTL=!0,this.isArabic=!0;const e=this.arabicGlyphs[t.unicode];void 0===e?this.arabicGlyphs[t.unicode]={[t.arabicForm]:t}:e[t.arabicForm]=t}else this.glyphs[t.unicode]=t}},"font-face":Li,"missing-glyph":Bi,glyph:Di,text:Ti,tspan:ki,tref:class extends Ti{getText(){const t=this.getHrefAttribute().getDefinition();if(t){const e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},a:class extends Ti{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);const{document:e,x:n,y:r}=this,{mouse:i}=e.screen,s=new ri(e,"fontSize",_i.parse(e.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new Ai(n,r-s.getPixels("y"),n+this.measureText(t),r))}else if(this.children.length>0){const e=new Vi(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){const{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}constructor(t,e,n){super(t,e,n),this.type="a";const{childNodes:r}=e,i=r[0],s=r.length>0&&Array.from(r).every((t=>3===t.nodeType));this.hasText=s,this.text=s?this.getTextFromNode(i):""}},textPath:class extends Ti{getText(){return this.text}path(t){const{dataArray:e}=this;t&&t.beginPath(),e.forEach((e=>{let{type:n,points:r}=e;switch(n){case Ni.LINE_TO:t&&t.lineTo(r[0],r[1]);break;case Ni.MOVE_TO:t&&t.moveTo(r[0],r[1]);break;case Ni.CURVE_TO:t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case Ni.QUAD_TO:t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case Ni.ARC:{const[e,n,i,s,a,o,h,u]=r,l=i>s?i:s,c=i>s?1:i/s,f=i>s?s/i:1;t&&(t.translate(e,n),t.rotate(h),t.scale(c,f),t.arc(0,0,l,a,a+o,Boolean(1-u)),t.scale(1/c,1/f),t.rotate(-h),t.translate(-e,-n));break}case Ni.CLOSE_PATH:t&&t.closePath()}}))}renderChildren(t){this.setTextData(t),t.save();const e=this.parent.getStyle("text-decoration").getString(),n=this.getFontSize(),{glyphInfo:r}=this,i=t.fillStyle;"underline"===e&&t.beginPath(),r.forEach(((r,i)=>{const{p0:s,p1:a,rotation:o,text:h}=r;t.save(),t.translate(s.x,s.y),t.rotate(o),t.fillStyle&&t.fillText(h,0,0),t.strokeStyle&&t.strokeText(h,0,0),t.restore(),"underline"===e&&(0===i&&t.moveTo(s.x,s.y+n/8),t.lineTo(a.x,a.y+n/5))})),"underline"===e&&(t.lineWidth=n/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,n,r,i,s,a,o,h){let u=s,l=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(l+=(r-n)/i),h>-1&&(u+=this.getLetterSpacingAt(h));const c=this.textHeight/20,f=this.getEquidistantPointOnPath(u,c,0),g=this.getEquidistantPointOnPath(u+l,c,0),d={p0:f,p1:g},p=f&&g?Math.atan2(g.y-f.y,g.x-f.x):0;if(a){const t=Math.cos(Math.PI/2+p)*a,e=Math.cos(-p)*a;d.p0={...f,x:f.x+t,y:f.y+e},d.p1={...g,x:g.x+t,y:g.y+e}}return u+=l,{offset:u,segment:d,rotation:p}}measureText(t,e){const{measuresCache:n}=this,r=e||this.getText();if(n.has(r))return n.get(r);const i=this.measureTargetText(t,r);return n.set(r,i),i}setTextData(t){if(this.glyphInfo)return;const e=this.getText(),n=e.split(""),r=e.split(" ").length-1,i=this.parent.getAttribute("dx").split().map((t=>t.getPixels("x"))),s=this.parent.getAttribute("dy").getPixels("y"),a=this.parent.getStyle("text-anchor").getString("start"),o=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing");let u=0;o.hasValue()&&"inherit"!==o.getValue()?o.hasValue()&&"initial"!==o.getValue()&&"unset"!==o.getValue()&&(u=o.getPixels()):u=h.getPixels();const l=[],c=e.length;this.letterSpacingCache=l;for(let t=0;t<c;t++)l.push(void 0!==i[t]?i[t]:u);const f=l.reduce(((t,e,n)=>0===n?0:t+e||0),0),g=this.measureText(t),d=Math.max(g+f,0);this.textWidth=g,this.textHeight=this.getFontSize(),this.glyphInfo=[];const p=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*p;let m=0;"middle"!==a&&"center"!==a||(m=-d/2),"end"!==a&&"right"!==a||(m=-d),m+=y,n.forEach(((e,i)=>{const{offset:o,segment:h,rotation:u}=this.findSegmentToFitChar(t,a,d,p,r,m,s,e,i);m=o,h.p0&&h.p1&&this.glyphInfo.push({text:n[i],p0:h.p0,p1:h.p1,rotation:u})}))}parsePathData(t){if(this.pathLength=-1,!t)return[];const e=[],{pathParser:n}=t;for(n.reset();!n.isEnd();){const{current:t}=n,r=t?t.x:0,i=t?t.y:0,s=n.next();let a=s.type,o=[];switch(s.type){case Ni.MOVE_TO:this.pathM(n,o);break;case Ni.LINE_TO:a=this.pathL(n,o);break;case Ni.HORIZ_LINE_TO:a=this.pathH(n,o);break;case Ni.VERT_LINE_TO:a=this.pathV(n,o);break;case Ni.CURVE_TO:this.pathC(n,o);break;case Ni.SMOOTH_CURVE_TO:a=this.pathS(n,o);break;case Ni.QUAD_TO:this.pathQ(n,o);break;case Ni.SMOOTH_QUAD_TO:a=this.pathT(n,o);break;case Ni.ARC:o=this.pathA(n);break;case Ni.CLOSE_PATH:Ei.pathZ(n)}s.type!==Ni.CLOSE_PATH?e.push({type:a,points:o,start:{x:r,y:i},pathLength:this.calcLength(r,i,a,o)}):e.push({type:Ni.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){const{x:n,y:r}=Ei.pathM(t).point;e.push(n,r)}pathL(t,e){const{x:n,y:r}=Ei.pathL(t).point;return e.push(n,r),Ni.LINE_TO}pathH(t,e){const{x:n,y:r}=Ei.pathH(t).point;return e.push(n,r),Ni.LINE_TO}pathV(t,e){const{x:n,y:r}=Ei.pathV(t).point;return e.push(n,r),Ni.LINE_TO}pathC(t,e){const{point:n,controlPoint:r,currentPoint:i}=Ei.pathC(t);e.push(n.x,n.y,r.x,r.y,i.x,i.y)}pathS(t,e){const{point:n,controlPoint:r,currentPoint:i}=Ei.pathS(t);return e.push(n.x,n.y,r.x,r.y,i.x,i.y),Ni.CURVE_TO}pathQ(t,e){const{controlPoint:n,currentPoint:r}=Ei.pathQ(t);e.push(n.x,n.y,r.x,r.y)}pathT(t,e){const{controlPoint:n,currentPoint:r}=Ei.pathT(t);return e.push(n.x,n.y,r.x,r.y),Ni.QUAD_TO}pathA(t){let{rX:e,rY:n,sweepFlag:r,xAxisRotation:i,centp:s,a1:a,ad:o}=Ei.pathA(t);return 0===r&&o>0&&(o-=2*Math.PI),1===r&&o<0&&(o+=2*Math.PI),[s.x,s.y,e,n,a,o,i,r]}calcLength(t,e,n,r){let i=0,s=null,a=null,o=0;switch(n){case Ni.LINE_TO:return this.getLineLength(t,e,r[0],r[1]);case Ni.CURVE_TO:for(i=0,s=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),o=.01;o<=1;o+=.01)a=this.getPointOnCubicBezier(o,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),i+=this.getLineLength(s.x,s.y,a.x,a.y),s=a;return i;case Ni.QUAD_TO:for(i=0,s=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),o=.01;o<=1;o+=.01)a=this.getPointOnQuadraticBezier(o,t,e,r[0],r[1],r[2],r[3]),i+=this.getLineLength(s.x,s.y,a.x,a.y),s=a;return i;case Ni.ARC:{i=0;const t=r[4],e=r[5],n=r[4]+e;let h=Math.PI/180;if(Math.abs(t-n)<h&&(h=Math.abs(t-n)),s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],t,0),e<0)for(o=t-h;o>n;o-=h)a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],o,0),i+=this.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(o=t+h;o<n;o+=h)a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],o,0),i+=this.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],n,0),i+=this.getLineLength(s.x,s.y,a.x,a.y),i}}return 0}getPointOnLine(t,e,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n;const o=(i-n)/(r-e+qr);let h=Math.sqrt(t*t/(1+o*o));r<e&&(h*=-1);let u=o*h,l=null;if(r===e)l={x:s,y:a+u};else if((a-n)/(s-e+qr)===o)l={x:s+h,y:a+u};else{let c=0,f=0;const g=this.getLineLength(e,n,r,i);if(g<qr)return null;let d=(s-e)*(r-e)+(a-n)*(i-n);d/=g*g,c=e+d*(r-e),f=n+d*(i-n);const p=this.getLineLength(s,a,c,f),y=Math.sqrt(t*t-p*p);h=Math.sqrt(y*y/(1+o*o)),r<e&&(h*=-1),u=o*h,l={x:c+h,y:f+u}}return l}getPointOnPath(t){const e=this.getPathLength();let n=0,r=null;if(t<-5e-5||t-5e-5>e)return null;const{dataArray:i}=this;for(const e of i){if(e&&(e.pathLength<5e-5||n+e.pathLength+5e-5<t)){n+=e.pathLength;continue}const i=t-n;let s=0;switch(e.type){case Ni.LINE_TO:r=this.getPointOnLine(i,e.start.x,e.start.y,e.points[0],e.points[1],e.start.x,e.start.y);break;case Ni.ARC:{const t=e.points[4],n=e.points[5],a=e.points[4]+n;if(s=t+i/e.pathLength*n,n<0&&s<a||n>=0&&s>a)break;r=this.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],s,e.points[6]);break}case Ni.CURVE_TO:s=i/e.pathLength,s>1&&(s=1),r=this.getPointOnCubicBezier(s,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case Ni.QUAD_TO:s=i/e.pathLength,s>1&&(s=1),r=this.getPointOnQuadraticBezier(s,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}if(r)return r;break}return null}getLineLength(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}getPathLength(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(((t,e)=>e.pathLength>0?t+e.pathLength:t),0)),this.pathLength}getPointOnCubicBezier(t,e,n,r,i,s,a,o,h){return{x:o*Gr(t)+s*Zr(t)+r*Jr(t)+e*Kr(t),y:h*Gr(t)+a*Zr(t)+i*Jr(t)+n*Kr(t)}}getPointOnQuadraticBezier(t,e,n,r,i,s,a){return{x:s*ti(t)+r*ei(t)+e*ni(t),y:a*ti(t)+i*ei(t)+n*ni(t)}}getPointOnEllipticalArc(t,e,n,r,i,s){const a=Math.cos(s),o=Math.sin(s),h=n*Math.cos(i),u=r*Math.sin(i);return{x:t+(h*a-u*o),y:e+(h*o+u*a)}}buildEquidistantCache(t,e){const n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};let t=0;for(let e=0;e<=n;e+=r){const n=this.getPointOnPath(e),s=this.getPointOnPath(e+r);n&&s&&(t+=this.getLineLength(n.x,n.y,s.x,s.y),t>=i&&(this.equidistantCache.points.push({x:n.x,y:n.y,distance:e}),t-=i))}}}getEquidistantPointOnPath(t,e,n){if(this.buildEquidistantCache(e,n),t<0||t-this.getPathLength()>5e-5)return null;const r=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}constructor(t,e,n){super(t,e,n),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const r=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(r)}},image:class extends Si{async loadImage(t){try{const e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){const e=Hi.exec(t);if(e){const t=e[5];t&&("base64"===e[4]?this.image=atob(t):this.image=decodeURIComponent(t))}else try{const e=await this.document.fetch(t),n=await e.text();this.image=n}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}renderChildren(t){const{document:e,image:n,loaded:r}=this,i=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(r&&n&&a&&o){if(t.save(),t.translate(i,s),"string"==typeof n){const r=e.canvg.forkString(t,n,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:o}),{documentElement:i}=r.document;i&&(i.parent=this),r.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:n.width,height:o,desiredHeight:n.height}),this.loaded&&("complete"in n&&!n.complete||t.drawImage(n,0,0));t.restore()}}getBoundingBox(){const t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new Ai(t,e,t+n,e+r)}constructor(t,e,n){super(t,e,n),this.type="image",this.loaded=!1;const r=this.getHrefAttribute().getString();if(!r)return;const i=r.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(r);t.images.push(this),i?this.loadSvg(r):this.loadImage(r)}},g:Vi,symbol:class extends Si{render(t){}constructor(...t){super(...t),this.type="symbol"}},style:Xi,use:class extends Si{setContext(t){super.setContext(t);const e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}path(t){const{element:e}=this;e&&e.path(t)}renderChildren(t){const{document:e,element:n}=this;if(n){let r=n;if("symbol"===n.type&&(r=new Pi(e),r.attributes.viewBox=new ri(e,"viewBox",n.getAttribute("viewBox").getString()),r.attributes.preserveAspectRatio=new ri(e,"preserveAspectRatio",n.getAttribute("preserveAspectRatio").getString()),r.attributes.overflow=new ri(e,"overflow",n.getAttribute("overflow").getString()),r.children=n.children,n.styles.opacity=new ri(e,"opacity",this.calculateOpacity())),"svg"===r.type){const t=this.getStyle("width",!1,!0),n=this.getStyle("height",!1,!0);t.hasValue()&&(r.attributes.width=new ri(e,"width",t.getString())),n.hasValue()&&(r.attributes.height=new ri(e,"height",n.getString()))}const i=r.parent;r.parent=this,r.render(t),r.parent=i}}getBoundingBox(t){const{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){const{document:t,element:e}=this;return e?yi.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}},mask:Wi,clipPath:class extends mi{apply(t){const{document:e}=this,n=Reflect.getPrototypeOf(t),{beginPath:r,closePath:i}=t;n&&(n.beginPath=Qi,n.closePath=Qi),Reflect.apply(r,t,[]),this.children.forEach((r=>{if(!("path"in r))return;let s="elementTransform"in r?r.elementTransform():null;s||(s=yi.fromElement(e,r)),s&&s.apply(t),r.path(t),n&&(n.closePath=i),s&&s.unapply(t)})),Reflect.apply(i,t,[]),t.clip(),n&&(n.beginPath=r,n.closePath=i)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},filter:ji,feDropShadow:class extends mi{apply(t,e,n,r,i){}constructor(t,e,n){super(t,e,n),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},feMorphology:class extends mi{apply(t,e,n,r,i){}constructor(...t){super(...t),this.type="feMorphology"}},feComposite:class extends mi{apply(t,e,n,r,i){}constructor(...t){super(...t),this.type="feComposite"}},feColorMatrix:qi,feGaussianBlur:class extends mi{apply(t,e,n,r,i){const{document:s,blurRadius:a}=this,o=s.window?s.window.document.body:null,h=t.canvas;h.id=s.getUniqueId(),o&&(h.style.display="none",o.appendChild(h)),Or(h,e,n,r,i,a),o&&o.removeChild(h)}constructor(t,e,n){super(t,e,n),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},title:class extends mi{constructor(...t){super(...t),this.type="title"}},desc:class extends mi{constructor(...t){super(...t),this.type="desc"}}};class Zi{bindCreateImage(t,e){return"boolean"==typeof e?(n,r)=>t(n,"boolean"==typeof r?r:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:t}=this;return t[t.length-1]||12}set emSize(t){const{emSizeStack:e}=this;e.push(t)}popEmSize(){const{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every((t=>t.loaded))}isFontsLoaded(){return this.fonts.every((t=>t.loaded))}createDocumentElement(t){const e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){const e=t.nodeName.replace(/^[^:]+:/,""),n=Zi.elementTypes[e];return n?new n(this,t):new xi(this,t)}createTextNode(t){return new Ci(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=12,emSize:n=12,createCanvas:r=Zi.createCanvas,createImage:i=Zi.createImage,anonymousCrossOrigin:s}={}){this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=n,this.createCanvas=r,this.createImage=this.bindCreateImage(i,s),this.screen.wait((()=>this.isImagesLoaded())),this.screen.wait((()=>this.isFontsLoaded()))}}Zi.createCanvas=function(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n},Zi.createImage=async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.createElement("img");return e&&(n.crossOrigin="Anonymous"),new Promise(((e,r)=>{n.onload=()=>{e(n)},n.onerror=(t,e,n,i,s)=>{r(s)},n.src=t}))},Zi.elementTypes=Gi;class Ji{static async from(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new gi(n),i=await r.parse(e);return new Ji(t,i,n)}static fromString(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new gi(n).parseFromString(e);return new Ji(t,r,n)}fork(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ji.from(t,e,{...this.options,...n})}forkString(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ji.fromString(t,e,{...this.options,...n})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{documentElement:e,screen:n,options:r}=this;n.start(e,{enableRedraw:!0,...r,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,n)}constructor(t,e,n={}){this.parser=new gi(n),this.screen=new li(t,n),this.options=n;const r=new Zi(this,n),i=r.createDocumentElement(e);this.document=r,this.documentElement=i}}const Ki=t=>"string"!=typeof t?[]:JSON.parse(atob(t)),ts=(t,e)=>({...t,data:e.filter((t=>t.selected)).map((t=>({key:t.key})))}),es=(t,e)=>{const n=new URL(document.location);n.searchParams.set("data",((t,e)=>btoa(JSON.stringify(ts(t,e))))(t,e)),navigator.clipboard.writeText(n.toString())},ns=(t,e)=>{const n=JSON.stringify(ts(t,e)),r=window.URL.createObjectURL(new Blob([n]));is({file:r,name:"gyhbr",format:"json"})},rs=async(t,e,n)=>{const r=(new XMLSerializer).serializeToString(n),i=document.createElement("canvas"),s=i.getContext("2d");i.width=t,i.height=e;const a=Ji.fromString(s,r);await a.render();const o=i.toDataURL("image/png");is({file:o,name:"gyhbr",format:"png"})},is=({file:t,name:e,format:n})=>{let r=document.createElement("a");r.download=`${e}.${n}`,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)};var ss={};ss=new URL(s("27Lyk").resolve("bqd2F"),import.meta.url).toString();var as={};as=JSON.parse('{"version":"1.5","data":[{"key":"0-0"},{"key":"0-1"},{"key":"0-2"},{"key":"0-3"},{"key":"0-4"},{"key":"0-5"},{"key":"1-0"},{"key":"1-1"},{"key":"1-2"},{"key":"1-3"},{"key":"1-4"},{"key":"1-5"},{"key":"2-0"},{"key":"2-1"},{"key":"2-2"},{"key":"2-3"},{"key":"2-4"},{"key":"2-5"},{"key":"3-0"},{"key":"3-1"},{"key":"3-2"},{"key":"3-3"},{"key":"3-4"},{"key":"3-5"},{"key":"4-0"},{"key":"4-1"},{"key":"4-2"},{"key":"4-3"},{"key":"4-4"},{"key":"4-5"},{"key":"5-0"},{"key":"5-1"},{"key":"5-2"},{"key":"5-3"},{"key":"5-4"},{"key":"5-5"},{"key":"6-0"},{"key":"6-1"},{"key":"6-2"},{"key":"6-3"},{"key":"6-4"},{"key":"6-5"},{"key":"7-0"},{"key":"7-1"},{"key":"7-2"},{"key":"7-3"},{"key":"7-4"},{"key":"7-5"},{"key":"8-0"},{"key":"8-1"},{"key":"8-2"},{"key":"8-3"},{"key":"8-4"},{"key":"8-5"},{"key":"9-0"},{"key":"9-1"},{"key":"9-2"},{"key":"9-3"},{"key":"9-4"},{"key":"9-5"},{"key":"10-0"},{"key":"10-1"},{"key":"10-2"},{"key":"10-3"},{"key":"10-4"},{"key":"10-5"},{"key":"11-0"},{"key":"11-1"},{"key":"11-2"},{"key":"11-3"},{"key":"11-4"},{"key":"11-5"},{"key":"12-0"},{"key":"12-1"},{"key":"12-2"},{"key":"12-3"},{"key":"12-4"},{"key":"12-5"},{"key":"13-0"},{"key":"13-1"},{"key":"13-2"},{"key":"13-3"},{"key":"13-4"},{"key":"13-5"},{"key":"14-0"},{"key":"14-1"},{"key":"14-2"},{"key":"14-3"},{"key":"14-4"},{"key":"14-5"},{"key":"15-0"},{"key":"15-1"},{"key":"15-2"},{"key":"15-3"},{"key":"15-4"},{"key":"15-5"},{"key":"16-0"},{"key":"16-1"},{"key":"16-2"},{"key":"16-3"},{"key":"16-4"},{"key":"16-5"},{"key":"17-0"},{"key":"17-1"},{"key":"17-2"},{"key":"17-3"},{"key":"17-4"},{"key":"17-5"},{"key":"18-0"},{"key":"18-1"},{"key":"18-2"},{"key":"18-3"},{"key":"18-4"},{"key":"18-5"},{"key":"19-0"},{"key":"19-1"},{"key":"19-2"},{"key":"19-3"},{"key":"19-4"},{"key":"19-5"},{"key":"20-0"},{"key":"20-1"},{"key":"20-2"},{"key":"20-3"},{"key":"20-4"},{"key":"20-5"},{"key":"21-0"},{"key":"21-1"},{"key":"21-2"},{"key":"21-3"},{"key":"21-4"},{"key":"21-5"},{"key":"22-0"},{"key":"22-1"},{"key":"22-2"},{"key":"22-3"},{"key":"22-4"},{"key":"22-5"},{"key":"23-0"},{"key":"23-1"},{"key":"23-2"},{"key":"23-3"},{"key":"23-4"},{"key":"23-5"}]}'),function(){const t=new URL(document.location).searchParams,n=Ki(t.get("data")),r=e(as).data;r.forEach((t=>{t.selected=!(!n||!n.data)&&n.data.find((e=>e.key===t.key))}));const i=t=>e=>e.key.split("-")[t],s=i(0),a=i(1),o=4296,h=2271,u=115,l=325,c=document.getElementById("hbr-chart-container"),f=$22b18e23564de7e8$exports.select(c).append("svg").attr("viewBox","0 0 4296 2271");f.append("image").attr("href",e(ss)).attr("width",o).attr("height",h);const g=f.append("g").attr("transform",`translate(${u}, ${l})`),d=()=>{g.selectAll("rect").data(r).join("rect").attr("x",(t=>173*s(t))).attr("y",(t=>320*a(t))).attr("width",173).attr("height",320).attr("rx",8).attr("ry",8).attr("fill-opacity",0).attr("stroke",(t=>t.selected?"red":null)).attr("stroke-width",12).on("click",((t,e)=>{r.forEach((t=>{t.key===e.key&&(t.selected=!t.selected)})),d()}))};document.getElementById("button-copy-link").onclick=()=>{es(e(as),r),alert("已複製！")},document.getElementById("button-export-data").onclick=()=>{ns(e(as),r)},document.getElementById("button-export-image").onclick=()=>{rs(o,h,f.node())},d()}();
//# sourceMappingURL=index.ffe43587.js.map
