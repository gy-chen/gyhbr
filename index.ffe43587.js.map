{"mappings":"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IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClwCC,GAAW,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAgEvgC,SAASC,GAAuBC,EAAQC,EAAMC,EAAMC,EAAOC,GAKzD,GAJsB,iBAAXJ,IACTA,EAASl8B,SAASu8B,eAAeL,KAG9BA,GAA8B,WAApBL,GAAQK,MAA0B,eAAgBA,GAC/D,MAAM,IAAIhgB,UAAU,2EAGtB,IAAI7U,EAAU60B,EAAOM,WAAW,MAEhC,IACE,OAAOn1B,EAAQo1B,aAAaN,EAAMC,EAAMC,EAAOC,EACjD,CAAE,MAAOlhB,GACP,MAAM,IAAIpjB,MAAM,gCAAkCojB,EACpD,CACF,CAYA,SAASshB,GAAkBR,EAAQC,EAAMC,EAAMC,EAAOC,EAAQK,GAC5D,KAAIjnB,MAAMinB,IAAWA,EAAS,GAA9B,CAIAA,GAAU,EACV,IAAIC,EAAYX,GAAuBC,EAAQC,EAAMC,EAAMC,EAAOC,GAClEM,EAcF,SAA8BA,EAAWT,EAAMC,EAAMC,EAAOC,EAAQK,GAYlE,IAXA,IASIE,EATAC,EAASF,EAAU5/B,KACnB+/B,EAAM,EAAIJ,EAAS,EAEnBK,EAAcX,EAAQ,EACtBY,EAAeX,EAAS,EACxBY,EAAcP,EAAS,EACvBQ,EAAYD,GAAeA,EAAc,GAAK,EAC9CE,EAAa,IAAIC,GACjBC,EAAQF,EAGHxlC,EAAI,EAAGA,EAAImlC,EAAKnlC,IACvB0lC,EAAQA,EAAMh/B,KAAO,IAAI++B,GAErBzlC,IAAMslC,IACRL,EAAWS,GAIfA,EAAMh/B,KAAO8+B,EAQb,IAPA,IAAIG,EAAU,KACVC,EAAW,KACXC,EAAK,EACLC,EAAK,EACLC,EAAS5B,GAASY,GAClBiB,EAAS5B,GAASW,GAEb9kB,EAAI,EAAGA,EAAIykB,EAAQzkB,IAAK,CAC/BylB,EAAQF,EAMR,IALA,IAAIS,EAAKf,EAAOY,GACZI,EAAKhB,EAAOY,EAAK,GACjBK,EAAKjB,EAAOY,EAAK,GACjBM,EAAKlB,EAAOY,EAAK,GAEZ9O,EAAK,EAAGA,EAAKsO,EAAatO,IACjC0O,EAAMroB,EAAI4oB,EACVP,EAAMpoB,EAAI4oB,EACVR,EAAMr/B,EAAI8/B,EACVT,EAAMt/B,EAAIggC,EACVV,EAAQA,EAAMh/B,KAgBhB,IAbA,IAAI2/B,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAUnB,EAAcW,EACxBS,EAAUpB,EAAcY,EACxBS,EAAUrB,EAAca,EACxBS,EAAUtB,EAAcc,EACxBS,EAAOtB,EAAYU,EACnBa,EAAOvB,EAAYW,EACnBa,EAAOxB,EAAYY,EACnBa,EAAOzB,EAAYa,EAEda,EAAM,EAAGA,EAAM3B,EAAa2B,IAAO,CAC1C,IAAI3Q,EAAIwP,IAAOV,EAAc6B,EAAM7B,EAAc6B,IAAQ,GACrD5pB,EAAI6nB,EAAO5O,GACXhZ,EAAI4nB,EAAO5O,EAAI,GACfjwB,EAAI6+B,EAAO5O,EAAI,GACflwB,EAAI8+B,EAAO5O,EAAI,GACf4Q,EAAM5B,EAAc2B,EACxBJ,IAASnB,EAAMroB,EAAIA,GAAK6pB,EACxBJ,IAASpB,EAAMpoB,EAAIA,GAAK4pB,EACxBH,IAASrB,EAAMr/B,EAAIA,GAAK6gC,EACxBF,IAAStB,EAAMt/B,EAAIA,GAAK8gC,EACxBb,GAAUhpB,EACVipB,GAAUhpB,EACVipB,GAAUlgC,EACVmgC,GAAUpgC,EACVs/B,EAAQA,EAAMh/B,IAChB,CAEAi/B,EAAUH,EACVI,EAAWX,EAEX,IAAK,IAAI1hC,EAAI,EAAGA,EAAIkhC,EAAOlhC,IAAK,CAC9B,IAAI4jC,EAAYH,EAAOjB,GAAUC,EAGjC,GAFAd,EAAOY,EAAK,GAAKqB,EAEC,IAAdA,EAAiB,CACnB,IAAIC,EAAM,IAAMD,EAEhBjC,EAAOY,IAAOe,EAAOd,GAAUC,GAAUoB,EACzClC,EAAOY,EAAK,IAAMgB,EAAOf,GAAUC,GAAUoB,EAC7ClC,EAAOY,EAAK,IAAMiB,EAAOhB,GAAUC,GAAUoB,CAC/C,MACElC,EAAOY,GAAMZ,EAAOY,EAAK,GAAKZ,EAAOY,EAAK,GAAK,EAGjDe,GAAQJ,EACRK,GAAQJ,EACRK,GAAQJ,EACRK,GAAQJ,EACRH,GAAWd,EAAQtoB,EACnBqpB,GAAWf,EAAQroB,EACnBqpB,GAAWhB,EAAQt/B,EACnBugC,GAAWjB,EAAQv/B,EAEnB,IAAIihC,EAAK9jC,EAAIwhC,EAAS,EAEtBsC,EAAKxB,GAAMwB,EAAKjC,EAAciC,EAAKjC,IAAgB,EAKnDyB,GAJAR,GAAUV,EAAQtoB,EAAI6nB,EAAOmC,GAK7BP,GAJAR,GAAUX,EAAQroB,EAAI4nB,EAAOmC,EAAK,GAKlCN,GAJAR,GAAUZ,EAAQt/B,EAAI6+B,EAAOmC,EAAK,GAKlCL,GAJAR,GAAUb,EAAQv/B,EAAI8+B,EAAOmC,EAAK,GAKlC1B,EAAUA,EAAQj/B,KAClB,IAAI4gC,EAAY1B,EACZ2B,EAAKD,EAAUjqB,EACfqhB,EAAK4I,EAAUhqB,EACfuhB,GAAKyI,EAAUjhC,EACfswB,GAAK2Q,EAAUlhC,EACnBqgC,GAAWc,EACXb,GAAWhI,EACXiI,GAAW9H,GACX+H,GAAWjQ,GACX0P,GAAUkB,EACVjB,GAAU5H,EACV6H,GAAU1H,GACV2H,GAAU7P,GACViP,EAAWA,EAASl/B,KACpBo/B,GAAM,CACR,CAEAD,GAAMpB,CACR,CAEA,IAAK,IAAI+C,GAAK,EAAGA,GAAK/C,EAAO+C,KAAM,CAGjC,IAAIC,GAAMvC,EAFVY,EAAK0B,IAAM,GAGPE,GAAMxC,EAAOY,EAAK,GAClB6B,GAAMzC,EAAOY,EAAK,GAClB8B,GAAM1C,EAAOY,EAAK,GAClB+B,GAAWvC,EAAcmC,GACzBK,GAAWxC,EAAcoC,GACzBK,GAAWzC,EAAcqC,GACzBK,GAAW1C,EAAcsC,GACzBK,GAAQ1C,EAAYkC,GACpBS,GAAQ3C,EAAYmC,GACpBS,GAAQ5C,EAAYoC,GACpBS,GAAQ7C,EAAYqC,GAExBlC,EAAQF,EAER,IAAK,IAAI6C,GAAM,EAAGA,GAAM/C,EAAa+C,KACnC3C,EAAMroB,EAAIoqB,GACV/B,EAAMpoB,EAAIoqB,GACVhC,EAAMr/B,EAAIshC,GACVjC,EAAMt/B,EAAIwhC,GACVlC,EAAQA,EAAMh/B,KAShB,IANA,IAAI4hC,GAAK7D,EACL8D,GAAU,EACVC,GAAU,EACVC,GAAU,EACVC,GAAU,EAELC,GAAM,EAAGA,IAAO5D,EAAQ4D,KAAO,CACtC7C,EAAKwC,GAAKd,IAAM,EAEhB,IAAIoB,GAAOtD,EAAcqD,GAEzBV,KAAUvC,EAAMroB,EAAIoqB,GAAMvC,EAAOY,IAAO8C,GACxCV,KAAUxC,EAAMpoB,EAAIoqB,GAAMxC,EAAOY,EAAK,IAAM8C,GAC5CT,KAAUzC,EAAMr/B,EAAIshC,GAAMzC,EAAOY,EAAK,IAAM8C,GAC5CR,KAAU1C,EAAMt/B,EAAIwhC,GAAM1C,EAAOY,EAAK,IAAM8C,GAC5CF,IAAWjB,GACXc,IAAWb,GACXc,IAAWb,GACXc,IAAWb,GACXlC,EAAQA,EAAMh/B,KAEViiC,GAAMtD,IACRiD,IAAM7D,EAEV,CAEAqB,EAAK0B,GACL7B,EAAUH,EACVI,EAAWX,EAEX,IAAK,IAAI4D,GAAK,EAAGA,GAAKnE,EAAQmE,KAAM,CAClC,IAAIC,GAAMhD,GAAM,EAEhBZ,EAAO4D,GAAM,GAAKlB,GAAMQ,GAAQrC,GAAUC,EAEtC4B,GAAM,GACRA,GAAM,IAAMA,GACZ1C,EAAO4D,KAAQb,GAAQlC,GAAUC,GAAU4B,GAC3C1C,EAAO4D,GAAM,IAAMZ,GAAQnC,GAAUC,GAAU4B,GAC/C1C,EAAO4D,GAAM,IAAMX,GAAQpC,GAAUC,GAAU4B,IAE/C1C,EAAO4D,IAAO5D,EAAO4D,GAAM,GAAK5D,EAAO4D,GAAM,GAAK,EAGpDb,IAASJ,GACTK,IAASJ,GACTK,IAASJ,GACTK,IAASJ,GACTH,IAAYlC,EAAQtoB,EACpByqB,IAAYnC,EAAQroB,EACpByqB,IAAYpC,EAAQt/B,EACpB2hC,IAAYrC,EAAQv/B,EACpB0iC,GAAMtB,KAAOsB,GAAMD,GAAKvD,GAAeD,EAAeyD,GAAMzD,GAAgBZ,GAAS,EACrFwD,IAASS,IAAW/C,EAAQtoB,EAAI6nB,EAAO4D,IACvCZ,IAASK,IAAW5C,EAAQroB,EAAI4nB,EAAO4D,GAAM,GAC7CX,IAASK,IAAW7C,EAAQt/B,EAAI6+B,EAAO4D,GAAM,GAC7CV,IAASK,IAAW9C,EAAQv/B,EAAI8+B,EAAO4D,GAAM,GAC7CnD,EAAUA,EAAQj/B,KAClBmhC,IAAYJ,GAAM7B,EAASvoB,EAC3ByqB,IAAYJ,GAAM9B,EAAStoB,EAC3ByqB,IAAYJ,GAAM/B,EAASv/B,EAC3B2hC,IAAYJ,GAAMhC,EAASx/B,EAC3BsiC,IAAWjB,GACXc,IAAWb,GACXc,IAAWb,GACXc,IAAWb,GACXhC,EAAWA,EAASl/B,KACpBo/B,GAAMrB,CACR,CACF,CAEA,OAAOO,CACT,CApPc+D,CAAqB/D,EAAWT,EAAMC,EAAMC,EAAOC,EAAQK,GACvET,EAAOM,WAAW,MAAMoE,aAAahE,EAAWT,EAAMC,EANpD,CAOJ,CAmcA,IAAIiB,GAIJ,SAASwD,KA/lBT,SAAyBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAI7kB,UAAU,oCAExB,CA4lBE8kB,CAAgBloC,KAAM+nC,GAEtB/nC,KAAKmc,EAAI,EACTnc,KAAKoc,EAAI,EACTpc,KAAKmF,EAAI,EACTnF,KAAKkF,EAAI,EACTlF,KAAKwF,KAAO,IACd,EChnBgB2iC,YAAe3S,GAC7B,OAAOA,EAAIhC,QAAO,kBAAoB,IACxC,CAyBgB4U,YAAU5S,GACxB,MAAM/yB,EAAU+yB,EAAIpoB,MAApB,sDAEA,OAAO3K,EAAUA,EAAQvB,IAAIgzB,YAAc,EAC7C,CAsBA,MAAMmU,GAAN,YAoBgBC,YAAiBC,GAK/B,MAAMC,EAAQ,yCAA4C3sB,KAAK0sB,GAE/D,OAAKC,IAIEA,EAAS,IAAMA,EAAS,IAAMA,EAAS,KAHrC,EAIX,CC1FA,MAAMC,GAAN,gBACMC,GAAN,mBACMC,GAAN,oBACMC,GAAN,8DACMC,GAAN,uBACMC,GAAN,mBACMC,GAAN,kBAESC,YAAkBlnC,EAAkBmnC,GAC3C,MAAMxmC,EAAUwmC,EAAMptB,KAAK/Z,GAE3B,OAAKW,EAIE,CAACX,EAAS0xB,QAAQyV,EAAO,KAAMxmC,EAAQ1D,QAHrC,CAAC+C,EAAU,EAItB,CChBY,MAAConC,GAAc,KAOXC,YAAgBriC,GAC9B,OAAO8H,KAAK+W,KAAK/W,KAAK4P,IAAI1X,EAAE,GAAI,GAAK8H,KAAK4P,IAAI1X,EAAE,GAAI,GACtD,CAQgBsiC,YAAa3b,EAAgB3mB,GAC3C,OAAQ2mB,EAAE,GAAK3mB,EAAE,GAAK2mB,EAAE,GAAK3mB,EAAE,KAAOqiC,GAAgB1b,GAAK0b,GAAgBriC,GAC7E,CAQgBuiC,YAAa5b,EAAgB3mB,GAC3C,OAAQ2mB,EAAE,GAAK3mB,EAAE,GAAK2mB,EAAE,GAAK3mB,EAAE,IAAC,EAAS,GAAK8H,KAAK06B,KAAKF,GAAa3b,EAAG3mB,GAC1E,CAEgByiC,YAAI7pC,GAClB,OAAOA,EAAIA,EAAIA,CACjB,CAEgB8pC,YAAI9pC,GAClB,OAAO,EAAIA,EAAIA,GAAK,EAAIA,EAC1B,CAEgB+pC,YAAI/pC,GAClB,OAAO,EAAIA,GAAK,EAAIA,IAAM,EAAIA,EAChC,CAEgBgqC,YAAIhqC,GAClB,OAAQ,EAAIA,IAAM,EAAIA,IAAM,EAAIA,EAClC,CAEgBiqC,YAAIjqC,GAClB,OAAOA,EAAIA,CACb,CAEgBkqC,YAAIlqC,GAClB,OAAO,EAAIA,GAAK,EAAIA,EACtB,CAEgBmqC,YAAInqC,GAClB,OAAQ,EAAIA,IAAM,EAAIA,EACxB,CC7CaoqC,SACJr6B,aAAMvI,GACX,OAAO,IAAI4iC,GAAS5iC,EAAU,QAAS,GACxC,CAwBDjG,QAAM8oC,MAASnqC,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,IAChB,MACEsH,WAAQ/G,KACRA,GACEH,KAEJ,OAAOmoC,GAAenoC,KAAKgqC,aACxBhpC,OACAC,MAAM8oC,GACN7oC,KAAI1B,GAAS,IAAIsqC,GAAiB5iC,EAAU/G,EAAMX,IACtD,CAEDyqC,SAASC,GACP,MAAM1qC,EAAQQ,KAAKR,MAEnB,OAAiB,OAAVA,GACQ,KAAVA,IACC0qC,GAAyB,IAAV1qC,SACC,IAAVA,CACb,CAED2qC,SAASC,GACP,MAAM5qC,MAAEA,GAAUQ,KACZg6B,EAA0B,iBAAVx6B,EAEtB,OAAKw6B,GAAWoQ,EAITA,EAAOtqC,KAAKN,GAHVw6B,CAIV,CAEDqQ,kBACE,OAAOrqC,KAAKmqC,SAAZ,SACD,CAEDG,WACE,IAAKtqC,KAAKiqC,WACR,OAAO,EAGT,MAAMM,EAAWvqC,KAAKgqC,YAEtB,QAAQ,GACN,KAAKO,EAASC,SAAS,MACvB,eAAgB1qC,KAAKyqC,GACnB,OAAO,E,QAGP,OAAO,EAEZ,CAEDE,SAASjrC,GAEP,OADAQ,KAAKR,MAAQA,EACNQ,IACR,CAED0qC,SAASC,GACP,YAAmB,IAARA,GAAuB3qC,KAAKiqC,WAC9BjqC,KAAKR,MAGPmrC,CACR,CAEDC,UAAUD,GACR,IAAK3qC,KAAKiqC,WACR,YAAmB,IAARU,EACF,EAIFzW,WAAWyW,GAGpB,MAAMnrC,MAAEA,GAAUQ,KAElB,IAAIL,EAAIu0B,WAAW10B,GAMnB,OAJIQ,KAAKmqC,SAAQ,QACfxqC,GAAK,KAGAA,CACR,CAEDqqC,UAAUW,GACR,YAAmB,IAARA,GAAuB3qC,KAAKiqC,gBACR,IAAfjqC,KAAKR,MACf,GACA81B,OAAOt1B,KAAKR,OAGX81B,OAAOqV,EACf,CAEDE,SAASF,GACP,IAAIvrB,EAAQpf,KAAKgqC,UAAUW,GAE3B,OAAI3qC,KAAK8qC,oBAIT9qC,KAAK8qC,mBAAoB,EACzB1rB,EH/CY2rB,SAAe3rB,GAC7B,IAAKA,EAAM4rB,WAAW,OACpB,OAAO5rB,EAGT,IAAI6rB,EAAW,EAQf,OAPwB7rB,EAAMoU,QAAO,iBAElC0X,EAAKC,IAAOF,KAAoBE,EAC7B7V,OAAO1mB,KAAKkO,MAAMoX,WAAWgX,KAC7BA,GAIR,CGiCYH,CAAe3rB,GACvBpf,KAAKR,MAAQ4f,GALJA,CAQV,CAEDgsB,SACE,OAAO,EACR,CAEDC,SACE,OAAOrrC,KAAKkH,SAASokC,UACtB,CAEDC,QACE,OAAOvrC,KAAKkH,SAASskC,MACtB,CAEDC,WACE,OAAOzrC,KAAKgqC,YAAYxW,QAAO,WAAa,GAC7C,CAIDkY,UAAUC,GAAmCC,MAAchsC,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GACzD,IAAKI,KAAKiqC,WACR,OAAO,EAGT,MAAO4B,EAAMC,GAA0C,kBAArBH,EAC9B,MAACppB,EAAWopB,GACZ,CAACA,IACCI,SAAEA,GAAa/rC,KAAKkH,SAAS8kC,OAEnC,QAAQ,GACN,KAAKhsC,KAAKmqC,SAAV,SACE,OAAOnqC,KAAK4qC,YACR,IACAh8B,KAAKC,IACLk9B,EAASE,YAAY,KACrBF,EAASE,YAAY,MAG3B,KAAKjsC,KAAKmqC,SAAV,SACE,OAAOnqC,KAAK4qC,YACR,IACAh8B,KAAKiO,IACLkvB,EAASE,YAAY,KACrBF,EAASE,YAAY,MAG3B,KAAKjsC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YACR,IACAmB,EAASE,YAAY,KAE3B,KAAKjsC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YACR,IACAmB,EAASE,YAAY,KAE3B,KAAKjsC,KAAKmqC,SAAV,QACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKqrC,SAEjC,KAAKrrC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKurC,QAEjC,KAAKvrC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKurC,QAAwB,EAEzD,KAAKvrC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAEd,KAAK5qC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKorC,UAA0B,EAAM,IAEjE,KAAKprC,KAAKmqC,SAAV,OACE,OAA0B,GAAnBnqC,KAAK4qC,YAEd,KAAK5qC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKorC,SAAyB,KAE1D,KAAKprC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKorC,SAAyB,KAE1D,KAAKprC,KAAKmqC,SAAV,OACE,OAAOnqC,KAAK4qC,YAAc5qC,KAAKorC,SAEjC,KAAKprC,KAAKmqC,SAAQ,OAAU2B,EAC1B,OAAO9rC,KAAK4qC,YAAc5qC,KAAKurC,QAEjC,KAAKvrC,KAAKmqC,SAAV,MACE,OAAOnqC,KAAK4qC,YAAcmB,EAASE,YAAYJ,G,QAExC,CACP,MAAMlsC,EAAIK,KAAK4qC,YAEf,OAAIgB,GAAkBjsC,EAAI,EACjBA,EAAIosC,EAASE,YAAYJ,GAG3BlsC,CACR,EAEJ,CAEDusC,kBACE,OAAKlsC,KAAKiqC,WAINjqC,KAAKmqC,SAAQ,OACRnqC,KAAK4qC,YAGY,IAAnB5qC,KAAK4qC,YAPH,CAQV,CAEDuB,aACE,IAAKnsC,KAAKiqC,WACR,OAAO,EAGT,QAAQ,GACN,KAAKjqC,KAAKmqC,SAAV,QACE,OAAOnqC,KAAK4qC,aAAeh8B,KAAKsW,GAAK,KAEvC,KAAKllB,KAAKmqC,SAAV,SACE,OAAOnqC,KAAK4qC,aAAeh8B,KAAKsW,GAAK,KAEvC,KAAKllB,KAAKmqC,SAAV,QACE,OAAOnqC,KAAK4qC,Y,QAGZ,OAAO5qC,KAAK4qC,aAAeh8B,KAAKsW,GAAK,KAE1C,CAEDknB,gBACE,MAAM7B,EAAWvqC,KAAKgqC,YAChB58B,EAAK,aAAgByO,KAAK0uB,GAC1BpqC,GAAOiN,iBAAQ,KAAMm9B,EAE3B,OAAOvqC,KAAKkH,SAASmlC,YAAYlsC,EAClC,CAEDmsC,uBAAuBC,EAAgCjwB,GACrD,IAAIquB,EAAM3qC,KAAKosC,gBAEf,IAAKzB,EACH,OAAO,KAIT,GAAkC,mBAAvBA,EAAI6B,gBAAiC,mBAAoBD,EAClE,OAAO5B,EAAI6B,eACTxsC,KAAKkH,SAASulC,IACdF,EACAjwB,GAKJ,GAAiC,mBAAtBquB,EAAI+B,cAA8B,CAC3C,GAAI/B,EAAIgC,mBAAmB1C,WAAY,CACrC,MAAM2C,EAAmBjC,EAAIpiC,aAAa,oBAE1CoiC,EAAMA,EAAIgC,mBAAmBP,gBAEzBzB,GAAOiC,EAAiB3C,YAC1BU,EAAIpiC,aAAa,oBAAoB,GAAMkiC,SAASmC,EAAiBptC,MAExE,CAED,GAAImrC,EACF,OAAOA,EAAI+B,cAAc1sC,KAAKkH,SAASulC,IAAKF,EAASjwB,EAExD,CAED,OAAO,IACR,CAEDuwB,kBACE,IAAK7sC,KAAKiqC,WACR,OAAO,KAGT,MAAM3lC,EAAMtE,KAAKgqC,YAEjB,OAAOF,GAASgD,oBAAoBxoC,IAAQ,IAC7C,CAEDyoC,WAAWzwB,GACT,IAAI9c,EAAQQ,KAAK6qC,WACjB,MAAMpb,EAAMjwB,EAAMT,OAClB,IAAIiuC,EAAS,EAGb,IAAK,IAAIluC,EAAI,EAAGA,EAAI2wB,IACD,MAAbjwB,EAAMV,IACRkuC,IAGa,IAAXA,GALmBluC,KAUzB,GAAIwd,EAAQ2tB,YAAcjqC,KAAKmqC,YAAyB,IAAX6C,EAAc,CACzD,MAAM5tB,EAAQ,IAAIwV,MAAJ,CAAap1B,GAEvB4f,EAAMgU,KACRhU,EAAMiU,MAAQ/W,EAAQsuB,YACtBprC,EAAQ4f,EAAMiV,SAEjB,CAED,OAAO,IAAIyV,GAAiB9pC,KAAKkH,SAAUlH,KAAKG,KAAMX,EACvD,CAxUkB0H,cACA/G,EACTX,GAFS0H,gBACA/G,YACTX,aAxBLQ,KAmBG8qC,mBAAoB,CAMxB,EAzBOhB,GAKKgD,oBAA8C,CAC5DG,SAAY,aACZ,cAAe,MACf,mBAAoB,MACpBC,OAAU,SACVC,QAAW,SACX,aAAc,SACd,kBAAmB,SACnBC,YAAe,cACfC,WAAc,aACdC,QAAW,UACXC,aAAgB,cCtBPC,SAMXC,QACEztC,KAAK0tC,UAAY,EAClB,CAEDC,WAAWpK,EAAeC,GACxBxjC,KAAK0tC,UAAUjtC,KAAK,C,MAClB8iC,E,OACAC,GAEH,CAEDoK,gBACE5tC,KAAK0tC,UAAUxnB,KAChB,CAED2nB,UACE,MAAOxV,GAAQr4B,KAAK0tC,UAEpB,OAAKrV,GACIyV,IAIV,CAEDC,aACE,MAAML,UAAEA,GAAc1tC,KAChBguC,EAAUN,EAAUA,EAAU3uC,OAAS,GAE7C,OAAKivC,GACIF,IAIV,CAEGvK,YACF,OAAOvjC,KAAK+tC,aAAaxK,KAC1B,CAEGC,aACF,OAAOxjC,KAAK+tC,aAAavK,MAC1B,CAEDyI,YAAYptB,GACV,MAAiB,iBAANA,EACFA,EAGC,MAANA,EACK7e,KAAKujC,MAGJ,MAAN1kB,EACK7e,KAAKwjC,OAGP50B,KAAK+W,KACV/W,KAAK4P,IAAIxe,KAAKujC,MAAO,GAAK30B,KAAK4P,IAAIxe,KAAKwjC,OAAQ,IAC9C50B,KAAK+W,KAAK,EACf,C,cAlEI3lB,KAIL0tC,UAA6B,E,EAiEtBI,cACP,MAAO,CACLvK,MAAOiK,GAASS,uBAChBzK,OAAQgK,GAASU,wBAErB,CA1EaV,GACJS,uBAAyB,IADrBT,GAEJU,wBAA0B,ICPtBC,SACJ7uC,aAAMyuB,GAAeqgB,MAAYxuC,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,EACzC,MAAOyC,EAAI+rC,EAAcrvB,EAAIqvB,GAAgBhG,GAAUra,GAEvD,OAAO,IAAIogB,GAAM9rC,EAAG0c,EACrB,CAEMsvB,kBAAW7nB,GAAe4nB,MAAYxuC,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,EAC9C,MAAOyC,EAAI+rC,EAAcrvB,EAAI1c,GAAK+lC,GAAU5hB,GAE5C,OAAO,IAAI2nB,GAAM9rC,EAAG0c,EACrB,CAEMuvB,iBAAU1L,GACf,MAAM2L,EAASnG,GAAUxF,GACnBnT,EAAM8e,EAAOxvC,OACbyvC,EAAsB,GAE5B,IAAK,IAAI1vC,EAAI,EAAGA,EAAI2wB,EAAK3wB,GAAK,EAC5B0vC,EAAW/tC,KAAK,IAAI0tC,GAAMI,EAAOzvC,GAAIyvC,EAAOzvC,EAAI,KAGlD,OAAO0vC,CACR,CAODC,QAAQ1gB,GACN,OAAOnf,KAAKgX,MAAMmI,EAAMhP,EAAI/e,KAAK+e,EAAGgP,EAAM1rB,EAAIrC,KAAKqC,EACpD,CAEDqsC,eAAe5nB,GACb,MAAMzkB,EACJA,EAAC0c,EACDA,GACE/e,KACE2uC,EAAKtsC,EAAIykB,EAAU,GAAK/H,EAAI+H,EAAU,GAAKA,EAAU,GACrDsgB,EAAK/kC,EAAIykB,EAAU,GAAK/H,EAAI+H,EAAU,GAAKA,EAAU,GAE3D9mB,KAAKqC,EAAIssC,EACT3uC,KAAK+e,EAAIqoB,CACV,CAlBQ/kC,cACA0c,GADA1c,SACA0c,QACL,ECbO6vB,SAYXC,YACE,OAAO7uC,KAAK8uC,OACb,CAEDzvB,QACE,GAAIrf,KAAK8uC,QACP,OAGF,MAAM9C,OACJA,EAAM+C,QACNA,EAAOC,YACPA,GACEhvC,KACEojC,EAAS4I,EAAOS,IAAIrJ,OAE1BA,EAAO6L,QAAUF,EACjB3L,EAAO8L,YAAcF,EACrBhvC,KAAK8uC,SAAU,CAChB,CAED3rB,OACE,IAAKnjB,KAAK8uC,QACR,OAGF,MAAM1L,EAASpjC,KAAKgsC,OAAOS,IAAIrJ,OAE/BpjC,KAAK8uC,SAAU,EACf1L,EAAO6L,QAAU,KACjB7L,EAAO8L,YAAc,IACtB,CAEDC,YACE,OAAOnvC,KAAK8uC,SAAW9uC,KAAKovC,OAAOrwC,OAAS,CAC7C,CAEDswC,YACE,IAAKrvC,KAAK8uC,QACR,OAGF,MACE9C,OAAQ9kC,EAAQkoC,OAChBA,EAAME,cACNA,GACEtvC,MACEoH,MAAEA,GAAUF,EAASulC,IAAIrJ,OAC/B,IAAImJ,EAGAnlC,IACFA,EAAMmoC,OAAS,IAGjBH,EAAOI,SAAO,CAAAC,EAAW3wC,KAAT,IAAA4wB,IAAEA,GAAF+f,EAGPlD,IAFPA,EAAU+C,EAAcxwC,GAEjBytC,GACL7c,EAAI6c,GACJA,EAAUA,EAAQhpC,MACnB,IAIHvD,KAAKovC,OAAS,GACdpvC,KAAKsvC,cAAgB,EACtB,CAEDI,UAAUnD,EAAkBE,GAC1B,IAAKzsC,KAAK8uC,UAAYrC,EACpB,OAGF,MAAM2C,OACJA,EAAME,cACNA,GACEtvC,KAEJovC,EAAOI,SAAO,CAAAC,EAAY3wC,KAAV,IAAAuD,EAAEA,EAAC0c,EAAEA,GAAL0wB,GAETH,EAAcxwC,IAAM2tC,EAAIkD,eAAiBlD,EAAIkD,cAActtC,EAAG0c,KACjEuwB,EAAcxwC,GAAKytC,KAGxB,CAEDqD,iBAAiBrD,EAAkBsD,GACjC,IAAK7vC,KAAK8uC,UAAYe,EACpB,OAGF,MAAMT,OACJA,EAAME,cACNA,GACEtvC,KAEJovC,EAAOI,SAAO,CAAAC,EAAY3wC,KAAV,IAAAuD,EAAEA,EAAC0c,EAAEA,GAAL0wB,GACTH,EAAcxwC,IAAM+wC,EAAYC,aAAaztC,EAAG0c,KACnDuwB,EAAcxwC,GAAKytC,KAGxB,CAEOwD,MAAM1tC,EAAW0c,GACvB,MACEpT,SAAM8gC,IACNA,GACEzsC,KAAKgsC,OACHje,EAAQ,IAAIogB,GAAM9rC,EAAG0c,GAC3B,IAAIwtB,EAAUE,EAAIrJ,OAEXmJ,QACLxe,EAAM1rB,GAAKkqC,EAAQyD,WACnBjiB,EAAMhP,GAAKwtB,EAAQ0D,UACnB1D,EAAUA,EAAQ2D,aAWpB,OARIvkC,iBAAQwkC,WACVpiB,EAAM1rB,GAAKsJ,EAAOwkC,UAGhBxkC,iBAAQykC,WACVriB,EAAMhP,GAAKpT,EAAOykC,SAGbriB,CACR,CAEOghB,QAAQzjC,GACd,MAAMjJ,EACJA,EAAC0c,EACDA,GACE/e,KAAK+vC,MACPzkC,EAAM+kC,QACN/kC,EAAMglC,SAGRtwC,KAAKovC,OAAO3uC,KAAK,CACfP,KAAM,U,EACNmC,E,EACA0c,EACA2Q,IAAI6gB,GACEA,EAAYxB,SACdwB,EAAYxB,SAEf,GAEJ,CAEOC,YAAY1jC,GAClB,MAAMjJ,EACJA,EAAC0c,EACDA,GACE/e,KAAK+vC,MACPzkC,EAAM+kC,QACN/kC,EAAMglC,SAGRtwC,KAAKovC,OAAO3uC,KAAK,CACfP,KAAM,c,EACNmC,E,EACA0c,EACA2Q,IAAI6gB,GACEA,EAAYvB,aACduB,EAAYvB,aAEf,GAEJ,CA/KkBhD,6BANdhsC,KACG8uC,SAAU,EADb9uC,KAEGovC,OAAmB,GAFtBpvC,KAGGsvC,cAA2B,GAKjCtvC,KAAK+uC,QAAU/uC,KAAK+uC,QAAQvhC,KAAKxN,MACjCA,KAAKgvC,YAAchvC,KAAKgvC,YAAYxhC,KAAKxN,KAC1C,EC6DH,MAAMwwC,GAAkC,oBAAX7kC,OACzBA,OACA,KACE8kC,GAAgC,oBAAVC,MACxBA,MAAMljC,UAAK+U,QACXA,EAESouB,SAmCXC,KAAKC,GACH7wC,KAAK8wC,MAAMrwC,KAAKowC,EACjB,CAEDE,QAEE,OAAK/wC,KAAKgxC,aAIHhxC,KAAKgxC,aAHH/lB,QAAQC,SAIlB,CAED+lB,UACE,GAAIjxC,KAAKkxC,YACP,OAAO,EAGT,MAAMA,EAAclxC,KAAK8wC,MAAMjnB,OAAMhqB,GAAKA,MAY1C,OAVIqxC,IACFlxC,KAAK8wC,MAAQ,GAET9wC,KAAKmxC,cACPnxC,KAAKmxC,gBAITnxC,KAAKkxC,YAAcA,EAEZA,CACR,CAEDE,YAAY3E,GAEVA,EAAI4E,YAAc,gBAClB5E,EAAI6E,QAAU,OACd7E,EAAI8E,SAAW,QACf9E,EAAI+E,WAAa,CAClB,CAEDC,WAAWhC,GAAA,IACTvoC,WAAQulC,IACRA,EAAGiF,YACHA,EAAWnO,MACXA,EAAKoO,aACLA,EAAYnO,OACZA,EAAMoO,cACNA,EAAaxT,KACbA,EAAO,EAAAI,KACPA,EAAO,EAAAqT,KACPA,EAAIC,KACJA,EAAIC,KACJA,GAAO,EAAKC,MACZA,EAAQ,EAAAC,MACRA,EAAQ,GAdCxC,EAiBT,MAAMyC,EAAmB/J,GAAeuJ,GAAale,QAAO,WAAa,KAClE2e,EAAkBC,GAA0BF,EAAiBjxC,MAAM,KACpEoxC,EAAQF,GAAoB,WAC5BG,EAAcF,GAA0B,OAExC5sB,EAAS+d,EAAQoO,EACjBlsB,EAAS+d,EAASoO,EAClBW,EAAW3jC,KAAKC,IAAI2W,EAAQC,GAC5B+sB,EAAW5jC,KAAKiO,IAAI2I,EAAQC,GAClC,IAAIgtB,EAAoBd,EACpBe,EAAqBd,EAEL,SAAhBU,IACFG,GAAqBF,EACrBG,GAAsBH,GAGJ,UAAhBD,IACFG,GAAqBD,EACrBE,GAAsBF,GAGxB,MAAMG,EAAW,IAAI7I,GAAS5iC,EAAU,OAAQ2qC,GAC1Ce,EAAW,IAAI9I,GAAS5iC,EAAU,OAAQ4qC,GAC1Ce,EAAUF,EAAS1I,YAAc2I,EAAS3I,WAShD,GAPI4I,GACFpG,EAAIlmB,WACDgsB,EAAWI,EAASjH,UAAU,MAC9B6G,EAAWK,EAASlH,UAAU,MAI/BqG,EAAM,CACR,MAAMe,EAAcP,EAAWP,EACzBe,EAAcR,EAAWN,EAE/BxF,EAAIuG,YACJvG,EAAIwG,OAAOH,EAAaC,GACxBtG,EAAIyG,OAAO3P,EAAOwP,GAClBtG,EAAIyG,OAAO3P,EAAOC,GAClBiJ,EAAIyG,OAAOJ,EAAatP,GACxBiJ,EAAI0G,YACJ1G,EAAIsF,MACL,CAED,IAAKc,EAAS,CACZ,MAAMO,EAA6B,SAAhBd,GAA0BC,IAAa9sB,EACpD4tB,EAA8B,UAAhBf,GAA2BE,IAAa/sB,EACtD6tB,EAA6B,SAAhBhB,GAA0BC,IAAa/sB,EACpD+tB,EAA8B,UAAhBjB,GAA2BE,IAAahtB,EAExD6sB,EAAMrH,WAAW,UACnBoI,GAAcC,IAEd5G,EAAIlmB,UAAUgd,EAAQ,EAAMkP,EAAoB,EAAK,GAGnDJ,EAAM7H,SAAS,UACjB8I,GAAcC,IAEd9G,EAAIlmB,UAAU,EAAGid,EAAS,EAAMkP,EAAqB,GAGnDL,EAAMrH,WAAW,UACnBoI,GAAcC,IAEd5G,EAAIlmB,UAAUgd,EAAQkP,EAAmB,GAGvCJ,EAAM7H,SAAS,UACjB8I,GAAcC,IAEd9G,EAAIlmB,UAAU,EAAGid,EAASkP,EAE7B,CAGD,QAAQ,GACN,IAAe,SAAVL,EACH5F,EAAIjmB,MAAMhB,EAAQC,GAClB,MAEF,IAAqB,SAAhB6sB,EACH7F,EAAIjmB,MAAM+rB,EAAUA,GACpB,MAEF,IAAqB,UAAhBD,EACH7F,EAAIjmB,MAAMgsB,EAAUA,GAKxB/F,EAAIlmB,WAAW6X,GAAOI,EACvB,CAEDnf,MACEktB,GACA,IAAAiH,aACEA,GAAe,EAAKC,YACpBA,GAAc,EAAKC,gBACnBA,GAAkB,EAAKC,iBACvBA,GAAmB,EAAKC,YACxBA,GAAc,EAAKC,YACnBA,EAAWC,WACXA,EAAUC,YACVA,EAAWC,QACXA,EAAOC,QACPA,GACoBr0C,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GAEzB,MAAMs0C,MAAEA,GAAUl0C,KACZm0C,EAAgB,IAAOxD,GAAOyD,UAoBpC,GAlBAp0C,KAAKkxC,aAAc,EACnBlxC,KAAKm0C,cAAgBA,EACrBn0C,KAAKgxC,aAAe,IAAI/lB,SAASC,IAC/BlrB,KAAKmxC,aAAejmB,KAGlBlrB,KAAKixC,WACPjxC,KAAKq0C,OACH9H,EACAoH,EACAC,EACAE,EACAC,EACAC,EACAC,IAICT,EACH,OAGF,IAAIlyB,EAAMC,KAAKD,MACXgzB,EAAOhzB,EACPizB,EAAQ,EACZ,MAAMhwB,EAAI,KACRjD,EAAMC,KAAKD,MACXizB,EAAQjzB,EAAMgzB,EAEVC,GAASJ,IACXG,EAAOhzB,EAAOizB,EAAQJ,EAElBn0C,KAAKw0C,aACPd,EACAG,KAEA7zC,KAAKq0C,OACH9H,EACAoH,EACAC,EACAE,EACAC,EACAC,EACAC,GAEFC,EAAM7E,cAIVrvC,KAAKy0C,WAAahzB,MAAsB8C,IAGrCkvB,GACHS,EAAM70B,QAGRrf,KAAKy0C,WAAahzB,MAAsB8C,EACzC,CAEDpB,OACMnjB,KAAKy0C,aACPhzB,MAAsB2J,OAAOprB,KAAKy0C,YAClCz0C,KAAKy0C,WAAa,MAGpBz0C,KAAKk0C,MAAM/wB,MACZ,CAEOqxB,aACNd,EACAG,GAGA,IAAKH,EAAiB,CACpB,MAAMS,cAAEA,GAAkBn0C,KAM1B,GALqBA,KAAK00C,WAAWC,QAAM,CACxCH,EAAcI,IAAcA,EAAUvxC,OAAO8wC,IAAkBK,IAChE,GAIA,OAAO,CAEV,CAGD,QAA2B,mBAAhBX,IAA8BA,SAIpC7zC,KAAKkxC,cAAelxC,KAAKixC,cAK1BjxC,KAAKk0C,MAAM/E,YAKhB,CAEOkF,OACN9H,EACAoH,EACAC,EACAE,EACAC,EACAC,EACAC,GAEA,MAAMlI,SACJA,EAAQU,IACRA,EAAGoI,cACHA,GACE70C,KACEojC,EAASqJ,EAAIrJ,OAEnB2I,EAAS0B,QAELrK,EAAOG,OAASH,EAAOI,QACzBuI,EAAS4B,WAAWvK,EAAOG,MAAOH,EAAOI,QAG3C,MAAMsR,EAAavI,EAAQwI,SAAS,SAC9BC,EAAczI,EAAQwI,SAAS,WAEhCpB,IACHkB,GACyB,iBAAff,GAAkD,iBAAhBC,KAGxCe,EAAW7K,aACb7G,EAAOG,MAAQuR,EAAWpJ,UAAU,KAGhCtI,EAAOh8B,QACTg8B,EAAOh8B,MAAMm8B,MAAS,GAAe/iC,OAAb4iC,EAAOG,MAAM,QAIrCyR,EAAY/K,aACd7G,EAAOI,OAASwR,EAAYtJ,UAAU,KAGlCtI,EAAOh8B,QACTg8B,EAAOh8B,MAAMo8B,OAAU,GAAgBhjC,OAAd4iC,EAAOI,OAAO,SAK7C,IAAIyR,EAAS7R,EAAO8R,aAAe9R,EAAOG,MACtC4R,EAAU/R,EAAOgS,cAAgBhS,EAAOI,OAiB5C,GAfImQ,GAAoBmB,EAAW7K,YAAc+K,EAAY/K,aAC3DgL,EAASH,EAAWpJ,UAAU,KAC9ByJ,EAAUH,EAAYtJ,UAAU,MAGlCK,EAAS4B,WAAWsH,EAAQE,GAEL,iBAAZnB,GACTzH,EAAQhkC,aAAa,KAAK,GAAMkiC,SAASuJ,GAGpB,iBAAZC,GACT1H,EAAQhkC,aAAa,KAAK,GAAMkiC,SAASwJ,GAGjB,iBAAfH,GACiB,iBAAhBC,EACV,CACA,MAAMsB,EAAUjN,GAAUmE,EAAQhkC,aAAa,WAAWyhC,aAC1D,IAAIsL,EAAS,EACTC,EAAS,EAEb,GAA0B,iBAAfzB,EAAyB,CAClC,MAAMgB,EAAavI,EAAQwI,SAAS,SAEhCD,EAAW7K,WACbqL,EAASR,EAAWpJ,UAAU,KAAOoI,EAEnCuB,EAAQ,KAAOz4B,MAAMy4B,EAAQ,MAC/BC,EAASD,EAAQ,GAAKvB,EAEzB,CAED,GAA2B,iBAAhBC,EAA0B,CACnC,MAAMiB,EAAczI,EAAQwI,SAAS,UAEjCC,EAAY/K,WACdsL,EAASP,EAAYtJ,UAAU,KAAOqI,EAEpCsB,EAAQ,KAAOz4B,MAAMy4B,EAAQ,MAC/BE,EAASF,EAAQ,GAAKtB,EAEzB,CAEIuB,IACHA,EAASC,GAGNA,IACHA,EAASD,GAGX/I,EAAQhkC,aAAa,SAAS,GAAMkiC,SAASqJ,GAC7CvH,EAAQhkC,aAAa,UAAU,GAAMkiC,SAASsJ,GAE9C,MAAMyB,EAAiBjJ,EAAQwI,SAAS,aAAa,GAAM,GAE3DS,EAAe/K,SAAU,GAAsCjqC,OAApCg1C,EAAexL,YAAY,WAA0BxpC,OAAjB,EAAM80C,EAAO,MAAiB90C,OAAb,EAAM+0C,EAAO,KAC9F,CAGI3B,GACHnH,EAAIgJ,UAAU,EAAG,EAAGR,EAAQE,GAG9B5I,EAAQ8H,OAAO5H,GAEXoI,IACF70C,KAAK60C,eAAgB,EAExB,CA3ZUpI,eAEPiE,QAAQD,GACR9kC,SAAS6kC,IACS,IAIpB,GARS/D,WApBNzsC,KAQI+rC,SAAW,IAAIyB,GARnBxtC,KASIk0C,MAAQ,IAAItF,GAAM5uC,MATtBA,KAUI00C,WAA+B,GAVnC10C,KAaG8wC,MAA2B,GAb9B9wC,KAcGm0C,cAAgB,EAdnBn0C,KAeGkxC,aAAc,EAfjBlxC,KAgBG60C,eAAgB,EAhBnB70C,KAiBGy0C,WAA4B,KASlCz0C,KAAK2L,OAASA,GAET+kC,EACH,MAAM,IAAIxxC,MAAO,qEAGnBc,KAAK0wC,MAAQA,CACd,EAjCUC,GACKH,cAAgBA,GADrBG,GAEKF,aAAeA,GAFpBE,GAGJyD,UAAY,GAHRzD,GAIJ+E,mBAAqB,ICpF9B,MAAMjF,aAAEA,IAAiBE,GACnBgF,GAAwC,oBAAdC,UAC5BA,eACArzB,EAESszB,SAoBLv2C,YAAMw2C,GACV,OAAIA,EAAS9K,WAAW,KACfhrC,KAAK+1C,gBAAgBD,GAGvB91C,KAAKg2C,KAAKF,EAClB,CAEDC,gBAAgBjwC,GACd,MAAM+8B,EAAS,IAAI7iC,KAAK41C,UAExB,IACE,OAAO51C,KAAKi2C,cACVpT,EAAOkT,gBAAgBjwC,EAAK,iBAE/B,CAAC,MAAOowC,GACP,OAAOl2C,KAAKi2C,cACVpT,EAAOkT,gBAAgBjwC,EAAK,YAE/B,CACF,CAEOmwC,cAAc/uC,GACpB,MAAMivC,EAAcjvC,EAASkvC,qBAAqB,eAAe,GAEjE,GAAID,EACF,MAAM,IAAIj3C,MAAMi3C,EAAYjtC,aAAe,uBAG7C,OAAOhC,CACR,CAEK8uC,WAAKzN,GACT,MAAM8N,QAAiBr2C,KAAK0wC,MAAMnI,GAC5BziC,QAAYuwC,EAAStmC,OAE3B,OAAO/P,KAAK+1C,gBAAgBjwC,EAC7B,CArDWnF,aACV+vC,QAAQD,GACRmF,YAAYD,IACM,IAClB,IAAKjF,EACH,MAAM,IAAIxxC,MAAO,qEAGnB,IAAK02C,EACH,MAAM,IAAI12C,MAAO,yEAGnBc,KAAK0wC,MAAQA,EACb1wC,KAAK41C,UAAYA,CAClB,EChCUU,SAgBX50C,MAAM+qC,GACJ,MAAM8J,QACJA,EAAOC,QACPA,EAAOvvB,OACPA,GACEjnB,KACEy2C,EAAKF,EAAQ7K,UAAU,KACvBgL,EAAKF,EAAQ9K,UAAU,KAE7Be,EAAIlmB,UAAUkwB,EAAIC,GAClBjK,EAAI3lB,UACFG,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAETwlB,EAAIlmB,WAAWkwB,GAAKC,EACrB,CAEDC,QAAQlK,GACN,MAAM8J,QACJA,EAAOC,QACPA,EAAOvvB,OACPA,GACEjnB,KACEkF,EAAI+hB,EAAO,GACX9hB,EAAI8hB,EAAO,GACX7mB,EAAI6mB,EAAO,GACXpI,EAAIoI,EAAO,GACX3E,EAAI2E,EAAO,GACXvF,EAAIuF,EAAO,GAIX0T,EAAM,GAAKz1B,GADP,EACYod,EAFZ,EAEoBZ,GAASvc,GAD7B,EACkC0Z,EAHlC,EAG0C6C,GAASthB,GAFnD,EAEwDye,EAHxD,EAGgEyD,IACpEm0B,EAAKF,EAAQ7K,UAAU,KACvBgL,EAAKF,EAAQ9K,UAAU,KAE7Be,EAAIlmB,UAAUkwB,EAAIC,GAClBjK,EAAI3lB,UACF6T,GAPQ,EAODrY,EARC,EAQOZ,GACfiZ,GAVQ,EAUDjZ,EARC,EAQO7C,GACf8b,GAVQ,EAUDv6B,EATC,EASO+E,GACfw1B,GAVQ,EAUDz1B,EAZC,EAYO9E,GACfu6B,GAAOx1B,EAAIuc,EAAIthB,EAAIkiB,GACnBqY,GAAOv6B,EAAIye,EAAI3Z,EAAIwc,IAErB+qB,EAAIlmB,WAAWkwB,GAAKC,EACrB,CAEDE,aAAa7oB,GACXA,EAAM2gB,eAAe1uC,KAAKinB,OAC3B,CA/DCpnB,cACAonB,EACA4vB,GATG72C,KACLE,KAAO,SAULF,KAAKinB,OT2BO6vB,SAActhB,GAC5B,MAAMO,EAAUqS,GAAU5S,GAU1B,MATe,CACbO,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EAIlB,CSvCkB+gB,CAAc7vB,GAC5BjnB,KAAKu2C,QAAUM,EAAgB,GAC/B72C,KAAKw2C,QAAUK,EAAgB,EAChC,ECjBUE,iBAAaT,GAKtBpvC,cACA8vC,EACAH,GAEAI,MAAM/vC,EAAU8vC,EAAMH,GATnB72C,KACIE,KAAO,OAUdF,KAAKk3C,MAAQ,IAAIpN,GAAS5iC,EAAU,QAAS8vC,EAC9C,ECoBUG,SACJC,mBAAYlwC,EAAoBqlC,GACrC,MAAMiJ,EAAiBjJ,EAAQwI,SAAS,aAAa,GAAO,GAE5D,GAAIS,EAAevL,WAAY,CAC7B,MAAOoN,EAA0BC,EAA2BD,GAA4B9K,EAAQwI,SAAS,oBAAoB,GAAO,GAAM9zC,QAE1I,GAAIo2C,GAA4BC,EAA0B,CACxD,MAAMT,EAAkB,CAACQ,EAA0BC,GAEnD,OAAO,IAAIH,GACTjwC,EACAsuC,EAAexL,YACf6M,EAEH,CACF,CAED,OAAO,IACR,CAkCDn1C,MAAM+qC,GACJzsC,KAAKu3C,WAAW/H,SAAQ1oB,GAAaA,EAAUplB,MAAM+qC,IACtD,CAEDkK,QAAQlK,GACNzsC,KAAKu3C,WAAW/H,SAAQ1oB,GAAaA,EAAU6vB,QAAQlK,IACxD,CAGDmK,aAAa7oB,GACX/tB,KAAKu3C,WAAW/H,SAAQ1oB,GAAaA,EAAU8vB,aAAa7oB,IAC7D,CA/BkB7mB,cACjB4f,EACA+vB,GAFiB3vC,gBAjCdlH,KA8BYu3C,WAA2B,GApDrCpP,GA2DwBrhB,GA1D5B9lB,OACAwyB,QAAO,gBAAkB,QACzBA,QAAO,eAAiB,MACxBvyB,MAJH,eA6DOuuC,SAAS1oB,IACZ,GAAkB,SAAdA,EACF,OAGF,MAAO5mB,EAAMV,GA3DVg4C,SAAe1wB,GACtB,MAAO5mB,EAAO,GAAIV,EAAQ,IAAMsnB,EAAU7lB,MAAM,KAEhD,MAAO,CAACf,EAAKc,OAAQxB,EAAMwB,OAAOwyB,QAAQ,IAAK,IACjD,CAuD4BgkB,CAAe1wB,GAC/B2wB,EAAgBN,GAAUO,eAAex3C,GAE3Cu3C,GACFz3C,KAAKu3C,WAAW92C,KAAK,IAAIg3C,EAAcz3C,KAAKkH,SAAU1H,EAAOq3C,MAGlE,EAnDUM,GAqBJO,eAAwD,CAC7DnxB,UCtDSoxB,MAWXj2C,MAAM+qC,GACJ,MAAMpqC,EACJA,EAAC0c,EACDA,GACE/e,KAAK+tB,MAET0e,EAAIlmB,UACFlkB,GAAK,EACL0c,GAAK,EAER,CAED43B,QAAQlK,GACN,MAAMpqC,EACJA,EAAC0c,EACDA,GACE/e,KAAK+tB,MAET0e,EAAIlmB,WAAS,EACJlkB,GAAK,GAAG,EACR0c,GAAK,EAEf,CAED63B,aAAa7oB,GACX,MAAM1rB,EACJA,EAAC0c,EACDA,GACE/e,KAAK+tB,MAETA,EAAM2gB,eAAe,CACnB,EACA,EACA,EACA,EACArsC,GAAK,EACL0c,GAAK,GAER,CA5CClf,cACAkuB,GANG/tB,KACLE,KAAO,YAOLF,KAAK+tB,MAAQogB,GAAM7uC,MAAMyuB,EAC1B,GD8CCzI,OErDSsyB,MAsBXl2C,MAAM+qC,GACJ,MAAMoL,GACJA,EAAEC,GACFA,EAAEvB,QACFA,EAAOC,QACPA,EAAOU,MACPA,GACEl3C,KACEy2C,EAAKoB,EAAKtB,EAAQ7K,UAAU,KAC5BgL,EAAKoB,EAAKtB,EAAQ9K,UAAU,KAElCe,EAAIlmB,UAAUkwB,EAAIC,GAClBjK,EAAInnB,OAAO4xB,EAAM/K,cACjBM,EAAIlmB,WAAWkwB,GAAKC,EACrB,CAEDC,QAAQlK,GACN,MAAMoL,GACJA,EAAEC,GACFA,EAAEvB,QACFA,EAAOC,QACPA,EAAOU,MACPA,GACEl3C,KACEy2C,EAAKoB,EAAKtB,EAAQ7K,UAAU,KAC5BgL,EAAKoB,EAAKtB,EAAQ9K,UAAU,KAElCe,EAAIlmB,UAAUkwB,EAAIC,GAClBjK,EAAInnB,QAAM,EAAQ4xB,EAAM/K,cACxBM,EAAIlmB,WAAWkwB,GAAKC,EACrB,CAEDE,aAAa7oB,GACX,MAAM8pB,GACJA,EAAEC,GACFA,EAAEZ,MACFA,GACEl3C,KACE01B,EAAMwhB,EAAM/K,aAElBpe,EAAM2gB,eAAe,CACnB,EACA,EACA,EACA,EACAmJ,GAAM,EACNC,GAAM,IAER/pB,EAAM2gB,eAAe,CACnB9/B,KAAK+mB,IAAID,GACT9mB,KAAKgnB,IAAIF,IACR9mB,KAAKgnB,IAAIF,GACV9mB,KAAK+mB,IAAID,GACT,EACA,IAEF3H,EAAM2gB,eAAe,CACnB,EACA,EACA,EACA,GACCmJ,GAAM,GACNC,GAAM,GAEV,CA7EC5wC,cACAoe,EACAuxB,GAXG72C,KACLE,KAAO,SAYL,MAAM61B,EAAUqS,GAAU9iB,GAE1BtlB,KAAKk3C,MAAQ,IAAIpN,GAAS5iC,EAAU,QAAS6uB,EAAQ,IACrD/1B,KAAKu2C,QAAUM,EAAgB,GAC/B72C,KAAKw2C,QAAUK,EAAgB,GAC/B72C,KAAK63C,GAAK9hB,EAAQ,IAAM,EACxB/1B,KAAK83C,GAAK/hB,EAAQ,IAAM,CACzB,GFkCCvP,MGtDSuxB,MA0BXr2C,MAAM+qC,GACJ,MACEjmB,OAAOnkB,EACLA,EAAC0c,EACDA,GACDw3B,QACDA,EAAOC,QACPA,GACEx2C,KACEy2C,EAAKF,EAAQ7K,UAAU,KACvBgL,EAAKF,EAAQ9K,UAAU,KAE7Be,EAAIlmB,UAAUkwB,EAAIC,GAClBjK,EAAIjmB,MAAMnkB,EAAG0c,GAAK1c,GAClBoqC,EAAIlmB,WAAWkwB,GAAKC,EACrB,CAEDC,QAAQlK,GACN,MACEjmB,OAAOnkB,EACLA,EAAC0c,EACDA,GACDw3B,QACDA,EAAOC,QACPA,GACEx2C,KACEy2C,EAAKF,EAAQ7K,UAAU,KACvBgL,EAAKF,EAAQ9K,UAAU,KAE7Be,EAAIlmB,UAAUkwB,EAAIC,GAClBjK,EAAIjmB,MAAM,EAAMnkB,EAAG,EAAM0c,GAAK1c,GAC9BoqC,EAAIlmB,WAAWkwB,GAAKC,EACrB,CAEDE,aAAa7oB,GACX,MAAM1rB,EACJA,EAAC0c,EACDA,GACE/e,KAAKwmB,MAETuH,EAAM2gB,eAAe,CACnBrsC,GAAK,EACL,EACA,EACA0c,GAAK,EACL,EACA,GAEH,CAnEClf,cACA2mB,EACAqwB,GATG72C,KACLE,KAAO,QAUL,MAAM83C,EAAY7J,GAAME,WAAW7nB,GAGf,IAAhBwxB,EAAU31C,GACO,IAAhB21C,EAAUj5B,IAEbi5B,EAAU31C,EAAI6mC,GACd8O,EAAUj5B,EAAImqB,IAGhBlpC,KAAKwmB,MAAQwxB,EACbh4C,KAAKu2C,QAAUM,EAAgB,GAC/B72C,KAAKw2C,QAAUK,EAAgB,EAChC,GH+BC5vB,OAAQqvB,GACR/wB,MI1DS0yB,cAAclB,GAIvB7vC,cACA8vC,EACAH,GAEAI,MAAM/vC,EAAU8vC,EAAMH,GARnB72C,KACIE,KAAO,QASdF,KAAKinB,OAAS,CACZ,EACA,EACArY,KAAK6L,IAAIza,KAAKk3C,MAAM/K,cACpB,EACA,EACA,EAEH,GJyCC+L,MK3DSC,cAAcpB,GAIvB7vC,cACA8vC,EACAH,GAEAI,MAAM/vC,EAAU8vC,EAAMH,GARnB72C,KACIE,KAAO,QASdF,KAAKinB,OAAS,CACZ,EACArY,KAAK6L,IAAIza,KAAKk3C,MAAM/K,cACpB,EACA,EACA,EACA,EAEH,ICbmBiM,SA6EpB7vC,aAAapI,GAAck4C,MAAiBz4C,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GAC1C,MAAM+P,EAAO3P,KAAKs4C,WAAWn4C,GAE7B,IAAKwP,GAAQ0oC,EAAmB,CAC9B,MAAM1oC,EAAO,IAAIm6B,GAAS9pC,KAAKkH,SAAU/G,EAAM,IAI/C,OAFAH,KAAKs4C,WAAWn4C,GAAQwP,EAEjBA,CACR,CAED,OAAOA,GAAQm6B,GAASr6B,MAAMzP,KAAKkH,SACpC,CAEDylC,mBACE,IAAI4L,EAEJ,IAAK,MAAMj0C,KAAOtE,KAAKs4C,WACrB,GAAY,SAARh0C,GAAkBA,EAAIkmC,SAAS,SAAU,CAC3C+N,EAAOv4C,KAAKs4C,WAAWh0C,GACvB,KACD,CAGH,OAAOi0C,GAAQzO,GAASr6B,MAAMzP,KAAKkH,SACpC,CAED6tC,SAAS50C,GAAck4C,MAAiBz4C,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GAAU44C,EAAa54C,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GAC7D,MAAMwH,EAAQpH,KAAKy4C,OAAOt4C,GAE1B,GAAIiH,EACF,OAAOA,EAGT,MAAMuI,EAAO3P,KAAKuI,aAAapI,GAE/B,GAAIwP,EAAKs6B,WAEP,OADAjqC,KAAKy4C,OAAOt4C,GAAQwP,EACbA,EAGT,IAAK6oC,EAAe,CAClB,MAAMj1C,OAAEA,GAAWvD,KAEnB,GAAIuD,EAAQ,CACV,MAAMm1C,EAAcn1C,EAAOwxC,SAAS50C,GAEpC,GAAIu4C,EAAYzO,WACd,OAAOyO,CAEV,CACF,CAED,GAAIL,EAAmB,CACrB,MAAMjxC,EAAQ,IAAI0iC,GAAS9pC,KAAKkH,SAAU/G,EAAM,IAIhD,OAFAH,KAAKy4C,OAAOt4C,GAAQiH,EAEbA,CACR,CAED,OAAO0iC,GAASr6B,MAAMzP,KAAKkH,SAC5B,CAEDmtC,OAAO5H,GAGL,GAA6C,SAAzCzsC,KAAK+0C,SAAS,WAAW/K,aACoB,WAA5ChqC,KAAK+0C,SAAS,cAAc/K,YADjC,CAQA,GAFAyC,EAAIkM,OAEA34C,KAAK+0C,SAAS,QAAQ9K,WAAY,CACpC,MAAM2O,EAAO54C,KAAK+0C,SAAS,QAAQ3I,gBAE/BwM,IACF54C,KAAK64C,aAAapM,GAClBmM,EAAKl3C,MAAM+qC,EAAKzsC,MAEnB,MACD,GAAiD,SAA7CA,KAAK+0C,SAAS,UAAUrK,SAAS,QAAoB,CACvD,MAAMznC,EAASjD,KAAK+0C,SAAS,UAAU3I,gBAEnCnpC,IACFjD,KAAK64C,aAAapM,GAClBxpC,EAAOvB,MAAM+qC,EAAKzsC,MAErB,MACCA,KAAK84C,WAAWrM,GAChBzsC,KAAK+4C,eAAetM,GACpBzsC,KAAKg5C,aAAavM,GAGpBA,EAAIwM,SA1BF,CA2BH,CAEDH,WAAWj5C,GAEV,CAESg5C,aAAapM,GAErB,MAAM3lB,EAAYqwB,GAAUC,YAAYp3C,KAAKkH,SAAUlH,MAEnD8mB,GACFA,EAAUplB,MAAM+qC,GAIlB,MAAMyM,EAAoBl5C,KAAK+0C,SAAS,aAAa,GAAO,GAE5D,GAAImE,EAAkBjP,WAAY,CAChC,MAAM8H,EAAOmH,EAAkB9M,gBAE3B2F,GACFA,EAAKrwC,MAAM+qC,EAEd,CACF,CAEDuM,aAAan5C,GAEZ,CAEDk5C,eAAetM,GACbzsC,KAAKmD,SAASqsC,SAASlqC,IACrBA,EAAM+uC,OAAO5H,KAEhB,CAES0M,SAASC,GACjB,MAAM9zC,EAAQ8zC,aAAqBhB,GAC/BgB,EACAp5C,KAAKkH,SAASgD,cAAckvC,GAEhC9zC,EAAM/B,OAASvD,KAEVo4C,GAAQiB,iBAAiBC,SAASh0C,EAAMpF,OAC3CF,KAAKmD,SAAS1C,KAAK6E,EAEtB,CAESi0C,gBAAgBz3C,GAOHa,MANrB,MAAMA,KAAEA,GAAS3C,KAEjB,GAA4B,mBAAjB2C,EAAKF,QACd,OAAOE,EAAKF,QAAQX,GAGtB,MAAM03C,EAAgC,QAAjB72C,IAAK4F,oBAAL5F,sBAAoB,SAEzC,SAAK62C,GAAiC,KAAjBA,IAIdA,EAAav4C,MAAM,KAAKw4C,MAAKC,GAAe,IAAcl5C,OAAXk5C,KAAiB53C,GACxE,CAED63C,+BACE,MAAMlB,OACJA,EAAMmB,kBACNA,GACE55C,KAAKkH,SACT,IAAI2yC,EAEJ,IAAK,MAAM/3C,KAAY22C,EACrB,IAAK32C,EAASkpC,WAAW,MAAQhrC,KAAKu5C,gBAAgBz3C,GAAW,CAC/D,MAAMsF,EAAQqxC,EAAO32C,GACfg4C,EAAcF,EAAkB93C,GAEtC,GAAIsF,EACF,IAAK,MAAMjH,KAAQiH,EAAO,CACxB,IAAI2yC,EAAsB/5C,KAAK45C,kBAAkBz5C,QAEd,IAAxB45C,IACTA,EAAsB,OAGpBD,GAAeA,GAAeC,IAChCF,EAAYzyC,EAAMjH,GAEd05C,IACF75C,KAAKy4C,OAAOt4C,GAAQ05C,GAGtB75C,KAAK45C,kBAAkBz5C,GAAQ25C,EAElC,CAEJ,CAEJ,CAESE,aAAazN,EAAkB0N,GAevC,OAdkBA,EAAatF,QAAM,CAAsBuF,EAAW/5C,KACpE,MAAM05C,EAAYtN,EAAQwI,SAAS50C,GAEnC,IAAK05C,EAAU5P,WACb,OAAOiQ,EAGT,MAAM16C,EAAQq6C,EAAU7P,YAIxB,OAFA6P,EAAUpP,SAAS,IAEZ,IAAIyP,EAAW,CAAC/5C,EAAMX,GAAO,GACnC,GAGJ,CAES26C,cAAc5N,EAAkBkM,GACxCA,EAAOjJ,SAAOC,IAAGtvC,MAAMX,GAANW,EACfosC,EAAQwI,SAAS50C,GAAM,GAAMsqC,SAASjrC,KAEzC,CAED46C,eACS,IAAAC,EAAP,OAA+C,KAA7B,QAAXA,EAAAr6C,KAAKuD,cAAL,IAAA82C,OAAA,EAAAA,EAAal3C,SAAShC,QAAQnB,MACtC,CA9RoBkH,cACAvE,EACA23C,GAAmB,GAEtC,GAJmBpzC,gBACAvE,YACA23C,wBAfhBt6C,KAGIE,KAAe,GAHnBF,KAIIs4C,WAAuC,GAJ3Ct4C,KAKIy4C,OAAmC,GALvCz4C,KAMI45C,kBAA4C,GANhD55C,KAOLu6C,iBAAkB,EAPbv6C,KAQLw6C,qBAAuB,GARlBx6C,KASLuD,OAAyB,KATpBvD,KAULmD,SAAsB,IAOfR,GAA0B,IAAlBA,EAAK83C,SAChB,OAaF,GATAh5C,MAAMc,KAAKI,EAAK21C,YAAY9I,SAASkL,IACnC,MAAMC,GjBmC2Bx6C,EiBnCOu6C,EAAUC,SjBoClDtS,GAAavoC,KAAKK,GACbA,EAAKyb,cAGPzb,GALOy6C,IAAuBz6C,EiBjCjCH,KAAKs4C,WAAWqC,GAAY,IAAI7Q,GAAS5iC,EAAUyzC,EAAUD,EAAUl7C,MAAK,IAG9EQ,KAAK25C,+BAGD35C,KAAKuI,aAAa,SAAS0hC,WAAY,CAC1BjqC,KAAKuI,aAAa,SAC9ByhC,YACA/oC,MAAM,KACNC,KAAIrB,GAAKA,EAAEmB,SAEPwuC,SAASpoC,IACd,IAAKA,EACH,OAGF,MAAOjH,EAAMX,GAAS4H,EAAMnG,MAAM,KAAKC,KAAIrB,GAAKA,EAAEmB,SAE9Cb,IACFH,KAAKy4C,OAAOt4C,GAAQ,IAAI2pC,GAAS5iC,EAAU/G,EAAMX,MAGtD,CAED,MAAM6sC,YAAEA,GAAgBnlC,EAClBlI,EAAKgB,KAAKuI,aAAa,MAGzBvJ,EAAGirC,aACAoC,EAAYrtC,EAAGgrC,eAClBqC,EAAYrtC,EAAGgrC,aAAehqC,OAIlCyB,MAAMc,KAAKI,EAAKk4C,YAAYrL,SAAS4J,IACnC,GAA2B,IAAvBA,EAAUqB,SACZz6C,KAAKm5C,SAASC,QAEhB,GAAIkB,IACqB,IAAvBlB,EAAUqB,UACgB,IAAvBrB,EAAUqB,UACZ,CACD,MAAMK,EAAW5zC,EAAS6tB,eAAeqkB,GAErC0B,EAASC,UAAUh8C,OAAS,GAC9BiB,KAAKm5C,SAAS2B,EAEjB,IAEJ,EA3EmB1C,GACJiB,iBAAmB,CAAC,SCPzB2B,iBAAuB5C,GAEhClxC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,EAKvB,ECZMW,YAAeC,GACtB,MAAMC,EAAUD,EAAWl6C,OAE3B,eAAgBlB,KAAKq7C,GACjBA,EACC,IAAW36C,OAAR26C,EAAQ,IAClB,CAiBSC,YAAiBC,GACxB,IAAKA,EACH,MAAO,GAGT,MAAMC,EAAkBD,EAAUr6C,OAAO4a,cAEzC,OAAQ0/B,GACN,IAAK,SACL,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,QACH,OAAOA,E,QAIP,+BAA6Bx7C,KAAKw7C,GACzBA,EAGF,GAEb,CAOSC,YAAkBC,GACzB,IAAKA,EACH,MAAO,GAGT,MAAMC,EAAmBD,EAAWx6C,OAAO4a,cAE3C,OAAQ6/B,GACN,IAAK,SACL,IAAK,OACL,IAAK,UACL,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,QACH,OAAOA,E,QAIP,iBAAe37C,KAAK27C,GACXA,EAGF,GAEb,CAEaC,SACJp8C,eACLq8C,IACApyB,EADAoyB,uCAGIN,EAAY,GACZO,EAAc,GACdJ,EAAa,GACbK,EAAW,GACXX,EAAa,GACjB,MAAMY,EAAQ3T,GARVvoC,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,IAQ4BoB,OAAOC,MAAM,KAC1C2D,EAAM,CACVi3C,UAAU,EACVR,WAAW,EACXG,YAAY,EACZI,aAAa,GAuDf,OApDAE,EAAMtM,SAASuM,IACb,QAAQ,GACN,KAAMn3C,EAAIy2C,WAAaK,GAAKjD,OAAOa,SAASyC,GAE7B,YAATA,IACFV,EAAYU,GAGdn3C,EAAIy2C,WAAY,EAChB,MAEF,KAAMz2C,EAAIg3C,aAAeF,GAAKM,SAAS1C,SAASyC,GAEjC,YAATA,IACFH,EAAcG,GAGhBn3C,EAAIy2C,WAAY,EAChBz2C,EAAIg3C,aAAc,EAClB,MAEF,KAAMh3C,EAAI42C,YAAcE,GAAKO,QAAQ3C,SAASyC,GAE/B,YAATA,IACFP,EAAaO,GAGfn3C,EAAIy2C,WAAY,EAChBz2C,EAAIg3C,aAAc,EAClBh3C,EAAI42C,YAAa,EACjB,MAEF,KAAM52C,EAAIi3C,SAEK,YAATE,IACFF,EAAWE,EAAK96C,MAAM,KAAK,IAAM,IAGnC2D,EAAIy2C,WAAY,EAChBz2C,EAAIg3C,aAAc,EAClBh3C,EAAI42C,YAAa,EACjB52C,EAAIi3C,UAAW,EACf,M,QAIa,YAATE,IACFb,GAAca,G,IAKf,IAAIL,GACTL,EACAO,EACAJ,EACAK,EACAX,EACA3xB,EAEH,CAiCDxM,WACE,MAAO,CACLq+B,GAAiBp7C,KAAKq7C,WACtBr7C,KAAK47C,YACLL,GAAkBv7C,KAAKw7C,YACvBx7C,KAAK67C,UA7LgBX,EA+LHl7C,KAAKk7C,gBA9LD,IAAZlnB,GACVknB,EACAA,EACCl6C,OACAC,MAAM,KACNC,IAAI+5C,IACJ5uC,KAAK,OAyLNA,KAAK,KAAKrL,OAhMPk7C,IAAkBhB,CAiMxB,CA7BCG,cACAO,EACAJ,EACAK,EACAX,EACA3xB,GAEA,MAAM4yB,EAAc5yB,EACG,iBAAZA,EACLmyB,GAAKp8C,MAAMiqB,GACXA,EACF,GAEJvpB,KAAKk7C,WAAaA,GAAciB,EAAYjB,WAC5Cl7C,KAAK67C,SAAWA,GAAYM,EAAYN,SACxC77C,KAAKq7C,UAAYA,GAAac,EAAYd,UAC1Cr7C,KAAKw7C,WAAaA,GAAcW,EAAYX,WAC5Cx7C,KAAK47C,YAAcA,GAAeO,EAAYP,WAC/C,EA7GUF,GAgFKjD,OAAS,gCAhFdiD,GAiFKM,SAAW,4BAjFhBN,GAkFKO,QAAU,yECpKfG,SAWP/5C,QACF,OAAOrC,KAAKi2B,EACb,CAEGlX,QACF,OAAO/e,KAAKk2B,EACb,CAEGqN,YACF,OAAOvjC,KAAK23B,GAAK33B,KAAKi2B,EACvB,CAEGuN,aACF,OAAOxjC,KAAK64B,GAAK74B,KAAKk2B,EACvB,CAEDmmB,SAASh6C,EAAuB0c,QACb,IAAN1c,KACLua,MAAM5c,KAAKi2B,KAAOrZ,MAAM5c,KAAK23B,OAC/B33B,KAAKi2B,GAAK5zB,EACVrC,KAAK23B,GAAKt1B,GAGRA,EAAIrC,KAAKi2B,KACXj2B,KAAKi2B,GAAK5zB,GAGRA,EAAIrC,KAAK23B,KACX33B,KAAK23B,GAAKt1B,SAIG,IAAN0c,KACLnC,MAAM5c,KAAKk2B,KAAOtZ,MAAM5c,KAAK64B,OAC/B74B,KAAKk2B,GAAKnX,EACV/e,KAAK64B,GAAK9Z,GAGRA,EAAI/e,KAAKk2B,KACXl2B,KAAKk2B,GAAKnX,GAGRA,EAAI/e,KAAK64B,KACX74B,KAAK64B,GAAK9Z,GAGf,CAEDu9B,KAAKj6C,GACHrC,KAAKq8C,SAASh6C,EAAG,EAClB,CAEDk6C,KAAKx9B,GACH/e,KAAKq8C,SAAS,EAAGt9B,EAClB,CAEDy9B,eAAe3M,GACb,IAAKA,EACH,OAGF,MAAM5Z,GACJA,EAAEC,GACFA,EAAEyB,GACFA,EAAEkB,GACFA,GACEgX,EAEJ7vC,KAAKq8C,SAASpmB,EAAIC,GAClBl2B,KAAKq8C,SAAS1kB,EAAIkB,EACnB,CAEO4jB,SACN/8C,EACA4sB,EACAC,EACAmwB,EACAC,GAEA,OACE/tC,KAAK4P,IAAI,EAAI9e,EAAG,GAAK4sB,EACnB,EAAI1d,KAAK4P,IAAI,EAAI9e,EAAG,GAAKA,EAAI6sB,EAC7B,GAAK,EAAI7sB,GAAKkP,KAAK4P,IAAI9e,EAAG,GAAKg9C,EAC/B9tC,KAAK4P,IAAI9e,EAAG,GAAKi9C,CAEtB,CAEOC,eACNC,EACAvwB,EACAC,EACAmwB,EACAC,GAEA,MAAMx3C,EAAI,EAAImnB,EAAK,GAAKC,EAAK,EAAImwB,EAC3Bx3C,GAAC,EAAQonB,EAAK,EAAIC,EAAK,EAAImwB,EAAK,EAAIC,EACpCv8C,EAAI,EAAImsB,EAAK,EAAID,EAEvB,GAAU,IAANpnB,EAAS,CACX,GAAU,IAANC,EACF,OAGF,MAAMzF,GAAKU,EAAI+E,EAUf,YARI,EAAIzF,GAAKA,EAAI,IACXm9C,EACF78C,KAAKs8C,KAAKt8C,KAAKy8C,SAAS/8C,EAAG4sB,EAAIC,EAAImwB,EAAIC,IAEvC38C,KAAKu8C,KAAKv8C,KAAKy8C,SAAS/8C,EAAG4sB,EAAIC,EAAImwB,EAAIC,KAK5C,CAED,MAAMG,EAAOluC,KAAK4P,IAAIrZ,EAAG,GAAK,EAAI/E,EAAI8E,EAEtC,GAAI43C,EAAO,EACT,OAGF,MAAMr/B,IAAOtY,EAAIyJ,KAAK+W,KAAKm3B,KAAU,EAAI53C,GAErC,EAAIuY,GAAMA,EAAK,IACbo/B,EACF78C,KAAKs8C,KACHt8C,KAAKy8C,SAASh/B,EAAI6O,EAAIC,EAAImwB,EAAIC,IAGhC38C,KAAKu8C,KACHv8C,KAAKy8C,SAASh/B,EAAI6O,EAAIC,EAAImwB,EAAIC,KAKpC,MAAM7+B,IAAO3Y,EAAIyJ,KAAK+W,KAAKm3B,KAAU,EAAI53C,GAErC,EAAI4Y,GAAMA,EAAK,IACb++B,EACF78C,KAAKs8C,KAAKt8C,KAAKy8C,SAAS3+B,EAAIwO,EAAIC,EAAImwB,EAAIC,IAExC38C,KAAKu8C,KAAKv8C,KAAKy8C,SAAS3+B,EAAIwO,EAAIC,EAAImwB,EAAIC,IAG7C,CAGDI,eACEC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEAv9C,KAAKq8C,SAASW,EAAKC,GACnBj9C,KAAKq8C,SAASiB,EAAKC,GACnBv9C,KAAK48C,gBAAe,EAAMI,EAAKE,EAAKE,EAAKE,GACzCt9C,KAAK48C,gBAAe,EAAOK,EAAKE,EAAKE,EAAKE,EAC3C,CAEDC,kBACER,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAMI,EAAOT,EAAM,EAAI,GAAKE,EAAMF,GAC5BU,EAAOT,EAAM,EAAI,GAAKE,EAAMF,GAC5BU,EAAOF,EAAO,EAAI,GAAKL,EAAMJ,GAC7BY,EAAOF,EAAO,EAAI,GAAKL,EAAMJ,GAEnCj9C,KAAK+8C,eAAeC,EAAKC,EAAKQ,EAAME,EAAMD,EAAME,EAAMR,EAAKC,EAC5D,CAEDvN,aACEztC,EACA0c,GAEA,MAAMkX,GACJA,EAAEC,GACFA,EAAEyB,GACFA,EAAEkB,GACFA,GACE74B,KAEJ,OACEi2B,GAAM5zB,GACHA,GAAKs1B,GACLzB,GAAMnX,GACNA,GAAK8Z,CAEX,CA9MQ5C,cAAK4L,OAAOz8B,IACZ8wB,EAAK2L,OAAOz8B,IACZuyB,EAAKkK,OAAOz8B,IACZyzB,EAAKgJ,OAAOz8B,KAHZ6wB,UACAC,UACAyB,UACAkB,UAEP74B,KAAKq8C,SAASpmB,EAAIC,GAClBl2B,KAAKq8C,SAAS1kB,EAAIkB,EACnB,ECDmBglB,iBAAwBzF,GAGlC0F,mBACR,IAAIxhC,EAAU,EAEViwB,EAA0BvsC,KAEvBusC,QAAS,CACd,MAAMwR,EAAexR,EAAQwI,SAAS,WAAW,GAAO,GAEpDgJ,EAAa9T,UAAS,KACxB3tB,GAAWyhC,EAAanT,aAG1B2B,EAAUA,EAAQhpC,MACnB,CAED,OAAO+Y,CACR,CAEQw8B,WAAWrM,GAAyBuR,MAAWp+C,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GACtD,IAAKo+C,EAAa,CAEhB,MAAMC,EAAgBj+C,KAAK+0C,SAAS,QAC9BmJ,EAAuBl+C,KAAK+0C,SAAS,gBACrCoJ,EAAkBn+C,KAAK+0C,SAAS,UAChCqJ,EAAoBp+C,KAAK+0C,SAAS,kBAExC,GAAIkJ,EAAc5T,kBAAmB,CACnC,MAAMgU,EAAYJ,EAAc3R,uBAAuBtsC,KAAMk+C,GAEzDG,IACF5R,EAAI4R,UAAYA,EAEnB,MACD,GAAIJ,EAAchU,WAAY,CACM,iBAA9BgU,EAAcjU,aAChBiU,EAAcxT,SAASzqC,KAAK+0C,SAAS,SAASlK,YAGhD,MAAMwT,EAAYJ,EAAcpT,WAEd,YAAdwT,IACF5R,EAAI4R,UAA0B,SAAdA,EACZ,gBACAA,EAEP,CAED,GAAIH,EAAqBjU,WAAY,CACnC,MAAMoU,EAAY,IAAIvU,GAAS9pC,KAAKkH,SAAU,OAAQulC,EAAI4R,WACvDtR,WAAWmR,GACXrT,WAEH4B,EAAI4R,UAAYA,CACjB,CAGD,GAAIF,EAAgB9T,kBAAmB,CACrC,MAAMgH,EAAc8M,EAAgB7R,uBAAuBtsC,KAAMo+C,GAE7D/M,IACF5E,EAAI4E,YAAcA,EAErB,MACD,GAAI8M,EAAgBlU,WAAY,CACM,iBAAhCkU,EAAgBnU,aAClBmU,EAAgB1T,SAASzqC,KAAK+0C,SAAS,SAASlK,YAGlD,MAAMwG,EAAc8M,EAAgBnU,YAEhB,YAAhBqH,IACF5E,EAAI4E,YAA8B,SAAhBA,EACd,gBACAA,EAEP,CAED,GAAI+M,EAAkBnU,WAAY,CAChC,MAAMoH,EAAc,IAAIvH,GAAS9pC,KAAKkH,SAAU,SAAUulC,EAAI4E,aAC3DtE,WAAWqR,GACXpU,YAEHyC,EAAI4E,YAAcA,CACnB,CAED,MAAMiN,EAAuBt+C,KAAK+0C,SAAS,gBAE3C,GAAIuJ,EAAqBrU,WAAY,CACnC,MAAMsU,EAAeD,EAAqB5S,YAE1Ce,EAAI+R,UAAaD,GACbrV,EAEL,CAED,MAAMuV,EAAyBz+C,KAAK+0C,SAAS,kBACvC2J,EAA0B1+C,KAAK+0C,SAAS,mBACxC4J,EAAuB3+C,KAAK+0C,SAAS,qBAGrC6J,EAA2B5+C,KAAK+0C,SAAS,oBACzC8J,EAAuB7+C,KAAK+0C,SAAS,qBAoB3C,GAlBI0J,EAAuBxU,aACzBwC,EAAI6E,QAAUmN,EAAuBzU,aAGnC0U,EAAwBzU,aAC1BwC,EAAI8E,SAAWmN,EAAwB1U,aAGrC2U,EAAqB1U,aACvBwC,EAAI+E,WAAamN,EAAqB/T,aASpCgU,EAAyB3U,YAAuD,SAAzC2U,EAAyB5U,YAAwB,CAC1F,MAAM8U,EAAO1W,GAAUwW,EAAyB5U,kBAEjB,IAApByC,EAAIsS,YACbtS,EAAIsS,YAAYD,QAGgB,IAAvBrS,EAAIuS,eAEbvS,EAAIuS,eAAiBF,OAGI,IAAhBrS,EAAIwS,SAA6C,IAAhBH,EAAK//C,QAA4B,IAAZ+/C,EAAK,KAEpErS,EAAIwS,QAAUH,GAGhB,MAAMI,EAASL,EAAqBnT,iBAEF,IAAvBe,EAAI0S,eACb1S,EAAI0S,eAAiBD,OAGiB,IAA7BzS,EAAI2S,qBAEb3S,EAAI2S,qBAAuBF,OAGI,IAAtBzS,EAAI4S,gBAEb5S,EAAI4S,cAAgBH,EAEvB,CACF,CAKD,GAFAl/C,KAAKs/C,qBAAsB,OAEH,IAAb7S,EAAIkP,KAAsB,CACnC,MAAM4D,EAAgBv/C,KAAK+0C,SAAS,QAC9ByK,EAAqBx/C,KAAK+0C,SAAS,cACnC0K,EAAuBz/C,KAAK+0C,SAAS,gBACrC2K,EAAsB1/C,KAAK+0C,SAAS,eACpC4K,EAAoB3/C,KAAK+0C,SAAS,aAClC6K,EAAsB5/C,KAAK+0C,SAAS,eACpC4G,EAAO,IAAID,GACf8D,EAAmBxV,YACnByV,EAAqBzV,YACrB0V,EAAoB1V,YACpB2V,EAAkB1V,WACb,GAAoCzpC,OAAlCm/C,EAAkBjU,WAAU,GAAM,MACrC,GACJkU,EAAoB5V,YACpB0R,GAAKp8C,MACHigD,EAAcvV,YACdyC,EAAIkP,OAIR6D,EAAmB/U,SAASkR,EAAKN,WACjCoE,EAAqBhV,SAASkR,EAAKC,aACnC8D,EAAoBjV,SAASkR,EAAKH,YAClCmE,EAAkBlV,SAASkR,EAAKE,UAChC+D,EAAoBnV,SAASkR,EAAKT,YAElCzO,EAAIkP,KAAOA,EAAK5+B,WAEZ4iC,EAAkBrV,aACpBtqC,KAAKkH,SAASskC,OAASmU,EAAkBjU,YACzC1rC,KAAKs/C,qBAAsB,EAE9B,CAEItB,IAEHh+C,KAAK64C,aAAapM,GAElBA,EAAIoT,YAAc7/C,KAAK89C,mBAE1B,CAEQ9E,aAAavM,GACpBwK,MAAM+B,aAAavM,GAEfzsC,KAAKs/C,qBACPt/C,KAAKkH,SAAS44C,WAEjB,C,8BAnNI9/C,KACGs/C,qBAAsB,C,ECKnBS,iBAAoBlC,GAwBtB/E,WAAWrM,GAAyBuR,MAAWp+C,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GACtDq3C,MAAM6B,WAAWrM,EAAKuR,GAEtB,MAAMgC,EAAehgD,KAAK+0C,SAAS,qBAAqBlI,mBACnD7sC,KAAK+0C,SAAS,sBAAsBlI,kBAErCmT,IACFvT,EAAIuT,aAAeA,EAEtB,CAESC,wBACRjgD,KAAKqC,EAAI,EACTrC,KAAK+e,EAAI,EACT/e,KAAKkgD,UAAY,GACjBlgD,KAAKmgD,eAAiB,EACtBngD,KAAKo+B,KAAOyD,OAAOue,kBACnBpgD,KAAKm+B,KAAO0D,OAAOwe,iBACpB,CAEDC,eAAe7T,GACb,GAAkB,SAAdzsC,KAAKE,KACP,OAAOF,KAAKugD,uBAAuB9T,GAIrCzsC,KAAKigD,wBACLjgD,KAAKwgD,gCAAgC/T,GAErC,IAAIoD,EAAkC,KAatC,OAVA7vC,KAAKmD,SAASqsC,SAAO,CAAE3vC,EAAGf,KACxB,MAAM2hD,EAAmBzgD,KAAK0gD,oBAAoBjU,EAAKzsC,KAAMA,KAAMlB,GAE9D+wC,EAGHA,EAAY2M,eAAeiE,GAF3B5Q,EAAc4Q,CAEaA,IAIxB5Q,CACR,CAES8Q,cACR,MACEz5C,WAAQ3D,OACRA,GACEvD,KACE4gD,EAAkBlF,GAAKp8C,MAAM4H,EAASulC,IAAIkP,MAAME,SAGtD,OAFiBt4C,EAAOwxC,SAAS,aAAanK,UAAUgW,EAGzD,CAESL,uBAAuB9T,GAC/B,MAAMoP,EAAW77C,KAAK2gD,cAEtB,OAAO,IAAIvE,GACTp8C,KAAKqC,EACLrC,KAAK+e,EAAI88B,EACT77C,KAAKqC,EAAIrC,KAAK6gD,YAAYpU,GAC1BzsC,KAAK+e,EAER,CAED+hC,SACEnF,EACA5rC,EACAjR,GAEA,MAAMiiD,EAAOhxC,EAAKjR,GAClB,IAAIkiD,EAEJ,GAAIrF,EAAKsF,SAAU,CAkBTtF,MAjBR,MAAMlsB,EAAM1f,EAAKhR,OACXmiD,EAAWnxC,EAAKjR,EAAI,GACpBqiD,EAAWpxC,EAAKjR,EAAI,GAC1B,IAAIsiD,EAAyB,YAElB,IAANtiD,GAAwB,MAAboiD,IAAqBpiD,EAAI2wB,EAAM,GAAkB,MAAb0xB,IAClDC,EAAa,YAGXtiD,EAAI,GAAkB,MAAboiD,GAAoBpiD,EAAI2wB,EAAM,GAAkB,MAAb0xB,IAC9CC,EAAa,UAGXtiD,EAAI,GAAkB,MAAboiD,IAAqBpiD,IAAM2wB,EAAM,GAAkB,MAAb0xB,KACjDC,EAAa,WAGfJ,GAA8B,QAAtBrF,IAAK0F,aAAaN,UAAlBpF,eAA0ByF,KAAezF,EAAK2F,OAAOP,EAC9D,MACCC,EAAQrF,EAAK2F,OAAOP,GAOtB,OAJKC,IACHA,EAAQrF,EAAK4F,cAGRP,CACR,CAEDjG,UACE,MAAO,EACR,CAESyG,gBAAgB7+C,GACxB,MAAMm4C,EAAWn4C,GAAQ3C,KAAK2C,KACxBk4C,EAAap5C,MAAMc,KAAKu4C,EAASnxC,WAAWkxC,YAC5Cr6B,EAAQq6B,EAAW15C,QAAQ25C,GAC3Bx6B,EAAYu6B,EAAW97C,OAAS,EACtC,IAAIgR,EAAOo4B,GAGT2S,EAAS5xC,aACN,IAWL,OARc,IAAVsX,IACFzQ,EAAgBA,EtBhJTyjB,QAAO,YAAc,KsBmJ1BhT,IAAUF,IACZvQ,EtB5IU0xC,SAAUjsB,GACxB,OAAOA,EAAIhC,QAAO,YAAc,GAClC,CsB0IaiuB,CAAU1xC,IAGZA,CACR,CAEQgpC,eAAetM,GACtB,GAAkB,SAAdzsC,KAAKE,KAEP,YADAF,KAAK0hD,uBAAuBjV,GAK9BzsC,KAAKigD,wBACLjgD,KAAKwgD,gCAAgC/T,GAGrCzsC,KAAKmD,SAASqsC,SAAO,CAAE3vC,EAAGf,KACxBkB,KAAK2hD,YAAYlV,EAAKzsC,KAAMA,KAAMlB,MAGpC,MAAMo1C,MAAEA,GAAUl0C,KAAKkH,SAAS8kC,OAG5BkI,EAAMrF,aACRqF,EAAMtE,iBACJ5vC,KACAA,KAAKsgD,eAAe7T,GAGzB,CAESiV,uBAAuBjV,GAC/B,MACEvlC,WAAQ3D,OACRA,GACEvD,KACE4hD,EAAa5hD,KAAK+6C,UAClB8G,EAAat+C,EAAOwxC,SAAS,eAAe3I,gBAElD,GAAIyV,EAAY,CACd,MAAMC,WAAEA,GAAeD,EAAWE,SAC5BC,EAAUtG,GAAKp8C,MAAM4H,EAASulC,IAAIkP,MAClCE,EAAWt4C,EAAOwxC,SAAS,aAAanK,UAAUoX,EAAQnG,UAC1DR,EAAY93C,EAAOwxC,SAAS,cAAc/K,UAAUgY,EAAQ3G,WAC5D70B,EAAQq1B,EAAWiG,EACnB/xC,EAAO8xC,EAAWI,MACpBL,EAAW3gD,MAAM,IAAIihD,UAAU71C,KAAK,IACpCu1C,EACE70B,EAAKqb,GAAU7kC,EAAOgF,aAAa,MAAMyhC,aACzCva,EAAM1f,EAAKhR,OAEjB,IAAK,IAAID,EAAI,EAAGA,EAAI2wB,EAAK3wB,IAAK,CAC5B,MAAMkiD,EAAQhhD,KAAK8gD,SAASe,EAAY9xC,EAAMjR,GAE9C2tC,EAAIlmB,UAAUvmB,KAAKqC,EAAGrC,KAAK+e,GAC3B0tB,EAAIjmB,MAAMA,GAAQA,GAElB,MAAM27B,EAAK1V,EAAI+R,UAEf/R,EAAI+R,UAAY/R,EAAI+R,UAAYsD,EAAajG,EAE3B,WAAdR,GACF5O,EAAI3lB,UAAU,EAAG,EAAG,GAAI,EAAG,EAAG,GAGhCk6B,EAAM3M,OAAO5H,GAEK,WAAd4O,GACF5O,EAAI3lB,UAAU,EAAG,GAAC,GAAO,EAAG,EAAG,GAGjC2lB,EAAI+R,UAAY2D,EAChB1V,EAAIjmB,MAAM,EAAIA,GAAK,EAAOA,GAC1BimB,EAAIlmB,WAAWvmB,KAAKqC,GAAIrC,KAAK+e,GAE7B/e,KAAKqC,GAAKw5C,GAAYmF,EAAMoB,WAAaP,EAAWO,WAAaN,OAE5C,IAAV/0B,EAAGjuB,IAAuB8d,MAAMmQ,EAAGjuB,MAC5CkB,KAAKqC,GAAK0qB,EAAGjuB,GAEhB,CAED,MACD,CAED,MAAMuD,EACJA,EAAC0c,EACDA,GACE/e,KAYAysC,EAAI4R,WACN5R,EAAI4V,SAAST,EAAYv/C,EAAG0c,GAG1B0tB,EAAI4E,aACN5E,EAAI6V,WAAWV,EAAYv/C,EAAG0c,EAGjC,CAESwjC,iBACR,GAAIviD,KAAKmgD,gBAAkBngD,KAAKkgD,UAAUnhD,OACxC,OAOF,MAAMyjD,EAAexiD,KAAKkgD,UAAUlgD,KAAKmgD,gBACnCsC,EAAaD,EAAazN,SAAS,eAAe/K,UAAU,SAElE,IAAI0Y,EAAQ,EAGVA,EADiB,UAAfD,EACMD,EAAangD,EAAIrC,KAAKo+B,KACN,QAAfqkB,EACDD,EAAangD,EAAIrC,KAAKm+B,KAEtBqkB,EAAangD,GAAKrC,KAAKo+B,KAAOp+B,KAAKm+B,MAAQ,EAGrD,IAAK,IAAIr/B,EAAIkB,KAAKmgD,eAAgBrhD,EAAIkB,KAAKkgD,UAAUnhD,OAAQD,IAC3DkB,KAAKkgD,UAAUphD,GAAGuD,GAAKqgD,EAIzB1iD,KAAKo+B,KAAOyD,OAAOue,kBACnBpgD,KAAKm+B,KAAO0D,OAAOwe,kBACnBrgD,KAAKmgD,eAAiBngD,KAAKkgD,UAAUnhD,MACtC,CAESyhD,gCAAgC/T,GACxCzsC,KAAKmD,SAASqsC,SAAO,CAAE3vC,EAAGf,KACxBkB,KAAK2iD,oCAAoClW,EAAKzsC,KAAMA,KAAMlB,MAE5DkB,KAAKuiD,gBACN,CAESI,oCACRlW,EACAmW,EACAr/C,EACAzE,GAEA,MAAMwG,EAAQ/B,EAAOJ,SAASrE,GAE1BwG,EAAMnC,SAASpE,OAAS,EAC1BuG,EAAMnC,SAASqsC,SAAO,CAAE3vC,EAAGf,KACzB8jD,EAAWD,oCAAoClW,EAAKmW,EAAYt9C,EAAOxG,MAIzEkB,KAAK6iD,uBAAuBpW,EAAKmW,EAAYr/C,EAAQzE,EAExD,CAES+jD,uBACRpW,EACAmW,EACAr/C,EACAzE,GAEA,MAAMwG,EAAQ/B,EAAOJ,SAASrE,GAE9B,GAAiC,mBAAtBwG,EAAMu7C,YACf,OAAOv7C,EAGTmnC,EAAIkM,OACJrzC,EAAMwzC,WAAWrM,GAAK,GAEtB,MAAMqW,EAAQx9C,EAAMiD,aAAa,KAC3Bw6C,EAAQz9C,EAAMiD,aAAa,KAC3By6C,EAAS19C,EAAMiD,aAAa,MAC5B06C,EAAS39C,EAAMiD,aAAa,MAC5Bs5C,EAAav8C,EAAMyvC,SAAS,eAAe3I,gBAC3C6V,EAAQiB,QAAQrB,iBAAYI,OAExB,IAANnjD,IAGGgkD,EAAM7Y,YACT6Y,EAAMrY,SAASnlC,EAAM69C,sBAAsB,MAGxCJ,EAAM9Y,YACT8Y,EAAMtY,SAASnlC,EAAM69C,sBAAsB,MAGxCH,EAAO/Y,YACV+Y,EAAOvY,SAASnlC,EAAM69C,sBAAsB,OAGzCF,EAAOhZ,YACVgZ,EAAOxY,SAASnlC,EAAM69C,sBAAsB,QAIhD,MAAM5f,EAAQj+B,EAAMu7C,YAAYpU,GAqDhC,OAnDIwV,IACFW,EAAWvgD,GAAKkhC,GAGduf,EAAM7Y,YAER2Y,EAAWL,iBAEXj9C,EAAMjD,EAAIygD,EAAMpX,UAAU,KAEtBsX,EAAO/Y,aACT3kC,EAAMjD,GAAK2gD,EAAOtX,UAAU,QAG1BsX,EAAO/Y,aACT2Y,EAAWvgD,GAAK2gD,EAAOtX,UAAU,MAGnCpmC,EAAMjD,EAAIugD,EAAWvgD,GAGvBugD,EAAWvgD,EAAIiD,EAAMjD,EAEhB4/C,IACHW,EAAWvgD,GAAKkhC,GAGdwf,EAAM9Y,YACR3kC,EAAMyZ,EAAIgkC,EAAMrX,UAAU,KAEtBuX,EAAOhZ,aACT3kC,EAAMyZ,GAAKkkC,EAAOvX,UAAU,QAG1BuX,EAAOhZ,aACT2Y,EAAW7jC,GAAKkkC,EAAOvX,UAAU,MAGnCpmC,EAAMyZ,EAAI6jC,EAAW7jC,GAGvB6jC,EAAW7jC,EAAIzZ,EAAMyZ,EAGrB6jC,EAAW1C,UAAUz/C,KAAK6E,GAC1Bs9C,EAAWxkB,KAAOxvB,KAAKC,IAAI+zC,EAAWxkB,KAAM94B,EAAMjD,EAAGiD,EAAMjD,EAAIkhC,GAC/Dqf,EAAWzkB,KAAOvvB,KAAKiO,IAAI+lC,EAAWzkB,KAAM74B,EAAMjD,EAAGiD,EAAMjD,EAAIkhC,GAE/Dj+B,EAAM0zC,aAAavM,GACnBA,EAAIwM,UAEG3zC,CACR,CAESo7C,oBACRjU,EACAmW,EACAr/C,EACAzE,GAEA,MAAMwG,EAAQ/B,EAAOJ,SAASrE,GAG9B,GAAoC,mBAAzBwG,EAAMg7C,eACf,OAAO,KAGT,MAAMzQ,EAAcvqC,EAAMg7C,eAAe7T,GAUzC,OARIoD,GACFvqC,EAAMnC,SAASqsC,SAAO,CAAE3vC,EAAGf,KACzB,MAAM2hD,EAAmBmC,EAAWlC,oBAAoBjU,EAAKmW,EAAYt9C,EAAOxG,GAEhF+wC,EAAY2M,eAAeiE,MAIxB5Q,CACR,CAES8R,YACRlV,EACAmW,EACAr/C,EACAzE,GAEA,MAAMwG,EAAQ/B,EAAOJ,SAASrE,GAE9BwG,EAAM+uC,OAAO5H,GACbnnC,EAAMnC,SAASqsC,SAAO,CAAE3vC,EAAGf,KACzB8jD,EAAWjB,YAAYlV,EAAKmW,EAAYt9C,EAAOxG,KAElD,CAES+hD,YAAYpU,GACpB,MAAM2W,aAAEA,GAAiBpjD,KAEzB,IAAKojD,EACH,OAAOA,EAGT,MAAMxB,EAAa5hD,KAAK+6C,UAClBsI,EAAUrjD,KAAKsjD,kBAAkB7W,EAAKmV,GAI5C,OAFA5hD,KAAKojD,aAAeC,EAEbA,CACR,CAESC,kBACR7W,EACA8W,GAEA,IAAKA,EAAWxkD,OACd,OAAO,EAGT,MAAMwE,OAAEA,GAAWvD,KACb6hD,EAAat+C,EAAOwxC,SAAS,eAAe3I,gBAElD,GAAIyV,EAAY,CACd,MAAMhG,EAAW77C,KAAK2gD,cAChB5wC,EAAO8xC,EAAWI,MACpBsB,EAAWtiD,MAAM,IAAIihD,UAAU71C,KAAK,IACpCk3C,EACEx2B,EAAKqb,GAAU7kC,EAAOgF,aAAa,MAAMyhC,aACzCva,EAAM1f,EAAKhR,OACjB,IAAIskD,EAAU,EAEd,IAAK,IAAIvkD,EAAI,EAAGA,EAAI2wB,EAAK3wB,IAAK,CAG5BukD,IAFcrjD,KAAK8gD,SAASe,EAAY9xC,EAAMjR,GAE5BsjD,WAAaP,EAAWO,WACtCvG,EACAgG,EAAWE,SAASD,gBAEH,IAAV/0B,EAAGjuB,IAAuB8d,MAAMmQ,EAAGjuB,MAC5CukD,GAAWt2B,EAAGjuB,GAEjB,CAED,OAAOukD,CACR,CAGD,IAAK5W,EAAIoU,YACP,OAA2B,GAApB0C,EAAWxkD,OAGpB0tC,EAAIkM,OACJ34C,KAAK84C,WAAWrM,GAAK,GAErB,MAAQlJ,MAAO8f,GAAY5W,EAAIoU,YAAY0C,GAK3C,OAHAvjD,KAAKg5C,aAAavM,GAClBA,EAAIwM,UAEGoK,CACR,CAQSF,sBAAsBhjD,GAE9B,IAAI6tC,EAA0BhuC,KAEvBguC,kBAAmB+R,IAAe/R,EAAQoM,gBAAkBpM,EAAQzqC,QAAQ,CACjF,MAAMigD,EAAaxV,EAAQzqC,OAAOgF,aAAapI,GAE/C,GAAIqjD,EAAWvZ,UAAS,GACtB,OAAOuZ,EAAWxZ,UAAU,KAG9BgE,EAAUA,EAAQzqC,MACnB,CAED,OAAO,IACR,CAphBC2D,cACAvE,EACA23C,GAEArD,MACE/vC,EACAvE,eACeo9C,IAEXzF,GApBHt6C,KACIE,KAAO,OADXF,KAEKqC,EAAI,EAFTrC,KAGK+e,EAAI,EAHT/e,KAIGkgD,UAA2B,GAJ9BlgD,KAKGmgD,eAAiB,EALpBngD,KAMGo+B,KAAOyD,OAAOue,kBANjBpgD,KAOGm+B,KAAO0D,OAAOwe,kBAPjBrgD,KAQGojD,cAAY,CAcnB,EClCUK,iBAAqB1D,GAuBvBhF,UACP,OAAO/6C,KAAK+P,IACb,CApBC7I,cACAvE,EACA23C,GAEArD,MACE/vC,EACAvE,eACe8gD,IAEXnJ,GAdHt6C,KACIE,KAAO,QAiBdF,KAAK+P,KAAO/P,KAAKmD,SAASpE,OAAS,EAC/B,GACAiB,KAAKwhD,iBACV,ECtBUkC,iBAAiBD,G,8BAAvBzjD,KACIE,KAAO,U,EC0BLyjD,iBAAmBxqB,GAqB9ByqB,QACE5jD,KAAKlB,GAAC,EACNkB,KAAKy4B,QAAU,KACfz4B,KAAK6jD,gBAAkB,KACvB7jD,KAAKqf,MAAQ,IAAI8uB,GAAM,EAAG,GAC1BnuC,KAAK8jD,QAAU,IAAI3V,GAAM,EAAG,GAC5BnuC,KAAKguC,QAAU,IAAIG,GAAM,EAAG,GAC5BnuC,KAAKuuC,OAAS,GACdvuC,KAAK+jD,OAAS,EACf,CAEDC,QACE,MAAMllD,EACJA,EAACmiC,SACDA,GACEjhC,KAEJ,OAAOlB,GAAKmiC,EAASliC,OAAS,CAC/B,CAEDyG,OACE,MAAMizB,EAAUz4B,KAAKihC,WAAWjhC,KAAKlB,GAKrC,OAHAkB,KAAK6jD,gBAAkB7jD,KAAKy4B,QAC5Bz4B,KAAKy4B,QAAUA,EAERA,CACR,CAEDwrB,WAASC,MAAKtkD,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,IAAKukD,EAAKvkD,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,IAC5B,MAAMmuB,EAAQ,IAAIogB,GAChBnuC,KAAKy4B,QAAQyrB,GACblkD,KAAKy4B,QAAQ0rB,IAGf,OAAOnkD,KAAKokD,aAAar2B,EAC1B,CAEDs2B,kBAAkBH,EAAgBC,GAChC,MAAMp2B,EAAQ/tB,KAAKikD,SAASC,EAAOC,GAInC,OAFAnkD,KAAK8jD,QAAU/1B,EAERA,CACR,CAEDu2B,kBAAkBJ,EAAgBC,GAChC,MAAMp2B,EAAQ/tB,KAAKikD,SAASC,EAAOC,GAInC,OAFAnkD,KAAKguC,QAAUjgB,EAERA,CACR,CAEDw2B,2BACE,MAAMV,EAAkB7jD,KAAK6jD,gBAAgB3jD,KAE7C,GAAI2jD,IAAoB1qB,GAAYE,UAC/BwqB,IAAoB1qB,GAAYC,iBAChCyqB,IAAoB1qB,GAAYI,SAChCsqB,IAAoB1qB,GAAYG,eAEnC,OAAOt5B,KAAKguC,QAId,MACEA,SACE3rC,EAAGw1C,EACH94B,EAAG+4B,GAELgM,SACEzhD,EAAGmiD,EACHzlC,EAAG0lC,IAEHzkD,KAGJ,OAFc,IAAImuC,GAAM,EAAI0J,EAAK2M,EAAI,EAAI1M,EAAK2M,EAG/C,CAEDL,aAAar2B,GACX,GAAI/tB,KAAKy4B,QAAQG,SAAU,CACzB,MAAMv2B,EACJA,EAAC0c,EACDA,GACE/e,KAAKguC,QAETjgB,EAAM1rB,GAAKA,EACX0rB,EAAMhP,GAAKA,CACZ,CAED,OAAOgP,CACR,CAED22B,UAAU32B,EAAcxrB,EAAcoiD,GACpC,MAAMpW,OACJA,EAAMwV,OACNA,GACE/jD,KAGA2kD,GAAWZ,EAAOhlD,OAAS,IAAMglD,EAAOA,EAAOhlD,OAAS,KAC1DglD,EAAOA,EAAOhlD,OAAS,GAAKwvC,EAAOA,EAAOxvC,OAAS,GAAG0vC,QAAQkW,IAGhE3kD,KAAK4kD,eAAe72B,EAAOxrB,EAAOA,EAAKksC,QAAQ1gB,GAAS,KACzD,CAED62B,eAAe72B,EAAcmpB,GAC3Bl3C,KAAKuuC,OAAO9tC,KAAKstB,GACjB/tB,KAAK+jD,OAAOtjD,KAAKy2C,EAClB,CAED2N,kBACE,OAAO7kD,KAAKuuC,MACb,CAEDuW,kBACE,MAAMf,OAAEA,GAAW/jD,KACbyvB,EAAMs0B,EAAOhlD,OAEnB,IAAK,IAAID,EAAI,EAAGA,EAAI2wB,EAAK3wB,IACvB,IAAKilD,EAAOjlD,GACV,IAAK,IAAIkM,EAAIlM,EAAI,EAAGkM,EAAIykB,EAAKzkB,IAC3B,GAAI+4C,EAAO/4C,GAAI,CACb+4C,EAAOjlD,GAAKilD,EAAO/4C,GACnB,KACD,CAKP,OAAO+4C,CACR,CAhJWnhB,eACVqU,MACErU,EAEGpP,QAAO,gBAAkB,MAEzBA,QAAO,sCAAwC,KAjBjDxzB,KACL8jD,QAAiB,IAAI3V,GAAM,EAAG,GADzBnuC,KAELqf,MAAe,IAAI8uB,GAAM,EAAG,GAFvBnuC,KAGLguC,QAAiB,IAAIG,GAAM,EAAG,GAHzBnuC,KAILy4B,QAA0B,KAJrBz4B,KAKaihC,SAAuCjhC,KAAKihC,SALzDjhC,KAMGlB,GAAC,EANJkB,KAOG6jD,gBAAkC,KAPrC7jD,KAQGuuC,OAAkB,GARrBvuC,KASG+jD,OAA4B,EAUnC,ECjCUgB,iBAAoBlH,GAc/Bjb,KAAK6J,GACH,MAAMuY,WAAEA,GAAehlD,KACjB6vC,EAAc,IAAIuM,GAQhB4I,IANRA,EAAWpB,QAEPnX,GACFA,EAAIuG,aAGEgS,EAAWhB,gBACTgB,EAAWx/C,OAAOtF,MACxB,KAAKyjD,GAAW5pB,QACd/5B,KAAKilD,MAAMxY,EAAKoD,GAChB,MAEF,KAAK8T,GAAWlpB,QACdz6B,KAAKklD,MAAMzY,EAAKoD,GAChB,MAEF,KAAK8T,GAAWnpB,cACdx6B,KAAKmlD,MAAM1Y,EAAKoD,GAChB,MAEF,KAAK8T,GAAWjpB,aACd16B,KAAKolD,MAAM3Y,EAAKoD,GAChB,MAEF,KAAK8T,GAAWtqB,SACdr5B,KAAKqlD,MAAM5Y,EAAKoD,GAChB,MAEF,KAAK8T,GAAWvqB,gBACdp5B,KAAKslD,MAAM7Y,EAAKoD,GAChB,MAEF,KAAK8T,GAAWpqB,QACdv5B,KAAKulD,MAAM9Y,EAAKoD,GAChB,MAEF,KAAK8T,GAAWrqB,eACdt5B,KAAKwlD,MAAM/Y,EAAKoD,GAChB,MAEF,KAAK8T,GAAW3nB,IACdh8B,KAAKylD,MAAMhZ,EAAKoD,GAChB,MAEF,KAAK8T,GAAW1pB,WACdj6B,KAAK0lD,MAAMjZ,EAAKoD,GAOtB,OAAOA,CACR,CAEDyQ,eAAeqF,GACb,OAAO3lD,KAAK4iC,MACb,CAEDgjB,aACE,MAAMZ,WAAEA,GAAehlD,KACjBuuC,EAASyW,EAAWH,kBACpBd,EAASiB,EAAWF,kBAG1B,OAFgBvW,EAAOrtC,KAAG,CAAE6sB,EAAOjvB,IAAc,CAACivB,EAAOg2B,EAAOjlD,KAGjE,CAEQi6C,eAAetM,GACtBzsC,KAAK4iC,KAAK6J,GACVzsC,KAAKkH,SAAS8kC,OAAOkI,MAAMxE,UAAU1vC,KAAMysC,GAE3C,MAAMoZ,EAAoB7lD,KAAK+0C,SAAS,aAElB,KAAlBtI,EAAI4R,YACyC,YAA3CwH,EAAkB7b,UAAU,WAC9ByC,EAAIqZ,KAAKD,EAAkB7b,aAE3ByC,EAAIqZ,QAIgB,KAApBrZ,EAAI4E,cACiD,uBAAnDrxC,KAAKuI,aAAa,iBAAiByhC,aACrCyC,EAAIkM,OACJlM,EAAIsZ,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCtZ,EAAIuZ,SACJvZ,EAAIwM,WAEJxM,EAAIuZ,UAIR,MAAMC,EAAUjmD,KAAK4lD,aAErB,GAAIK,EAAS,CACX,MAAMC,EAAmBD,EAAQlnD,OAAS,EACpConD,EAAuBnmD,KAAK+0C,SAAS,gBACrCqR,EAAqBpmD,KAAK+0C,SAAS,cACnCsR,EAAqBrmD,KAAK+0C,SAAS,cAEzC,GAAIoR,EAAqB9b,kBAAmB,CAC1C,MAAM1a,EAASw2B,EAAqB/Z,iBAC7Bre,EAAOmpB,GAAS+O,EAAQ,GAE/Bt2B,EAAO0kB,OAAO5H,EAAK1e,EAAOmpB,EAC3B,CAED,GAAIkP,EAAmB/b,kBAAmB,CACxC,MAAM1a,EAASy2B,EAAmBha,gBAElC,IAAK,IAAIttC,EAAI,EAAGA,EAAIonD,EAAkBpnD,IAAK,CACzC,MAAOivB,EAAOmpB,GAAS+O,EAAQnnD,GAE/B6wB,EAAO0kB,OAAO5H,EAAK1e,EAAOmpB,EAC3B,CACF,CAED,GAAImP,EAAmBhc,kBAAmB,CACxC,MAAM1a,EAAS02B,EAAmBja,iBAC3Bre,EAAOmpB,GAAS+O,EAAQC,GAE/Bv2B,EAAO0kB,OAAO5H,EAAK1e,EAAOmpB,EAC3B,CACF,CACF,CAEM+N,aAAMD,GACX,MAAMj3B,EAAQi3B,EAAWV,oBAIzB,OAFAU,EAAW3lC,MAAQ2lC,EAAWhX,QAEvB,C,MACLjgB,EAEH,CAESk3B,MACRxY,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjB+tB,MAAEA,GAAUg3B,GAAYE,MAAMD,IAC9B3iD,EACJA,EAAC0c,EACDA,GACEgP,EAEJi3B,EAAWN,UAAU32B,GACrB8hB,EAAYwM,SAASh6C,EAAG0c,GAEpB0tB,GACFA,EAAIwG,OAAO5wC,EAAG0c,EAEjB,CAEMmmC,aAAMF,GACX,MAAMhX,QAAEA,GAAYgX,EAGpB,MAAO,C,QACLhX,E,MAHYgX,EAAWV,oBAM1B,CAESY,MACRzY,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOjgB,MACPA,GACEg3B,GAAYG,MAAMF,IAChB3iD,EACJA,EAAC0c,EACDA,GACEgP,EAEJi3B,EAAWN,UAAU32B,EAAOigB,GAC5B6B,EAAYwM,SAASh6C,EAAG0c,GAEpB0tB,GACFA,EAAIyG,OAAO7wC,EAAG0c,EAEjB,CAEMomC,aAAMH,GACX,MAAMhX,QACJA,EAAOvV,QACPA,GACEusB,EACEj3B,EAAQ,IAAIogB,IACf1V,EAAQG,SAAWoV,EAAQ3rC,EAAI,GAAKo2B,EAAQp2B,EAC7C2rC,EAAQjvB,GAKV,OAFAimC,EAAWhX,QAAUjgB,EAEd,C,QACLigB,E,MACAjgB,EAEH,CAESo3B,MACR1Y,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOjgB,MACPA,GACEg3B,GAAYI,MAAMH,IAChB3iD,EACJA,EAAC0c,EACDA,GACEgP,EAEJi3B,EAAWN,UAAU32B,EAAOigB,GAC5B6B,EAAYwM,SAASh6C,EAAG0c,GAEpB0tB,GACFA,EAAIyG,OAAO7wC,EAAG0c,EAEjB,CAEMqmC,aAAMJ,GACX,MAAMhX,QACJA,EAAOvV,QACPA,GACEusB,EACEj3B,EAAQ,IAAIogB,GAChBH,EAAQ3rC,GACPo2B,EAAQG,SAAWoV,EAAQjvB,EAAI,GAAK0Z,EAAQ1Z,GAK/C,OAFAimC,EAAWhX,QAAUjgB,EAEd,C,QACLigB,E,MACAjgB,EAEH,CAESq3B,MACR3Y,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOjgB,MACPA,GACEg3B,GAAYK,MAAMJ,IAChB3iD,EACJA,EAAC0c,EACDA,GACEgP,EAEJi3B,EAAWN,UAAU32B,EAAOigB,GAC5B6B,EAAYwM,SAASh6C,EAAG0c,GAEpB0tB,GACFA,EAAIyG,OAAO7wC,EAAG0c,EAEjB,CAEMsmC,aAAML,GACX,MAAMhX,QAAEA,GAAYgX,EAKpB,MAAO,C,QACLhX,E,MALYgX,EAAWf,SAAS,KAAM,M,aACnBe,EAAWX,kBAAkB,KAAM,M,aACnCW,EAAWV,oBAQjC,CAESe,MACR5Y,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOjgB,MACPA,EAAKu4B,aACLA,EAAYC,aACZA,GACExB,GAAYM,MAAML,GAEtBA,EAAWN,UAAU6B,EAAcD,EAAcv4B,GACjD8hB,EAAYkN,eACV/O,EAAQ3rC,EACR2rC,EAAQjvB,EACRgP,EAAM1rB,EACN0rB,EAAMhP,EACNunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,GAGX0tB,GACFA,EAAI+Z,cACFz4B,EAAM1rB,EACN0rB,EAAMhP,EACNunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,EAGlB,CAEMumC,aAAMN,GACX,MAAMhX,QAAEA,GAAYgX,EAKpB,MAAO,C,QACLhX,E,MALYgX,EAAWT,2B,aACJS,EAAWX,kBAAkB,KAAM,M,aACnCW,EAAWV,oBAQjC,CAESgB,MACR7Y,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOjgB,MACPA,EAAKu4B,aACLA,EAAYC,aACZA,GACExB,GAAYO,MAAMN,GAEtBA,EAAWN,UAAU6B,EAAcD,EAAcv4B,GACjD8hB,EAAYkN,eACV/O,EAAQ3rC,EACR2rC,EAAQjvB,EACRgP,EAAM1rB,EACN0rB,EAAMhP,EACNunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,GAGX0tB,GACFA,EAAI+Z,cACFz4B,EAAM1rB,EACN0rB,EAAMhP,EACNunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,EAGlB,CAEMwmC,aAAMP,GACX,MAAMhX,QAAEA,GAAYgX,EAIpB,MAAO,C,QACLhX,E,aAJmBgX,EAAWX,kBAAkB,KAAM,M,aACnCW,EAAWV,oBAOjC,CAESiB,MACR9Y,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOsY,aACPA,EAAYC,aACZA,GACExB,GAAYQ,MAAMP,GAEtBA,EAAWN,UAAU6B,EAAcD,EAAcA,GACjDzW,EAAY2N,kBACVxP,EAAQ3rC,EACR2rC,EAAQjvB,EACRunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,GAGX0tB,GACFA,EAAIga,iBACFH,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,EAGlB,CAEMymC,aAAMR,GACX,MAAMhX,QAAEA,GAAYgX,EACdsB,EAAetB,EAAWT,2BAEhCS,EAAWlB,QAAUwC,EAIrB,MAAO,C,QACLtY,E,aACAsY,E,aAJmBtB,EAAWV,oBAOjC,CAESkB,MACR/Y,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBguC,QACJA,EAAOsY,aACPA,EAAYC,aACZA,GACExB,GAAYS,MAAMR,GAEtBA,EAAWN,UAAU6B,EAAcD,EAAcA,GACjDzW,EAAY2N,kBACVxP,EAAQ3rC,EACR2rC,EAAQjvB,EACRunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,GAGX0tB,GACFA,EAAIga,iBACFH,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,EAGlB,CAEM0mC,aAAMT,GACX,MAAMhX,QACJA,EAAOvV,QACPA,GACEusB,EACJ,IAAI3uB,GACFA,EAAEC,GACFA,EAAEC,KACFA,EAAIJ,SACJA,EAAQC,UACRA,GACEqC,EACJ,MAAMiuB,EAAgBnwB,GAAQ3nB,KAAKsW,GAAK,KAClCqhC,EAAevB,EAAWV,oBAI1BqC,EAAQ,IAAIxY,GAChBv/B,KAAK+mB,IAAI+wB,IAAkB1Y,EAAQ3rC,EAAIkkD,EAAalkD,GAAK,EACvDuM,KAAKgnB,IAAI8wB,IAAkB1Y,EAAQjvB,EAAIwnC,EAAaxnC,GAAK,GAC1DnQ,KAAKgnB,IAAI8wB,IAAkB1Y,EAAQ3rC,EAAIkkD,EAAalkD,GAAK,EACxDuM,KAAK+mB,IAAI+wB,IAAkB1Y,EAAQjvB,EAAIwnC,EAAaxnC,GAAK,GAGvDpD,EACJ/M,KAAK4P,IAAImoC,EAAMtkD,EAAG,GAAKuM,KAAK4P,IAAI6X,EAAI,GAClCznB,KAAK4P,IAAImoC,EAAM5nC,EAAG,GAAKnQ,KAAK4P,IAAI8X,EAAI,GAEpC3a,EAAI,IACN0a,GAAMznB,KAAK+W,KAAKhK,GAChB2a,GAAM1nB,KAAK+W,KAAKhK,IAIlB,IAAIsB,GAAKkZ,IAAaC,GAAS,EAAQ,GAAKxnB,KAAK+W,MAE5C/W,KAAK4P,IAAI6X,EAAI,GAAKznB,KAAK4P,IAAI8X,EAAI,GAC7B1nB,KAAK4P,IAAI6X,EAAI,GAAKznB,KAAK4P,IAAImoC,EAAM5nC,EAAG,GACpCnQ,KAAK4P,IAAI8X,EAAI,GAAK1nB,KAAK4P,IAAImoC,EAAMtkD,EAAG,KAEvCuM,KAAK4P,IAAI6X,EAAI,GAAKznB,KAAK4P,IAAImoC,EAAM5nC,EAAG,GAClCnQ,KAAK4P,IAAI8X,EAAI,GAAK1nB,KAAK4P,IAAImoC,EAAMtkD,EAAG,KAItCua,MAAMK,KACRA,EAAI,GAGN,MAAM2pC,EAAM,IAAIzY,GACdlxB,EAAIoZ,EAAKswB,EAAM5nC,EAAIuX,EACnBrZ,GAAKqZ,EAAKqwB,EAAMtkD,EAAIg0B,GAGhBwwB,EAAQ,IAAI1Y,IACfH,EAAQ3rC,EAAIkkD,EAAalkD,GAAK,EAC7BuM,KAAK+mB,IAAI+wB,GAAiBE,EAAIvkD,EAC9BuM,KAAKgnB,IAAI8wB,GAAiBE,EAAI7nC,GAC/BivB,EAAQjvB,EAAIwnC,EAAaxnC,GAAK,EAC7BnQ,KAAKgnB,IAAI8wB,GAAiBE,EAAIvkD,EAC9BuM,KAAK+mB,IAAI+wB,GAAiBE,EAAI7nC,GAG5B+nC,EAAKzd,GAAa,CAAC,EAAG,GAAI,EAAEsd,EAAMtkD,EAAIukD,EAAIvkD,GAAKg0B,GAAKswB,EAAM5nC,EAAI6nC,EAAI7nC,GAAKuX,IAEvE7I,EAAI,EAAEk5B,EAAMtkD,EAAIukD,EAAIvkD,GAAKg0B,GAAKswB,EAAM5nC,EAAI6nC,EAAI7nC,GAAKuX,GACjDxvB,EAAI,GAAG6/C,EAAMtkD,EAAIukD,EAAIvkD,GAAKg0B,IAAMswB,EAAM5nC,EAAI6nC,EAAI7nC,GAAKuX,GACzD,IAAIywB,EAAK1d,GAAa5b,EAAG3mB,GAUzB,OARIsiC,GAAa3b,EAAG3mB,KAAC,IACnBigD,EAAKn4C,KAAKsW,IAGRkkB,GAAa3b,EAAG3mB,IAAM,IACxBigD,EAAK,GAGA,C,aACLR,E,GACAlwB,E,GACAC,E,UACAF,E,cACAswB,E,MACAG,E,GACAC,E,GACAC,EAEH,CAEStB,MACRhZ,EACAoD,GAEA,MAAMmV,WAAEA,GAAehlD,MACjBumD,aACJA,EAAYlwB,GACZA,EAAEC,GACFA,EAAEF,UACFA,EAASswB,cACTA,EAAaG,MACbA,EAAKC,GACLA,EAAEC,GACFA,GACEhC,GAAYU,MAAMT,GAEhB7zB,EAAM,EAAIiF,EAAY,GAAG,EACzB4wB,EAAKF,EAAK31B,GAAO41B,EAAK,GACtBE,EAAU,IAAI9Y,GAClB0Y,EAAMxkD,EAAIg0B,EAAKznB,KAAK+mB,IAAIqxB,GACxBH,EAAM9nC,EAAIuX,EAAK1nB,KAAKgnB,IAAIoxB,IAO1B,GAJAhC,EAAWJ,eAAeqC,EAASD,EAAK71B,EAAMviB,KAAKsW,GAAK,GACxD8/B,EAAWJ,eAAe2B,EAAcS,EAAK71B,EAAMviB,KAAKsW,IACxD2qB,EAAYwM,SAASkK,EAAalkD,EAAGkkD,EAAaxnC,GAE9C0tB,IAAQ7vB,MAAMkqC,KAAQlqC,MAAMmqC,GAAK,CACnC,MAAM5qC,EAAIka,EAAKC,EAAKD,EAAKC,EACnB4wB,EAAK7wB,EAAKC,EAAK,EAAID,EAAKC,EACxB6wB,EAAK9wB,EAAKC,EAAKA,EAAKD,EAAK,EAE/BoW,EAAIlmB,UAAUsgC,EAAMxkD,EAAGwkD,EAAM9nC,GAC7B0tB,EAAInnB,OAAOohC,GACXja,EAAIjmB,MAAM0gC,EAAIC,GACd1a,EAAI5P,IAAI,EAAG,EAAG1gB,EAAG2qC,EAAIA,EAAKC,EAAI7D,QAAQ,EAAI9sB,IAC1CqW,EAAIjmB,MAAM,EAAI0gC,EAAI,EAAIC,GACtB1a,EAAInnB,QAAQohC,GACZja,EAAIlmB,WAAWsgC,EAAMxkD,GAAIwkD,EAAM9nC,EAChC,CACF,CAEM2mC,aAAMV,GACXA,EAAWhX,QAAUgX,EAAW3lC,KACjC,CAESqmC,MACRjZ,EACAoD,GAEAkV,GAAYW,MAAM1lD,KAAKglD,YAEnBvY,GAEEoD,EAAY5Z,KAAO4Z,EAAYlY,IAC9BkY,EAAY3Z,KAAO2Z,EAAYhX,IAElC4T,EAAI0G,WAGT,CA3mBCjsC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GATnBt6C,KACIE,KAAO,OAUdF,KAAKglD,WAAa,IAAIrB,GAAW3jD,KAAKuI,aAAa,KAAKyhC,YACzD,ECrBUod,iBAAmBvJ,GAIrB/E,WAAWrM,GA0FI,IAAA4N,EAzFtB,MAAQnzC,YAAalH,MACfgsC,OACJA,EACArgC,UACEzE,EACEk8B,EAASqJ,EAAIrJ,OAInB,GAFA4I,EAAOoF,YAAY3E,GAEf,UAAWrJ,QACU,IAAbqJ,EAAIkP,MACXhwC,QACmC,IAA5BA,EAAO/D,iBACjB,CACA6kC,EAAIkP,KAAOhwC,EAAO/D,iBAAiBw7B,GAAQz7B,iBAAiB,QAE5D,MAAM0/C,EAAe,IAAIvd,GACvB5iC,EACA,WACAw0C,GAAKp8C,MAAMmtC,EAAIkP,MAAME,UAGnBwL,EAAapd,aACf/iC,EAASokC,WAAa+b,EAAa3b,UAAU,KAC7CxkC,EAASskC,OAAStkC,EAASokC,WAE9B,CAGItrC,KAAKuI,aAAa,KAAK0hC,YAC1BjqC,KAAKuI,aAAa,KAAK,GAAMkiC,SAAS,GAGnCzqC,KAAKuI,aAAa,KAAK0hC,YAC1BjqC,KAAKuI,aAAa,KAAK,GAAMkiC,SAAS,GAGxC,IAAIlH,MACFA,EAAKC,OACLA,GACEwI,EAAOD,SAEN/rC,KAAK+0C,SAAS,SAAS9K,YAC1BjqC,KAAK+0C,SAAS,SAAS,GAAMtK,SAAS,QAGnCzqC,KAAK+0C,SAAS,UAAU9K,YAC3BjqC,KAAK+0C,SAAS,UAAU,GAAMtK,SAAS,QAGpCzqC,KAAK+0C,SAAS,SAAS9K,YAC1BjqC,KAAK+0C,SAAS,SAAS,GAAMtK,SAAS,SAGxC,MAAM6c,EAAWtnD,KAAKuI,aAAa,QAC7Bg/C,EAAWvnD,KAAKuI,aAAa,QAC7Bi/C,EAAcxnD,KAAKuI,aAAa,WAChC8sC,EAAUmS,EAAYvd,WACxB7B,GAAUof,EAAYxd,aACtB,KACE+H,GAAQ/xC,KAAKq4B,MACmC,YAAjDr4B,KAAK+0C,SAAS,YAAYrK,SAAS,UACxC,IAAItM,EAAO,EACPI,EAAO,EACPwT,EAAQ,EACRC,EAAQ,EAERoD,IACFjX,EAAOiX,EAAQ,GACf7W,EAAO6W,EAAQ,IAGZr1C,KAAKq4B,OACRkL,EAAQvjC,KAAK+0C,SAAS,SAASrJ,UAAU,KACzClI,EAASxjC,KAAK+0C,SAAS,UAAUrJ,UAAU,KAEzB,WAAd1rC,KAAKE,OACP8xC,EAAQ5T,EACR6T,EAAQzT,EACRJ,EAAO,EACPI,EAAO,IAIXwN,EAAOD,SAAS4B,WAAWpK,EAAOC,IAI9BxjC,KAAK2C,MACF3C,KAAKuD,QAA6C,mBAAf,QAApB82C,EAAAr6C,KAAK2C,KAAKgH,kBAAV,IAAA0wC,OAAA,EAAAA,EAAsBM,YACvC36C,KAAK+0C,SAAS,aAAa,GAAO,GAAM9K,YACvCjqC,KAAK+0C,SAAS,oBAAoB,GAAO,GAAM9K,YAEnDjqC,KAAK+0C,SAAS,oBAAoB,GAAM,GAAMtK,SAAS,WAGzDwM,MAAM6B,WAAWrM,GAEjBA,EAAIlmB,UACFvmB,KAAKuI,aAAa,KAAKmjC,UAAU,KACjC1rC,KAAKuI,aAAa,KAAKmjC,UAAU,MAG/B2J,IACF9R,EAAQ8R,EAAQ,GAChB7R,EAAS6R,EAAQ,IAGnBnuC,EAASuqC,WAAW,C,IAClBhF,EACAiF,YAAa1xC,KAAKuI,aAAa,uBAAuByhC,YACtDzG,MAAOyI,EAAOD,SAASxI,MACvBoO,aAAcpO,EACdC,OAAQwI,EAAOD,SAASvI,OACxBoO,cAAepO,E,KACfpF,E,KACAI,EACAqT,KAAMyV,EAAS5c,WACfoH,KAAMyV,EAAS7c,W,KACfqH,E,MACAC,E,MACAC,IAGEoD,IACFrJ,EAAOD,SAAS6B,gBAChB5B,EAAOD,SAAS4B,WAAWpK,EAAOC,GAErC,CAEQwV,aAAavM,GACpBwK,MAAM+B,aAAavM,GAEnBzsC,KAAKkH,SAAS8kC,OAAOD,SAAS6B,eAC/B,CAQD6Z,OACElkB,GACAC,MAAM5jC,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG2jC,EACTmkB,EAAqC9nD,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GAErC,MAAM+nD,EAAY3nD,KAAKuI,aAAa,SAAS,GACvCq/C,EAAa5nD,KAAKuI,aAAa,UAAU,GACzCi/C,EAAcxnD,KAAKuI,aAAa,WAChCs/C,EAAY7nD,KAAKuI,aAAa,SAC9Bu/C,EAAcH,EAAU/c,UAAU,GAClCmd,EAAeH,EAAWhd,UAAU,GAE1C,GAAI8c,EACF,GAAmC,iBAAxBA,EACT1nD,KAAKuI,aAAa,uBAAuB,GAAMkiC,SAASid,OACnD,CACL,MAAMM,EAA0BhoD,KAAKuI,aAAa,uBAE9Cy/C,EAAwB/d,YAC1B+d,EAAwBvd,SAASud,EAAwBhe,YAAYxW,QAAO,mBAAqB,MAEpG,CAUH,GAPAm0B,EAAUld,SAASlH,GACnBqkB,EAAWnd,SAASjH,GAEfgkB,EAAYvd,YACfud,EAAY/c,SAAU,OAA8Bsd,OAAxBD,GAAevkB,EAAM,KAA0B/iC,OAAvBunD,GAAgBvkB,IAGlEqkB,EAAU5d,WAAY,CACxB,MAAM6K,EAAa90C,KAAK+0C,SAAS,SAC3BC,EAAch1C,KAAK+0C,SAAS,UAE9BD,EAAW7K,YACb6K,EAAWrK,SAAU,GAAQjqC,OAAN+iC,EAAM,OAG3ByR,EAAY/K,YACd+K,EAAYvK,SAAU,GAASjqC,OAAPgjC,EAAO,MAElC,CACF,C,8BA9LIxjC,KACIE,KAAO,MADXF,KAELq4B,MAAO,C,ECJI4vB,iBAAoBlD,GAGtBniB,KAAK6J,GACZ,MAAMpqC,EAAIrC,KAAKuI,aAAa,KAAKmjC,UAAU,KACrC3sB,EAAI/e,KAAKuI,aAAa,KAAKmjC,UAAU,KACrCnI,EAAQvjC,KAAK+0C,SAAS,SAAS,GAAO,GAAMrJ,UAAU,KACtDlI,EAASxjC,KAAK+0C,SAAS,UAAU,GAAO,GAAMrJ,UAAU,KACxDwc,EAASloD,KAAKuI,aAAa,MAC3B4/C,EAASnoD,KAAKuI,aAAa,MACjC,IAAI6/C,EAAKF,EAAOxc,UAAU,KACtB2c,EAAKF,EAAOzc,UAAU,KAa1B,GAXIwc,EAAOje,aAAeke,EAAOle,aAC/Boe,EAAKD,GAGHD,EAAOle,aAAeie,EAAOje,aAC/Bme,EAAKC,GAGPD,EAAKx5C,KAAKC,IAAIu5C,EAAI7kB,EAAQ,GAC1B8kB,EAAKz5C,KAAKC,IAAIw5C,EAAI7kB,EAAS,GAEvBiJ,EAAK,CACP,MAAM6b,GAAc15C,KAAK+W,KAAK,GAAK,GAAK,EAA1B,EAEd8mB,EAAIuG,YAEAxP,EAAS,GAAKD,EAAQ,IACxBkJ,EAAIwG,OAAO5wC,EAAI+lD,EAAIrpC,GACnB0tB,EAAIyG,OAAO7wC,EAAIkhC,EAAQ6kB,EAAIrpC,GAC3B0tB,EAAI+Z,cAAcnkD,EAAIkhC,EAAQ6kB,EAAME,EAAQF,EAAKrpC,EAAG1c,EAAIkhC,EAAOxkB,EAAIspC,EAAMC,EAAQD,EAAKhmD,EAAIkhC,EAAOxkB,EAAIspC,GACrG5b,EAAIyG,OAAO7wC,EAAIkhC,EAAOxkB,EAAIykB,EAAS6kB,GACnC5b,EAAI+Z,cACFnkD,EAAIkhC,EACJxkB,EAAIykB,EAAS6kB,EAAMC,EAAQD,EAC3BhmD,EAAIkhC,EAAQ6kB,EAAME,EAAQF,EAC1BrpC,EAAIykB,EACJnhC,EAAIkhC,EAAQ6kB,EACZrpC,EAAIykB,GAENiJ,EAAIyG,OAAO7wC,EAAI+lD,EAAIrpC,EAAIykB,GACvBiJ,EAAI+Z,cAAcnkD,EAAI+lD,EAAME,EAAQF,EAAKrpC,EAAIykB,EAAQnhC,EAAG0c,EAAIykB,EAAS6kB,EAAMC,EAAQD,EAAKhmD,EAAG0c,EAAIykB,EAAS6kB,GACxG5b,EAAIyG,OAAO7wC,EAAG0c,EAAIspC,GAClB5b,EAAI+Z,cAAcnkD,EAAG0c,EAAIspC,EAAMC,EAAQD,EAAKhmD,EAAI+lD,EAAME,EAAQF,EAAKrpC,EAAG1c,EAAI+lD,EAAIrpC,GAC9E0tB,EAAI0G,YAEP,CAED,OAAO,IAAIiJ,GAAY/5C,EAAG0c,EAAG1c,EAAIkhC,EAAOxkB,EAAIykB,EAC7C,CAEQoiB,aACP,OAAO,IACR,C,8BAvDI5lD,KACIE,KAAO,M,ECCLqoD,iBAAwBxD,GAgB1BniB,KAAK6J,GACZ,MAAM8B,OAAEA,GAAWvuC,OAGfqC,EAAGy1B,EACH/Y,EAAG+d,IAEHyR,EACEsB,EAAc,IAAIuM,GAAYtkB,EAAIgF,GAkBxC,OAhBI2P,IACFA,EAAIuG,YACJvG,EAAIwG,OAAOnb,EAAIgF,IAGjByR,EAAOiB,SAAOC,IAAE,IAAAptC,EACdA,EAAC0c,EACDA,GAFc0wB,EAIdI,EAAYwM,SAASh6C,EAAG0c,GAEpB0tB,GACFA,EAAIyG,OAAO7wC,EAAG0c,MAIX8wB,CACR,CAEQ+V,aACP,MAAMrX,OAAEA,GAAWvuC,KACbsgB,EAAYiuB,EAAOxvC,OAAS,EAC5BknD,EAAoB,GAc1B,OAZA1X,EAAOiB,SAAO,CAAEzhB,EAAOjvB,KACjBA,IAAMwhB,GAIV2lC,EAAQxlD,KAAK,CAACstB,EAAOA,EAAM0gB,QAAQF,EAAOzvC,EAAI,KAAI,IAGhDmnD,EAAQlnD,OAAS,GACnBknD,EAAQxlD,KAAK,CAAC8tC,EAAOA,EAAOxvC,OAAS,GAAIknD,EAAQA,EAAQlnD,OAAS,GAAG,KAGhEknD,CACR,CA1DC/+C,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GATnBt6C,KACIE,KAAO,WADXF,KAEcuuC,OAAkB,GASnCvuC,KAAKuuC,OAASJ,GAAMG,UAClBtuC,KAAKuI,aAAa,UAAUyhC,YAE/B,ECfUwe,iBAAiB3K,GAG5ByC,eAAe7T,GACb,MAAMoD,EAAc,IAAIuM,GAMxB,OAJAp8C,KAAKmD,SAASqsC,SAASlqC,IACrBuqC,EAAY2M,eAAel3C,EAAMg7C,eAAe7T,OAG3CoD,CACR,C,8BAXI7vC,KACIE,KAAO,G,ECKIuoD,iBAAwBrQ,GA0B5CsQ,mBACE,OAAO1oD,KAAKuI,aAAa,iBAAiByhC,UAAU,oBACrD,CAEDwC,eACEC,EACAF,EACAoc,GAGA,IAAIC,EAAiB5oD,KAEjBA,KAAK2sC,mBAAmB1C,aAC1B2e,EAAiB5oD,KAAK2sC,mBAAmBP,gBACzCpsC,KAAK6oD,qBAAqBD,IAG5B,MAAME,MAAEA,GAAUF,EACZG,EAAW/oD,KAAKgpD,YAAYvc,EAAKF,GAEvC,IAAKwc,EACH,OAAO/oD,KAAKipD,iBACVN,EACAG,EAAMA,EAAM/pD,OAAS,GAAGqgB,OAc5B,GAVA0pC,EAAMtZ,SAASrsB,IACb4lC,EAASG,aACP/lC,EAAK+7B,OACLl/C,KAAKipD,iBACHN,EACAxlC,EAAK/D,OAAK,IAKZpf,KAAKuI,aAAa,qBAAqB0hC,WAAY,CAErD,MAAQ/iC,YAAalH,MACf01C,mBAAEA,GAAuB/E,IACzB5E,SAAEA,GAAa7kC,EAAS8kC,OACxBmd,EAAWpd,EAAS8B,UACpBub,EAAO,IAAInB,GAAY/gD,GAE7BkiD,EAAK9Q,WAAWj2C,EAAI,IAAIynC,GACtB5iC,EACA,KACCwuC,EAAqB,GAExB0T,EAAK9Q,WAAWv5B,EAAI,IAAI+qB,GACtB5iC,EACA,KACCwuC,EAAqB,GAExB0T,EAAK9Q,WAAW/U,MAAQ,IAAIuG,GAC1B5iC,EACA,QACAwuC,GAEF0T,EAAK9Q,WAAW9U,OAAS,IAAIsG,GAC3B5iC,EACA,SACAwuC,GAGF,MAAM3xC,EAAQ,IAAIykD,GAASthD,GAE3BnD,EAAMu0C,WAAWxxB,UAAY,IAAIgjB,GAC/B5iC,EACA,YACAlH,KAAKuI,aAAa,qBAAqBmiC,YAEzC3mC,EAAMZ,SAAW,CAACimD,GAElB,MAAMC,EAAa,IAAIjC,GAAWlgD,GAElCmiD,EAAW/Q,WAAWj2C,EAAI,IAAIynC,GAC5B5iC,EACA,IACA,GAEFmiD,EAAW/Q,WAAWv5B,EAAI,IAAI+qB,GAC5B5iC,EACA,IACA,GAEFmiD,EAAW/Q,WAAW/U,MAAQ,IAAIuG,GAChC5iC,EACA,QACAiiD,EAAS5lB,OAEX8lB,EAAW/Q,WAAW9U,OAAS,IAAIsG,GACjC5iC,EACA,SACAiiD,EAAS3lB,QAEX6lB,EAAWlmD,SAAW,CAACY,GAEvB,MAAMulD,EAAgBpiD,EAASqiD,aAAaJ,EAAS5lB,MAAO4lB,EAAS3lB,QAC/DgmB,EAAaF,EAAc5lB,WAAW,MAK5C,OAHA8lB,EAAWnL,UAAY0K,EACvBM,EAAWhV,OAAOmV,GAEXA,EAAW9c,cAAc4c,EAAoC,YACrE,CAED,OAAOP,CACR,CAESF,qBAAqBD,GAC7B5oD,KAAKypD,oBAAoBja,SAASka,KAC3B1pD,KAAKuI,aAAamhD,GAAoBzf,YACtC2e,EAAergD,aAAamhD,GAAoBzf,YAEnDjqC,KAAKuI,aAAamhD,GAAoB,GACnCjf,SAASme,EAAergD,aAAamhD,GAAoBhf,WAAQ,GAGzE,CAESue,iBAAiBN,EAA6BvpC,GACtD,GAAIupC,EAAkB1e,WAAY,CAOhC,OANkB,IAAIH,GACpB9pC,KAAKkH,SACL,QACAkY,GAGe2tB,WAAW4b,GAAmB9d,UAChD,CAED,OAAOzrB,CACR,CA1JClY,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KACIypD,oBAAsB,CAAC,iBAD3BzpD,KAGc8oD,MAAuB,GASxC,MAAMA,MACJA,EAAK3lD,SACLA,GACEnD,KAEJmD,EAASqsC,SAASlqC,IACG,SAAfA,EAAMpF,MACR4oD,EAAMroD,KAAK6E,KAGhB,ECvBUqkD,iBAAuBvR,GAmCxBwR,cACR,MAAMC,EAAgB7pD,KAAKuI,aAAa,iBAAiByhC,YACnD8f,EAAgB9pD,KAAKuI,aAAa,iBAAiByhC,YAEzD,MAAsB,QAAlB6f,EACK7pD,KAAKuD,OAAOwxC,SAAS+U,GAAe,GAGtC9pD,KAAKuD,OAAOgF,aAAauhD,GAAe,EAChD,CAEDC,YACE,MAAMC,aAAEA,GAAiBhqD,MACnBiqD,SACJA,EAAQ1nD,KACRA,EAAI2nD,GACJA,GACElqD,KAAKmqD,cAET,IAAIC,EAAW7nD,EAAKqoC,aAAesf,EAAGtf,YAAcroC,EAAKqoC,aAAeqf,EAMxE,MAJqB,MAAjBD,IACFI,GAAY,KAGN,GAAaJ,OAAXI,GAAwB5pD,OAAbwpD,EACtB,CAED3mD,OAAOkxC,GACL,MAAMhxC,OAAEA,GAAWvD,KACbqqD,EAAOrqD,KAAK4pD,cASlB,GANK5pD,KAAKsqD,eACRtqD,KAAKsqD,aAAeD,EAAKrgB,YACzBhqC,KAAKgqD,aAAeK,EAAK5e,YAIvBzrC,KAAKwkB,SAAWxkB,KAAKuqD,YAAa,CACpC,MAAMzE,EAAO9lD,KAAKuI,aAAa,QAAQyhC,UAAU,UAGjD,GAAqD,eAAjDhqC,KAAKuI,aAAa,eAAeyhC,aACe,eAA/ChqC,KAAKuI,aAAa,aAAayhC,YAElChqC,KAAKwkB,SAAW,OAElB,GAAa,WAATshC,GAAsB9lD,KAAKwqD,QAQ/B,GAAa,WAAT1E,IAAsB9lD,KAAKyqD,QAW7B,OAVAzqD,KAAKyqD,SAAU,EAEXlnD,GAAU8mD,GACZA,EAAK5f,SACHlnC,EAAOg3C,gBACHh3C,EAAOi3C,qBACPx6C,KAAKsqD,eAIN,OAlBPtqD,KAAKwqD,QAAS,EAEVjnD,GAAU8mD,IACZ9mD,EAAOg3C,iBAAkB,EACzBh3C,EAAOi3C,qBAAuB6P,EAAKrgB,aAiBvC,OAAO,CACR,CAEDhqC,KAAKwkB,UAAY+vB,EAGjB,IAAImW,GAAU,EAEd,GAAI1qD,KAAK2qD,MAAQ3qD,KAAKwkB,SAAU,CAC9B,IAAI4lC,EAAWpqD,KAAK+pD,YACpB,MAAMa,EAAW5qD,KAAKuI,aAAa,QAEnC,GAAIqiD,EAAS3gB,WAAY,CAEvB,MAAM/pC,EAAO0qD,EAAS5gB,YAEtBogB,EAAY,GAAUA,OAARlqD,EAAK,KAAYM,OAAT4pD,EAAS,IAChC,CAEDC,EAAK5f,SAAS2f,GACdM,GAAU,CACX,CAED,OAAOA,CACR,CAEDP,cACE,MACEjjD,WAAQyY,OACRA,GACE3f,KACJ,IACIuC,EACA2nD,EAFAD,GAAYjqD,KAAKwkB,SAAWxkB,KAAK2qD,QAAU3qD,KAAKuqD,YAAcvqD,KAAK2qD,OAIvE,GAAIhrC,EAAOsqB,WAAY,CACrB,MAAM7U,EAAI60B,GAAYtqC,EAAO+qB,WAAW3rC,OAAS,GAC3C8rD,EAAKj8C,KAAKgR,MAAMwV,GAChB01B,EAAKl8C,KAAKsuB,KAAK9H,GACrB,IAAI51B,EAEJA,EAAQmgB,EAAO+qB,WAAWmgB,GAC1BtoD,EAAO,IAAIunC,GACT5iC,EACA,OACA1H,EAAQ00B,WAAW10B,GAAS,GAG9BA,EAAQmgB,EAAO+qB,WAAWogB,GAC1BZ,EAAK,IAAIpgB,GACP5iC,EACA,KACA1H,EAAQ00B,WAAW10B,GAAS,GAG9ByqD,GAAY70B,EAAIy1B,IAAOC,EAAKD,EAC7B,MACCtoD,EAAOvC,KAAKuC,KACZ2nD,EAAKlqD,KAAKkqD,GAGZ,MAAO,C,SACLD,E,KACA1nD,E,GACA2nD,EAEH,CA7JChjD,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAlBnBt6C,KACIE,KAAO,UADXF,KAOKwkB,SAAW,EAPhBxkB,KASKgqD,aAAe,GATpBhqD,KAUKyqD,SAAU,EAVfzqD,KAWKwqD,QAAS,EASjBtjD,EAAS8kC,OAAO0I,WAAWj0C,KAAKT,MAEhCA,KAAK2qD,MAAQ3qD,KAAKuI,aAAa,SAAS2jC,kBACxClsC,KAAKuqD,YAAcvqD,KAAK2qD,MAAQ3qD,KAAKuI,aAAa,OAAO2jC,kBACzDlsC,KAAKuC,KAAOvC,KAAKuI,aAAa,QAC9BvI,KAAKkqD,GAAKlqD,KAAKuI,aAAa,MAC5BvI,KAAK2f,OAAS,IAAImqB,GAA0B5iC,EAAU,SAAU,MAEhE,MAAM6jD,EAAa/qD,KAAKuI,aAAa,UAEjCwiD,EAAW9gB,YACbjqC,KAAK2f,OAAO8qB,SAASsgB,EAAW/gB,YAAY/oC,MAAM,KAErD,ECxCU+pD,iBAAwB5S,GAOjClxC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAXnBt6C,KACIE,KAAO,YAYdF,KAAKirD,OAASjrD,KAAKuI,aAAa,UAAUqiC,YAC1C5qC,KAAKkrD,QAAUlrD,KAAKuI,aAAa,WAAWqiC,YAC5C5qC,KAAK8hD,WAAa9hD,KAAKuI,aAAa,gBAAgBqiC,WACrD,ECdUugB,iBAAqBpG,GAO9B79C,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAXnBt6C,KACIE,KAAO,QAYdF,KAAKoiD,UAAYpiD,KAAKuI,aAAa,eAAeqiC,YAClD5qC,KAAKorD,QAAUprD,KAAKuI,aAAa,WAAWyhC,YAC5ChqC,KAAKohD,WAAaphD,KAAKuI,aAAa,eAAeyhC,WACpD,ECnBUqhB,iBAA4BF,G,8BAAlCnrD,KACIE,KAAO,gBADXF,KAEaoiD,UAAY,C,ECEhC,MAAMkJ,GAAN,6ECJaC,SASLvV,WAAKkF,EAAoB3S,GAC7B,IACE,MAAQrhC,YAAalH,KAEfwrD,SADoBtkD,EAASukD,MAAM5oB,OAAOmT,KAAKzN,IAC3B6N,qBAAqB,QAE/C30C,MAAMc,KAAKipD,GAAOhc,SAASkc,IACzB,MAAM/P,EAAOz0C,EAASgD,cAAcwhD,GAEpCxkD,EAASmlC,YAAY6O,GAAcS,IAEtC,CAAC,MAAOzF,GACPyV,QAAQC,MAAO,6BAAgCprD,OAAJ+nC,EAAI,MAAK2N,EACrD,CAEDl2C,KAAK6rD,QAAS,CACf,CArBkB3kD,+BAJdlH,KACL6rD,QAAS,EAKP3kD,EAASskD,MAAM/qD,KAAKT,KACrB,ECCU8rD,iBAAqB1T,GAM9BlxC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KAGIE,KAAO,QASFioC,GACV1mC,MAAMc,KAAKI,EAAKk4C,YAEb35C,KAAIrB,GAAKA,EAAEqJ,cACXmD,KAAK,IACLmnB,QAAO,iEAAmE,IAC1EA,QAAO,cAAgB,KAERvyB,MAAM,KAElBuuC,SAAS3vC,IACf,MAAM8qC,EAAM9qC,EAAEmB,OAEd,IAAK2pC,EACH,OAGF,MAAMohB,EAAWphB,EAAI1pC,MAAM,KACrB+qD,EAAaD,EAAS,GAAG9qD,MAAM,KAC/BgrD,EAAWF,EAAS,GAAG9qD,MAAM,KAEnC+qD,EAAWxc,SAAS3vC,IAClB,MAAMqsD,EAAWrsD,EAAEmB,OAEnB,IAAKkrD,EACH,OAGF,MAAMC,EAAQjlD,EAASuxC,OAAOyT,IAAa,GAe3C,GAbAD,EAASzc,SAAS4c,IAChB,MAAM/B,EAAO+B,EAAQjrD,QAAQ,KACvBhB,EAAOisD,EAAQ74B,OAAO,EAAG82B,GAAMrpD,OAC/BxB,EAAQ4sD,EAAQ74B,OAAO82B,EAAO,EAAG+B,EAAQrtD,OAASsrD,GAAMrpD,OAE1Db,GAAQX,IACV2sD,EAAMhsD,GAAQ,IAAI2pC,GAAS5iC,EAAU/G,EAAMX,OAI/C0H,EAASuxC,OAAOyT,GAAYC,EAC5BjlD,EAAS0yC,kBAAkBsS,GrCtCnBG,SAAuBvqD,GACrC,MAAMg4C,EAAc,CAClB,EACA,EACA,GAEF,IAAIwS,EAAkBxqD,EACnB0xB,QAAO,mBAAqB,YAC5BA,QAAO,aAAe,KACrB+gB,EAAQ,EA2BZ,OAzBC+X,EAAiB/X,GAASvL,GAAkBsjB,EAAiB7jB,IAC9DqR,EAAY,IAAMvF,GAEjB+X,EAAiB/X,GAASvL,GAAkBsjB,EAAiB5jB,IAC9DoR,EAAY,IAAMvF,GAEjB+X,EAAiB/X,GAASvL,GAAkBsjB,EAAiB3jB,IAC9DmR,EAAY,IAAMvF,GAEjB+X,EAAiB/X,GAASvL,GAAkBsjB,EAAiB1jB,IAC9DkR,EAAY,IAAMvF,GAEjB+X,EAAiB/X,GAASvL,GAAkBsjB,EAAiBzjB,IAC9DiR,EAAY,IAAMvF,GAEjB+X,EAAiB/X,GAASvL,GAAkBsjB,EAAiBxjB,IAC9DgR,EAAY,IAAMvF,EAElB+X,EAAkBA,EACf94B,QAAO,YAAc,KACrBA,QAAO,QAAU,MAEnB84B,EAAiB/X,GAASvL,GAAkBsjB,EAAiBvjB,IAC9D+Q,EAAY,IAAMvF,EAEXuF,EAAYztC,KAAK,GAC1B,CqCC+CggD,CAAuBH,GAE7C,eAAbA,EAA2B,CAC7B,MAAMhR,EAAaiR,EAAM,eAAeniB,YAAYxW,QAAO,OAAS,IACvD24B,EAAMI,IAAIviB,YAAY/oC,MAAM,KAEpCuuC,SAAS+c,IACZ,GAAIA,EAAIprD,QAAQ,iBAAmB,EAAG,CACpC,MAAMonC,EAAMD,GAAiBikB,GAEzBhkB,GACG,IAAIgjB,GAAcrkD,GAAU8uC,KAAKkF,EAAY3S,EAErD,IAEJ,IACF,GAEJ,EAvEUujB,GACKxjB,iBAAmBA,GCN5BkkB,YACPC,EACApqD,EACA0c,EACAwkB,EACAmpB,EACAC,GAEA,OAAOF,EAAI1tC,EAAIwkB,EAAQ,EAAQ,EAAJlhC,EAAQsqD,EACrC,CAESC,YACPH,EACApqD,EACA0c,EACAwkB,EACAmpB,EACAC,EACAhxB,GAEA8wB,EAAI1tC,EAAIwkB,EAAQ,EAAQ,EAAJlhC,EAAQsqD,GAAQhxB,CACtC,CAES1wB,YACPgc,EACAnoB,EACAgI,GAIA,OAFWmgB,EAAOnoB,GAENgI,CACd,CAES1G,YACP8E,EACAyJ,EACA4O,EACAsvC,GAEA,OAAOl+C,EAAKC,KAAK+mB,IAAIzwB,GAAKqY,EAAK3O,KAAKgnB,IAAI1wB,GAAK2nD,CAC/C,CAEaC,iBAA6B1U,GAgExC12C,MACE+qC,EACAnG,EACAqB,EACApE,EACAC,GAGA,MAAMupB,eACJA,EAAc9lC,OACdA,GACEjnB,KACEgtD,EAAUvgB,EAAI9I,aAAa,EAAG,EAAGJ,EAAOC,GAE9C,IAAK,IAAIzkB,EAAI,EAAGA,EAAIykB,EAAQzkB,IAC1B,IAAK,IAAI1c,EAAI,EAAGA,EAAIkhC,EAAOlhC,IAAK,CAC9B,MAAM8Z,EAAIqwC,GAAMQ,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,GAC7CpnB,EAAIowC,GAAMQ,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,GAC7Cr+B,EAAIqnD,GAAMQ,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,GAC7Ct+B,EAAIsnD,GAAMQ,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,GACnD,IAAIypB,EAAKhiD,GAAEgc,EAAQ,EAAG9K,GAAKlR,GAAEgc,EAAQ,EAAG7K,GAAKnR,GAAEgc,EAAQ,EAAG9hB,GAAK8F,GAAEgc,EAAQ,EAAG/hB,GAAK+F,GAAEgc,EAAQ,EAAG,GAC1FimC,EAAKjiD,GAAEgc,EAAQ,EAAG9K,GAAKlR,GAAEgc,EAAQ,EAAG7K,GAAKnR,GAAEgc,EAAQ,EAAG9hB,GAAK8F,GAAEgc,EAAQ,EAAG/hB,GAAK+F,GAAEgc,EAAQ,EAAG,GAC1FkmC,EAAKliD,GAAEgc,EAAQ,GAAI9K,GAAKlR,GAAEgc,EAAQ,GAAI7K,GAAKnR,GAAEgc,EAAQ,GAAI9hB,GAAK8F,GAAEgc,EAAQ,GAAI/hB,GAAK+F,GAAEgc,EAAQ,GAAI,GAC/FmmC,EAAKniD,GAAEgc,EAAQ,GAAI9K,GAAKlR,GAAEgc,EAAQ,GAAI7K,GAAKnR,GAAEgc,EAAQ,GAAI9hB,GAAK8F,GAAEgc,EAAQ,GAAI/hB,GAAK+F,GAAEgc,EAAQ,GAAI,GAE/F8lC,IACFE,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,GAAMloD,EAAI,KAGZ0nD,GAAMI,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,EAAGypB,GAC5CL,GAAMI,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,EAAG0pB,GAC5CN,GAAMI,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,EAAG2pB,GAC5CP,GAAMI,EAAQ9oD,KAAM7B,EAAG0c,EAAGwkB,EAAOC,EAAQ,EAAG4pB,EAC7C,CAGH3gB,EAAIgJ,UAAU,EAAG,EAAGlS,EAAOC,GAC3BiJ,EAAI3E,aAAaklB,EAAS,EAAG,EAC9B,CAnGC9lD,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KACIE,KAAO,gBAWd,IAAI+mB,EAASmhB,GAAUpoC,KAAKuI,aAAa,UAAUyhC,aAEnD,OAAQhqC,KAAKuI,aAAa,QAAQyhC,UAAU,WAC1C,IAAK,WAAY,CACf,MAAM/sB,EAAIgK,EAAO,GAGjBA,EAAS,CACP,KAAQ,KAAQhK,EAAG,KAAQ,KAAQA,EAAG,KAAQ,KAAQA,EAAG,EAAG,EAC5D,KAAQ,KAAQA,EAAG,KAAQ,KAAQA,EAAG,KAAQ,KAAQA,EAAG,EAAG,EAC5D,KAAQ,KAAQA,EAAG,KAAQ,KAAQA,EAAG,KAAQ,KAAQA,EAAG,EAAG,EAC5D,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,GAGd,KACD,CAED,IAAK,YAAa,CAChB,MAAM/X,EAAI+hB,EAAO,GAAKrY,KAAKsW,GAAK,IAGhC+B,EAAS,CACP7mB,GAAE8E,EAAG,KAAO,MAAK,MAAW9E,GAAE8E,EAAG,MAAK,MAAQ,MAAW9E,GAAE8E,EAAG,MAAK,KAAU,MAAQ,EAAG,EACxF9E,GAAE8E,EAAG,MAAK,KAAU,MAAQ9E,GAAE8E,EAAG,KAAO,KAAO,KAAQ9E,GAAE8E,EAAG,MAAK,MAAQ,MAAW,EAAG,EACvF9E,GAAE8E,EAAG,MAAK,MAAQ,MAAW9E,GAAE8E,EAAG,MAAK,KAAU,MAAQ9E,GAAE8E,EAAG,KAAO,KAAO,MAAQ,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,GAGd,KACD,CAED,IAAK,mBAEH+hB,EAAS,CACP,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,EACZ,MAAQ,MAAQ,MAAQ,EAAG,EAC3B,EAAG,EAAG,EAAG,EAAG,GAQlBjnB,KAAKinB,OAASA,EACdjnB,KAAK+sD,eAAiB/sD,KAAKuI,aAAa,kBAAkB0hC,UAC3D,ECvGUojB,iBAAoBjV,GAS/B12C,MAAM+qC,EAAyBF,GAC7B,MAAQrlC,YAAalH,KAErB,IAAIqC,EAAIrC,KAAKuI,aAAa,KAAKmjC,UAAU,KACrC3sB,EAAI/e,KAAKuI,aAAa,KAAKmjC,UAAU,KACrCnI,EAAQvjC,KAAK+0C,SAAS,SAASrJ,UAAU,KACzClI,EAASxjC,KAAK+0C,SAAS,UAAUrJ,UAAU,KAE/C,IAAKnI,IAAUC,EAAQ,CACrB,MAAMqM,EAAc,IAAIuM,GAExBp8C,KAAKmD,SAASqsC,SAASlqC,IACrBuqC,EAAY2M,eAAel3C,EAAMg7C,eAAe7T,OAGlDpqC,EAAIuM,KAAKgR,MAAMiwB,EAAY5Z,IAC3BlX,EAAInQ,KAAKgR,MAAMiwB,EAAY3Z,IAC3BqN,EAAQ30B,KAAKgR,MAAMiwB,EAAYtM,OAC/BC,EAAS50B,KAAKgR,MAAMiwB,EAAYrM,OACjC,CAED,MAAM8pB,EAAgBttD,KAAKg6C,aAAazN,EAAS8gB,GAAYpT,cACvDsT,EAAarmD,EAASqiD,aAAalnD,EAAIkhC,EAAOxkB,EAAIykB,GAClDgqB,EAAUD,EAAW7pB,WAAW,MAEtCx8B,EAAS8kC,OAAOoF,YAAYoc,GAC5BxtD,KAAK+4C,eAAeyU,GAIpB,IAAIV,GACF5lD,EACC,CACCuzC,SAAU,EACVI,WAAY,GACZvC,WAAY,CACV,CACEqC,SAAU,OACVn7C,MAAO,oBAET,CACEm7C,SAAU,iBACVn7C,MAAO,WAIbkC,MAAM8rD,EAAS,EAAG,EAAGnrD,EAAIkhC,EAAOxkB,EAAIykB,GAEtC,MAAMiqB,EAAYvmD,EAASqiD,aAAalnD,EAAIkhC,EAAOxkB,EAAIykB,GACjDkqB,EAASD,EAAU/pB,WAAW,MAEpCx8B,EAAS8kC,OAAOoF,YAAYsc,GAC5BnhB,EAAQ8H,OAAOqZ,GAEfA,EAAOC,yBAA2B,iBAClCD,EAAOrP,UAAYmP,EAAQ9gB,cAAc6gB,EAAiC,aAC1EG,EAAOE,SAAS,EAAG,EAAGvrD,EAAIkhC,EAAOxkB,EAAIykB,GAErCiJ,EAAI4R,UAAYqP,EAAOhhB,cAAc+gB,EAAgC,aACrEhhB,EAAImhB,SAAS,EAAG,EAAGvrD,EAAIkhC,EAAOxkB,EAAIykB,GAGlCxjC,KAAKm6C,cAAc5N,EAAS+gB,EAC7B,CAEQjZ,OAAOx0C,GAEf,C,8BA5EIG,KAOIE,KAAO,M,EAPLmtD,GACJpT,aAAe,CACpB,OACA,YACA,aCLJ,MAAM4T,GAAI,OCAGC,iBAAsB1V,GASjC12C,MAAM+qC,EAAyBF,GAE7B,MACErlC,WAAQ/D,SACRA,GACEnD,KACE6vC,EAAc,mBAAoBtD,EACpCA,EAAQ+T,eAAe7T,GACvB,KAEJ,IAAKoD,EACH,OAGF,IAAIke,EAAK,EACLC,EAAK,EAET7qD,EAASqsC,SAASlqC,IAChB,MAAM2oD,EAAM3oD,EAAM4oD,qBAAuB,EAEzCH,EAAKn/C,KAAKiO,IAAIkxC,EAAIE,GAClBD,EAAKp/C,KAAKiO,IAAImxC,EAAIC,MAGpB,MAAM1qB,EAAQ30B,KAAKgR,MAAMiwB,EAAYtM,OAC/BC,EAAS50B,KAAKgR,MAAMiwB,EAAYrM,QAChC2qB,EAAiB5qB,EAAQ,EAAIwqB,EAC7BK,EAAkB5qB,EAAS,EAAIwqB,EAErC,GAAIG,EAAiB,GAAKC,EAAkB,EAC1C,OAGF,MAAM/rD,EAAIuM,KAAKgR,MAAMiwB,EAAYxtC,GAC3B0c,EAAInQ,KAAKgR,MAAMiwB,EAAY9wB,GAC3BuuC,EAAgBttD,KAAKg6C,aAAazN,EAASuhB,GAAc7T,cACzDwT,EAAYvmD,EAASqiD,aAAa4E,EAAgBC,GAClDV,EAASD,EAAU/pB,WAAW,MAEpCx8B,EAAS8kC,OAAOoF,YAAYsc,GAC5BA,EAAOnnC,WAAWlkB,EAAI0rD,GAAKhvC,EAAIivC,GAC/BzhB,EAAQ8H,OAAOqZ,GAGfvqD,EAASqsC,SAASlqC,IACW,mBAAhBA,EAAM5D,OACf4D,EAAM5D,MACJgsD,EACA,EACA,EACAS,EACAC,MAMN3hB,EAAI4hB,UACFZ,EACA,EACA,EACAU,EACAC,EACA/rD,EAAI0rD,EACJhvC,EAAIivC,EACJG,EACAC,GAGFpuD,KAAKm6C,cAAc5N,EAAS+gB,EAC7B,CAEQjZ,OAAOx0C,GAEf,C,8BAnFIG,KAOIE,KAAO,Q,EAPL4tD,GACJ7T,aAAe,CACpB,SACA,YACA,aCqCQ,MAACqU,GAAW,CACtB3oD,IAAOyhD,GACPgC,KAAQnB,GACRsG,OC7CWC,cAAsBzJ,GAGxBniB,KAAK6J,GACZ,MAAMoL,EAAK73C,KAAKuI,aAAa,MAAMmjC,UAAU,KACvCoM,EAAK93C,KAAKuI,aAAa,MAAMmjC,UAAU,KACvCvvB,EAAInc,KAAKuI,aAAa,KAAKmjC,YAQjC,OANIe,GAAOtwB,EAAI,IACbswB,EAAIuG,YACJvG,EAAI5P,IAAIgb,EAAIC,EAAI37B,EAAG,EAAa,EAAVvN,KAAKsW,IAAQ,GACnCunB,EAAI0G,aAGC,IAAIiJ,GACTvE,EAAK17B,EACL27B,EAAK37B,EACL07B,EAAK17B,EACL27B,EAAK37B,EAER,CAEQypC,aACP,OAAO,IACR,C,8BAxBI5lD,KACIE,KAAO,Q,GD6ChBuuD,QE9CWC,cAAuB3J,GAGzBniB,KAAK6J,GACZ,MAAM6b,GAAc15C,KAAK+W,KAAK,GAAK,GAAK,EAA1B,EACRyiC,EAAKpoD,KAAKuI,aAAa,MAAMmjC,UAAU,KACvC2c,EAAKroD,KAAKuI,aAAa,MAAMmjC,UAAU,KACvCmM,EAAK73C,KAAKuI,aAAa,MAAMmjC,UAAU,KACvCoM,EAAK93C,KAAKuI,aAAa,MAAMmjC,UAAU,KAwC7C,OAtCIe,GAAO2b,EAAK,GAAKC,EAAK,IACxB5b,EAAIuG,YACJvG,EAAIwG,OAAO4E,EAAKuQ,EAAItQ,GACpBrL,EAAI+Z,cACF3O,EAAKuQ,EACLtQ,EAAMwQ,EAAQD,EACdxQ,EAAMyQ,EAAQF,EACdtQ,EAAKuQ,EACLxQ,EACAC,EAAKuQ,GAEP5b,EAAI+Z,cACF3O,EAAMyQ,EAAQF,EACdtQ,EAAKuQ,EACLxQ,EAAKuQ,EACLtQ,EAAMwQ,EAAQD,EACdxQ,EAAKuQ,EACLtQ,GAEFrL,EAAI+Z,cACF3O,EAAKuQ,EACLtQ,EAAMwQ,EAAQD,EACdxQ,EAAMyQ,EAAQF,EACdtQ,EAAKuQ,EACLxQ,EACAC,EAAKuQ,GAEP5b,EAAI+Z,cACF3O,EAAMyQ,EAAQF,EACdtQ,EAAKuQ,EACLxQ,EAAKuQ,EACLtQ,EAAMwQ,EAAQD,EACdxQ,EAAKuQ,EACLtQ,GAEFrL,EAAI0G,aAGC,IAAIiJ,GACTvE,EAAKuQ,EACLtQ,EAAKuQ,EACLxQ,EAAKuQ,EACLtQ,EAAKuQ,EAER,CAEQzC,aACP,OAAO,IACR,C,8BA1DI5lD,KACIE,KAAO,S,GF8ChByuD,KG9CWC,cAAoB7J,GAG/B8J,YACE,MAAO,CACL,IAAI1gB,GACFnuC,KAAKuI,aAAa,MAAMmjC,UAAU,KAClC1rC,KAAKuI,aAAa,MAAMmjC,UAAU,MAEpC,IAAIyC,GACFnuC,KAAKuI,aAAa,MAAMmjC,UAAU,KAClC1rC,KAAKuI,aAAa,MAAMmjC,UAAU,MAGvC,CAEQ9I,KAAK6J,GACZ,OAEIpqC,EAAGy1B,EACH/Y,EAAG+d,IAGHz6B,EAAG4zB,EACHlX,EAAGmX,IAEHl2B,KAAK6uD,YAQT,OANIpiB,IACFA,EAAIuG,YACJvG,EAAIwG,OAAOnb,EAAIgF,GACf2P,EAAIyG,OAAOjd,EAAIC,IAGV,IAAIkmB,GACTtkB,EACAgF,EACA7G,EACAC,EAEH,CAEQ0vB,aACP,MAAOt5B,EAAIC,GAAMvsB,KAAK6uD,YAChB3pD,EAAIonB,EAAGmiB,QAAQliB,GAErB,MAAO,CAAC,CAACD,EAAIpnB,GAAI,CAACqnB,EAAIrnB,GACvB,C,8BA/CIlF,KACIE,KAAO,M,GH8ChB4uD,SAAYvG,GACZwG,QIlDWC,cAAuBzG,GAGzB3lB,KAAK6J,GACZ,MAAMoD,EAAcoH,MAAMrU,KAAK6J,KAE7BpqC,EACEA,EAAC0c,EACDA,IAEA/e,KAAKuuC,OAOT,OALI9B,IACFA,EAAIyG,OAAO7wC,EAAG0c,GACd0tB,EAAI0G,aAGCtD,CACR,C,8BAlBI7vC,KACIE,KAAO,S,GJkDhB0iC,KAAQmiB,GACRkK,QKlDWC,cAAuB9W,GAGlC1L,cACED,EACA5sC,EACA8oD,GAEA,MAAMplB,EAAQvjC,KAAK+0C,SAAS,SAASrJ,UAAU,KAAK,GAC9ClI,EAASxjC,KAAK+0C,SAAS,UAAUrJ,UAAU,KAAK,GAEhD2d,EAAa,IAAIjC,GACrBpnD,KAAKkH,SACL,MAGFmiD,EAAW/Q,WAAWjD,QAAU,IAAIvL,GAClC9pC,KAAKkH,SACL,UACAlH,KAAKuI,aAAa,WAAWmiC,YAE/B2e,EAAW/Q,WAAW/U,MAAQ,IAAIuG,GAChC9pC,KAAKkH,SACL,QACC,GAAQ1G,OAAN+iC,EAAM,OAEX8lB,EAAW/Q,WAAW9U,OAAS,IAAIsG,GACjC9pC,KAAKkH,SACL,SACC,GAAS1G,OAAPgjC,EAAO,OAEZ6lB,EAAW/Q,WAAWxxB,UAAY,IAAIgjB,GACpC9pC,KAAKkH,SACL,YACAlH,KAAKuI,aAAa,oBAAoBmiC,YAExC2e,EAAWlmD,SAAWnD,KAAKmD,SAE3B,MAAMmmD,EAAgBtpD,KAAKkH,SAASqiD,aAAahmB,EAAOC,GAClDgmB,EAAaF,EAAc5lB,WAAW,MACtCof,EAAQ9iD,KAAKuI,aAAa,KAC1Bw6C,EAAQ/iD,KAAKuI,aAAa,KAE5Bu6C,EAAM7Y,YAAc8Y,EAAM9Y,YAC5Buf,EAAWjjC,UACTu8B,EAAMpX,UAAU,KAAK,GACrBqX,EAAMrX,UAAU,KAAK,IAIrBid,EAAkB1e,WACpBjqC,KAAKy4C,OAAO,gBAAkBkQ,EAE9BwG,QAAQC,eAAepvD,KAAKy4C,OAAQ,gBAItC,IAAK,IAAIp2C,GAAC,EAAOA,GAAK,EAAGA,IACvB,IAAK,IAAI0c,GAAC,EAAOA,GAAK,EAAGA,IACvByqC,EAAW7Q,OACX0Q,EAAW/Q,WAAWj2C,EAAI,IAAIynC,GAC5B9pC,KAAKkH,SACL,IACA7E,EAAIinD,EAAc/lB,OAEpB8lB,EAAW/Q,WAAWv5B,EAAI,IAAI+qB,GAC5B9pC,KAAKkH,SACL,IACA6X,EAAIuqC,EAAc9lB,QAEpB6lB,EAAWhV,OAAOmV,GAClBA,EAAWvQ,UAMf,OAFgBxM,EAAIC,cAAc4c,EAAoC,SAGvE,C,8BA9EItpD,KACIE,KAAO,S,GLkDhByvB,OMlDW0/B,cAAsBjX,GAGxB/D,OAAO5H,EAAyB1e,EAAempB,GACtD,IAAKnpB,EACH,OAGF,MAAM1rB,EACJA,EAAC0c,EACDA,GACEgP,EACEuhC,EAAStvD,KAAKuI,aAAa,UAAUyhC,UAAU,QAC/CulB,EAAcvvD,KAAKuI,aAAa,eAAeyhC,UAAU,eAE/DyC,EAAIlmB,UAAUlkB,EAAG0c,GAEF,SAAXuwC,GACF7iB,EAAInnB,OAAO4xB,GAGO,gBAAhBqY,GACF9iB,EAAIjmB,MAAMimB,EAAI+R,UAAW/R,EAAI+R,WAG/B/R,EAAIkM,OAGJ,MAAM6W,EAAY,IAAIpI,GAAWpnD,KAAKkH,UAEtCsoD,EAAUtvD,KAAOF,KAAKE,KACtBsvD,EAAUlX,WAAWjD,QAAU,IAAIvL,GACjC9pC,KAAKkH,SACL,UACAlH,KAAKuI,aAAa,WAAWmiC,YAE/B8kB,EAAUlX,WAAWzG,KAAO,IAAI/H,GAC9B9pC,KAAKkH,SACL,OACAlH,KAAKuI,aAAa,QAAQmiC,YAE5B8kB,EAAUlX,WAAWxG,KAAO,IAAIhI,GAC9B9pC,KAAKkH,SACL,OACAlH,KAAKuI,aAAa,QAAQmiC,YAE5B8kB,EAAUlX,WAAW/U,MAAQ,IAAIuG,GAC/B9pC,KAAKkH,SACL,QACAlH,KAAKuI,aAAa,eAAemiC,YAEnC8kB,EAAUlX,WAAW9U,OAAS,IAAIsG,GAChC9pC,KAAKkH,SACL,SACAlH,KAAKuI,aAAa,gBAAgBmiC,YAEpC8kB,EAAUlX,WAAWmX,SAAW,IAAI3lB,GAClC9pC,KAAKkH,SACL,WACAlH,KAAKuI,aAAa,YAAYmiC,YAEhC8kB,EAAUlX,WAAWwN,KAAO,IAAIhc,GAC9B9pC,KAAKkH,SACL,OACAlH,KAAKuI,aAAa,QAAQsiC,SAAS,UAErC2kB,EAAUlX,WAAW0N,OAAS,IAAIlc,GAChC9pC,KAAKkH,SACL,SACAlH,KAAKuI,aAAa,UAAUmiC,SAAS,SAEvC8kB,EAAUrsD,SAAWnD,KAAKmD,SAE1BqsD,EAAUnb,OAAO5H,GAEjBA,EAAIwM,UAEgB,gBAAhBsW,GACF9iB,EAAIjmB,MAAM,EAAIimB,EAAI+R,UAAW,EAAI/R,EAAI+R,WAGxB,SAAX8Q,GACF7iB,EAAInnB,QAAQ4xB,GAGdzK,EAAIlmB,WAAWlkB,GAAI0c,EACpB,C,8BAtFI/e,KACIE,KAAO,Q,GNkDhBwvD,KOvDWC,cAAoBvX,GAGtB/D,SAER,C,8BALIr0C,KACIE,KAAO,M,GPuDhB0vD,eQrDWC,cAA8BpH,GAkBzCO,YAAYvc,EAAyBF,GACnC,MAAMujB,EAAiD,sBAA5B9vD,KAAK0oD,mBAC1B7Y,EAAcigB,EAChBvjB,EAAQ+T,eAAe7T,GACvB,KAEJ,GAAIqjB,IAAuBjgB,EACzB,OAAO,KAGJ7vC,KAAKuI,aAAa,MAAM0hC,YACvBjqC,KAAKuI,aAAa,MAAM0hC,YACxBjqC,KAAKuI,aAAa,MAAM0hC,YACxBjqC,KAAKuI,aAAa,MAAM0hC,aAE5BjqC,KAAKuI,aAAa,MAAM,GAAMkiC,SAAS,GACvCzqC,KAAKuI,aAAa,MAAM,GAAMkiC,SAAS,GACvCzqC,KAAKuI,aAAa,MAAM,GAAMkiC,SAAS,GACvCzqC,KAAKuI,aAAa,MAAM,GAAMkiC,SAAS,IAGzC,MAAMxU,EAAK65B,EACPjgB,EAAYxtC,EAAIwtC,EAAYtM,MAAQvjC,KAAKuI,aAAa,MAAMqiC,YAC5D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,KAChCxV,EAAK45B,EACPjgB,EAAY9wB,EAAI8wB,EAAYrM,OAASxjC,KAAKuI,aAAa,MAAMqiC,YAC7D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,KAChC/T,EAAKm4B,EACPjgB,EAAYxtC,EAAIwtC,EAAYtM,MAAQvjC,KAAKuI,aAAa,MAAMqiC,YAC5D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,KAChC7S,EAAKi3B,EACPjgB,EAAY9wB,EAAI8wB,EAAYrM,OAASxjC,KAAKuI,aAAa,MAAMqiC,YAC7D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,KAEtC,OAAIzV,IAAO0B,GAAMzB,IAAO2C,EACf,KAGF4T,EAAIsjB,qBAAqB95B,EAAIC,EAAIyB,EAAIkB,EAC7C,CArDC3xB,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GARnBt6C,KACIE,KAAO,iBASdF,KAAKypD,oBAAoBhpD,KACvB,KACA,KACA,KACA,KAEH,GRsCDuvD,eStDWC,cAA8BxH,GAoBzCO,YAAYvc,EAAyBF,GACnC,MAAMujB,EAAiD,sBAA5B9vD,KAAK0oD,mBAC1B7Y,EAActD,EAAQ+T,eAAe7T,GAE3C,GAAIqjB,IAAuBjgB,EACzB,OAAO,KAGJ7vC,KAAKuI,aAAa,MAAM0hC,YAC3BjqC,KAAKuI,aAAa,MAAM,GAAMkiC,SAAS,OAGpCzqC,KAAKuI,aAAa,MAAM0hC,YAC3BjqC,KAAKuI,aAAa,MAAM,GAAMkiC,SAAS,OAGpCzqC,KAAKuI,aAAa,KAAK0hC,YAC1BjqC,KAAKuI,aAAa,KAAK,GAAMkiC,SAAS,OAGxC,MAAMoN,EAAKiY,EACPjgB,EAAYxtC,EAAIwtC,EAAYtM,MAAQvjC,KAAKuI,aAAa,MAAMqiC,YAC5D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,KAChCoM,EAAKgY,EACPjgB,EAAY9wB,EAAI8wB,EAAYrM,OAASxjC,KAAKuI,aAAa,MAAMqiC,YAC7D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,KACtC,IAAIwkB,EAAKrY,EACLsY,EAAKrY,EAEL93C,KAAKuI,aAAa,MAAM0hC,aAC1BimB,EAAKJ,EACDjgB,EAAYxtC,EAAIwtC,EAAYtM,MAAQvjC,KAAKuI,aAAa,MAAMqiC,YAC5D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,MAGpC1rC,KAAKuI,aAAa,MAAM0hC,aAC1BkmB,EAAKL,EACDjgB,EAAY9wB,EAAI8wB,EAAYrM,OAASxjC,KAAKuI,aAAa,MAAMqiC,YAC7D5qC,KAAKuI,aAAa,MAAMmjC,UAAU,MAGxC,MAAMvvB,EAAI2zC,GACLjgB,EAAYtM,MAAQsM,EAAYrM,QAAU,EAAMxjC,KAAKuI,aAAa,KAAKqiC,YACxE5qC,KAAKuI,aAAa,KAAKmjC,YACrB0kB,EAAKpwD,KAAKuI,aAAa,MAAMmjC,YAEnC,OAAOe,EAAI4jB,qBAAqBH,EAAIC,EAAIC,EAAIvY,EAAIC,EAAI37B,EACrD,CA/DCjV,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GARnBt6C,KACIE,KAAO,iBASdF,KAAKypD,oBAAoBhpD,KACvB,KACA,KACA,IACA,KACA,KACA,KAEH,GTqCD0iB,KUzDWmtC,cAAoBlY,GAM7BlxC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KACIE,KAAO,OAWd,MAAMg/C,EAAStwC,KAAKiO,IAAI,EAAGjO,KAAKC,IAAI,EAAG7O,KAAKuI,aAAa,UAAUqiC,cAC7D2lB,EAAcvwD,KAAK+0C,SAAS,gBAClC,IAAIyb,EAAYxwD,KAAK+0C,SAAS,cAAc,GAEd,KAA1Byb,EAAUxmB,aACZwmB,EAAU/lB,SAAS,QAGjB8lB,EAAYtmB,aACdumB,EAAYA,EAAUzjB,WAAWwjB,IAGnCvwD,KAAKk/C,OAASA,EACdl/C,KAAKof,MAAQoxC,EAAU3lB,UACxB,GVgCD4lB,QAAW9G,GACX+G,aW3DWC,cAA4BhH,GAG9BI,YACP,MAAME,SACJA,EAAQ1nD,KACRA,EAAI2nD,GACJA,GACElqD,KAAKmqD,cACHyG,EAAY,IAAIh8B,MAAJ,CAAaryB,EAAKsoC,YAC9BgmB,EAAU,IAAIj8B,MAAJ,CAAas1B,EAAGrf,YAEhC,GAAI+lB,EAAUx9B,IAAMy9B,EAAQz9B,GAAI,CAE9B,MAAMjX,EAAIy0C,EAAUz0C,GAAK00C,EAAQ10C,EAAIy0C,EAAUz0C,GAAK8tC,EAC9C7tC,EAAIw0C,EAAUx0C,GAAKy0C,EAAQz0C,EAAIw0C,EAAUx0C,GAAK6tC,EAC9C9kD,EAAIyrD,EAAUzrD,GAAK0rD,EAAQ1rD,EAAIyrD,EAAUzrD,GAAK8kD,EAGpD,MAAQ,OAGNr7C,OAFAA,KAAKgR,MAAMzD,GACZ,MAGCvN,OAFAA,KAAKgR,MAAMxD,GACZ,MAEA5b,OADCoO,KAAKgR,MAAMza,GACZ,IACF,CAED,OAAOnF,KAAKuI,aAAa,QAAQsiC,UAClC,C,8BA7BI7qC,KACIE,KAAO,c,GX2DhB4wD,iBY5DWC,cAAgCpH,GAGlCI,YACP,MAAME,SACJA,EACA1nD,OACA2nD,MACElqD,KAAKmqD,cAEH6G,EAAgB5oB,GAAU7lC,EAAKynC,aAC/BinB,EAAc7oB,GAAU8hB,EAAGlgB,aAOjC,OANiBgnB,EAAc9vD,KAAG,CAAEqB,EAAMzD,IAGjCyD,GAFI0uD,EAAYnyD,GAEHyD,GAAQ0nD,IAC3B59C,KAAK,IAGT,C,8BAnBIrM,KACIE,KAAO,kB,GZ4DhBy7C,Ka1DWuV,cAAoB9Y,GAwDtB/D,SAER,CA/CCntC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAfnBt6C,KACIE,KAAO,OADXF,KAEIihD,UAAoB,EAFxBjhD,KAIIshD,OAAuC,GAJ3CthD,KAKIqhD,aAA0E,GAL9ErhD,KAOIiiD,OAAiB,EAUxBjiD,KAAKoiD,UAAYpiD,KAAKuI,aAAa,eAAeqiC,YAElD,MAAMyB,YAAEA,GAAgBnlC,GAClB/D,SAAEA,GAAanD,KAErB,IAAK,MAAMsF,KAASnC,EAClB,GAAImC,aAAiB0lD,GAAiB,CACpChrD,KAAK+hD,SAAWz8C,EAEhB,MAAM6rD,EAAkB7rD,EAAMyvC,SAAS,eAEnCoc,EAAgBlnB,aAClBoC,EAAY8kB,EAAgBnnB,aAAehqC,KAE9C,MACD,GAAIsF,aAAiB+lD,GACnBrrD,KAAKuhD,aAAej8C,OAEtB,GAAIA,aAAiB6lD,GACnB,GAAI7lD,EAAM87C,WAAY,CACpBphD,KAAKiiD,OAAQ,EACbjiD,KAAKihD,UAAW,EAEhB,MAAMmQ,EAAcpxD,KAAKqhD,aAAa/7C,EAAM8lD,cAEjB,IAAhBgG,EACTpxD,KAAKqhD,aAAa/7C,EAAM8lD,SAAW,CAChC9lD,GAAM87C,YAAa97C,GAGtB8rD,EAAY9rD,EAAM87C,YAAc97C,CAEnC,MACCtF,KAAKshD,OAAOh8C,EAAM8lD,SAAW9lD,CAIpC,GbKD,YAAa0lD,GACb,gBAAiBK,GACjBrK,MAASmK,GACTp7C,KAAQgwC,GACRsR,MAAS5N,GACT6N,KcpEWC,cAAoBxR,GAGtBhF,UACP,MAAMxO,EAAUvsC,KAAK2sC,mBAAmBP,gBAExC,GAAIG,EAAS,CACX,MAAMziC,EAAayiC,EAAQppC,SAAS,GAEpC,GAAI2G,EACF,OAAOA,EAAWixC,SAErB,CAED,MAAO,EACR,C,8BAfI/6C,KACIE,KAAO,M,GdoEhBgF,Ee/DWssD,cAAiBzR,GAuBnBhF,UACP,OAAO/6C,KAAK+P,IACb,CAEQgpC,eAAetM,GACtB,GAAIzsC,KAAKyxD,QAAS,CAEhBxa,MAAM8B,eAAetM,GAErB,MACEvlC,WAAQ7E,EACRA,EAAC0c,EACDA,GACE/e,MACEk0C,MAAEA,GAAUhtC,EAAS8kC,OACrB6P,EAAW,IAAI/R,GACnB5iC,EACA,WACAw0C,GAAKp8C,MAAM4H,EAASulC,IAAIkP,MAAME,UAI5B3H,EAAMrF,aACRqF,EAAMtE,iBACJ5vC,KACA,IAAIo8C,GACF/5C,EACA0c,EAAI88B,EAASnQ,UAAU,KACvBrpC,EAAIrC,KAAK6gD,YAAYpU,GACrB1tB,GAIP,MACD,GAAI/e,KAAKmD,SAASpE,OAAS,EAAG,CAE5B,MAAMqd,EAAI,IAAIosC,GAASxoD,KAAKkH,UAE5BkV,EAAEjZ,SAAWnD,KAAKmD,SAClBiZ,EAAE7Y,OAASvD,KACXoc,EAAEi4B,OAAO5H,EACV,CACF,CAEDsC,UACE,MAAQpjC,UAAW3L,KAAKkH,SAEpByE,GACFA,EAAO+lD,KAAK1xD,KAAK2sC,mBAAmB3C,YAEvC,CAEDgF,cACchvC,KAAKkH,SAASulC,IAEtBrJ,OAAOh8B,MAAMmoC,OAAS,SAC3B,CAzECroC,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KACIE,KAAO,IAWd,MAAM26C,WAAEA,GAAel4C,EACjBmH,EAAa+wC,EAAW,GACxB4W,EAAU5W,EAAW97C,OAAS,GAC/B0C,MAAMc,KAAKs4C,GAAYhxB,OAAMlnB,GAA0B,IAAlBA,EAAK83C,WAE/Cz6C,KAAKyxD,QAAUA,EACfzxD,KAAK+P,KAAO0hD,EACRzxD,KAAKwhD,gBAAgB13C,GACrB,EACL,Gf2CD6nD,SgBzBWC,cAAwB7R,GAyB1BhF,UACP,OAAO/6C,KAAK+P,IACb,CAED6yB,KAAK6J,GACH,MAAMolB,UAAEA,GAAc7xD,KAElBysC,GACFA,EAAIuG,YAGN6e,EAAUriB,SAAOC,IAAE,IAAAvvC,KACjBA,EAAIquC,OACJA,GAFiBkB,EAIjB,OAAQvvC,GACN,KAAKyjD,GAAWlpB,QAEVgS,GACFA,EAAIyG,OAAO3E,EAAO,GAAIA,EAAO,IAG/B,MAEF,KAAKoV,GAAW5pB,QAEV0S,GACFA,EAAIwG,OAAO1E,EAAO,GAAIA,EAAO,IAG/B,MAEF,KAAKoV,GAAWtqB,SAEVoT,GACFA,EAAI+Z,cACFjY,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAIX,MAEF,KAAKoV,GAAWpqB,QAEVkT,GACFA,EAAIga,iBACFlY,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAIX,MAEF,KAAKoV,GAAW3nB,IAAK,CACnB,MACE6b,EACAC,EACAsQ,EACAC,EACAyJ,EACAC,EACAC,EACAC,GACE1jB,EACEpyB,EAAIisC,EAAKC,EAAKD,EAAKC,EACnB7iC,EAAS4iC,EAAKC,EAAK,EAAID,EAAKC,EAC5B5iC,EAAS2iC,EAAKC,EAAKA,EAAKD,EAAK,EAE/B3b,IACFA,EAAIlmB,UAAUsxB,EAAIC,GAClBrL,EAAInnB,OAAO0sC,GACXvlB,EAAIjmB,MAAMhB,EAAQC,GAClBgnB,EAAI5P,IAAI,EAAG,EAAG1gB,EAAG21C,EAAOA,EAAQC,EAAQ7O,QAAQ,EAAI+O,IACpDxlB,EAAIjmB,MAAM,EAAIhB,EAAQ,EAAIC,GAC1BgnB,EAAInnB,QAAQ0sC,GACZvlB,EAAIlmB,WAAWsxB,GAAKC,IAGtB,KACD,CAED,KAAK6L,GAAW1pB,WAEVwS,GACFA,EAAI0G,Y,GAQb,CAEQ4F,eAAetM,GACtBzsC,KAAKkyD,YAAYzlB,GACjBA,EAAIkM,OAEJ,MAAMwZ,EAAiBnyD,KAAKuD,OAAOwxC,SAAS,mBAAmB/K,YACzD6R,EAAW77C,KAAK2gD,eAChByR,UAAEA,GAAcpyD,KAChB8lD,EAAOrZ,EAAI4R,UAEM,cAAnB8T,GACF1lB,EAAIuG,YAGNof,EAAU5iB,SAAO,CAAEwR,EAAOliD,KACxB,MAAMwtB,GACJA,EAAEC,GACFA,EAAE8lC,SACFA,EACAtiD,KAAMuiD,GACJtR,EAEJvU,EAAIkM,OACJlM,EAAIlmB,UAAU+F,EAAGjqB,EAAGiqB,EAAGvN,GACvB0tB,EAAInnB,OAAO+sC,GAEP5lB,EAAI4R,WACN5R,EAAI4V,SAASiQ,EAAa,EAAG,GAG3B7lB,EAAI4E,aACN5E,EAAI6V,WAAWgQ,EAAa,EAAG,GAGjC7lB,EAAIwM,UAEmB,cAAnBkZ,IACQ,IAANrzD,GACF2tC,EAAIwG,OAAO3mB,EAAGjqB,EAAGiqB,EAAGvN,EAAI88B,EAAW,GAGrCpP,EAAIyG,OAAO3mB,EAAGlqB,EAAGkqB,EAAGxN,EAAI88B,EAAW,GACpC,IAeoB,cAAnBsW,IACF1lB,EAAI+R,UAAY3C,EAAW,GAC3BpP,EAAI4E,YAAcyU,EAClBrZ,EAAIuZ,SACJvZ,EAAI0G,aAGN1G,EAAIwM,SACL,CAESsZ,qBAAmBC,MAAG5yD,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,EACjC,OAAOI,KAAKyyD,mBAAmBD,IAAQ,CACxC,CAESE,qBACRjmB,EACAkmB,EACAC,EACAC,EACAC,EACAC,EACA/lC,EACA5sB,EACA4yD,GAEA,IAAI9T,EAAS6T,EACTE,EAAajzD,KAAK6gD,YAAYpU,EAAKrsC,GAE7B,MAANA,GACY,YAAXuyD,GACAC,EAAgBC,IAEnBI,IAAeJ,EAAgBD,GAAiBE,GAG9CE,GAAK,IACP9T,GAAUl/C,KAAKuyD,mBAAmBS,IAGpC,MAAME,EAAalzD,KAAKmzD,WAAa,GAC/B7mC,EAAKtsB,KAAKozD,0BAA0BlU,EAAQgU,EAAY,GACxD3mC,EAAKvsB,KAAKozD,0BAA0BlU,EAAS+T,EAAYC,EAAY,GACrEG,EAAU,C,GACd/mC,E,GACAC,GAEI8lC,EAAW/lC,GAAMC,EACnB3d,KAAKgX,MACL2G,EAAGxN,EAAIuN,EAAGvN,EACVwN,EAAGlqB,EAAIiqB,EAAGjqB,GAEV,EAEJ,GAAI2qB,EAAI,CACN,MAAMsmC,EAAM1kD,KAAK+mB,IAAI/mB,KAAKsW,GAAK,EAAImtC,GAAYrlC,EACzCumC,EAAM3kD,KAAK+mB,KAAK08B,GAAYrlC,EAElCqmC,EAAQ/mC,GAAK,IACRA,EACHjqB,EAAGiqB,EAAGjqB,EAAIixD,EACVv0C,EAAGuN,EAAGvN,EAAIw0C,GAEZF,EAAQ9mC,GAAK,IACRA,EACHlqB,EAAGkqB,EAAGlqB,EAAIixD,EACVv0C,EAAGwN,EAAGxN,EAAIw0C,EAEb,CAID,OAFArU,GAAU+T,EAEH,C,OACL/T,E,QACAmU,E,SACAhB,EAEH,CAEkBxR,YACjBpU,EACA18B,GAEA,MAAMyjD,cAAEA,GAAkBxzD,KACpBujD,EAAaxzC,GAAQ/P,KAAK+6C,UAEhC,GAAIyY,EAAc7uD,IAAI4+C,GACpB,OAAOiQ,EAAc3uD,IAAI0+C,GAG3B,MAAMF,EAAUrjD,KAAKsjD,kBAAkB7W,EAAK8W,GAI5C,OAFAiQ,EAAc5uD,IAAI2+C,EAAYF,GAEvBA,CACR,CAKS6O,YAAYzlB,GACpB,GAAIzsC,KAAKoyD,UACP,OAGF,MAAMxQ,EAAa5hD,KAAK+6C,UAClB0Y,EAAQ7R,EAAW3gD,MAAM,IACzB6xD,EAAelR,EAAW3gD,MAAM,KAAKlC,OAAS,EAC9CguB,EAAK/sB,KAAKuD,OAAOgF,aAAa,MAAMtH,QAAQC,KAAIrB,GAAKA,EAAE6rC,UAAU,OACjE1e,EAAKhtB,KAAKuD,OAAOgF,aAAa,MAAMmjC,UAAU,KAC9CinB,EAAS3yD,KAAKuD,OAAOwxC,SAAS,eAAe/K,UAAU,SACvD0pB,EAAc1zD,KAAK+0C,SAAS,kBAC5B4e,EAAgB3zD,KAAKuD,OAAOwxC,SAAS,kBAC3C,IAAI6e,EAAgB,EAEfF,EAAYzpB,YACe,YAA3BypB,EAAYhpB,WAIbgpB,EAAYzpB,YACiB,YAA3BypB,EAAYhpB,YACgB,UAA3BgpB,EAAYhpB,aAEfkpB,EAAgBF,EAAYhoB,aAN9BkoB,EAAgBD,EAAcjoB,YAWhC,MAAM+mB,EAA+B,GAC/BoB,EAAUjS,EAAW7iD,OAE3BiB,KAAKyyD,mBAAqBA,EAE1B,IAAK,IAAI3zD,EAAI,EAAGA,EAAI+0D,EAAS/0D,IAC3B2zD,EAAmBhyD,UACA,IAAVssB,EAAGjuB,GACNiuB,EAAGjuB,GACH80D,GAIR,MAAME,EAAQrB,EAAmB9d,QAAM,CACpCof,EAAKC,EAAKl1D,IACH,IAANA,EACI,EACAi1D,EAAMC,GAAO,GAEnB,GAEIC,EAAYj0D,KAAK6gD,YAAYpU,GAC7BmmB,EAAgBhkD,KAAKiO,IAAIo3C,EAAYH,EAAO,GAElD9zD,KAAKi0D,UAAYA,EACjBj0D,KAAKmzD,WAAanzD,KAAK2gD,cACvB3gD,KAAKoyD,UAAY,GAEjB,MAAMS,EAAgB7yD,KAAKk0D,gBACrBC,EAAcn0D,KAAK+0C,SAAS,eAAenK,UAAU,GAAKioB,EAChE,IAAI3T,EAAS,EAEE,WAAXyT,GACY,WAAXA,IAEHzT,GAAU0T,EAAgB,GAGb,QAAXD,GACY,UAAXA,IAEHzT,GAAU0T,GAGZ1T,GAAUiV,EAEVV,EAAMjkB,SAAO,CAAEuR,EAAMjiD,KAEnB,MACEogD,OAAQkV,EAAUf,QAClBA,EAAOhB,SACPA,GACEryD,KAAK0yD,qBACPjmB,EACAkmB,EACAC,EACAC,EACAC,EACA5T,EACAlyB,EACA+zB,EACAjiD,GAGFogD,EAASkV,EAEJf,EAAQ/mC,IAAO+mC,EAAQ9mC,IAoB5BvsB,KAAKoyD,UAAU3xD,KAAK,CAGlBsP,KAAM0jD,EAAM30D,GACZwtB,GAAI+mC,EAAQ/mC,GACZC,GAAI8mC,EAAQ9mC,G,SACZ8lC,GACD,GAEJ,CAESgC,cAAczxB,GAGtB,GAFA5iC,KAAKs0D,YAAU,GAEV1xB,EACH,MAAO,GAGT,MAAM2xB,EAA+B,IAC/BvP,WAAEA,GAAepiB,EAKfoiB,IAHRA,EAAWpB,SAGHoB,EAAWhB,SAAS,CAC1B,MAAMhW,QAAEA,GAAYgX,EACdwP,EAASxmB,EAAUA,EAAQ3rC,EAAI,EAC/BoyD,EAASzmB,EAAUA,EAAQjvB,EAAI,EAC/B0Z,EAAUusB,EAAWx/C,OAC3B,IAAIkvD,EAA+Bj8B,EAAQv4B,KACvCquC,EAAmB,GAEvB,OAAQ9V,EAAQv4B,MACd,KAAKyjD,GAAW5pB,QACd/5B,KAAKilD,MAAMD,EAAYzW,GACvB,MAEF,KAAKoV,GAAWlpB,QACdi6B,EAAkB10D,KAAKklD,MAAMF,EAAYzW,GACzC,MAEF,KAAKoV,GAAWnpB,cACdk6B,EAAkB10D,KAAKmlD,MAAMH,EAAYzW,GACzC,MAEF,KAAKoV,GAAWjpB,aACdg6B,EAAkB10D,KAAKolD,MAAMJ,EAAYzW,GACzC,MAEF,KAAKoV,GAAWtqB,SACdr5B,KAAKqlD,MAAML,EAAYzW,GACvB,MAEF,KAAKoV,GAAWvqB,gBACds7B,EAAkB10D,KAAKslD,MAAMN,EAAYzW,GACzC,MAEF,KAAKoV,GAAWpqB,QACdv5B,KAAKulD,MAAMP,EAAYzW,GACvB,MAEF,KAAKoV,GAAWrqB,eACdo7B,EAAkB10D,KAAKwlD,MAAMR,EAAYzW,GACzC,MAEF,KAAKoV,GAAW3nB,IACduS,EAASvuC,KAAKylD,MAAMT,GACpB,MAEF,KAAKrB,GAAW1pB,WACd8qB,GAAYW,MAAMV,GAMlBvsB,EAAQv4B,OAASyjD,GAAW1pB,WAC9Bs6B,EAAa9zD,KAAK,CAChBP,KAAMw0D,E,OACNnmB,EACAlvB,MAAO,CACLhd,EAAGmyD,EACHz1C,EAAG01C,GAELH,WAAYt0D,KAAK20D,WAAWH,EAAQC,EAAQC,EAAiBnmB,KAG/DgmB,EAAa9zD,KAAK,CAChBP,KAAMyjD,GAAW1pB,WACjBsU,OAAQ,GACR+lB,WAAY,GAGjB,CAED,OAAOC,CACR,CAEStP,MACRD,EACAzW,GAEA,MAAMlsC,EACJA,EAAC0c,EACDA,GACEgmC,GAAYE,MAAMD,GAAYj3B,MAElCwgB,EAAO9tC,KAAK4B,EAAG0c,EAChB,CAESmmC,MACRF,EACAzW,GAEA,MAAMlsC,EACJA,EAAC0c,EACDA,GACEgmC,GAAYG,MAAMF,GAAYj3B,MAIlC,OAFAwgB,EAAO9tC,KAAK4B,EAAG0c,GAER4kC,GAAWlpB,OACnB,CAES0qB,MACRH,EACAzW,GAEA,MAAMlsC,EACJA,EAAC0c,EACDA,GACEgmC,GAAYI,MAAMH,GAAYj3B,MAIlC,OAFAwgB,EAAO9tC,KAAK4B,EAAG0c,GAER4kC,GAAWlpB,OACnB,CAES2qB,MACRJ,EACAzW,GAEA,MAAMlsC,EACJA,EAAC0c,EACDA,GACEgmC,GAAYK,MAAMJ,GAAYj3B,MAIlC,OAFAwgB,EAAO9tC,KAAK4B,EAAG0c,GAER4kC,GAAWlpB,OACnB,CAES4qB,MACRL,EACAzW,GAEA,MAAMxgB,MACJA,EAAKu4B,aACLA,EAAYC,aACZA,GACExB,GAAYM,MAAML,GAEtBzW,EAAO9tC,KACLstB,EAAM1rB,EACN0rB,EAAMhP,EACNunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,EAEhB,CAESumC,MACRN,EACAzW,GAEA,MAAMxgB,MACJA,EAAKu4B,aACLA,EAAYC,aACZA,GACExB,GAAYO,MAAMN,GAWtB,OATAzW,EAAO9tC,KACLstB,EAAM1rB,EACN0rB,EAAMhP,EACNunC,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,GAGR4kC,GAAWtqB,QACnB,CAESksB,MACRP,EACAzW,GAEA,MAAM+X,aACJA,EAAYC,aACZA,GACExB,GAAYQ,MAAMP,GAEtBzW,EAAO9tC,KACL6lD,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,EAEhB,CAESymC,MACRR,EACAzW,GAEA,MAAM+X,aACJA,EAAYC,aACZA,GACExB,GAAYS,MAAMR,GAStB,OAPAzW,EAAO9tC,KACL6lD,EAAajkD,EACbikD,EAAavnC,EACbwnC,EAAalkD,EACbkkD,EAAaxnC,GAGR4kC,GAAWpqB,OACnB,CAESksB,MACRT,GAEA,IAAI3uB,GACFA,EAAEC,GACFA,EAAEF,UACFA,EAASswB,cACTA,EAAaG,MACbA,EAAKC,GACLA,EAAEC,GACFA,GACEhC,GAAYU,MAAMT,GAUtB,OARkB,IAAd5uB,GAAmB2wB,EAAK,IAC1BA,GAAM,EAAIn4C,KAAKsW,IAGC,IAAdkR,GAAmB2wB,EAAK,IAC1BA,GAAM,EAAIn4C,KAAKsW,IAGV,CACL2hC,EAAMxkD,EACNwkD,EAAM9nC,EACNsX,EACAC,EACAwwB,EACAC,EACAL,EACAtwB,EAEH,CAESu+B,WACRtyD,EACA0c,EACA61C,EACArmB,GAEA,IAAI9e,EAAM,EACNlD,EAAa,KACbmwB,EAAa,KACbh9C,EAAI,EAER,OAAQk1D,GACN,KAAKjR,GAAWlpB,QACd,OAAOz6B,KAAK60D,cAAcxyD,EAAG0c,EAAGwvB,EAAO,GAAIA,EAAO,IAEpD,KAAKoV,GAAWtqB,SAed,IAbA5J,EAAM,EACNlD,EAAKvsB,KAAK80D,sBACR,EACAzyD,EACA0c,EACAwvB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAGJ7uC,EAAI,IAAMA,GAAK,EAAGA,GAAK,IAC1Bg9C,EAAK18C,KAAK80D,sBACRp1D,EACA2C,EACA0c,EACAwvB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAET9e,GAAOzvB,KAAK60D,cAActoC,EAAGlqB,EAAGkqB,EAAGxN,EAAG29B,EAAGr6C,EAAGq6C,EAAG39B,GAC/CwN,EAAKmwB,EAGP,OAAOjtB,EAET,KAAKk0B,GAAWpqB,QAad,IAXA9J,EAAM,EACNlD,EAAKvsB,KAAK+0D,0BACR,EACA1yD,EACA0c,EACAwvB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAGJ7uC,EAAI,IAAMA,GAAK,EAAGA,GAAK,IAC1Bg9C,EAAK18C,KAAK+0D,0BACRr1D,EACA2C,EACA0c,EACAwvB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,IAET9e,GAAOzvB,KAAK60D,cACVtoC,EAAGlqB,EACHkqB,EAAGxN,EACH29B,EAAGr6C,EACHq6C,EAAG39B,GAELwN,EAAKmwB,EAGP,OAAOjtB,EAET,KAAKk0B,GAAW3nB,IAAK,CAEnBvM,EAAM,EAEN,MAAMpQ,EAAQkvB,EAAO,GAEfwjB,EAASxjB,EAAO,GAEhBjvB,EAAMivB,EAAO,GAAKwjB,EACxB,IAAIiD,EAAMpmD,KAAKsW,GAAK,IAiBpB,GAdItW,KAAK4c,IAAInM,EAAQC,GAAO01C,IAC1BA,EAAMpmD,KAAK4c,IAAInM,EAAQC,IAIzBiN,EAAKvsB,KAAKi1D,wBACR1mB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPlvB,EACA,GAGE0yC,EAAS,EACX,IAAKryD,EAAI2f,EAAQ21C,EAAKt1D,EAAI4f,EAAK5f,GAAKs1D,EAClCtY,EAAK18C,KAAKi1D,wBACR1mB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACP7uC,EACA,GAEF+vB,GAAOzvB,KAAK60D,cAActoC,EAAGlqB,EAAGkqB,EAAGxN,EAAG29B,EAAGr6C,EAAGq6C,EAAG39B,GAC/CwN,EAAKmwB,OAGP,IAAKh9C,EAAI2f,EAAQ21C,EAAKt1D,EAAI4f,EAAK5f,GAAKs1D,EAClCtY,EAAK18C,KAAKi1D,wBACR1mB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACP7uC,EACA,GAEF+vB,GAAOzvB,KAAK60D,cAActoC,EAAGlqB,EAAGkqB,EAAGxN,EAAG29B,EAAGr6C,EAAGq6C,EAAG39B,GAC/CwN,EAAKmwB,EAcT,OAVAA,EAAK18C,KAAKi1D,wBACR1mB,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACPjvB,EACA,GAEFmQ,GAAOzvB,KAAK60D,cAActoC,EAAGlqB,EAAGkqB,EAAGxN,EAAG29B,EAAGr6C,EAAGq6C,EAAG39B,GAExC0Q,CACR,EAKH,OAAO,CACR,CAESylC,eACRC,EACAjY,EACAC,EACAC,EACAC,GACA+X,MAAKx1D,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAGs9C,EACRmY,EAAKz1D,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAGu9C,EAER,MAAMlyC,GAAKoyC,EAAMF,IAASC,EAAMF,EAAOhU,IACvC,IAAIxZ,EAAM9gB,KAAK+W,KAAKwvC,EAAOA,GAAQ,EAAIlqD,EAAIA,IAEvCmyC,EAAMF,IACRxtB,IAAG,GAGL,IAAI4lC,EAAOrqD,EAAIykB,EACX6lC,EAAa,KAEjB,GAAInY,IAAQF,EACVqY,EAAK,CACHlzD,EAAG+yD,EACHr2C,EAAGs2C,EAAQC,QAGf,IAAKD,EAAQlY,IAASiY,EAAQlY,EAAOhU,MAAiBj+B,EACpDsqD,EAAK,CACHlzD,EAAG+yD,EAAQ1lC,EACX3Q,EAAGs2C,EAAQC,OAER,CACL,IAAIE,EAAK,EACLC,EAAK,EACT,MAAMhmC,EAAMzvB,KAAK60D,cAAc3X,EAAKC,EAAKC,EAAKC,GAE9C,GAAI5tB,EAAMyZ,GACR,OAAO,KAGT,IAAIzb,GACA2nC,EAAQlY,IAAQE,EAAMF,IACpBmY,EAAQlY,IAAQE,EAAMF,GAE5B1vB,GAAKgC,EAAMA,EACX+lC,EAAKtY,EAAMzvB,GAAK2vB,EAAMF,GACtBuY,EAAKtY,EAAM1vB,GAAK4vB,EAAMF,GAEtB,MAAMuY,EAAQ11D,KAAK60D,cAAcO,EAAOC,EAAOG,EAAIC,GAC7CE,EAAO/mD,KAAK+W,KAAKwvC,EAAOA,EAAOO,EAAQA,GAE7ChmC,EAAM9gB,KAAK+W,KAAKgwC,EAAOA,GAAQ,EAAI1qD,EAAIA,IAEnCmyC,EAAMF,IACRxtB,IAAG,GAGL4lC,EAAOrqD,EAAIykB,EACX6lC,EAAK,CACHlzD,EAAGmzD,EAAK9lC,EACR3Q,EAAG02C,EAAKH,EAEX,CAED,OAAOC,CACR,CAESK,eAAeC,GACvB,MAAMC,EAAU91D,KAAKk0D,gBACrB,IAAI6B,EAAuB,EACvB3gC,EAAY,KAEhB,GAAIygC,GAAQ,MACPA,EAAW,KAAUC,EAExB,OAAO,KAGT,MAAMjE,UAAEA,GAAc7xD,KAEtB,IAAK,MAAMy4B,KAAWo5B,EAAW,CAC/B,GAAIp5B,IAEAA,EAAQ67B,WAAa,MAClByB,EAAuBt9B,EAAQ67B,WAAa,KAAUuB,GAE3D,CACAE,GAAwBt9B,EAAQ67B,WAChC,QACD,CAED,MAAM/f,EAAQshB,EAAWE,EACzB,IAAIC,EAAW,EAEf,OAAQv9B,EAAQv4B,MACd,KAAKyjD,GAAWlpB,QACdrF,EAAIp1B,KAAKk1D,eACP3gB,EACA9b,EAAQpZ,MAAMhd,EACdo2B,EAAQpZ,MAAMN,EACd0Z,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQpZ,MAAMhd,EACdo2B,EAAQpZ,MAAMN,GAEhB,MAEF,KAAK4kC,GAAW3nB,IAAK,CACnB,MAAM3c,EAAQoZ,EAAQ8V,OAAO,GAEvBwjB,EAASt5B,EAAQ8V,OAAO,GAExBjvB,EAAMmZ,EAAQ8V,OAAO,GAAKwjB,EAIhC,GAFAiE,EAAW32C,EAAQk1B,EAAQ9b,EAAQ67B,WAAavC,EAE5CA,EAAS,GAAKiE,EAAW12C,GACxByyC,GAAU,GAAKiE,EAAW12C,EAE7B,MAGF8V,EAAIp1B,KAAKi1D,wBACPx8B,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACfynB,EACAv9B,EAAQ8V,OAAO,IAEjB,KACD,CAED,KAAKoV,GAAWtqB,SAEd28B,EAAWzhB,EAAQ9b,EAAQ67B,WAEvB0B,EAAW,IACbA,EAAW,GAGb5gC,EAAIp1B,KAAK80D,sBACPkB,EACAv9B,EAAQpZ,MAAMhd,EACdo2B,EAAQpZ,MAAMN,EACd0Z,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,IAEjB,MAEF,KAAKoV,GAAWpqB,QAEdy8B,EAAWzhB,EAAQ9b,EAAQ67B,WAEvB0B,EAAW,IACbA,EAAW,GAGb5gC,EAAIp1B,KAAK+0D,0BACPiB,EACAv9B,EAAQpZ,MAAMhd,EACdo2B,EAAQpZ,MAAMN,EACd0Z,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,GACf9V,EAAQ8V,OAAO,IAOrB,GAAInZ,EACF,OAAOA,EAGT,KACD,CAED,OAAO,IACR,CAESy/B,cACR5+B,EACAC,EACAyB,EACAkB,GAEA,OAAOjqB,KAAK+W,MACTgS,EAAK1B,IAAO0B,EAAK1B,IACf4C,EAAK3C,IAAO2C,EAAK3C,GAEvB,CAESg+B,gBAYR,OAXmB,IAAfl0D,KAAKs0D,aACPt0D,KAAKs0D,WAAat0D,KAAK6xD,UAAUld,QAAM,CACpC51C,EAAQ05B,IACPA,EAAQ67B,WAAa,EACjBv1D,EAAS05B,EAAQ67B,WACjBv1D,GAEN,IAIGiB,KAAKs0D,UACb,CAESQ,sBACRmB,EACA/Y,EACAC,EACAC,EACAC,EACAC,EACAC,EACA2Y,EACAC,GAKA,MAAO,C,EAHGD,EAAM3sB,GAAI0sB,GAAO3Y,EAAM9T,GAAIysB,GAAO7Y,EAAM3T,GAAIwsB,GAAO/Y,EAAMxT,GAAIusB,G,EAC7DE,EAAM5sB,GAAI0sB,GAAO1Y,EAAM/T,GAAIysB,GAAO5Y,EAAM5T,GAAIwsB,GAAO9Y,EAAMzT,GAAIusB,GAMxE,CAESlB,0BACRkB,EACA/Y,EACAC,EACAC,EACAC,EACAC,EACAC,GAKA,MAAO,C,EAHGD,EAAM3T,GAAIssB,GAAO7Y,EAAMxT,GAAIqsB,GAAO/Y,EAAMrT,GAAIosB,G,EAC5C1Y,EAAM5T,GAAIssB,GAAO5Y,EAAMzT,GAAIqsB,GAAO9Y,EAAMtT,GAAIosB,GAMvD,CAEShB,wBACRpd,EACAC,EACAsQ,EACAC,EACAyJ,EACAE,GAEA,MAAMoE,EAASxnD,KAAK+mB,IAAIq8B,GAClBqE,EAASznD,KAAKgnB,IAAIo8B,GAClBuD,EACDnN,EAAKx5C,KAAK+mB,IAAIm8B,GADbyD,EAEDlN,EAAKz5C,KAAKgnB,IAAIk8B,GAGnB,MAAO,CACLzvD,EAAGw1C,GAAM0d,EAAOa,EAASb,EAAOc,GAChCt3C,EAAG+4B,GAAMyd,EAAOc,EAASd,EAAOa,GAEnC,CAGSE,sBACRC,EACAC,GAEA,MAAMV,EAAU91D,KAAKk0D,gBACfuC,EAAYD,GAAkB,IAC9BE,EAAOH,GAAaT,EAAU,IAEpC,IAAK91D,KAAK22D,kBACL32D,KAAK22D,iBAAiBD,OAASA,GAC/B12D,KAAK22D,iBAAiBF,YAAcA,EACvC,CAEAz2D,KAAK22D,iBAAmB,C,KACtBD,E,UACAD,EACAloB,OAAQ,IAIV,IAAItxB,EAAI,EAER,IAAK,IAAItB,EAAI,EAAGA,GAAKm6C,EAASn6C,GAAK86C,EAAW,CAC5C,MAAMnqC,EAAKtsB,KAAK41D,eAAej6C,GACzB4Q,EAAKvsB,KAAK41D,eAAej6C,EAAI86C,GAE9BnqC,GAAOC,IAIZtP,GAAKjd,KAAK60D,cAAcvoC,EAAGjqB,EAAGiqB,EAAGvN,EAAGwN,EAAGlqB,EAAGkqB,EAAGxN,GAEzC9B,GAAKy5C,IACP12D,KAAK22D,iBAAiBpoB,OAAO9tC,KAAK,CAChC4B,EAAGiqB,EAAGjqB,EACN0c,EAAGuN,EAAGvN,EACN82C,SAAUl6C,IAEZsB,GAAKy5C,GAER,CACF,CACF,CAEStD,0BACRwD,EACAF,EACAD,GAIA,GAFAz2D,KAAKs2D,sBAAsBI,EAAMD,GAE7BG,EAAiB,GAChBA,EAAiB52D,KAAKk0D,gBAAkB,KAE3C,OAAO,KAGT,MAAM1B,EAAM5jD,KAAKkO,MACf85C,EACE52D,KAAKk0D,iBACJl0D,KAAK22D,iBAAiBpoB,OAAOxvC,OAAS,IAG3C,OAAOiB,KAAK22D,iBAAiBpoB,OAAOikB,IAAQ,IAC7C,CAjnCCtrD,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAjBnBt6C,KACIE,KAAO,WADXF,KAEKi0D,UAAY,EAFjBj0D,KAGKmzD,WAAa,EAHlBnzD,KAIKs0D,YAAU,EAJft0D,KAKKoyD,UAA0B,KAL/BpyD,KAQGyyD,mBAA+B,GARlCzyD,KAUYwzD,cAAgB,IAAI/uD,IAAoB,CAAC,CAAC,GAAI,KAS7D,MAAMoyD,EAAc72D,KAAK2sC,mBAAmBP,gBAE5CpsC,KAAK+P,KAAO/P,KAAKwhD,kBACjBxhD,KAAK6xD,UAAY7xD,KAAKq0D,cAAcwC,EACrC,GhBGDC,MPjEWC,cAAqBlZ,GA6BhBmZ,gBAAUze,GACxB,IACE,MAAMue,QAAc92D,KAAKkH,SAAS+vD,YAAY1e,GAE9Cv4C,KAAK82D,MAAQA,CACd,CAAC,MAAO5gB,GACPyV,QAAQC,MAAO,8BAAkCprD,OAAL+3C,EAAK,MAAKrC,EACvD,CAEDl2C,KAAK6rD,QAAS,CACf,CAEeqL,cAAQ3e,GACtB,MAAMnrC,EAAQk+C,GAAazvC,KAAK08B,GAEhC,GAAInrC,EAAO,CACT,MAAMlJ,EAAOkJ,EAAM,GAEflJ,IACe,WAAbkJ,EAAM,GACRpN,KAAK82D,MAAQK,KAAKjzD,GAElBlE,KAAK82D,MAAQM,mBAAmBlzD,GAGrC,MACC,IACE,MAAMmyC,QAAiBr2C,KAAKkH,SAASwpC,MAAM6H,GACrC5yC,QAAY0wC,EAAStmC,OAE3B/P,KAAK82D,MAAQnxD,CACd,CAAC,MAAOuwC,GACPyV,QAAQC,MAAO,8BAAkCprD,OAAL+3C,EAAK,MAAKrC,EACvD,CAGHl2C,KAAK6rD,QAAS,CACf,CAEQ9S,eAAetM,GACtB,MACEvlC,WAAQ4vD,MACRA,EAAKjL,OACLA,GACE7rD,KACEqC,EAAIrC,KAAKuI,aAAa,KAAKmjC,UAAU,KACrC3sB,EAAI/e,KAAKuI,aAAa,KAAKmjC,UAAU,KACrCnI,EAAQvjC,KAAK+0C,SAAS,SAASrJ,UAAU,KACzClI,EAASxjC,KAAK+0C,SAAS,UAAUrJ,UAAU,KAEjD,GAAKmgB,GAAWiL,GACVvzB,GAAUC,EADhB,CASA,GAHAiJ,EAAIkM,OACJlM,EAAIlmB,UAAUlkB,EAAG0c,GAEI,iBAAV+3C,EAAoB,CAC7B,MAAMO,EAAcnwD,EAASukD,MAAM6L,WACjC7qB,EACAqqB,EACA,CACErjB,aAAa,EACbC,iBAAiB,EACjBC,kBAAkB,EAClBC,aAAa,EACbI,QAAS,EACTC,QAAS,EACTH,WAAYvQ,EACZwQ,YAAavQ,KAGXv5B,gBAAEA,GAAoBotD,EAAYnwD,SAEpC+C,IACFA,EAAgB1G,OAASvD,MAGtBq3D,EAAYhjB,QAClB,MACCntC,EAASuqC,WAAW,C,IAClBhF,EACAiF,YAAa1xC,KAAKuI,aAAa,uBAAuByhC,Y,MACtDzG,EACAoO,aAAcmlB,EAAMvzB,M,OACpBC,EACAoO,cAAeklB,EAAMtzB,SAGnBxjC,KAAK6rD,SACD,aAAciL,IAAUA,EAAMS,UAClC9qB,EAAI4hB,UAAUyI,EAAO,EAAG,IAK9BrqB,EAAIwM,SA7CF,CA8CH,CAEDqH,iBACE,MAAMj+C,EAAIrC,KAAKuI,aAAa,KAAKmjC,UAAU,KACrC3sB,EAAI/e,KAAKuI,aAAa,KAAKmjC,UAAU,KACrCnI,EAAQvjC,KAAK+0C,SAAS,SAASrJ,UAAU,KACzClI,EAASxjC,KAAK+0C,SAAS,UAAUrJ,UAAU,KAEjD,OAAO,IAAI0Q,GAAY/5C,EAAG0c,EAAG1c,EAAIkhC,EAAOxkB,EAAIykB,EAC7C,CAnICt8B,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KACIE,KAAO,QADXF,KAEL6rD,QAAS,EAUP,MAAMtT,EAAOv4C,KAAK2sC,mBAAmB3C,YAErC,IAAKuO,EACH,OAGF,MAAMif,EAAQjf,EAAK/N,SAAS,qCAAuC1qC,KAAKy4C,GAExErxC,EAASuwD,OAAOh3D,KAAKT,MAEhBw3D,EAGEx3D,KAAKk3D,QAAQ3e,GAFbv4C,KAAKg3D,UAAUze,EAIvB,GOuCDn8B,EAAKosC,GACLkP,OiBxEWC,cAAsB9Z,GAGxBxJ,OAAOx0C,GAEf,C,8BALIG,KACIE,KAAO,Q,GjBwEhBkH,MAAS0kD,GACT8L,IkBtEWC,cAAmBha,GAIrB/E,WAAWrM,GAClBwK,MAAM6B,WAAWrM,GAEjB,MAAMqW,EAAQ9iD,KAAKuI,aAAa,KAC1Bw6C,EAAQ/iD,KAAKuI,aAAa,KAE5Bu6C,EAAM7Y,YACRwC,EAAIlmB,UAAUu8B,EAAMpX,UAAU,KAAM,GAGlCqX,EAAM9Y,YACRwC,EAAIlmB,UAAU,EAAGw8B,EAAMrX,UAAU,KAEpC,CAED9I,KAAK6J,GACH,MAAMF,QAAEA,GAAYvsC,KAEhBusC,GACFA,EAAQ3J,KAAK6J,EAEhB,CAEQsM,eAAetM,GACtB,MACEvlC,WAAQqlC,QACRA,GACEvsC,KAEJ,GAAIusC,EAAS,CACX,IAAIurB,EAA2BvrB,EA8B/B,GA5BqB,WAAjBA,EAAQrsC,OAEV43D,EAAU,IAAI1Q,GAAWlgD,GACzB4wD,EAAQxf,WAAWjD,QAAU,IAAIvL,GAC/B5iC,EACA,UACAqlC,EAAQhkC,aAAa,WAAWyhC,aAElC8tB,EAAQxf,WAAWoP,oBAAsB,IAAI5d,GAC3C5iC,EACA,sBACAqlC,EAAQhkC,aAAa,uBAAuByhC,aAE9C8tB,EAAQxf,WAAWmX,SAAW,IAAI3lB,GAChC5iC,EACA,WACAqlC,EAAQhkC,aAAa,YAAYyhC,aAEnC8tB,EAAQ30D,SAAWopC,EAAQppC,SAG3BopC,EAAQkM,OAAOn8B,QAAU,IAAIwtB,GAC3B5iC,EACA,UACAlH,KAAK89C,qBAIY,QAAjBga,EAAQ53D,KAAgB,CAC1B,MAAM40C,EAAa90C,KAAK+0C,SAAS,SAAS,GAAO,GAC3CC,EAAch1C,KAAK+0C,SAAS,UAAU,GAAO,GAG/CD,EAAW7K,aACb6tB,EAAQxf,WAAW/U,MAAQ,IAAIuG,GAC7B5iC,EACA,QACA4tC,EAAW9K,cAIXgL,EAAY/K,aACd6tB,EAAQxf,WAAW9U,OAAS,IAAIsG,GAC9B5iC,EACA,SACA8tC,EAAYhL,aAGjB,CAED,MAAM+tB,EAAYD,EAAQv0D,OAE1Bu0D,EAAQv0D,OAASvD,KACjB83D,EAAQzjB,OAAO5H,GACfqrB,EAAQv0D,OAASw0D,CAClB,CACF,CAEDzX,eAAe7T,GACb,MAAMF,QAAEA,GAAYvsC,KAEpB,OAAIusC,EACKA,EAAQ+T,eAAe7T,GAGzB,IACR,CAEDurB,mBACE,MACE9wD,WAAQqlC,QACRA,GACEvsC,KAEJ,OAAKusC,EAIE4K,GAAUC,YAAYlwC,EAAUqlC,GAH9B,IAIV,CAEaA,cAKZ,OAJKvsC,KAAKi4D,gBACRj4D,KAAKi4D,cAAgBj4D,KAAK2sC,mBAAmBP,iBAGxCpsC,KAAKi4D,aACb,C,8BA3HIj4D,KACIE,KAAO,K,GlBsEhB04C,KAAQyU,GACR6K,SFtEWC,cAAwB/f,GAGnC12C,MAAM+qC,GACJ,MAAQvlC,YAAalH,KACfo4D,EAAejJ,QAAQjtB,eAAeuK,IACtCuG,UACJA,EAASG,UACTA,GACE1G,EAEA2rB,IACFA,EAAaplB,UAAY6a,GACzBuK,EAAajlB,UAAY0a,IAG3BsB,QAAQztD,MAAMsxC,EAAWvG,EAAK,IAE9BzsC,KAAKmD,SAASqsC,SAASlqC,IACrB,KAAM,SAAUA,GACd,OAGF,IAAIwhB,EAAY,qBAAsBxhB,EAClCA,EAAM0yD,mBACN,KAEClxC,IACHA,EAAYqwB,GAAUC,YAAYlwC,EAAU5B,IAG1CwhB,GACFA,EAAUplB,MAAM+qC,GAGlBnnC,EAAMs9B,KAAK6J,GAEP2rB,IACFA,EAAajlB,UAAYA,GAGvBrsB,GACFA,EAAU6vB,QAAQlK,MAItB0iB,QAAQztD,MAAMyxC,EAAW1G,EAAK,IAC9BA,EAAIsF,OAEAqmB,IACFA,EAAaplB,UAAYA,EACzBolB,EAAajlB,UAAYA,EAE5B,CAEQkB,OAAOx0C,GAEf,C,8BAzDIG,KACIE,KAAO,U,GEsEhB+C,OAAU6qD,GACVuK,amB7EWC,cAA4BlgB,GAavC12C,MACE7B,EACAymC,EACAqB,EACA4wB,EACA7L,GAGD,CAjBCxlD,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GARnBt6C,KACIE,KAAO,eASdF,KAAK25C,8BACN,GnBmED6e,aoB/EWC,cAA4BrgB,GAGvC12C,MACE7B,EACAymC,EACAqB,EACA4wB,EACA7L,GAGD,C,8BAXI1sD,KACIE,KAAO,c,GpB+EhBw4D,YqBhFWC,cAA2BvgB,GAGtC12C,MACE7B,EACAymC,EACAqB,EACA4wB,EACA7L,GAGD,C,8BAXI1sD,KACIE,KAAO,a,GrBgFhB04D,cAAiB9L,GACjB+L,esBhFWC,cAA8B1gB,GAgBzC12C,MACE+qC,EACApqC,EACA0c,EACAwkB,EACAC,GAEA,MACEt8B,WAAQ6xD,WACRA,GACE/4D,KACEg5D,EAAO9xD,EAASyE,OAClBzE,EAASyE,OAAOzE,SAAS8xD,KACzB,KACE51B,EAASqJ,EAAIrJ,OAGnBA,EAAOpkC,GAAKkI,EAAS+xD,cAEjBD,IACF51B,EAAOh8B,MAAM8xD,QAAU,OACvBF,EAAK3zD,YAAY+9B,IAGnB+1B,GAAW/1B,EAAQ/gC,EAAG0c,EAAGwkB,EAAOC,EAAQu1B,GAEpCC,GACFA,EAAKxuD,YAAY44B,EAEpB,CAvCCl8B,cACAvE,EACA23C,GAEArD,MAAM/vC,EAAUvE,EAAM23C,GAVnBt6C,KACIE,KAAO,iBAWdF,KAAK+4D,WAAanqD,KAAKgR,MAAM5f,KAAKuI,aAAa,gBAAgBqiC,aAC/D5qC,KAAKkuD,oBAAsBluD,KAAK+4D,UACjC,GtBmED9oC,MuBpFWmpC,cAAqBhhB,G,8BAA3Bp4C,KACIE,KAAO,O,GvBoFhBm5D,KwBrFWC,cAAoBlhB,G,8BAA1Bp4C,KACIE,KAAO,M,ICgFLq5D,SAsCHC,gBAAgBvC,EAA0BwC,GAChD,MAAoC,kBAAzBA,EACT,CAAQz5C,EAAgB05C,IAAwCzC,EAC9Dj3C,EACqC,kBAA9B05C,EACHA,EACAD,GAIDxC,CACR,CAEGtrD,aACF,OAAO3L,KAAKgsC,OAAOrgC,MACpB,CAEG+kC,YACF,OAAO1wC,KAAKgsC,OAAO0E,KACpB,CAEGjE,UACF,OAAOzsC,KAAKgsC,OAAOS,GACpB,CAEGjB,aACF,MAAMmuB,YAAEA,GAAgB35D,KAExB,OAAO25D,EAAYA,EAAY56D,OAAS,IApEpB,EAqErB,CAEGysC,WAAOhsC,GACT,MAAMm6D,YAAEA,GAAgB35D,KAExB25D,EAAYl5D,KAAKjB,EAClB,CAEDsgD,YACE,MAAM6Z,YAAEA,GAAgB35D,KAExB25D,EAAYzzC,KACb,CAED+yC,cACE,MAAQ,QAAuBz4D,SAAdR,KAAK45D,SACvB,CAEDC,iBACE,OAAO75D,KAAKy3D,OAAO5tC,OAAMhqB,GAAKA,EAAEgsD,QACjC,CAEDiO,gBACE,OAAO95D,KAAKwrD,MAAM3hC,OAAMhqB,GAAKA,EAAEgsD,QAChC,CAEDkO,sBAAsB7yD,GACpB,MAAM+C,EAAkBjK,KAAKkK,cAA0BhD,EAAS+C,iBAOhE,OALAA,EAAgBouB,MAAO,EACvBpuB,EAAgB0vC,+BAEhB35C,KAAKiK,gBAAkBA,EAEhBA,CACR,CAEDC,cAAiCvH,GAC/B,MAAMq3D,EAAcr3D,EAAKg4C,SAASnnB,QAAO,UAAY,IAC/CymC,EAAcV,GAASW,aAAaF,GAE1C,OAAIC,EACK,IAAIA,EAAYj6D,KAAM2C,GAGxB,IAAIq4C,GAAeh7C,KAAM2C,EACjC,CAEDoyB,eAAepyB,GACb,OAAO,IAAI+gD,GAAS1jD,KAAM2C,EAC3B,CAED8uC,WAAW0oB,GACTn6D,KAAKgsC,OAAOyF,WAAW,CACrBvqC,SAAUlH,QACPm6D,GAEN,CAzGU1O,eACTngB,WACEA,EAvBkB,GAuBL8uB,OACb5uB,EAxBkB,GAyBlB+d,eAAegQ,GAAShQ,aACxB0N,cAAcsC,GAAStC,YAAWwC,qBAClCA,GACoB,IAPbhO,aAnBNzrD,KAUIqsC,YAAuC,GAV3CrsC,KAWIy4C,OAAmD,GAXvDz4C,KAYI45C,kBAA4C,GAZhD55C,KAaIy3D,OAAyB,GAb7Bz3D,KAcIwrD,MAAyB,GAd7BxrD,KAeY25D,YAAwB,GAfpC35D,KAgBG45D,SAAW,EAYjB55D,KAAKgsC,OAASyf,EAAMzf,OACpBhsC,KAAKsrC,WAAaA,EAClBtrC,KAAKwrC,OAASA,EACdxrC,KAAKupD,aAAeA,EACpBvpD,KAAKi3D,YAAcj3D,KAAKw5D,gBAAgBvC,EAAawC,GAErDz5D,KAAKgsC,OAAO4E,MAAI,IAAO5wC,KAAK65D,mBAC5B75D,KAAKgsC,OAAO4E,MAAI,IAAO5wC,KAAK85D,iBAC7B,EApCUP,GACKhQ,aAhCTA,SAAahmB,EAAeC,GACnC,MAAMJ,EAASl8B,SAASgD,cAAc,UAKtC,OAHAk5B,EAAOG,MAAQA,EACfH,EAAOI,OAASA,EAETJ,CACT,EAwBam2B,GAEKtC,YAxBHA,eAAY1K,GAAakN,MAAoB75D,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GAC1D,MAAMk3D,EAAQ5vD,SAASgD,cAAc,OAMrC,OAJIuvD,IACF3C,EAAMuD,YAAc,aAGf,IAAIpvC,SAAO,CAAoBC,EAASC,KAC7C2rC,EAAMwD,OAAM,KACVpvC,EAAQ4rC,IAGVA,EAAMyD,QAAO,CAAIC,EAAQC,EAASC,EAASC,EAAQ/O,KACjDzgC,EAAOygC,IAGTkL,EAAMvK,IAAMA,IAEhB,EAIagN,GAGKW,aAA2CA,GC/DhDU,SAQEr4D,kBACXkqC,EACA9mC,GACAyF,MAAiBxL,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GAEpB,MAAMijC,EAAS,IAAIgT,GAAOzqC,GACpByvD,QAAoBh4B,EAAOvjC,MAAMqG,GAEvC,OAAO,IAAIi1D,GAAMnuB,EAAKouB,EAAazvD,EACpC,CASM0vD,kBACLruB,EACA9mC,GACAyF,MAAiBxL,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GAEpB,MACMi7D,EADS,IAAIhlB,GAAOzqC,GACC2qC,gBAAgBpwC,GAE3C,OAAO,IAAIi1D,GAAMnuB,EAAKouB,EAAazvD,EACpC,CA8CD2vD,KACEtuB,EACA9mC,GACAyF,MAAiBxL,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GAEpB,OAAOg7D,GAAMr4D,KAAKkqC,EAAK9mC,EAAK,IACvB3F,KAAKoL,WACLA,GAEN,CASDksD,WACE7qB,EACA9mC,GACAyF,MAAiBxL,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GAEpB,OAAOg7D,GAAME,WAAWruB,EAAK9mC,EAAK,IAC7B3F,KAAKoL,WACLA,GAEN,CAMD2lC,QACE,OAAO/wC,KAAKgsC,OAAO+E,OACpB,CAMDE,UACE,OAAOjxC,KAAKgsC,OAAOiF,SACpB,CAMKoD,eAAOjpC,MAA4BxL,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GAC1CI,KAAKqf,MAAM,CACTm0B,cAAc,EACdE,iBAAiB,EACjBD,aAAa,KACVroC,UAGCpL,KAAK+wC,QAEX/wC,KAAKmjB,MACN,CAMD9D,QAAMjU,MAA4BxL,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG,GACnC,MAAMqK,gBACJA,EAAe+hC,OACfA,EACA5gC,QAAS4vD,GACPh7D,KAEJgsC,EAAO3sB,MAAMpV,EAAiB,CAC5BupC,cAAc,KACXwnB,KACA5vD,GAEN,CAKD+X,OACEnjB,KAAKgsC,OAAO7oB,MACb,CAQDskC,OACElkB,GACAC,MAAM5jC,UAAAb,OAAA,YAAAa,UAAA,GAAAA,UAAA,GAAG2jC,EACTmkB,EAAqC9nD,UAAAb,OAAA,YAAAa,UAAA,IAAAA,UAAA,GAErCI,KAAKiK,gBAAgBw9C,OAAOlkB,EAAOC,EAAQkkB,EAC5C,CAzHCjb,cACA9mC,EACAyF,EAAoB,IAEpBpL,KAAK6iC,OAAS,IAAIgT,GAAOzqC,GACzBpL,KAAKgsC,OAAS,IAAI2E,GAAOlE,EAAKrhC,GAC9BpL,KAAKoL,QAAUA,EAEf,MAAMlE,EAAW,IAAIqyD,GAASv5D,KAAMoL,GAC9BnB,EAAkB/C,EAAS6yD,sBAAsBp0D,GAEvD3F,KAAKkH,SAAWA,EAChBlH,KAAKiK,gBAAkBA,CACxB,EC7FI,MAAMgxD,GAAkBC,GACN,iBAAZA,EACF,GAEF77D,KAAKC,MAAM63D,KAAK+D,IAGnBC,GAAa,CAACC,EAAcC,KAAc,IAC3CD,EACHl3D,KAAMm3D,EAASp4D,QAAQ4b,GAAMA,EAAEy8C,WAAUp6D,KAAK2d,IAAO,CAAEva,IAAKua,EAAEva,UAOnDi3D,GAAgB,CAACH,EAAcl3D,KAC1C,MAAMqkC,EAAM,IAAIizB,IAAIt0D,SAASinB,UAC7Boa,EAAIkzB,aAAa72D,IAAI,OANO,EAACw2D,EAAcC,IACpCK,KAAKr8D,KAAKs8D,UAAUR,GAAWC,EAAcC,KAKvBO,CAAeR,EAAcl3D,IAC1D23D,UAAUC,UAAUC,UAAUxzB,EAAIxrB,WAAQ,EAG/Bi/C,GAAa,CAACZ,EAAcC,KACvC,MAAMY,EAAsB58D,KAAKs8D,UAC/BR,GAAWC,EAAcC,IAErB9yB,EAAM58B,OAAO6vD,IAAIU,gBAAgB,IAAIC,KAAK,CAACF,KACjDG,GAAa,CACXC,KAAM9zB,EACNpoC,KAAM,QACNub,OAAQ,QACV,EAGW4gD,GAAcC,MAAOC,EAAYC,EAAa92D,KACzD,MAAM+2D,GAAU,IAAIC,eAAgBC,kBAAkBj3D,GAChDy9B,EAASl8B,SAASgD,cAAc,UAChCuiC,EAAMrJ,EAAOM,WAAW,MAE9BN,EAAOG,MAAQi5B,EACfp5B,EAAOI,OAASi5B,EAEhB,MAAM31D,EAAI+1D,GAAM/B,WAAWruB,EAAKiwB,SAE1B51D,EAAEutC,SACR,MAAMyoB,EAAU15B,EAAO25B,UAAU,aACjCX,GAAa,CACXC,KAAMS,EACN38D,KAAM,QACNub,OAAQ,OACV,EAGI0gD,GAAe,EAACC,KAAEA,EAAIl8D,KAAEA,EAAIub,OAAEA,MAClC,IAAIxW,EAAIgC,SAASgD,cAAc,KAC/BhF,EAAE83D,SAAW,GAAG78D,KAAQub,IACxBxW,EAAEqzC,KAAO8jB,EACTn1D,SAAS8xD,KAAK3zD,YAAYH,GAC1BA,EAAE+3D,QACF/1D,SAAS8xD,KAAKxuD,YAAYtF,EAAA,E,UC7D5Bg4D,GAAiB,IAAA1B,IAAoBr8D,EAAA,SAAA+rB,QAA6C,qBAAAqd,KAAUxrB,W,UCA5FogD,GAAiB99D,KAAKC,MAAM,klECM5B,WACE,MAAMoM,EAAS,IAAI8vD,IAAIt0D,SAASinB,UAAUstC,aACpCJ,EAAWJ,GAAqBvvD,EAAO7G,IAAI,SAE3CX,EAAOk5D,EAAAD,IAAKj5D,KAElBA,EAAKsrC,SAAShsC,IACZA,EAAM83D,YACJD,IAAYA,EAASn3D,OACjBm3D,EAASn3D,KAAKrB,MAAMgc,GAAMA,EAAEva,MAAQd,EAAMc,KACrC,IAGb,MAAM+4D,EAAiBjoC,GAAOvW,GAAMA,EAAEva,IAAIrD,MAAM,KAAKm0B,GAC/CkoC,EAAYD,EAAc,GAC1BE,EAAYF,EAAc,GAE1Bb,EAAa,KACbC,EAAc,KACde,EAA0B,IAA1BA,EAAoC,IAIpCjxB,EAAUrlC,SAASu8B,eAAe,uBAClC99B,EAAM83D,0BAAAr7D,OACFmqC,GACPn+B,OAAO,OACPuB,KAAK,UAAW,iBAEnBhK,EACGyI,OAAO,SACPuB,KAAK,OAAQytD,EAAAF,KACbvtD,KAAK,QAAS6sD,GACd7sD,KAAK,SAAU8sD,GAElB,MAAMiB,EAAiB/3D,EACpByI,OAAO,KACPuB,KACC,YACA,aAAa6tD,MAAyBA,MAGpCG,EAAkB,KAWtBD,EACGxwD,UAAU,QACVhJ,KAAKA,GACLmI,KAAK,QACLsD,KAAK,KAAMkP,GArCO,IAqCDy+C,EAAUz+C,KAC3BlP,KAAK,KAAMkP,GArCQ,IAqCF0+C,EAAU1+C,KAC3BlP,KAAK,QAvCa,KAwClBA,KAAK,SAvCc,KAwCnBA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,eAAgB,GACrBA,KAAK,UAAWkP,GAAOA,EAAEy8C,SAAW,MAAQ,OAC5C3rD,KAAK,eAAgB,IACrB/O,GAAG,SAvBkB,CAAC0hB,EAAGzD,KAC1B3a,EAAKsrC,SAAShsC,IACRA,EAAMc,MAAQua,EAAEva,MAClBd,EAAM83D,UAAY93D,EAAM83D,SAAQ,IAIpCqC,GAAA,GAgBa,EAgBjBz2D,SAASu8B,eAAe,oBAAoBwL,QAbzB,KACjBssB,GAAoB6B,EAAAD,IAAMj5D,GAC1B05D,MAAM,SAYR12D,SAASu8B,eAAe,sBAAsBwL,QATzB,KACnB+sB,GAAiBoB,EAAAD,IAAMj5D,EAAA,EASzBgD,SAASu8B,eAAe,uBAAuBwL,QANzB,KACpBqtB,GAAkBE,EAAYC,EAAa92D,EAAIhD,OAAI,EAOrDg7D,GACF,CAGEE","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-7bfa6f22fb1a2866.js","node_modules/d3-dispatch/src/dispatch.js","node_modules/d3-selection/src/selector.js","node_modules/d3-selection/src/selectorAll.js","node_modules/d3-selection/src/selection/selectAll.js","node_modules/d3-selection/src/array.js","node_modules/d3-selection/src/matcher.js","node_modules/d3-selection/src/selection/selectChild.js","node_modules/d3-selection/src/selection/selectChildren.js","node_modules/d3-selection/src/selection/sparse.js","node_modules/d3-selection/src/selection/enter.js","node_modules/d3-selection/src/selection/data.js","node_modules/d3-selection/src/selection/sort.js","node_modules/d3-selection/src/namespaces.js","node_modules/d3-selection/src/namespace.js","node_modules/d3-selection/src/selection/attr.js","node_modules/d3-selection/src/window.js","node_modules/d3-selection/src/selection/style.js","node_modules/d3-selection/src/selection/property.js","node_modules/d3-selection/src/selection/classed.js","node_modules/d3-selection/src/selection/text.js","node_modules/d3-selection/src/selection/html.js","node_modules/d3-selection/src/selection/raise.js","node_modules/d3-selection/src/selection/lower.js","node_modules/d3-selection/src/creator.js","node_modules/d3-selection/src/selection/insert.js","node_modules/d3-selection/src/selection/remove.js","node_modules/d3-selection/src/selection/clone.js","node_modules/d3-selection/src/selection/on.js","node_modules/d3-selection/src/selection/dispatch.js","node_modules/d3-selection/src/selection/index.js","node_modules/d3-selection/src/selection/select.js","node_modules/d3-selection/src/selection/filter.js","node_modules/d3-selection/src/constant.js","node_modules/d3-selection/src/selection/exit.js","node_modules/d3-selection/src/selection/join.js","node_modules/d3-selection/src/selection/merge.js","node_modules/d3-selection/src/selection/order.js","node_modules/d3-selection/src/selection/call.js","node_modules/d3-selection/src/selection/nodes.js","node_modules/d3-selection/src/selection/node.js","node_modules/d3-selection/src/selection/size.js","node_modules/d3-selection/src/selection/empty.js","node_modules/d3-selection/src/selection/each.js","node_modules/d3-selection/src/selection/append.js","node_modules/d3-selection/src/selection/datum.js","node_modules/d3-selection/src/selection/iterator.js","node_modules/d3-color/src/define.js","node_modules/d3-color/src/color.js","node_modules/d3-interpolate/src/basis.js","node_modules/d3-interpolate/src/constant.js","node_modules/d3-interpolate/src/color.js","node_modules/d3-interpolate/src/rgb.js","node_modules/d3-interpolate/src/basisClosed.js","node_modules/d3-interpolate/src/number.js","node_modules/d3-interpolate/src/string.js","node_modules/d3-timer/src/timer.js","node_modules/d3-timer/src/timeout.js","node_modules/d3-transition/src/transition/schedule.js","node_modules/d3-transition/src/interrupt.js","node_modules/d3-interpolate/src/transform/decompose.js","node_modules/d3-interpolate/src/transform/parse.js","node_modules/d3-interpolate/src/transform/index.js","node_modules/d3-transition/src/transition/tween.js","node_modules/d3-transition/src/transition/interpolate.js","node_modules/d3-transition/src/transition/attr.js","node_modules/d3-transition/src/transition/attrTween.js","node_modules/d3-transition/src/transition/delay.js","node_modules/d3-transition/src/transition/duration.js","node_modules/d3-transition/src/transition/selection.js","node_modules/d3-transition/src/transition/style.js","node_modules/d3-transition/src/transition/index.js","node_modules/d3-transition/src/transition/select.js","node_modules/d3-transition/src/transition/selectAll.js","node_modules/d3-transition/src/transition/filter.js","node_modules/d3-transition/src/transition/merge.js","node_modules/d3-transition/src/transition/transition.js","node_modules/d3-transition/src/transition/on.js","node_modules/d3-transition/src/transition/styleTween.js","node_modules/d3-transition/src/transition/text.js","node_modules/d3-transition/src/transition/textTween.js","node_modules/d3-transition/src/transition/remove.js","node_modules/d3-transition/src/transition/ease.js","node_modules/d3-transition/src/transition/easeVarying.js","node_modules/d3-transition/src/transition/end.js","node_modules/d3-transition/src/selection/transition.js","node_modules/d3-ease/src/cubic.js","node_modules/d3-transition/src/selection/index.js","node_modules/d3-transition/src/selection/interrupt.js","node_modules/d3-brush/src/brush.js","node_modules/d3-interpolate/src/zoom.js","node_modules/d3-zoom/src/transform.js","node_modules/process/browser.js","node_modules/performance-now/src/performance-now.coffee","node_modules/raf/index.js","node_modules/rgbcolor/index.js","node_modules/svg-pathdata/node_modules/tslib/tslib.es6.js","node_modules/svg-pathdata/src/SVGPathDataEncoder.ts","node_modules/svg-pathdata/src/mathUtils.ts","node_modules/svg-pathdata/src/SVGPathDataTransformer.ts","node_modules/svg-pathdata/src/TransformableSVG.ts","node_modules/svg-pathdata/src/SVGPathDataParser.ts","node_modules/svg-pathdata/src/SVGPathData.ts","node_modules/stackblur-canvas/dist/stackblur-es.js","node_modules/canvg/src/util/string.ts","node_modules/canvg/src/util/styles.ts","node_modules/canvg/src/util/math.ts","node_modules/canvg/src/Property.ts","node_modules/canvg/src/ViewPort.ts","node_modules/canvg/src/Point.ts","node_modules/canvg/src/Mouse.ts","node_modules/canvg/src/Screen.ts","node_modules/canvg/src/Parser.ts","node_modules/canvg/src/Transform/Matrix.ts","node_modules/canvg/src/Transform/Skew.ts","node_modules/canvg/src/Transform/Transform.ts","node_modules/canvg/src/Transform/Translate.ts","node_modules/canvg/src/Transform/Rotate.ts","node_modules/canvg/src/Transform/Scale.ts","node_modules/canvg/src/Transform/SkewX.ts","node_modules/canvg/src/Transform/SkewY.ts","node_modules/canvg/src/Document/Element.ts","node_modules/canvg/src/Document/UnknownElement.ts","node_modules/canvg/src/Font.ts","node_modules/canvg/src/BoundingBox.ts","node_modules/canvg/src/Document/RenderedElement.ts","node_modules/canvg/src/Document/TextElement.ts","node_modules/canvg/src/Document/TSpanElement.ts","node_modules/canvg/src/Document/TextNode.ts","node_modules/canvg/src/PathParser.ts","node_modules/canvg/src/Document/PathElement.ts","node_modules/canvg/src/Document/SVGElement.ts","node_modules/canvg/src/Document/RectElement.ts","node_modules/canvg/src/Document/PolylineElement.ts","node_modules/canvg/src/Document/GElement.ts","node_modules/canvg/src/Document/GradientElement.ts","node_modules/canvg/src/Document/AnimateElement.ts","node_modules/canvg/src/Document/FontFaceElement.ts","node_modules/canvg/src/Document/GlyphElement.ts","node_modules/canvg/src/Document/MissingGlyphElement.ts","node_modules/canvg/src/Document/ImageElement.ts","node_modules/canvg/src/SVGFontLoader.ts","node_modules/canvg/src/Document/StyleElement.ts","node_modules/canvg/src/Document/FeColorMatrixElement.ts","node_modules/canvg/src/Document/MaskElement.ts","node_modules/canvg/src/Document/ClipPathElement.ts","node_modules/canvg/src/Document/FilterElement.ts","node_modules/canvg/src/Document/elements.ts","node_modules/canvg/src/Document/CircleElement.ts","node_modules/canvg/src/Document/EllipseElement.ts","node_modules/canvg/src/Document/LineElement.ts","node_modules/canvg/src/Document/PolygonElement.ts","node_modules/canvg/src/Document/PatternElement.ts","node_modules/canvg/src/Document/MarkerElement.ts","node_modules/canvg/src/Document/DefsElement.ts","node_modules/canvg/src/Document/LinearGradientElement.ts","node_modules/canvg/src/Document/RadialGradientElement.ts","node_modules/canvg/src/Document/StopElement.ts","node_modules/canvg/src/Document/AnimateColorElement.ts","node_modules/canvg/src/Document/AnimateTransformElement.ts","node_modules/canvg/src/Document/FontElement.ts","node_modules/canvg/src/Document/TRefElement.ts","node_modules/canvg/src/Document/AElement.ts","node_modules/canvg/src/Document/TextPathElement.ts","node_modules/canvg/src/Document/SymbolElement.ts","node_modules/canvg/src/Document/UseElement.ts","node_modules/canvg/src/Document/FeDropShadowElement.ts","node_modules/canvg/src/Document/FeMorphologyElement.ts","node_modules/canvg/src/Document/FeCompositeElement.ts","node_modules/canvg/src/Document/FeGaussianBlurElement.ts","node_modules/canvg/src/Document/TitleElement.ts","node_modules/canvg/src/Document/DescElement.ts","node_modules/canvg/src/Document/Document.ts","node_modules/canvg/src/Canvg.ts","src/js/utils.js","node_modules/@parcel/runtime-js/lib/runtime-70dc4023cc7cd21b.js","src/assets/v1_5.json","src/js/app.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jAywl\\\":\\\"index.ffe43587.js\\\",\\\"bqd2F\\\":\\\"v1_5.098f7a17.png\\\",\\\"h70yT\\\":\\\"index.32f8921b.css\\\"}\"));","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","if performance? and performance.now\n  module.exports = -> performance.now()\nelse if process? and process.hrtime\n  module.exports = -> (getNanoSeconds() - nodeLoadTime) / 1e6\n  hrtime = process.hrtime\n  getNanoSeconds = ->\n    hr = hrtime()\n    hr[0] * 1e9 + hr[1]\n  moduleLoadTime = getNanoSeconds()\n  upTime = process.uptime() * 1e9\n  nodeLoadTime = moduleLoadTime - upTime\nelse if Date.now\n  module.exports = -> Date.now() - loadTime\n  loadTime = Date.now()\nelse\n  module.exports = -> new Date().getTime() - loadTime\n  loadTime = new Date().getTime()\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","/*\n\tBased on rgbcolor.js by Stoyan Stefanov <sstoo@gmail.com>\n\thttp://www.phpied.com/rgb-color-parser-in-javascript/\n*/\n\nmodule.exports = function(color_string) {\n    this.ok = false;\n    this.alpha = 1.0;\n\n    // strip any leading #\n    if (color_string.charAt(0) == '#') { // remove # if any\n        color_string = color_string.substr(1,6);\n    }\n\n    color_string = color_string.replace(/ /g,'');\n    color_string = color_string.toLowerCase();\n\n    // before getting into regexps, try simple matches\n    // and overwrite the input\n    var simple_colors = {\n        aliceblue: 'f0f8ff',\n        antiquewhite: 'faebd7',\n        aqua: '00ffff',\n        aquamarine: '7fffd4',\n        azure: 'f0ffff',\n        beige: 'f5f5dc',\n        bisque: 'ffe4c4',\n        black: '000000',\n        blanchedalmond: 'ffebcd',\n        blue: '0000ff',\n        blueviolet: '8a2be2',\n        brown: 'a52a2a',\n        burlywood: 'deb887',\n        cadetblue: '5f9ea0',\n        chartreuse: '7fff00',\n        chocolate: 'd2691e',\n        coral: 'ff7f50',\n        cornflowerblue: '6495ed',\n        cornsilk: 'fff8dc',\n        crimson: 'dc143c',\n        cyan: '00ffff',\n        darkblue: '00008b',\n        darkcyan: '008b8b',\n        darkgoldenrod: 'b8860b',\n        darkgray: 'a9a9a9',\n        darkgreen: '006400',\n        darkkhaki: 'bdb76b',\n        darkmagenta: '8b008b',\n        darkolivegreen: '556b2f',\n        darkorange: 'ff8c00',\n        darkorchid: '9932cc',\n        darkred: '8b0000',\n        darksalmon: 'e9967a',\n        darkseagreen: '8fbc8f',\n        darkslateblue: '483d8b',\n        darkslategray: '2f4f4f',\n        darkturquoise: '00ced1',\n        darkviolet: '9400d3',\n        deeppink: 'ff1493',\n        deepskyblue: '00bfff',\n        dimgray: '696969',\n        dodgerblue: '1e90ff',\n        feldspar: 'd19275',\n        firebrick: 'b22222',\n        floralwhite: 'fffaf0',\n        forestgreen: '228b22',\n        fuchsia: 'ff00ff',\n        gainsboro: 'dcdcdc',\n        ghostwhite: 'f8f8ff',\n        gold: 'ffd700',\n        goldenrod: 'daa520',\n        gray: '808080',\n        green: '008000',\n        greenyellow: 'adff2f',\n        honeydew: 'f0fff0',\n        hotpink: 'ff69b4',\n        indianred : 'cd5c5c',\n        indigo : '4b0082',\n        ivory: 'fffff0',\n        khaki: 'f0e68c',\n        lavender: 'e6e6fa',\n        lavenderblush: 'fff0f5',\n        lawngreen: '7cfc00',\n        lemonchiffon: 'fffacd',\n        lightblue: 'add8e6',\n        lightcoral: 'f08080',\n        lightcyan: 'e0ffff',\n        lightgoldenrodyellow: 'fafad2',\n        lightgrey: 'd3d3d3',\n        lightgreen: '90ee90',\n        lightpink: 'ffb6c1',\n        lightsalmon: 'ffa07a',\n        lightseagreen: '20b2aa',\n        lightskyblue: '87cefa',\n        lightslateblue: '8470ff',\n        lightslategray: '778899',\n        lightsteelblue: 'b0c4de',\n        lightyellow: 'ffffe0',\n        lime: '00ff00',\n        limegreen: '32cd32',\n        linen: 'faf0e6',\n        magenta: 'ff00ff',\n        maroon: '800000',\n        mediumaquamarine: '66cdaa',\n        mediumblue: '0000cd',\n        mediumorchid: 'ba55d3',\n        mediumpurple: '9370d8',\n        mediumseagreen: '3cb371',\n        mediumslateblue: '7b68ee',\n        mediumspringgreen: '00fa9a',\n        mediumturquoise: '48d1cc',\n        mediumvioletred: 'c71585',\n        midnightblue: '191970',\n        mintcream: 'f5fffa',\n        mistyrose: 'ffe4e1',\n        moccasin: 'ffe4b5',\n        navajowhite: 'ffdead',\n        navy: '000080',\n        oldlace: 'fdf5e6',\n        olive: '808000',\n        olivedrab: '6b8e23',\n        orange: 'ffa500',\n        orangered: 'ff4500',\n        orchid: 'da70d6',\n        palegoldenrod: 'eee8aa',\n        palegreen: '98fb98',\n        paleturquoise: 'afeeee',\n        palevioletred: 'd87093',\n        papayawhip: 'ffefd5',\n        peachpuff: 'ffdab9',\n        peru: 'cd853f',\n        pink: 'ffc0cb',\n        plum: 'dda0dd',\n        powderblue: 'b0e0e6',\n        purple: '800080',\n        rebeccapurple: '663399',\n        red: 'ff0000',\n        rosybrown: 'bc8f8f',\n        royalblue: '4169e1',\n        saddlebrown: '8b4513',\n        salmon: 'fa8072',\n        sandybrown: 'f4a460',\n        seagreen: '2e8b57',\n        seashell: 'fff5ee',\n        sienna: 'a0522d',\n        silver: 'c0c0c0',\n        skyblue: '87ceeb',\n        slateblue: '6a5acd',\n        slategray: '708090',\n        snow: 'fffafa',\n        springgreen: '00ff7f',\n        steelblue: '4682b4',\n        tan: 'd2b48c',\n        teal: '008080',\n        thistle: 'd8bfd8',\n        tomato: 'ff6347',\n        turquoise: '40e0d0',\n        violet: 'ee82ee',\n        violetred: 'd02090',\n        wheat: 'f5deb3',\n        white: 'ffffff',\n        whitesmoke: 'f5f5f5',\n        yellow: 'ffff00',\n        yellowgreen: '9acd32'\n    };\n    color_string = simple_colors[color_string] || color_string;\n    // emd of simple type-in colors\n\n    // array of color definition objects\n    var color_defs = [\n        {\n            re: /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*((?:\\d?\\.)?\\d)\\)$/,\n            example: ['rgba(123, 234, 45, 0.8)', 'rgba(255,234,245,1.0)'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1]),\n                    parseInt(bits[2]),\n                    parseInt(bits[3]),\n                    parseFloat(bits[4])\n                ];\n            }\n        },\n        {\n            re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n            example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1]),\n                    parseInt(bits[2]),\n                    parseInt(bits[3])\n                ];\n            }\n        },\n        {\n            re: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n            example: ['#00ff00', '336699'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1], 16),\n                    parseInt(bits[2], 16),\n                    parseInt(bits[3], 16)\n                ];\n            }\n        },\n        {\n            re: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            example: ['#fb0', 'f0f'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1] + bits[1], 16),\n                    parseInt(bits[2] + bits[2], 16),\n                    parseInt(bits[3] + bits[3], 16)\n                ];\n            }\n        }\n    ];\n\n    // search through the definitions to find a match\n    for (var i = 0; i < color_defs.length; i++) {\n        var re = color_defs[i].re;\n        var processor = color_defs[i].process;\n        var bits = re.exec(color_string);\n        if (bits) {\n            var channels = processor(bits);\n            this.r = channels[0];\n            this.g = channels[1];\n            this.b = channels[2];\n            if (channels.length > 3) {\n                this.alpha = channels[3];\n            }\n            this.ok = true;\n        }\n\n    }\n\n    // validate/cleanup values\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\n    this.alpha = (this.alpha < 0) ? 0 : ((this.alpha > 1.0 || isNaN(this.alpha)) ? 1.0 : this.alpha);\n\n    // some getters\n    this.toRGB = function () {\n        return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';\n    }\n    this.toRGBA = function () {\n        return 'rgba(' + this.r + ', ' + this.g + ', ' + this.b + ', ' + this.alpha + ')';\n    }\n    this.toHex = function () {\n        var r = this.r.toString(16);\n        var g = this.g.toString(16);\n        var b = this.b.toString(16);\n        if (r.length == 1) r = '0' + r;\n        if (g.length == 1) g = '0' + g;\n        if (b.length == 1) b = '0' + b;\n        return '#' + r + g + b;\n    }\n\n    // help\n    this.getHelpXML = function () {\n\n        var examples = new Array();\n        // add regexps\n        for (var i = 0; i < color_defs.length; i++) {\n            var example = color_defs[i].example;\n            for (var j = 0; j < example.length; j++) {\n                examples[examples.length] = example[j];\n            }\n        }\n        // add type-in colors\n        for (var sc in simple_colors) {\n            examples[examples.length] = sc;\n        }\n\n        var xml = document.createElement('ul');\n        xml.setAttribute('id', 'rgbcolor-examples');\n        for (var i = 0; i < examples.length; i++) {\n            try {\n                var list_item = document.createElement('li');\n                var list_color = new RGBColor(examples[i]);\n                var example_div = document.createElement('div');\n                example_div.style.cssText =\n                        'margin: 3px; '\n                        + 'border: 1px solid black; '\n                        + 'background:' + list_color.toHex() + '; '\n                        + 'color:' + list_color.toHex()\n                ;\n                example_div.appendChild(document.createTextNode('test'));\n                var list_item_value = document.createTextNode(\n                    ' ' + examples[i] + ' -> ' + list_color.toRGB() + ' -> ' + list_color.toHex()\n                );\n                list_item.appendChild(example_div);\n                list_item.appendChild(list_item_value);\n                xml.appendChild(list_item);\n\n            } catch(e){}\n        }\n        return xml;\n\n    }\n\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { SVGPathData } from \"./SVGPathData\";\nimport { SVGCommand } from \"./types\";\n\n// Encode SVG PathData\n// http://www.w3.org/TR/SVG/paths.html#PathDataBNF\n\n// Private consts : Char groups\nconst WSP = \" \";\n\nexport function encodeSVGPath(commands: SVGCommand | SVGCommand[]) {\n  let str = \"\";\n\n  if (!Array.isArray(commands)) {\n    commands = [commands];\n  }\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    if (command.type === SVGPathData.CLOSE_PATH) {\n      str += \"z\";\n    } else if (command.type === SVGPathData.HORIZ_LINE_TO) {\n      str += (command.relative ? \"h\" : \"H\") +\n        command.x;\n    } else if (command.type === SVGPathData.VERT_LINE_TO) {\n      str += (command.relative ? \"v\" : \"V\") +\n        command.y;\n    } else if (command.type === SVGPathData.MOVE_TO) {\n      str += (command.relative ? \"m\" : \"M\") +\n        command.x + WSP + command.y;\n    } else if (command.type === SVGPathData.LINE_TO) {\n      str += (command.relative ? \"l\" : \"L\") +\n        command.x + WSP + command.y;\n    } else if (command.type === SVGPathData.CURVE_TO) {\n      str += (command.relative ? \"c\" : \"C\") +\n        command.x1 + WSP + command.y1 +\n        WSP + command.x2 + WSP + command.y2 +\n        WSP + command.x + WSP + command.y;\n    } else if (command.type === SVGPathData.SMOOTH_CURVE_TO) {\n      str += (command.relative ? \"s\" : \"S\") +\n        command.x2 + WSP + command.y2 +\n        WSP + command.x + WSP + command.y;\n    } else if (command.type === SVGPathData.QUAD_TO) {\n      str += (command.relative ? \"q\" : \"Q\") +\n        command.x1 + WSP + command.y1 +\n        WSP + command.x + WSP + command.y;\n    } else if (command.type === SVGPathData.SMOOTH_QUAD_TO) {\n      str += (command.relative ? \"t\" : \"T\") +\n        command.x + WSP + command.y;\n    } else if (command.type === SVGPathData.ARC) {\n      str += (command.relative ? \"a\" : \"A\") +\n        command.rX + WSP + command.rY +\n        WSP + command.xRot +\n        WSP + (+command.lArcFlag) + WSP + (+command.sweepFlag) +\n        WSP + command.x + WSP + command.y;\n    } else {\n      // Unknown command\n      throw new Error(\n        `Unexpected command type \"${ (command as any).type}\" at index ${i}.`);\n    }\n  }\n\n  return str;\n}\n","import { SVGPathData } from \"./SVGPathData\";\nimport { CommandA, CommandC } from \"./types\";\n\nexport function rotate([x, y]: [number, number], rad: number) {\n  return [\n    x * Math.cos(rad) - y * Math.sin(rad),\n    x * Math.sin(rad) + y * Math.cos(rad),\n  ];\n}\n\nconst DEBUG_CHECK_NUMBERS = true;\nexport function assertNumbers(...numbers: number[]) {\n  if (DEBUG_CHECK_NUMBERS) {\n    for (let i = 0; i < numbers.length; i++) {\n      if (\"number\" !== typeof numbers[i]) {\n        throw new Error(\n          `assertNumbers arguments[${i}] is not a number. ${typeof numbers[i]} == typeof ${numbers[i]}`);\n      }\n    }\n  }\n  return true;\n}\n\nconst PI = Math.PI;\n\n/**\n * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n * Fixes rX and rY.\n * Ensures lArcFlag and sweepFlag are 0 or 1\n * Adds center coordinates: command.cX, command.cY (relative or absolute, depending on command.relative)\n * Adds start and end arc parameters (in degrees): command.phi1, command.phi2; phi1 < phi2 iff. c.sweepFlag == true\n */\nexport function annotateArcCommand(c: CommandA, x1: number, y1: number) {\n  c.lArcFlag = (0 === c.lArcFlag) ? 0 : 1;\n  c.sweepFlag = (0 === c.sweepFlag) ? 0 : 1;\n  // tslint:disable-next-line\n  let {rX, rY, x, y} = c;\n\n  rX = Math.abs(c.rX);\n  rY = Math.abs(c.rY);\n  const [x1_, y1_] = rotate([(x1 - x) / 2, (y1 - y) / 2], -c.xRot / 180 * PI);\n  const testValue = Math.pow(x1_, 2) / Math.pow(rX, 2) + Math.pow(y1_, 2) / Math.pow(rY, 2);\n\n  if (1 < testValue) {\n    rX *= Math.sqrt(testValue);\n    rY *= Math.sqrt(testValue);\n  }\n  c.rX = rX;\n  c.rY = rY;\n  const c_ScaleTemp = (Math.pow(rX, 2) * Math.pow(y1_, 2) + Math.pow(rY, 2) * Math.pow(x1_, 2));\n  const c_Scale = (c.lArcFlag !== c.sweepFlag ? 1 : -1) *\n    Math.sqrt(Math.max(0, (Math.pow(rX, 2) * Math.pow(rY, 2) - c_ScaleTemp) / c_ScaleTemp));\n  const cx_ = rX * y1_ / rY * c_Scale;\n  const cy_ = -rY * x1_ / rX * c_Scale;\n  const cRot = rotate([cx_, cy_], c.xRot / 180 * PI);\n\n  c.cX = cRot[0] + (x1 + x) / 2;\n  c.cY = cRot[1] + (y1 + y) / 2;\n  c.phi1 = Math.atan2((y1_ - cy_) / rY, (x1_ - cx_) / rX);\n  c.phi2 = Math.atan2((-y1_ - cy_) / rY, (-x1_ - cx_) / rX);\n  if (0 === c.sweepFlag && c.phi2 > c.phi1) {\n    c.phi2 -= 2 * PI;\n  }\n  if (1 === c.sweepFlag && c.phi2 < c.phi1) {\n    c.phi2 += 2 * PI;\n  }\n  c.phi1 *= 180 / PI;\n  c.phi2 *= 180 / PI;\n}\n\n/**\n * Solves a quadratic system of equations of the form\n *      a * x + b * y = c\n *      x + y = 1\n * This can be understood as the intersection of the unit circle with a line.\n *      => y = (c - a x) / b\n *      => x + (c - a x) / b = 1\n *      => x b + c - 2 c a x + a x = b\n *      => (a + b) x - 2 a c x + (c - b) = 0\n */\nexport function intersectionUnitCircleLine(a: number, b: number, c: number): [number, number][] {\n  assertNumbers(a, b, c);\n  // cf. pqFormula\n  const termSqr = a * a + b * b - c * c;\n\n  if (0 > termSqr) {\n    return [];\n  } else if (0 === termSqr) {\n    return [\n      [\n        (a * c) / (a * a + b * b),\n        (b * c) / (a * a + b * b)]];\n  }\n  const term = Math.sqrt(termSqr);\n\n  return [\n    [\n      (a * c + b * term) / (a * a + b * b),\n      (b * c - a * term) / (a * a + b * b)],\n    [\n      (a * c - b * term) / (a * a + b * b),\n      (b * c + a * term) / (a * a + b * b)]];\n\n}\n\nexport const DEG = Math.PI / 180;\n\nexport function lerp(a: number, b: number, t: number) {\n  return (1 - t) * a + t * b;\n}\n\nexport function arcAt(c: number, x1: number, x2: number, phiDeg: number) {\n  return c + Math.cos(phiDeg / 180 * PI) * x1 + Math.sin(phiDeg / 180 * PI) * x2;\n}\n\nexport function bezierRoot(x0: number, x1: number, x2: number, x3: number) {\n  const EPS = 1e-6;\n  const x01 = x1 - x0;\n  const x12 = x2 - x1;\n  const x23 = x3 - x2;\n  const a = 3 * x01 + 3 * x23 - 6 * x12;\n  const b = (x12 - x01) * 6;\n  const c = 3 * x01;\n  // solve a * t + b * t + c = 0\n\n  if (Math.abs(a) < EPS) {\n    // equivalent to b * t + c =>\n    return [-c / b];\n  }\n  return pqFormula(b / a, c / a, EPS);\n\n}\n\nexport function bezierAt(x0: number, x1: number, x2: number, x3: number, t: number) {\n  // console.log(x0, y0, x1, y1, x2, y2, x3, y3, t)\n  const s = 1 - t;\n  const c0 = s * s * s;\n  const c1 = 3 * s * s * t;\n  const c2 = 3 * s * t * t;\n  const c3 = t * t * t;\n\n  return x0 * c0 + x1 * c1 + x2 * c2 + x3 * c3;\n}\n\nfunction pqFormula(p: number, q: number, PRECISION = 1e-6) {\n  // 4 times the discriminant:in\n  const discriminantX4 = p * p / 4 - q;\n\n  if (discriminantX4 < -PRECISION) {\n    return [];\n  } else if (discriminantX4 <= PRECISION) {\n    return [-p / 2];\n  }\n  const root = Math.sqrt(discriminantX4);\n\n  return [-(p / 2) - root, -(p / 2) + root];\n\n}\n\nexport function a2c(arc: CommandA, x0: number, y0: number): CommandC[] {\n  if (!arc.cX) {\n    annotateArcCommand(arc, x0, y0);\n  }\n\n  const phiMin = Math.min(arc.phi1!, arc.phi2!), phiMax = Math.max(arc.phi1!, arc.phi2!), deltaPhi = phiMax - phiMin;\n  const partCount = Math.ceil(deltaPhi / 90 );\n\n  const result: CommandC[] = new Array(partCount);\n  let prevX = x0, prevY = y0;\n  for (let i = 0; i < partCount; i++) {\n    const phiStart = lerp(arc.phi1!, arc.phi2!, i / partCount);\n    const phiEnd = lerp(arc.phi1!, arc.phi2!, (i + 1) / partCount);\n    const deltaPhi = phiEnd - phiStart;\n    const f = 4 / 3 * Math.tan(deltaPhi * DEG / 4);\n    // x1/y1, x2/y2 and x/y coordinates on the unit circle for phiStart/phiEnd\n    const [x1, y1] = [\n      Math.cos(phiStart * DEG) - f * Math.sin(phiStart * DEG),\n      Math.sin(phiStart * DEG) + f * Math.cos(phiStart * DEG)];\n    const [x, y] = [Math.cos(phiEnd * DEG), Math.sin(phiEnd * DEG)];\n    const [x2, y2] = [x + f * Math.sin(phiEnd * DEG), y - f * Math.cos(phiEnd * DEG)];\n    result[i] = {relative: arc.relative, type: SVGPathData.CURVE_TO } as any;\n    const transform = (x: number, y: number) => {\n      const [xTemp, yTemp] = rotate([x * arc.rX, y * arc.rY], arc.xRot);\n      return [arc.cX! + xTemp, arc.cY! + yTemp];\n    };\n    [result[i].x1, result[i].y1] = transform(x1, y1);\n    [result[i].x2, result[i].y2] = transform(x2, y2);\n    [result[i].x, result[i].y] = transform(x, y);\n    if (arc.relative) {\n      result[i].x1 -= prevX;\n      result[i].y1 -= prevY;\n      result[i].x2 -= prevX;\n      result[i].y2 -= prevY;\n      result[i].x -= prevX;\n      result[i].y -= prevY;\n    }\n    [prevX, prevY] = [result[i].x, result[i].y];\n  }\n  return result;\n}\n","// Transform SVG PathData\n// http://www.w3.org/TR/SVG/paths.html#PathDataBNF\n\nimport { a2c, annotateArcCommand, arcAt, assertNumbers, bezierAt, bezierRoot,\n  intersectionUnitCircleLine } from \"./mathUtils\";\nimport { SVGPathData } from \"./SVGPathData\";\nimport { SVGCommand, TransformFunction } from \"./types\";\n\nexport namespace SVGPathDataTransformer {\n  // Predefined transforming functions\n  // Rounds commands values\n  export function ROUND(roundVal = 1e13) {\n    assertNumbers(roundVal);\n    function rf(val: number) { return Math.round(val * roundVal) / roundVal; }\n    return function round(command: any) {\n      if (\"undefined\" !== typeof command.x1) {\n        command.x1 = rf(command.x1);\n      }\n      if (\"undefined\" !== typeof command.y1) {\n        command.y1 = rf(command.y1);\n      }\n\n      if (\"undefined\" !== typeof command.x2) {\n        command.x2 = rf(command.x2);\n      }\n      if (\"undefined\" !== typeof command.y2) {\n        command.y2 = rf(command.y2);\n      }\n\n      if (\"undefined\" !== typeof command.x) {\n        command.x = rf(command.x);\n      }\n      if (\"undefined\" !== typeof command.y) {\n        command.y = rf(command.y);\n      }\n\n      if (\"undefined\" !== typeof command.rX) {\n        command.rX = rf(command.rX);\n      }\n      if (\"undefined\" !== typeof command.rY) {\n        command.rY = rf(command.rY);\n      }\n\n      return command;\n    };\n  }\n  // Relative to absolute commands\n  export function TO_ABS() {\n    return INFO((command, prevX, prevY) => {\n      if (command.relative) {\n        // x1/y1 values\n        if (\"undefined\" !== typeof command.x1) {\n          command.x1 += prevX;\n        }\n        if (\"undefined\" !== typeof command.y1) {\n          command.y1 += prevY;\n        }\n        // x2/y2 values\n        if (\"undefined\" !== typeof command.x2) {\n          command.x2 += prevX;\n        }\n        if (\"undefined\" !== typeof command.y2) {\n          command.y2 += prevY;\n        }\n        // Finally x/y values\n        if (\"undefined\" !== typeof command.x) {\n          command.x += prevX;\n        }\n        if (\"undefined\" !== typeof command.y) {\n          command.y += prevY;\n        }\n        command.relative = false;\n      }\n      return command;\n    });\n  }\n  // Absolute to relative commands\n  export function TO_REL() {\n    return INFO((command, prevX, prevY) => {\n      if (!command.relative) {\n        // x1/y1 values\n        if (\"undefined\" !== typeof command.x1) {\n          command.x1 -= prevX;\n        }\n        if (\"undefined\" !== typeof command.y1) {\n          command.y1 -= prevY;\n        }\n        // x2/y2 values\n        if (\"undefined\" !== typeof command.x2) {\n          command.x2 -= prevX;\n        }\n        if (\"undefined\" !== typeof command.y2) {\n          command.y2 -= prevY;\n        }\n        // Finally x/y values\n        if (\"undefined\" !== typeof command.x) {\n          command.x -= prevX;\n        }\n        if (\"undefined\" !== typeof command.y) {\n          command.y -= prevY;\n        }\n        command.relative = true;\n      }\n      return command;\n    });\n  }\n  // Convert H, V, Z and A with rX = 0 to L\n  export function NORMALIZE_HVZ(normalizeZ = true, normalizeH = true, normalizeV = true) {\n    return INFO((command, prevX, prevY, pathStartX, pathStartY) => {\n      if (isNaN(pathStartX) && !(command.type & SVGPathData.MOVE_TO)) {\n        throw new Error(\"path must start with moveto\");\n      }\n      if (normalizeH && command.type & SVGPathData.HORIZ_LINE_TO) {\n        command.type = SVGPathData.LINE_TO;\n        command.y = command.relative ? 0 : prevY;\n      }\n      if (normalizeV && command.type & SVGPathData.VERT_LINE_TO) {\n        command.type = SVGPathData.LINE_TO;\n        command.x = command.relative ? 0 : prevX;\n      }\n      if (normalizeZ && command.type & SVGPathData.CLOSE_PATH) {\n        command.type = SVGPathData.LINE_TO;\n        command.x = command.relative ? pathStartX - prevX : pathStartX;\n        command.y = command.relative ? pathStartY - prevY : pathStartY;\n      }\n      if (command.type & SVGPathData.ARC && (0 === command.rX || 0 === command.rY)) {\n        command.type = SVGPathData.LINE_TO;\n        delete command.rX;\n        delete command.rY;\n        delete command.xRot;\n        delete command.lArcFlag;\n        delete command.sweepFlag;\n      }\n      return command;\n    });\n  }\n  /*\n   * Transforms smooth curves and quads to normal curves and quads (SsTt to CcQq)\n   */\n  export function NORMALIZE_ST() {\n    let prevCurveC2X = NaN;\n    let prevCurveC2Y = NaN;\n    let prevQuadCX = NaN;\n    let prevQuadCY = NaN;\n\n    return INFO((command, prevX, prevY) => {\n      if (command.type & SVGPathData.SMOOTH_CURVE_TO) {\n        command.type = SVGPathData.CURVE_TO;\n        prevCurveC2X = isNaN(prevCurveC2X) ? prevX : prevCurveC2X;\n        prevCurveC2Y = isNaN(prevCurveC2Y) ? prevY : prevCurveC2Y;\n        command.x1 = command.relative ? prevX - prevCurveC2X : 2 * prevX - prevCurveC2X;\n        command.y1 = command.relative ? prevY - prevCurveC2Y : 2 * prevY - prevCurveC2Y;\n      }\n      if (command.type & SVGPathData.CURVE_TO) {\n        prevCurveC2X = command.relative ? prevX + command.x2 : command.x2;\n        prevCurveC2Y = command.relative ? prevY + command.y2 : command.y2;\n      } else {\n        prevCurveC2X = NaN;\n        prevCurveC2Y = NaN;\n      }\n      if (command.type & SVGPathData.SMOOTH_QUAD_TO) {\n        command.type = SVGPathData.QUAD_TO;\n        prevQuadCX = isNaN(prevQuadCX) ? prevX : prevQuadCX;\n        prevQuadCY = isNaN(prevQuadCY) ? prevY : prevQuadCY;\n        command.x1 = command.relative ? prevX - prevQuadCX : 2 * prevX - prevQuadCX;\n        command.y1 = command.relative ? prevY - prevQuadCY : 2 * prevY - prevQuadCY;\n      }\n      if (command.type & SVGPathData.QUAD_TO) {\n        prevQuadCX = command.relative ? prevX + command.x1 : command.x1;\n        prevQuadCY = command.relative ? prevY + command.y1 : command.y1;\n      } else {\n        prevQuadCX = NaN;\n        prevQuadCY = NaN;\n      }\n\n      return command;\n    });\n  }\n  /*\n   * A quadratic bzier curve can be represented by a cubic bzier curve which has\n   * the same end points as the quadratic and both control points in place of the\n   * quadratic\"s one.\n   *\n   * This transformer replaces QqTt commands with Cc commands respectively.\n   * This is useful for reading path data into a system which only has a\n   * representation for cubic curves.\n   */\n  export function QT_TO_C() {\n    let prevQuadX1 = NaN;\n    let prevQuadY1 = NaN;\n\n    return INFO((command, prevX, prevY) => {\n      if (command.type & SVGPathData.SMOOTH_QUAD_TO) {\n        command.type = SVGPathData.QUAD_TO;\n        prevQuadX1 = isNaN(prevQuadX1) ? prevX : prevQuadX1;\n        prevQuadY1 = isNaN(prevQuadY1) ? prevY : prevQuadY1;\n        command.x1 = command.relative ? prevX - prevQuadX1 : 2 * prevX - prevQuadX1;\n        command.y1 = command.relative ? prevY - prevQuadY1 : 2 * prevY - prevQuadY1;\n      }\n      if (command.type & SVGPathData.QUAD_TO) {\n        prevQuadX1 = command.relative ? prevX + command.x1 : command.x1;\n        prevQuadY1 = command.relative ? prevY + command.y1 : command.y1;\n        const x1 = command.x1;\n        const y1 = command.y1;\n\n        command.type = SVGPathData.CURVE_TO;\n        command.x1 = ((command.relative ? 0 : prevX) + x1 * 2) / 3;\n        command.y1 = ((command.relative ? 0 : prevY) + y1 * 2) / 3;\n        command.x2 = (command.x + x1 * 2) / 3;\n        command.y2 = (command.y + y1 * 2) / 3;\n      } else {\n        prevQuadX1 = NaN;\n        prevQuadY1 = NaN;\n      }\n\n      return command;\n    });\n  }\n  export function INFO(\n    f: (command: any, prevXAbs: number, prevYAbs: number,\n        pathStartXAbs: number, pathStartYAbs: number) => any | any[]) {\n    let prevXAbs = 0;\n    let prevYAbs = 0;\n    let pathStartXAbs = NaN;\n    let pathStartYAbs = NaN;\n\n    return function transform(command: any) {\n      if (isNaN(pathStartXAbs) && !(command.type & SVGPathData.MOVE_TO)) {\n        throw new Error(\"path must start with moveto\");\n      }\n\n      const result = f(command, prevXAbs, prevYAbs, pathStartXAbs, pathStartYAbs);\n\n      if (command.type & SVGPathData.CLOSE_PATH) {\n        prevXAbs = pathStartXAbs;\n        prevYAbs = pathStartYAbs;\n      }\n\n      if (\"undefined\" !== typeof command.x) {\n        prevXAbs = (command.relative ? prevXAbs + command.x : command.x);\n      }\n      if (\"undefined\" !== typeof command.y) {\n        prevYAbs = (command.relative ? prevYAbs + command.y : command.y);\n      }\n\n      if (command.type & SVGPathData.MOVE_TO) {\n        pathStartXAbs = prevXAbs;\n        pathStartYAbs = prevYAbs;\n      }\n\n      return result;\n    };\n  }\n  /*\n   * remove 0-length segments\n   */\n  export function SANITIZE(EPS = 0) {\n    assertNumbers(EPS);\n    let prevCurveC2X = NaN;\n    let prevCurveC2Y = NaN;\n    let prevQuadCX = NaN;\n    let prevQuadCY = NaN;\n\n    return INFO((command, prevX, prevY, pathStartX, pathStartY) => {\n      const abs = Math.abs;\n      let skip = false;\n      let x1Rel = 0;\n      let y1Rel = 0;\n\n      if (command.type & SVGPathData.SMOOTH_CURVE_TO) {\n        x1Rel = isNaN(prevCurveC2X) ? 0 : prevX - prevCurveC2X;\n        y1Rel = isNaN(prevCurveC2Y) ? 0 : prevY - prevCurveC2Y;\n      }\n      if (command.type & (SVGPathData.CURVE_TO | SVGPathData.SMOOTH_CURVE_TO)) {\n        prevCurveC2X = command.relative ? prevX + command.x2 : command.x2;\n        prevCurveC2Y = command.relative ? prevY + command.y2 : command.y2;\n      } else {\n        prevCurveC2X = NaN;\n        prevCurveC2Y = NaN;\n      }\n      if (command.type & SVGPathData.SMOOTH_QUAD_TO) {\n        prevQuadCX = isNaN(prevQuadCX) ? prevX : 2 * prevX - prevQuadCX;\n        prevQuadCY = isNaN(prevQuadCY) ? prevY : 2 * prevY - prevQuadCY;\n      } else if (command.type & SVGPathData.QUAD_TO) {\n        prevQuadCX = command.relative ? prevX + command.x1 : command.x1;\n        prevQuadCY = command.relative ? prevY + command.y1 : command.y2;\n      } else {\n        prevQuadCX = NaN;\n        prevQuadCY = NaN;\n      }\n\n      if (command.type & SVGPathData.LINE_COMMANDS ||\n        command.type & SVGPathData.ARC && (0 === command.rX || 0 === command.rY || !command.lArcFlag) ||\n        command.type & SVGPathData.CURVE_TO || command.type & SVGPathData.SMOOTH_CURVE_TO ||\n        command.type & SVGPathData.QUAD_TO || command.type & SVGPathData.SMOOTH_QUAD_TO) {\n        const xRel = \"undefined\" === typeof command.x ? 0 :\n          (command.relative ? command.x : command.x - prevX);\n        const yRel = \"undefined\" === typeof command.y ? 0 :\n          (command.relative ? command.y : command.y - prevY);\n\n        x1Rel = !isNaN(prevQuadCX) ? prevQuadCX - prevX :\n          \"undefined\" === typeof command.x1 ? x1Rel :\n            command.relative ? command.x :\n              command.x1 - prevX;\n        y1Rel = !isNaN(prevQuadCY) ? prevQuadCY - prevY :\n          \"undefined\" === typeof command.y1 ? y1Rel :\n            command.relative ? command.y :\n              command.y1 - prevY;\n\n        const x2Rel = \"undefined\" === typeof command.x2 ? 0 :\n          (command.relative ? command.x : command.x2 - prevX);\n        const y2Rel = \"undefined\" === typeof command.y2 ? 0 :\n          (command.relative ? command.y : command.y2 - prevY);\n\n        if (abs(xRel) <= EPS && abs(yRel) <= EPS &&\n          abs(x1Rel) <= EPS && abs(y1Rel) <= EPS &&\n          abs(x2Rel) <= EPS && abs(y2Rel) <= EPS) {\n          skip = true;\n        }\n      }\n\n      if (command.type & SVGPathData.CLOSE_PATH) {\n        if (abs(prevX - pathStartX) <= EPS && abs(prevY - pathStartY) <= EPS) {\n          skip = true;\n        }\n      }\n\n      return skip ? [] : command;\n    });\n  }\n  // SVG Transforms : http://www.w3.org/TR/SVGTiny12/coords.html#TransformList\n  // Matrix : http://apike.ca/prog_svg_transform.html\n  // a c e\n  // b d f\n  export function MATRIX(a: number, b: number, c: number, d: number, e: number, f: number) {\n    assertNumbers(a, b, c, d, e, f);\n\n    return INFO((command, prevX, prevY, pathStartX) => {\n      const origX1 = command.x1;\n      const origX2 = command.x2;\n      // if isNaN(pathStartX), then this is the first command, which is ALWAYS an\n      // absolute MOVE_TO, regardless what the relative flag says\n      const comRel = command.relative && !isNaN(pathStartX);\n      const x = \"undefined\" !== typeof command.x ? command.x : (comRel ? 0 : prevX);\n      const y = \"undefined\" !== typeof command.y ? command.y : (comRel ? 0 : prevY);\n\n      if (command.type & SVGPathData.HORIZ_LINE_TO && 0 !== b) {\n        command.type = SVGPathData.LINE_TO;\n        command.y = command.relative ? 0 : prevY;\n      }\n      if (command.type & SVGPathData.VERT_LINE_TO && 0 !== c) {\n        command.type = SVGPathData.LINE_TO;\n        command.x = command.relative ? 0 : prevX;\n      }\n\n      if (\"undefined\" !== typeof command.x) {\n        command.x = (command.x * a) + (y * c) + (comRel ? 0 : e);\n      }\n      if (\"undefined\" !== typeof command.y) {\n        command.y = (x * b) + command.y * d + (comRel ? 0 : f);\n      }\n      if (\"undefined\" !== typeof command.x1) {\n        command.x1 = command.x1 * a + command.y1 * c + (comRel ? 0 : e);\n      }\n      if (\"undefined\" !== typeof command.y1) {\n        command.y1 = origX1 * b + command.y1 * d + (comRel ? 0 : f);\n      }\n      if (\"undefined\" !== typeof command.x2) {\n        command.x2 = command.x2 * a + command.y2 * c + (comRel ? 0 : e);\n      }\n      if (\"undefined\" !== typeof command.y2) {\n        command.y2 = origX2 * b + command.y2 * d + (comRel ? 0 : f);\n      }\n      function sqr(x: number) { return x * x; }\n      const det = a * d - b * c;\n\n      if (\"undefined\" !== typeof command.xRot) {\n        // Skip if this is a pure translation\n        if (1 !== a || 0 !== b || 0 !== c || 1 !== d) {\n          // Special case for singular matrix\n          if (0 === det) {\n            // In the singular case, the arc is compressed to a line. The actual geometric image of the original\n            // curve under this transform possibly extends beyond the starting and/or ending points of the segment, but\n            // for simplicity we ignore this detail and just replace this command with a single line segment.\n            delete command.rX;\n            delete command.rY;\n            delete command.xRot;\n            delete command.lArcFlag;\n            delete command.sweepFlag;\n            command.type = SVGPathData.LINE_TO;\n          } else {\n            // Convert to radians\n            const xRot = command.xRot * Math.PI / 180;\n\n            // Convert rotated ellipse to general conic form\n            // x0^2/rX^2 + y0^2/rY^2 - 1 = 0\n            // x0 = x*cos(xRot) + y*sin(xRot)\n            // y0 = -x*sin(xRot) + y*cos(xRot)\n            // --> A*x^2 + B*x*y + C*y^2 - 1 = 0, where\n            const sinRot = Math.sin(xRot);\n            const cosRot = Math.cos(xRot);\n            const xCurve = 1 / sqr(command.rX);\n            const yCurve = 1 / sqr(command.rY);\n            const A = sqr(cosRot) * xCurve + sqr(sinRot) * yCurve;\n            const B = 2 * sinRot * cosRot * (xCurve - yCurve);\n            const C = sqr(sinRot) * xCurve + sqr(cosRot) * yCurve;\n\n            // Apply matrix to A*x^2 + B*x*y + C*y^2 - 1 = 0\n            // x1 = a*x + c*y\n            // y1 = b*x + d*y\n            //      (we can ignore e and f, since pure translations don\"t affect the shape of the ellipse)\n            // --> A1*x1^2 + B1*x1*y1 + C1*y1^2 - det^2 = 0, where\n            const A1 = A * d * d - B * b * d + C * b * b;\n            const B1 = B * (a * d + b * c) - 2 * (A * c * d + C * a * b);\n            const C1 = A * c * c - B * a * c + C * a * a;\n\n            // Unapply newXRot to get back to axis-aligned ellipse equation\n            // x1 = x2*cos(newXRot) - y2*sin(newXRot)\n            // y1 = x2*sin(newXRot) + y2*cos(newXRot)\n            // A1*x1^2 + B1*x1*y1 + C1*y1^2 - det^2 =\n            //   x2^2*(A1*cos(newXRot)^2 + B1*sin(newXRot)*cos(newXRot) + C1*sin(newXRot)^2)\n            //   + x2*y2*(2*(C1 - A1)*sin(newXRot)*cos(newXRot) + B1*(cos(newXRot)^2 - sin(newXRot)^2))\n            //   + y2^2*(A1*sin(newXRot)^2 - B1*sin(newXRot)*cos(newXRot) + C1*cos(newXRot)^2)\n            //   (which must have the same zeroes as)\n            // x2^2/newRX^2 + y2^2/newRY^2 - 1\n            //   (so we have)\n            // 2*(C1 - A1)*sin(newXRot)*cos(newXRot) + B1*(cos(newXRot)^2 - sin(newXRot)^2) = 0\n            // (A1 - C1)*sin(2*newXRot) = B1*cos(2*newXRot)\n            // 2*newXRot = atan2(B1, A1 - C1)\n            const newXRot = ((Math.atan2(B1, A1 - C1) + Math.PI) % Math.PI) / 2;\n            // For any integer n, (atan2(B1, A1 - C1) + n*pi)/2 is a solution to the above; incrementing n just swaps\n            // the x and y radii computed below (since that\"s what rotating an ellipse by pi/2 does).  Choosing the\n            // rotation between 0 and pi/2 eliminates the ambiguity and leads to more predictable output.\n\n            // Finally, we get newRX and newRY from the same-zeroes relationship that gave us newXRot\n            const newSinRot = Math.sin(newXRot);\n            const newCosRot = Math.cos(newXRot);\n\n            command.rX = Math.abs(det) /\n              Math.sqrt(A1 * sqr(newCosRot) + B1 * newSinRot * newCosRot + C1 * sqr(newSinRot));\n            command.rY = Math.abs(det) /\n              Math.sqrt(A1 * sqr(newSinRot) - B1 * newSinRot * newCosRot + C1 * sqr(newCosRot));\n            command.xRot = newXRot * 180 / Math.PI;\n          }\n        }\n      }\n      // sweepFlag needs to be inverted when mirroring shapes\n      // see http://www.itk.ilstu.edu/faculty/javila/SVG/SVG_drawing1/elliptical_curve.htm\n      // m 65,10 a 50,25 0 1 0 50,25\n      // M 65,60 A 50,25 0 1 1 115,35\n      if (\"undefined\" !== typeof command.sweepFlag && 0 > det) {\n        command.sweepFlag = +!command.sweepFlag;\n      }\n      return command;\n    });\n  }\n  export function ROTATE(a: number, x = 0, y = 0) {\n    assertNumbers(a, x, y);\n    const sin = Math.sin(a);\n    const cos = Math.cos(a);\n\n    return MATRIX(cos, sin, -sin, cos, x - x * cos + y * sin, y - x * sin - y * cos);\n  }\n  export function TRANSLATE(dX: number, dY = 0) {\n    assertNumbers(dX, dY);\n    return MATRIX(1, 0, 0, 1, dX, dY);\n  }\n  export function SCALE(dX: number, dY = dX) {\n    assertNumbers(dX, dY);\n    return MATRIX(dX, 0, 0, dY, 0, 0);\n  }\n  export function SKEW_X(a: number) {\n    assertNumbers(a);\n    return MATRIX(1, 0, Math.atan(a), 1, 0, 0);\n  }\n  export function SKEW_Y(a: number) {\n    assertNumbers(a);\n    return MATRIX(1, Math.atan(a), 0, 1, 0, 0);\n  }\n  export function X_AXIS_SYMMETRY(xOffset = 0) {\n    assertNumbers(xOffset);\n    return MATRIX(-1, 0, 0, 1, xOffset, 0);\n  }\n  export function Y_AXIS_SYMMETRY(yOffset = 0) {\n    assertNumbers(yOffset);\n    return MATRIX(1, 0, 0, -1, 0, yOffset);\n  }\n  // Convert arc commands to curve commands\n  export function A_TO_C() {\n    return INFO((command, prevX, prevY) => {\n      if (SVGPathData.ARC === command.type) {\n        return a2c(command, command.relative ? 0 : prevX, command.relative ? 0 : prevY);\n      }\n      return command;\n    });\n  }\n  // @see annotateArcCommand\n  export function ANNOTATE_ARCS() {\n    return INFO((c, x1, y1) => {\n      if (c.relative) {\n        x1 = 0;\n        y1 = 0;\n      }\n      if (SVGPathData.ARC === c.type) {\n        annotateArcCommand(c, x1, y1);\n      }\n      return c;\n    });\n  }\n  export function CLONE() {\n    return (c: SVGCommand) => {\n      const result = {} as SVGCommand;\n      // tslint:disable-next-line\n      for (const key in c) {\n        result[key as keyof SVGCommand] = c[key as keyof SVGCommand];\n      }\n      return result;\n    };\n  }\n  // @see annotateArcCommand\n  export function CALCULATE_BOUNDS() {\n    const clone = CLONE();\n    const toAbs = TO_ABS();\n    const qtToC = QT_TO_C();\n    const normST = NORMALIZE_ST();\n    const f: TransformFunction & {minX: number, maxX: number, minY: number, maxY: number} =\n        INFO((command, prevXAbs, prevYAbs) => {\n      const c = normST(qtToC(toAbs(clone(command))));\n      function fixX(absX: number) {\n        if (absX > f.maxX) { f.maxX = absX; }\n        if (absX < f.minX) { f.minX = absX; }\n      }\n      function fixY(absY: number) {\n        if (absY > f.maxY) { f.maxY = absY; }\n        if (absY < f.minY) { f.minY = absY; }\n      }\n      if (c.type & SVGPathData.DRAWING_COMMANDS) {\n        fixX(prevXAbs);\n        fixY(prevYAbs);\n      }\n      if (c.type & SVGPathData.HORIZ_LINE_TO) {\n        fixX(c.x);\n      }\n      if (c.type & SVGPathData.VERT_LINE_TO) {\n        fixY(c.y);\n      }\n      if (c.type & SVGPathData.LINE_TO) {\n        fixX(c.x);\n        fixY(c.y);\n      }\n      if (c.type & SVGPathData.CURVE_TO) {\n        // add start and end points\n        fixX(c.x);\n        fixY(c.y);\n        const xDerivRoots = bezierRoot(prevXAbs, c.x1, c.x2, c.x);\n\n        for (const derivRoot of xDerivRoots) {\n          if (0 < derivRoot && 1 > derivRoot) {\n            fixX(bezierAt(prevXAbs, c.x1, c.x2, c.x, derivRoot));\n          }\n        }\n        const yDerivRoots = bezierRoot(prevYAbs, c.y1, c.y2, c.y);\n\n        for (const derivRoot of yDerivRoots) {\n          if (0 < derivRoot && 1 > derivRoot) {\n            fixY(bezierAt(prevYAbs, c.y1, c.y2, c.y, derivRoot));\n          }\n        }\n      }\n      if (c.type & SVGPathData.ARC) {\n        // add start and end points\n        fixX(c.x);\n        fixY(c.y);\n        annotateArcCommand(c, prevXAbs, prevYAbs);\n        // p = cos(phi) * xv + sin(phi) * yv\n        // dp = -sin(phi) * xv + cos(phi) * yv = 0\n        const xRotRad = c.xRot / 180 * Math.PI;\n        // points on ellipse for phi = 0 and phi = 90\n        const x0 = Math.cos(xRotRad) * c.rX;\n        const y0 = Math.sin(xRotRad) * c.rX;\n        const x90 = -Math.sin(xRotRad) * c.rY;\n        const y90 = Math.cos(xRotRad) * c.rY;\n\n        // annotateArcCommand returns phi1 and phi2 such that -180 < phi1 < 180 and phi2 is smaller or greater\n        // depending on the sweep flag. Calculate phiMin, phiMax such that -180 < phiMin < 180 and phiMin < phiMax\n        const [phiMin, phiMax] = c.phi1 < c.phi2 ?\n          [c.phi1, c.phi2] :\n          (-180 > c.phi2 ? [c.phi2 + 360, c.phi1 + 360] : [c.phi2, c.phi1]);\n        const normalizeXiEta = ([xi, eta]: [number, number]) => {\n          const phiRad = Math.atan2(eta, xi);\n          const phi = phiRad * 180 / Math.PI;\n\n          return phi < phiMin ? phi + 360 : phi;\n        };\n        // xi = cos(phi), eta = sin(phi)\n\n        const xDerivRoots = intersectionUnitCircleLine(x90, -x0, 0).map(normalizeXiEta);\n        for (const derivRoot of xDerivRoots) {\n          if (derivRoot > phiMin && derivRoot < phiMax) {\n            fixX(arcAt(c.cX, x0, x90, derivRoot));\n          }\n        }\n\n        const yDerivRoots = intersectionUnitCircleLine(y90, -y0, 0).map(normalizeXiEta);\n        for (const derivRoot of yDerivRoots) {\n          if (derivRoot > phiMin && derivRoot < phiMax) {\n            fixY(arcAt(c.cY, y0, y90, derivRoot));\n          }\n        }\n      }\n      return command;\n    }) as any;\n\n    f.minX = Infinity;\n    f.maxX = -Infinity;\n    f.minY = Infinity;\n    f.maxY = -Infinity;\n    return f;\n  }\n}\n","import { SVGPathDataTransformer } from \"./SVGPathDataTransformer\";\nimport { TransformFunction } from \"./types\";\n\nexport abstract class TransformableSVG {\n  round(x?: number) {\n    return this.transform(SVGPathDataTransformer.ROUND(x));\n  }\n\n  toAbs() {\n    return this.transform(SVGPathDataTransformer.TO_ABS());\n  }\n\n  toRel() {\n    return this.transform(SVGPathDataTransformer.TO_REL());\n  }\n\n  normalizeHVZ(a?: boolean, b?: boolean, c?: boolean) {\n    return this.transform(SVGPathDataTransformer.NORMALIZE_HVZ(a, b, c));\n  }\n\n  normalizeST() {\n    return this.transform(SVGPathDataTransformer.NORMALIZE_ST());\n  }\n\n  qtToC() {\n    return this.transform(SVGPathDataTransformer.QT_TO_C());\n  }\n\n  aToC() {\n    return this.transform(SVGPathDataTransformer.A_TO_C());\n  }\n\n  sanitize(eps?: number) {\n    return this.transform(SVGPathDataTransformer.SANITIZE(eps));\n  }\n\n  translate(x: number, y?: number) {\n    return this.transform(SVGPathDataTransformer.TRANSLATE(x, y));\n  }\n\n  scale(x: number, y?: number) {\n    return this.transform(SVGPathDataTransformer.SCALE(x, y));\n  }\n\n  rotate(a: number, x?: number, y?: number) {\n    return this.transform(SVGPathDataTransformer.ROTATE(a, x, y));\n  }\n\n  matrix(a: number, b: number, c: number, d: number, e: number, f: number) {\n    return this.transform(SVGPathDataTransformer.MATRIX(a, b, c, d, e, f));\n  }\n\n  skewX(a: number) {\n    return this.transform(SVGPathDataTransformer.SKEW_X(a));\n  }\n\n  skewY(a: number) {\n    return this.transform(SVGPathDataTransformer.SKEW_Y(a));\n  }\n\n  xSymmetry(xOffset?: number) {\n    return this.transform(SVGPathDataTransformer.X_AXIS_SYMMETRY(xOffset));\n  }\n\n  ySymmetry(yOffset?: number) {\n    return this.transform(SVGPathDataTransformer.Y_AXIS_SYMMETRY(yOffset));\n  }\n\n  annotateArcs() {\n    return this.transform(SVGPathDataTransformer.ANNOTATE_ARCS());\n  }\n\n  abstract transform(transformFunction: TransformFunction): this;\n}\n","// Parse SVG PathData\n// http://www.w3.org/TR/SVG/paths.html#PathDataBNF\nimport { COMMAND_ARG_COUNTS, SVGPathData } from \"./SVGPathData\";\nimport { TransformableSVG } from \"./TransformableSVG\";\nimport { SVGCommand, TransformFunction } from \"./types\";\n// Private consts : Char groups\nconst isWhiteSpace = (c: string) =>\n  \" \" === c || \"\\t\" === c || \"\\r\" === c || \"\\n\" === c;\nconst isDigit = (c: string) =>\n  \"0\".charCodeAt(0) <= c.charCodeAt(0) && c.charCodeAt(0) <= \"9\".charCodeAt(0);\nconst COMMANDS = \"mMzZlLhHvVcCsSqQtTaA\";\n\nexport class SVGPathDataParser extends TransformableSVG {\n  private curNumber: string = \"\";\n  private curCommandType: SVGCommand[\"type\"] | -1 = -1;\n  private curCommandRelative = false;\n  private canParseCommandOrComma = true;\n  private curNumberHasExp = false;\n  private curNumberHasExpDigits = false;\n  private curNumberHasDecimal = false;\n  private curArgs: number[] = [];\n\n  constructor() {\n    super();\n  }\n\n  finish(commands: SVGCommand[] = []) {\n    this.parse(\" \", commands);\n    // Adding residual command\n    if (0 !== this.curArgs.length || !this.canParseCommandOrComma) {\n      throw new SyntaxError(\"Unterminated command at the path end.\");\n    }\n    return commands;\n  }\n\n  parse(str: string, commands: SVGCommand[] = []) {\n    const finishCommand = (command: SVGCommand) => {\n      commands.push(command);\n      this.curArgs.length = 0;\n      this.canParseCommandOrComma = true;\n    };\n\n    for (let i = 0; i < str.length; i++) {\n      const c = str[i];\n      // White spaces parsing\n      const isAArcFlag = this.curCommandType === SVGPathData.ARC &&\n        (this.curArgs.length === 3 || this.curArgs.length === 4) &&\n        this.curNumber.length === 1 &&\n        (this.curNumber === \"0\" || this.curNumber === \"1\");\n      const isEndingDigit = isDigit(c) && (\n        (this.curNumber === \"0\" && c === \"0\") ||\n        isAArcFlag\n      );\n\n      if (\n        isDigit(c) &&\n        !isEndingDigit\n      ) {\n        this.curNumber += c;\n        this.curNumberHasExpDigits = this.curNumberHasExp;\n        continue;\n      }\n      if (\"e\" === c || \"E\" === c) {\n        this.curNumber += c;\n        this.curNumberHasExp = true;\n        continue;\n      }\n      if (\n        (\"-\" === c || \"+\" === c) &&\n        this.curNumberHasExp &&\n        !this.curNumberHasExpDigits\n      ) {\n        this.curNumber += c;\n        continue;\n      }\n      // if we already have a \".\", it means we are starting a new number\n      if (\".\" === c && !this.curNumberHasExp && !this.curNumberHasDecimal && !isAArcFlag) {\n        this.curNumber += c;\n        this.curNumberHasDecimal = true;\n        continue;\n      }\n\n      // New number\n      if (this.curNumber && -1 !== this.curCommandType) {\n        const val = Number(this.curNumber);\n        if (isNaN(val)) {\n          throw new SyntaxError(`Invalid number ending at ${i}`);\n        }\n        if (this.curCommandType === SVGPathData.ARC) {\n          if (0 === this.curArgs.length || 1 === this.curArgs.length) {\n            if (0 > val) {\n              throw new SyntaxError(\n                `Expected positive number, got \"${val}\" at index \"${i}\"`,\n              );\n            }\n          } else if (3 === this.curArgs.length || 4 === this.curArgs.length) {\n            if (\"0\" !== this.curNumber && \"1\" !== this.curNumber) {\n              throw new SyntaxError(\n                `Expected a flag, got \"${this.curNumber}\" at index \"${i}\"`,\n              );\n            }\n          }\n        }\n        this.curArgs.push(val);\n        if (this.curArgs.length === COMMAND_ARG_COUNTS[this.curCommandType]) {\n          if (SVGPathData.HORIZ_LINE_TO === this.curCommandType) {\n            finishCommand({\n              type: SVGPathData.HORIZ_LINE_TO,\n              relative: this.curCommandRelative,\n              x: val,\n            });\n          } else if (SVGPathData.VERT_LINE_TO === this.curCommandType) {\n            finishCommand({\n              type: SVGPathData.VERT_LINE_TO,\n              relative: this.curCommandRelative,\n              y: val,\n            });\n            // Move to / line to / smooth quadratic curve to commands (x, y)\n          } else if (\n            this.curCommandType === SVGPathData.MOVE_TO ||\n            this.curCommandType === SVGPathData.LINE_TO ||\n            this.curCommandType === SVGPathData.SMOOTH_QUAD_TO\n          ) {\n            finishCommand({\n              type: this.curCommandType,\n              relative: this.curCommandRelative,\n              x: this.curArgs[0],\n              y: this.curArgs[1],\n            } as SVGCommand);\n            // Switch to line to state\n            if (SVGPathData.MOVE_TO === this.curCommandType) {\n              this.curCommandType = SVGPathData.LINE_TO;\n            }\n          } else if (this.curCommandType === SVGPathData.CURVE_TO) {\n            finishCommand({\n              type: SVGPathData.CURVE_TO,\n              relative: this.curCommandRelative,\n              x1: this.curArgs[0],\n              y1: this.curArgs[1],\n              x2: this.curArgs[2],\n              y2: this.curArgs[3],\n              x: this.curArgs[4],\n              y: this.curArgs[5],\n            });\n          } else if (this.curCommandType === SVGPathData.SMOOTH_CURVE_TO) {\n            finishCommand({\n              type: SVGPathData.SMOOTH_CURVE_TO,\n              relative: this.curCommandRelative,\n              x2: this.curArgs[0],\n              y2: this.curArgs[1],\n              x: this.curArgs[2],\n              y: this.curArgs[3],\n            });\n          } else if (this.curCommandType === SVGPathData.QUAD_TO) {\n            finishCommand({\n              type: SVGPathData.QUAD_TO,\n              relative: this.curCommandRelative,\n              x1: this.curArgs[0],\n              y1: this.curArgs[1],\n              x: this.curArgs[2],\n              y: this.curArgs[3],\n            });\n          } else if (this.curCommandType === SVGPathData.ARC) {\n            finishCommand({\n              type: SVGPathData.ARC,\n              relative: this.curCommandRelative,\n              rX: this.curArgs[0],\n              rY: this.curArgs[1],\n              xRot: this.curArgs[2],\n              lArcFlag: this.curArgs[3] as 0 | 1,\n              sweepFlag: this.curArgs[4] as 0 | 1,\n              x: this.curArgs[5],\n              y: this.curArgs[6],\n            });\n          }\n        }\n        this.curNumber = \"\";\n        this.curNumberHasExpDigits = false;\n        this.curNumberHasExp = false;\n        this.curNumberHasDecimal = false;\n        this.canParseCommandOrComma = true;\n      }\n      // Continue if a white space or a comma was detected\n      if (isWhiteSpace(c)) {\n        continue;\n      }\n      if (\",\" === c && this.canParseCommandOrComma) {\n        // L 0,0, H is not valid:\n        this.canParseCommandOrComma = false;\n        continue;\n      }\n      // if a sign is detected, then parse the new number\n      if (\"+\" === c || \"-\" === c || \".\" === c) {\n        this.curNumber = c;\n        this.curNumberHasDecimal = \".\" === c;\n        continue;\n      }\n      // if a 0 is detected, then parse the new number\n      if (isEndingDigit) {\n        this.curNumber = c;\n        this.curNumberHasDecimal = false;\n        continue;\n      }\n\n      // Adding residual command\n      if (0 !== this.curArgs.length) {\n        throw new SyntaxError(`Unterminated command at index ${i}.`);\n      }\n      if (!this.canParseCommandOrComma) {\n        throw new SyntaxError(\n          `Unexpected character \"${c}\" at index ${i}. Command cannot follow comma`,\n        );\n      }\n      this.canParseCommandOrComma = false;\n      // Detecting the next command\n      if (\"z\" === c || \"Z\" === c) {\n        commands.push({\n          type: SVGPathData.CLOSE_PATH,\n        });\n        this.canParseCommandOrComma = true;\n        this.curCommandType = -1;\n        continue;\n        // Horizontal move to command\n      } else if (\"h\" === c || \"H\" === c) {\n        this.curCommandType = SVGPathData.HORIZ_LINE_TO;\n        this.curCommandRelative = \"h\" === c;\n        // Vertical move to command\n      } else if (\"v\" === c || \"V\" === c) {\n        this.curCommandType = SVGPathData.VERT_LINE_TO;\n        this.curCommandRelative = \"v\" === c;\n        // Move to command\n      } else if (\"m\" === c || \"M\" === c) {\n        this.curCommandType = SVGPathData.MOVE_TO;\n        this.curCommandRelative = \"m\" === c;\n        // Line to command\n      } else if (\"l\" === c || \"L\" === c) {\n        this.curCommandType = SVGPathData.LINE_TO;\n        this.curCommandRelative = \"l\" === c;\n        // Curve to command\n      } else if (\"c\" === c || \"C\" === c) {\n        this.curCommandType = SVGPathData.CURVE_TO;\n        this.curCommandRelative = \"c\" === c;\n        // Smooth curve to command\n      } else if (\"s\" === c || \"S\" === c) {\n        this.curCommandType = SVGPathData.SMOOTH_CURVE_TO;\n        this.curCommandRelative = \"s\" === c;\n        // Quadratic bezier curve to command\n      } else if (\"q\" === c || \"Q\" === c) {\n        this.curCommandType = SVGPathData.QUAD_TO;\n        this.curCommandRelative = \"q\" === c;\n        // Smooth quadratic bezier curve to command\n      } else if (\"t\" === c || \"T\" === c) {\n        this.curCommandType = SVGPathData.SMOOTH_QUAD_TO;\n        this.curCommandRelative = \"t\" === c;\n        // Elliptic arc command\n      } else if (\"a\" === c || \"A\" === c) {\n        this.curCommandType = SVGPathData.ARC;\n        this.curCommandRelative = \"a\" === c;\n      } else {\n        throw new SyntaxError(`Unexpected character \"${c}\" at index ${i}.`);\n      }\n    }\n    return commands;\n  }\n  /**\n   * Return a wrapper around this parser which applies the transformation on parsed commands.\n   */\n  transform(transform: TransformFunction) {\n    const result = Object.create(this, {\n      parse: {\n        value(chunk: string, commands: SVGCommand[] = []) {\n          const parsedCommands = Object.getPrototypeOf(this).parse.call(\n            this,\n            chunk,\n          );\n          for (const c of parsedCommands) {\n            const cT = transform(c);\n            if (Array.isArray(cT)) {\n              commands.push(...cT);\n            } else {\n              commands.push(cT);\n            }\n          }\n          return commands;\n        },\n      },\n    });\n    return result as this;\n  }\n}\n","import { encodeSVGPath } from \"./SVGPathDataEncoder\";\nimport { SVGPathDataParser } from \"./SVGPathDataParser\";\nimport { SVGPathDataTransformer } from \"./SVGPathDataTransformer\";\nimport { TransformableSVG } from \"./TransformableSVG\";\nimport { SVGCommand } from \"./types\";\n\nexport class SVGPathData extends TransformableSVG {\n  commands: SVGCommand[];\n  constructor(content: string | SVGCommand[]) {\n    super();\n    if (\"string\" === typeof content) {\n      this.commands = SVGPathData.parse(content);\n    } else {\n      this.commands = content;\n    }\n  }\n\n  encode() {\n    return SVGPathData.encode(this.commands);\n  }\n\n  getBounds() {\n    const boundsTransform = SVGPathDataTransformer.CALCULATE_BOUNDS();\n\n    this.transform(boundsTransform);\n    return boundsTransform;\n  }\n\n  transform(\n    transformFunction: (input: SVGCommand) => SVGCommand | SVGCommand[],\n  ) {\n    const newCommands = [];\n\n    for (const command of this.commands) {\n      const transformedCommand = transformFunction(command);\n\n      if (Array.isArray(transformedCommand)) {\n        newCommands.push(...transformedCommand);\n      } else {\n        newCommands.push(transformedCommand);\n      }\n    }\n    this.commands = newCommands;\n    return this;\n  }\n\n  static encode(commands: SVGCommand[]) {\n    return encodeSVGPath(commands);\n      }\n\n  static parse(path: string) {\n    const parser = new SVGPathDataParser();\n    const commands: SVGCommand[] = [];\n    parser.parse(path, commands);\n    parser.finish(commands);\n    return commands;\n  }\n\n  static readonly CLOSE_PATH: 1 = 1;\n  static readonly MOVE_TO: 2 = 2;\n  static readonly HORIZ_LINE_TO: 4 = 4;\n  static readonly VERT_LINE_TO: 8 = 8;\n  static readonly LINE_TO: 16 = 16;\n  static readonly CURVE_TO: 32 = 32;\n  static readonly SMOOTH_CURVE_TO: 64 = 64;\n  static readonly QUAD_TO: 128 = 128;\n  static readonly SMOOTH_QUAD_TO: 256 = 256;\n  static readonly ARC: 512 = 512;\n  static readonly LINE_COMMANDS = SVGPathData.LINE_TO | SVGPathData.HORIZ_LINE_TO | SVGPathData.VERT_LINE_TO;\n  static readonly DRAWING_COMMANDS = SVGPathData.HORIZ_LINE_TO | SVGPathData.VERT_LINE_TO | SVGPathData.LINE_TO |\n  SVGPathData.CURVE_TO | SVGPathData.SMOOTH_CURVE_TO | SVGPathData.QUAD_TO |\n  SVGPathData.SMOOTH_QUAD_TO | SVGPathData.ARC;\n}\n\nexport const COMMAND_ARG_COUNTS = {\n    [SVGPathData.MOVE_TO]: 2,\n    [SVGPathData.LINE_TO]: 2,\n    [SVGPathData.HORIZ_LINE_TO]: 1,\n    [SVGPathData.VERT_LINE_TO]: 1,\n    [SVGPathData.CLOSE_PATH]: 0,\n    [SVGPathData.QUAD_TO]: 4,\n    [SVGPathData.SMOOTH_QUAD_TO]: 2,\n    [SVGPathData.CURVE_TO]: 6,\n    [SVGPathData.SMOOTH_CURVE_TO]: 4,\n    [SVGPathData.ARC]: 7,\n};\n\nexport {encodeSVGPath} from \"./SVGPathDataEncoder\";\nexport {SVGPathDataParser} from \"./SVGPathDataParser\";\nexport {SVGPathDataTransformer} from \"./SVGPathDataTransformer\";\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/* eslint-disable no-bitwise -- used for calculations */\n\n/* eslint-disable unicorn/prefer-query-selector -- aiming at\n  backward-compatibility */\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.\n*\n* @module StackBlur\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @param {boolean} useOffset\n * @param {boolean} skipStyles\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel, useOffset, skipStyles) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n\n  if (!img || !('naturalWidth' in img)) {\n    return;\n  }\n\n  var dimensionType = useOffset ? 'offset' : 'natural';\n  var w = img[dimensionType + 'Width'];\n  var h = img[dimensionType + 'Height'];\n\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n\n  if (!skipStyles) {\n    canvas.style.width = w + 'px';\n    canvas.style.height = h + 'px';\n  }\n\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, w, h);\n\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method ' + 'in processCanvasRGB(A) calls!');\n  }\n\n  var context = canvas.getContext('2d');\n\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null,\n      stackOut = null,\n      yw = 0,\n      yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (var y = 0; y < height; y++) {\n    stack = stackStart;\n    var pr = pixels[yi],\n        pg = pixels[yi + 1],\n        pb = pixels[yi + 2],\n        pa = pixels[yi + 3];\n\n    for (var _i = 0; _i < radiusPlus1; _i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    var rInSum = 0,\n        gInSum = 0,\n        bInSum = 0,\n        aInSum = 0,\n        rOutSum = radiusPlus1 * pr,\n        gOutSum = radiusPlus1 * pg,\n        bOutSum = radiusPlus1 * pb,\n        aOutSum = radiusPlus1 * pa,\n        rSum = sumFactor * pr,\n        gSum = sumFactor * pg,\n        bSum = sumFactor * pb,\n        aSum = sumFactor * pa;\n\n    for (var _i2 = 1; _i2 < radiusPlus1; _i2++) {\n      var p = yi + ((widthMinus1 < _i2 ? widthMinus1 : _i2) << 2);\n      var r = pixels[p],\n          g = pixels[p + 1],\n          b = pixels[p + 2],\n          a = pixels[p + 3];\n      var rbs = radiusPlus1 - _i2;\n      rSum += (stack.r = r) * rbs;\n      gSum += (stack.g = g) * rbs;\n      bSum += (stack.b = b) * rbs;\n      aSum += (stack.a = a) * rbs;\n      rInSum += r;\n      gInSum += g;\n      bInSum += b;\n      aInSum += a;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var x = 0; x < width; x++) {\n      var paInitial = aSum * mulSum >> shgSum;\n      pixels[yi + 3] = paInitial;\n\n      if (paInitial !== 0) {\n        var _a2 = 255 / paInitial;\n\n        pixels[yi] = (rSum * mulSum >> shgSum) * _a2;\n        pixels[yi + 1] = (gSum * mulSum >> shgSum) * _a2;\n        pixels[yi + 2] = (bSum * mulSum >> shgSum) * _a2;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n\n      var _p = x + radius + 1;\n\n      _p = yw + (_p < widthMinus1 ? _p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[_p];\n      gInSum += stackIn.g = pixels[_p + 1];\n      bInSum += stackIn.b = pixels[_p + 2];\n      aInSum += stackIn.a = pixels[_p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      var _stackOut = stackOut,\n          _r = _stackOut.r,\n          _g = _stackOut.g,\n          _b = _stackOut.b,\n          _a = _stackOut.a;\n      rOutSum += _r;\n      gOutSum += _g;\n      bOutSum += _b;\n      aOutSum += _a;\n      rInSum -= _r;\n      gInSum -= _g;\n      bInSum -= _b;\n      aInSum -= _a;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (var _x = 0; _x < width; _x++) {\n    yi = _x << 2;\n\n    var _pr = pixels[yi],\n        _pg = pixels[yi + 1],\n        _pb = pixels[yi + 2],\n        _pa = pixels[yi + 3],\n        _rOutSum = radiusPlus1 * _pr,\n        _gOutSum = radiusPlus1 * _pg,\n        _bOutSum = radiusPlus1 * _pb,\n        _aOutSum = radiusPlus1 * _pa,\n        _rSum = sumFactor * _pr,\n        _gSum = sumFactor * _pg,\n        _bSum = sumFactor * _pb,\n        _aSum = sumFactor * _pa;\n\n    stack = stackStart;\n\n    for (var _i3 = 0; _i3 < radiusPlus1; _i3++) {\n      stack.r = _pr;\n      stack.g = _pg;\n      stack.b = _pb;\n      stack.a = _pa;\n      stack = stack.next;\n    }\n\n    var yp = width;\n    var _gInSum = 0,\n        _bInSum = 0,\n        _aInSum = 0,\n        _rInSum = 0;\n\n    for (var _i4 = 1; _i4 <= radius; _i4++) {\n      yi = yp + _x << 2;\n\n      var _rbs = radiusPlus1 - _i4;\n\n      _rSum += (stack.r = _pr = pixels[yi]) * _rbs;\n      _gSum += (stack.g = _pg = pixels[yi + 1]) * _rbs;\n      _bSum += (stack.b = _pb = pixels[yi + 2]) * _rbs;\n      _aSum += (stack.a = _pa = pixels[yi + 3]) * _rbs;\n      _rInSum += _pr;\n      _gInSum += _pg;\n      _bInSum += _pb;\n      _aInSum += _pa;\n      stack = stack.next;\n\n      if (_i4 < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = _x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var _y = 0; _y < height; _y++) {\n      var _p2 = yi << 2;\n\n      pixels[_p2 + 3] = _pa = _aSum * mulSum >> shgSum;\n\n      if (_pa > 0) {\n        _pa = 255 / _pa;\n        pixels[_p2] = (_rSum * mulSum >> shgSum) * _pa;\n        pixels[_p2 + 1] = (_gSum * mulSum >> shgSum) * _pa;\n        pixels[_p2 + 2] = (_bSum * mulSum >> shgSum) * _pa;\n      } else {\n        pixels[_p2] = pixels[_p2 + 1] = pixels[_p2 + 2] = 0;\n      }\n\n      _rSum -= _rOutSum;\n      _gSum -= _gOutSum;\n      _bSum -= _bOutSum;\n      _aSum -= _aOutSum;\n      _rOutSum -= stackIn.r;\n      _gOutSum -= stackIn.g;\n      _bOutSum -= stackIn.b;\n      _aOutSum -= stackIn.a;\n      _p2 = _x + ((_p2 = _y + radiusPlus1) < heightMinus1 ? _p2 : heightMinus1) * width << 2;\n      _rSum += _rInSum += stackIn.r = pixels[_p2];\n      _gSum += _gInSum += stackIn.g = pixels[_p2 + 1];\n      _bSum += _bInSum += stackIn.b = pixels[_p2 + 2];\n      _aSum += _aInSum += stackIn.a = pixels[_p2 + 3];\n      stackIn = stackIn.next;\n      _rOutSum += _pr = stackOut.r;\n      _gOutSum += _pg = stackOut.g;\n      _bOutSum += _pb = stackOut.b;\n      _aOutSum += _pa = stackOut.a;\n      _rInSum -= _pr;\n      _gInSum -= _pg;\n      _bInSum -= _pb;\n      _aInSum -= _pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n  var p, rbs;\n  var yw = 0,\n      yi = 0;\n\n  for (var y = 0; y < height; y++) {\n    var pr = pixels[yi],\n        pg = pixels[yi + 1],\n        pb = pixels[yi + 2],\n        rOutSum = radiusPlus1 * pr,\n        gOutSum = radiusPlus1 * pg,\n        bOutSum = radiusPlus1 * pb,\n        rSum = sumFactor * pr,\n        gSum = sumFactor * pg,\n        bSum = sumFactor * pb;\n    stack = stackStart;\n\n    for (var _i5 = 0; _i5 < radiusPlus1; _i5++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    var rInSum = 0,\n        gInSum = 0,\n        bInSum = 0;\n\n    for (var _i6 = 1; _i6 < radiusPlus1; _i6++) {\n      p = yi + ((widthMinus1 < _i6 ? widthMinus1 : _i6) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - _i6);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >> shgSum;\n      pixels[yi + 1] = gSum * mulSum >> shgSum;\n      pixels[yi + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (var _x2 = 0; _x2 < width; _x2++) {\n    yi = _x2 << 2;\n\n    var _pr2 = pixels[yi],\n        _pg2 = pixels[yi + 1],\n        _pb2 = pixels[yi + 2],\n        _rOutSum2 = radiusPlus1 * _pr2,\n        _gOutSum2 = radiusPlus1 * _pg2,\n        _bOutSum2 = radiusPlus1 * _pb2,\n        _rSum2 = sumFactor * _pr2,\n        _gSum2 = sumFactor * _pg2,\n        _bSum2 = sumFactor * _pb2;\n\n    stack = stackStart;\n\n    for (var _i7 = 0; _i7 < radiusPlus1; _i7++) {\n      stack.r = _pr2;\n      stack.g = _pg2;\n      stack.b = _pb2;\n      stack = stack.next;\n    }\n\n    var _rInSum2 = 0,\n        _gInSum2 = 0,\n        _bInSum2 = 0;\n\n    for (var _i8 = 1, yp = width; _i8 <= radius; _i8++) {\n      yi = yp + _x2 << 2;\n      _rSum2 += (stack.r = _pr2 = pixels[yi]) * (rbs = radiusPlus1 - _i8);\n      _gSum2 += (stack.g = _pg2 = pixels[yi + 1]) * rbs;\n      _bSum2 += (stack.b = _pb2 = pixels[yi + 2]) * rbs;\n      _rInSum2 += _pr2;\n      _gInSum2 += _pg2;\n      _bInSum2 += _pb2;\n      stack = stack.next;\n\n      if (_i8 < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = _x2;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var _y2 = 0; _y2 < height; _y2++) {\n      p = yi << 2;\n      pixels[p] = _rSum2 * mulSum >> shgSum;\n      pixels[p + 1] = _gSum2 * mulSum >> shgSum;\n      pixels[p + 2] = _bSum2 * mulSum >> shgSum;\n      _rSum2 -= _rOutSum2;\n      _gSum2 -= _gOutSum2;\n      _bSum2 -= _bOutSum2;\n      _rOutSum2 -= stackIn.r;\n      _gOutSum2 -= stackIn.g;\n      _bOutSum2 -= stackIn.b;\n      p = _x2 + ((p = _y2 + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      _rSum2 += _rInSum2 += stackIn.r = pixels[p];\n      _gSum2 += _gInSum2 += stackIn.g = pixels[p + 1];\n      _bSum2 += _bInSum2 += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      _rOutSum2 += _pr2 = stackOut.r;\n      _gOutSum2 += _pg2 = stackOut.g;\n      _bOutSum2 += _pb2 = stackOut.b;\n      _rInSum2 -= _pr2;\n      _gInSum2 -= _pg2;\n      _bInSum2 -= _pb2;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n *\n */\n\n\nvar BlurStack =\n/**\n * Set properties.\n */\nfunction BlurStack() {\n  _classCallCheck(this, BlurStack);\n\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\n\nexport { BlurStack, processCanvasRGB as canvasRGB, processCanvasRGBA as canvasRGBA, processImage as image, processImageDataRGB as imageDataRGB, processImageDataRGBA as imageDataRGBA };\n","import { MatrixValue } from '../types'\n\n/**\n * HTML-safe compress white-spaces.\n * @param str - String to compress.\n * @returns String.\n */\nexport function compressSpaces(str: string) {\n  return str.replace(/(?!\\u3000)\\s+/gm, ' ')\n}\n\n/**\n * HTML-safe left trim.\n * @param str - String to trim.\n * @returns String.\n */\nexport function trimLeft(str: string) {\n  return str.replace(/^[\\n \\t]+/, '')\n}\n\n/**\n * HTML-safe right trim.\n * @param str - String to trim.\n * @returns String.\n */\nexport function trimRight(str: string) {\n  return str.replace(/[\\n \\t]+$/, '')\n}\n\n/**\n * String to numbers array.\n * @param str - Numbers string.\n * @returns Numbers array.\n */\nexport function toNumbers(str: string) {\n  const matches = str.match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm)\n\n  return matches ? matches.map(parseFloat) : []\n}\n\n/**\n * String to matrix value.\n * @param str - Numbers string.\n * @returns Matrix value.\n */\nexport function toMatrixValue(str: string): MatrixValue {\n  const numbers = toNumbers(str)\n  const matrix = [\n    numbers[0] || 0,\n    numbers[1] || 0,\n    numbers[2] || 0,\n    numbers[3] || 0,\n    numbers[4] || 0,\n    numbers[5] || 0\n  ] as const\n\n  return matrix\n}\n\n// Microsoft Edge fix\nconst allUppercase = /^[A-Z-]+$/\n\n/**\n * Normalize attribute name.\n * @param name - Attribute name.\n * @returns Normalized attribute name.\n */\nexport function normalizeAttributeName(name: string) {\n  if (allUppercase.test(name)) {\n    return name.toLowerCase()\n  }\n\n  return name\n}\n\n/**\n * Parse external URL.\n * @param url - CSS url string.\n * @returns Parsed URL.\n */\nexport function parseExternalUrl(url: string): string {\n  //                      single quotes [2]\n  //                      v         double quotes [3]\n  //                      v         v         no quotes [4]\n  //                      v         v         v\n  const urlMatch = /url\\(('([^']+)'|\"([^\"]+)\"|([^'\")]+))\\)/.exec(url)\n\n  if (!urlMatch) {\n    return ''\n  }\n\n  return urlMatch[2] || urlMatch[3] || urlMatch[4] || ''\n}\n\n/**\n * Transform floats to integers in rgb colors.\n * @param color - Color to normalize.\n * @returns Normalized color.\n */\nexport function normalizeColor(color: string) {\n  if (!color.startsWith('rgb')) {\n    return color\n  }\n\n  let rgbParts = 3\n  const normalizedColor = color.replace(\n    /\\d+(\\.\\d+)?/g,\n    (num, isFloat) => (rgbParts-- && isFloat\n      ? String(Math.round(parseFloat(num)))\n      : num)\n  )\n\n  return normalizedColor\n}\n","\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nconst attributeRegex = /(\\[[^\\]]+\\])/g\nconst idRegex = /(#[^\\s+>~.[:]+)/g\nconst classRegex = /(\\.[^\\s+>~.[:]+)/g\nconst pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi\nconst pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi\nconst pseudoClassRegex = /(:[^\\s+>~.[:]+)/g\nconst elementRegex = /([^\\s+>~.[:]+)/g\n\nfunction findSelectorMatch(selector: string, regex: RegExp): [string, number] {\n  const matches = regex.exec(selector)\n\n  if (!matches) {\n    return [selector, 0]\n  }\n\n  return [selector.replace(regex, ' '), matches.length]\n}\n\n/**\n * Measure selector specificity.\n * @param selector - Selector to measure.\n * @returns Specificity.\n */\nexport function getSelectorSpecificity(selector: string) {\n  const specificity = [\n    0,\n    0,\n    0\n  ]\n  let currentSelector = selector\n    .replace(/:not\\(([^)]*)\\)/g, '     $1 ')\n    .replace(/{[\\s\\S]*/gm, ' ')\n  let delta = 0;\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, attributeRegex)\n  specificity[1] += delta;\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, idRegex)\n  specificity[0] += delta;\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, classRegex)\n  specificity[1] += delta;\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoElementRegex)\n  specificity[2] += delta;\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex)\n  specificity[1] += delta;\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassRegex)\n  specificity[1] += delta\n\n  currentSelector = currentSelector\n    .replace(/[*\\s+>~]/g, ' ')\n    .replace(/[#.]/g, ' ');\n\n  [currentSelector, delta] = findSelectorMatch(currentSelector, elementRegex) // lgtm [js/useless-assignment-to-local]\n  specificity[2] += delta\n\n  return specificity.join('')\n}\n","import { VectorValue } from '../types'\n\nexport const PSEUDO_ZERO = .00000001\n\n/**\n * Vector magnitude.\n * @param v\n * @returns Number result.\n */\nexport function vectorMagnitude(v: VectorValue) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2))\n}\n\n/**\n * Ratio between two vectors.\n * @param u\n * @param v\n * @returns Number result.\n */\nexport function vectorsRatio(u: VectorValue, v: VectorValue) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v))\n}\n\n/**\n * Angle between two vectors.\n * @param u\n * @param v\n * @returns Number result.\n */\nexport function vectorsAngle(u: VectorValue, v: VectorValue) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v))\n}\n\nexport function CB1(t: number) {\n  return t * t * t\n}\n\nexport function CB2(t: number) {\n  return 3 * t * t * (1 - t)\n}\n\nexport function CB3(t: number) {\n  return 3 * t * (1 - t) * (1 - t)\n}\n\nexport function CB4(t: number) {\n  return (1 - t) * (1 - t) * (1 - t)\n}\n\nexport function QB1(t: number) {\n  return t * t\n}\n\nexport function QB2(t: number) {\n  return 2 * t * (1 - t)\n}\n\nexport function QB3(t: number) {\n  return (1 - t) * (1 - t)\n}\n","import RGBColor from 'rgbcolor'\nimport {\n  compressSpaces,\n  normalizeColor\n} from './util'\nimport { Axis } from './ViewPort'\nimport {\n  Document,\n  Element,\n  PathElement,\n  PatternElement,\n  GradientElement\n} from './Document'\n\nexport class Property<T = unknown> {\n  static empty(document: Document) {\n    return new Property(document, 'EMPTY', '')\n  }\n\n  static readonly textBaselineMapping: Record<string, string> = {\n    'baseline': 'alphabetic',\n    'before-edge': 'top',\n    'text-before-edge': 'top',\n    'middle': 'middle',\n    'central': 'middle',\n    'after-edge': 'bottom',\n    'text-after-edge': 'bottom',\n    'ideographic': 'ideographic',\n    'alphabetic': 'alphabetic',\n    'hanging': 'hanging',\n    'mathematical': 'alphabetic'\n  }\n\n  private isNormalizedColor = false\n\n  constructor(\n    private readonly document: Document,\n    private readonly name: string,\n    private value: T\n  ) {}\n\n  split(separator = ' ') {\n    const {\n      document,\n      name\n    } = this\n\n    return compressSpaces(this.getString())\n      .trim()\n      .split(separator)\n      .map(value => new Property<string>(document, name, value))\n  }\n\n  hasValue(zeroIsValue?: boolean) {\n    const value = this.value as unknown\n\n    return value !== null\n      && value !== ''\n      && (zeroIsValue || value !== 0)\n      && typeof value !== 'undefined'\n  }\n\n  isString(regexp?: RegExp) {\n    const { value } = this\n    const result = typeof value === 'string'\n\n    if (!result || !regexp) {\n      return result\n    }\n\n    return regexp.test(value)\n  }\n\n  isUrlDefinition() {\n    return this.isString(/^url\\(/)\n  }\n\n  isPixels() {\n    if (!this.hasValue()) {\n      return false\n    }\n\n    const asString = this.getString()\n\n    switch (true) {\n      case asString.endsWith('px'):\n      case /^[0-9]+$/.test(asString):\n        return true\n\n      default:\n        return false\n    }\n  }\n\n  setValue(value: T) {\n    this.value = value\n    return this\n  }\n\n  getValue(def?: T) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return this.value\n    }\n\n    return def\n  }\n\n  getNumber(def?: T) {\n    if (!this.hasValue()) {\n      if (typeof def === 'undefined') {\n        return 0\n      }\n\n      // @ts-expect-error Parse unknown value.\n      return parseFloat(def)\n    }\n\n    const { value } = this\n    // @ts-expect-error Parse unknown value.\n    let n = parseFloat(value)\n\n    if (this.isString(/%$/)) {\n      n /= 100.0\n    }\n\n    return n\n  }\n\n  getString(def?: T) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return typeof this.value === 'undefined'\n        ? ''\n        : String(this.value)\n    }\n\n    return String(def)\n  }\n\n  getColor(def?: T) {\n    let color = this.getString(def)\n\n    if (this.isNormalizedColor) {\n      return color\n    }\n\n    this.isNormalizedColor = true\n    color = normalizeColor(color)\n    this.value = color as unknown as T\n\n    return color\n  }\n\n  getDpi() {\n    return 96.0 // TODO: compute?\n  }\n\n  getRem() {\n    return this.document.rootEmSize\n  }\n\n  getEm() {\n    return this.document.emSize\n  }\n\n  getUnits() {\n    return this.getString().replace(/[0-9.-]/g, '')\n  }\n\n  getPixels(axis?: Axis, processPercent?: boolean): number\n  getPixels(isFontSize?: boolean): number\n  getPixels(axisOrIsFontSize?: Axis | boolean, processPercent = false): number {\n    if (!this.hasValue()) {\n      return 0\n    }\n\n    const [axis, isFontSize] = typeof axisOrIsFontSize === 'boolean'\n      ? [undefined, axisOrIsFontSize]\n      : [axisOrIsFontSize]\n    const { viewPort } = this.document.screen\n\n    switch (true) {\n      case this.isString(/vmin$/):\n        return this.getNumber()\n          / 100.0\n          * Math.min(\n            viewPort.computeSize('x'),\n            viewPort.computeSize('y')\n          )\n\n      case this.isString(/vmax$/):\n        return this.getNumber()\n          / 100.0\n          * Math.max(\n            viewPort.computeSize('x'),\n            viewPort.computeSize('y')\n          )\n\n      case this.isString(/vw$/):\n        return this.getNumber()\n          / 100.0\n          * viewPort.computeSize('x')\n\n      case this.isString(/vh$/):\n        return this.getNumber()\n          / 100.0\n          * viewPort.computeSize('y')\n\n      case this.isString(/rem$/):\n        return this.getNumber() * this.getRem(/* viewPort */)\n\n      case this.isString(/em$/):\n        return this.getNumber() * this.getEm(/* viewPort */)\n\n      case this.isString(/ex$/):\n        return this.getNumber() * this.getEm(/* viewPort */) / 2.0\n\n      case this.isString(/px$/):\n        return this.getNumber()\n\n      case this.isString(/pt$/):\n        return this.getNumber() * this.getDpi(/* viewPort */) * (1.0 / 72.0)\n\n      case this.isString(/pc$/):\n        return this.getNumber() * 15\n\n      case this.isString(/cm$/):\n        return this.getNumber() * this.getDpi(/* viewPort */) / 2.54\n\n      case this.isString(/mm$/):\n        return this.getNumber() * this.getDpi(/* viewPort */) / 25.4\n\n      case this.isString(/in$/):\n        return this.getNumber() * this.getDpi(/* viewPort */)\n\n      case this.isString(/%$/) && isFontSize:\n        return this.getNumber() * this.getEm(/* viewPort */)\n\n      case this.isString(/%$/):\n        return this.getNumber() * viewPort.computeSize(axis)\n\n      default: {\n        const n = this.getNumber()\n\n        if (processPercent && n < 1.0) {\n          return n * viewPort.computeSize(axis)\n        }\n\n        return n\n      }\n    }\n  }\n\n  getMilliseconds() {\n    if (!this.hasValue()) {\n      return 0\n    }\n\n    if (this.isString(/ms$/)) {\n      return this.getNumber()\n    }\n\n    return this.getNumber() * 1000\n  }\n\n  getRadians() {\n    if (!this.hasValue()) {\n      return 0\n    }\n\n    switch (true) {\n      case this.isString(/deg$/):\n        return this.getNumber() * (Math.PI / 180.0)\n\n      case this.isString(/grad$/):\n        return this.getNumber() * (Math.PI / 200.0)\n\n      case this.isString(/rad$/):\n        return this.getNumber()\n\n      default:\n        return this.getNumber() * (Math.PI / 180.0)\n    }\n  }\n\n  getDefinition<T extends Element>() {\n    const asString = this.getString()\n    const match = /#([^)'\"]+)/.exec(asString)\n    const name = match?.[1] || asString\n\n    return this.document.definitions[name] as T | undefined\n  }\n\n  getFillStyleDefinition(element: Element | PathElement, opacity: Property) {\n    let def = this.getDefinition<PatternElement & GradientElement>()\n\n    if (!def) {\n      return null\n    }\n\n    // gradient\n    if (typeof def.createGradient === 'function' && 'getBoundingBox' in element) {\n      return def.createGradient(\n        this.document.ctx,\n        element,\n        opacity\n      )\n    }\n\n    // pattern\n    if (typeof def.createPattern === 'function') {\n      if (def.getHrefAttribute().hasValue()) {\n        const patternTransform = def.getAttribute('patternTransform')\n\n        def = def.getHrefAttribute().getDefinition()\n\n        if (def && patternTransform.hasValue()) {\n          def.getAttribute('patternTransform', true).setValue(patternTransform.value)\n        }\n      }\n\n      if (def) {\n        return def.createPattern(this.document.ctx, element, opacity)\n      }\n    }\n\n    return null\n  }\n\n  getTextBaseline() {\n    if (!this.hasValue()) {\n      return null\n    }\n\n    const key = this.getString()\n\n    return Property.textBaselineMapping[key] || null\n  }\n\n  addOpacity(opacity: Property) {\n    let value = this.getColor()\n    const len = value.length\n    let commas = 0\n\n    // Simulate old RGBColor version, which can't parse rgba.\n    for (let i = 0; i < len; i++) {\n      if (value[i] === ',') {\n        commas++\n      }\n\n      if (commas === 3) {\n        break\n      }\n    }\n\n    if (opacity.hasValue() && this.isString() && commas !== 3) {\n      const color = new RGBColor(value)\n\n      if (color.ok) {\n        color.alpha = opacity.getNumber()\n        value = color.toRGBA()\n      }\n    }\n\n    return new Property<string>(this.document, this.name, value)\n  }\n}\n","\nexport interface IViewPortSize {\n  width: number\n  height: number\n}\n\nexport type Axis = 'x' | 'y'\n\nexport class ViewPort {\n  static DEFAULT_VIEWPORT_WIDTH = 800\n  static DEFAULT_VIEWPORT_HEIGHT = 600\n\n  viewPorts: IViewPortSize[] = []\n\n  clear() {\n    this.viewPorts = []\n  }\n\n  setCurrent(width: number, height: number) {\n    this.viewPorts.push({\n      width,\n      height\n    })\n  }\n\n  removeCurrent() {\n    this.viewPorts.pop()\n  }\n\n  getRoot() {\n    const [root] = this.viewPorts\n\n    if (!root) {\n      return getDefault()\n    }\n\n    return root\n  }\n\n  getCurrent() {\n    const { viewPorts } = this\n    const current = viewPorts[viewPorts.length - 1]\n\n    if (!current) {\n      return getDefault()\n    }\n\n    return current\n  }\n\n  get width() {\n    return this.getCurrent().width\n  }\n\n  get height() {\n    return this.getCurrent().height\n  }\n\n  computeSize(d?: number|Axis) {\n    if (typeof d === 'number') {\n      return d\n    }\n\n    if (d === 'x') {\n      return this.width\n    }\n\n    if (d === 'y') {\n      return this.height\n    }\n\n    return Math.sqrt(\n      Math.pow(this.width, 2) + Math.pow(this.height, 2)\n    ) / Math.sqrt(2)\n  }\n}\n\nfunction getDefault() {\n  return {\n    width: ViewPort.DEFAULT_VIEWPORT_WIDTH,\n    height: ViewPort.DEFAULT_VIEWPORT_HEIGHT\n  }\n}\n","import { MatrixValue } from './types'\nimport { toNumbers } from './util'\n\nexport class Point {\n  static parse(point: string, defaultValue = 0) {\n    const [x = defaultValue, y = defaultValue] = toNumbers(point)\n\n    return new Point(x, y)\n  }\n\n  static parseScale(scale: string, defaultValue = 1) {\n    const [x = defaultValue, y = x] = toNumbers(scale)\n\n    return new Point(x, y)\n  }\n\n  static parsePath(path: string) {\n    const points = toNumbers(path)\n    const len = points.length\n    const pathPoints: Point[] = []\n\n    for (let i = 0; i < len; i += 2) {\n      pathPoints.push(new Point(points[i], points[i + 1]))\n    }\n\n    return pathPoints\n  }\n\n  constructor(\n    public x: number,\n    public y: number\n  ) {}\n\n  angleTo(point: Point) {\n    return Math.atan2(point.y - this.y, point.x - this.x)\n  }\n\n  applyTransform(transform: MatrixValue) {\n    const {\n      x,\n      y\n    } = this\n    const xp = x * transform[0] + y * transform[2] + transform[4]\n    const yp = x * transform[1] + y * transform[3] + transform[5]\n\n    this.x = xp\n    this.y = yp\n  }\n}\n","import { RenderingContext2D } from './types'\nimport { BoundingBox } from './BoundingBox'\nimport { Point } from './Point'\nimport { Screen } from './Screen'\nimport { Element } from './Document'\n\ninterface IEventTarget {\n  onClick?(): void\n  onMouseMove?(): void\n}\n\nexport interface IEvent {\n  type: string\n  x: number\n  y: number\n  run(eventTarget: IEventTarget): void\n}\n\nexport class Mouse {\n  private working = false\n  private events: IEvent[] = []\n  private eventElements: Element[] = []\n\n  constructor(\n    private readonly screen: Screen\n  ) {\n    this.onClick = this.onClick.bind(this)\n    this.onMouseMove = this.onMouseMove.bind(this)\n  }\n\n  isWorking() {\n    return this.working\n  }\n\n  start() {\n    if (this.working) {\n      return\n    }\n\n    const {\n      screen,\n      onClick,\n      onMouseMove\n    } = this\n    const canvas = screen.ctx.canvas as HTMLCanvasElement\n\n    canvas.onclick = onClick\n    canvas.onmousemove = onMouseMove\n    this.working = true\n  }\n\n  stop() {\n    if (!this.working) {\n      return\n    }\n\n    const canvas = this.screen.ctx.canvas as HTMLCanvasElement\n\n    this.working = false\n    canvas.onclick = null\n    canvas.onmousemove = null\n  }\n\n  hasEvents() {\n    return this.working && this.events.length > 0\n  }\n\n  runEvents() {\n    if (!this.working) {\n      return\n    }\n\n    const {\n      screen: document,\n      events,\n      eventElements\n    } = this\n    const { style } = document.ctx.canvas as HTMLCanvasElement\n    let element: Element | null | undefined\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (style) {\n      style.cursor = ''\n    }\n\n    events.forEach(({ run }, i) => {\n      element = eventElements[i]\n\n      while (element) {\n        run(element as IEventTarget)\n        element = element.parent\n      }\n    })\n\n    // done running, clear\n    this.events = []\n    this.eventElements = []\n  }\n\n  checkPath(element: Element, ctx: RenderingContext2D | null) {\n    if (!this.working || !ctx) {\n      return\n    }\n\n    const {\n      events,\n      eventElements\n    } = this\n\n    events.forEach(({ x, y }, i) => {\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n        eventElements[i] = element\n      }\n    })\n  }\n\n  checkBoundingBox(element: Element, boundingBox: BoundingBox | null) {\n    if (!this.working || !boundingBox) {\n      return\n    }\n\n    const {\n      events,\n      eventElements\n    } = this\n\n    events.forEach(({ x, y }, i) => {\n      if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n        eventElements[i] = element\n      }\n    })\n  }\n\n  private mapXY(x: number, y: number) {\n    const {\n      window,\n      ctx\n    } = this.screen\n    const point = new Point(x, y)\n    let element = ctx.canvas as HTMLElement | null\n\n    while (element) {\n      point.x -= element.offsetLeft\n      point.y -= element.offsetTop\n      element = element.offsetParent as HTMLElement | null\n    }\n\n    if (window?.scrollX) {\n      point.x += window.scrollX\n    }\n\n    if (window?.scrollY) {\n      point.y += window.scrollY\n    }\n\n    return point\n  }\n\n  private onClick(event: MouseEvent) {\n    const {\n      x,\n      y\n    } = this.mapXY(\n      event.clientX,\n      event.clientY\n    )\n\n    this.events.push({\n      type: 'onclick',\n      x,\n      y,\n      run(eventTarget) {\n        if (eventTarget.onClick) {\n          eventTarget.onClick()\n        }\n      }\n    })\n  }\n\n  private onMouseMove(event: MouseEvent) {\n    const {\n      x,\n      y\n    } = this.mapXY(\n      event.clientX,\n      event.clientY\n    )\n\n    this.events.push({\n      type: 'onmousemove',\n      x,\n      y,\n      run(eventTarget) {\n        if (eventTarget.onMouseMove) {\n          eventTarget.onMouseMove()\n        }\n      }\n    })\n  }\n}\n","import requestAnimationFrame from 'raf'\nimport {\n  RenderingContext2D,\n  Fetch\n} from './types'\nimport {\n  compressSpaces,\n  toNumbers\n} from './util'\nimport { Property } from './Property'\nimport { ViewPort } from './ViewPort'\nimport { Mouse } from './Mouse'\nimport {\n  Document,\n  Element,\n  AnimateElement\n} from './Document'\n\nexport interface IScreenOptions {\n  /**\n   * Window object.\n   */\n  window?: Window | null\n  /**\n   * WHATWG-compatible `fetch` function.\n   */\n  fetch?: Fetch\n}\n\nexport interface IScreenStartOptions {\n  /**\n   * Whether enable the redraw.\n   */\n  enableRedraw?: boolean\n  /**\n   * Ignore mouse events.\n   */\n  ignoreMouse?: boolean\n  /**\n   * Ignore animations.\n   */\n  ignoreAnimation?: boolean\n  /**\n   * Does not try to resize canvas.\n   */\n  ignoreDimensions?: boolean\n  /**\n   * Does not clear canvas.\n   */\n  ignoreClear?: boolean\n  /**\n   * Scales horizontally to width.\n   */\n  scaleWidth?: number\n  /**\n   * Scales vertically to height.\n   */\n  scaleHeight?: number\n  /**\n   * Draws at a x offset.\n   */\n  offsetX?: number\n  /**\n   * Draws at a y offset.\n   */\n  offsetY?: number\n  /**\n   * Will call the function on every frame, if it returns true, will redraw.\n   */\n  forceRedraw?(): boolean\n}\n\nexport interface IScreenViewBoxConfig {\n  document: Document\n  ctx: RenderingContext2D\n  aspectRatio: string\n  width: number\n  desiredWidth: number\n  height: number\n  desiredHeight: number\n  minX?: number\n  minY?: number\n  refX?: number\n  refY?: number\n  clip?: boolean\n  clipX?: number\n  clipY?: number\n}\n\nconst defaultWindow = typeof window !== 'undefined'\n  ? window\n  : null\nconst defaultFetch = typeof fetch !== 'undefined'\n  ? fetch.bind(undefined) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n  : undefined\n\nexport class Screen {\n  static readonly defaultWindow = defaultWindow\n  static readonly defaultFetch = defaultFetch\n  static FRAMERATE = 30\n  static MAX_VIRTUAL_PIXELS = 30000\n\n  readonly window: Window | null\n  readonly fetch: Fetch\n  readonly viewPort = new ViewPort()\n  readonly mouse = new Mouse(this)\n  readonly animations: AnimateElement[] = []\n  private readyPromise: Promise<void> | undefined\n  private resolveReady: (() => void) | undefined\n  private waits: (() => boolean)[] = []\n  private frameDuration = 0\n  private isReadyLock = false\n  private isFirstRender = true\n  private intervalId: number | null = null\n\n  constructor(\n    readonly ctx: RenderingContext2D,\n    {\n      fetch = defaultFetch,\n      window = defaultWindow\n    }: IScreenOptions = {}\n  ) {\n    this.window = window\n\n    if (!fetch) {\n      throw new Error(`Can't find 'fetch' in 'globalThis', please provide it via options`)\n    }\n\n    this.fetch = fetch\n  }\n\n  wait(checker: () => boolean) {\n    this.waits.push(checker)\n  }\n\n  ready() {\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    if (!this.readyPromise) {\n      return Promise.resolve()\n    }\n\n    return this.readyPromise\n  }\n\n  isReady() {\n    if (this.isReadyLock) {\n      return true\n    }\n\n    const isReadyLock = this.waits.every(_ => _())\n\n    if (isReadyLock) {\n      this.waits = []\n\n      if (this.resolveReady) {\n        this.resolveReady()\n      }\n    }\n\n    this.isReadyLock = isReadyLock\n\n    return isReadyLock\n  }\n\n  setDefaults(ctx: RenderingContext2D) {\n    // initial values and defaults\n    ctx.strokeStyle = 'rgba(0,0,0,0)'\n    ctx.lineCap = 'butt'\n    ctx.lineJoin = 'miter'\n    ctx.miterLimit = 4\n  }\n\n  setViewBox({\n    document,\n    ctx,\n    aspectRatio,\n    width,\n    desiredWidth,\n    height,\n    desiredHeight,\n    minX = 0,\n    minY = 0,\n    refX,\n    refY,\n    clip = false,\n    clipX = 0,\n    clipY = 0\n  }: IScreenViewBoxConfig) {\n    // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n    const cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, '') // ignore defer\n    const [aspectRatioAlign, aspectRatioMeetOrSlice] = cleanAspectRatio.split(' ')\n    const align = aspectRatioAlign || 'xMidYMid'\n    const meetOrSlice = aspectRatioMeetOrSlice || 'meet'\n    // calculate scale\n    const scaleX = width / desiredWidth\n    const scaleY = height / desiredHeight\n    const scaleMin = Math.min(scaleX, scaleY)\n    const scaleMax = Math.max(scaleX, scaleY)\n    let finalDesiredWidth = desiredWidth\n    let finalDesiredHeight = desiredHeight\n\n    if (meetOrSlice === 'meet') {\n      finalDesiredWidth *= scaleMin\n      finalDesiredHeight *= scaleMin\n    }\n\n    if (meetOrSlice === 'slice') {\n      finalDesiredWidth *= scaleMax\n      finalDesiredHeight *= scaleMax\n    }\n\n    const refXProp = new Property(document, 'refX', refX)\n    const refYProp = new Property(document, 'refY', refY)\n    const hasRefs = refXProp.hasValue() && refYProp.hasValue()\n\n    if (hasRefs) {\n      ctx.translate(\n        -scaleMin * refXProp.getPixels('x'),\n        -scaleMin * refYProp.getPixels('y')\n      )\n    }\n\n    if (clip) {\n      const scaledClipX = scaleMin * clipX\n      const scaledClipY = scaleMin * clipY\n\n      ctx.beginPath()\n      ctx.moveTo(scaledClipX, scaledClipY)\n      ctx.lineTo(width, scaledClipY)\n      ctx.lineTo(width, height)\n      ctx.lineTo(scaledClipX, height)\n      ctx.closePath()\n      ctx.clip()\n    }\n\n    if (!hasRefs) {\n      const isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY\n      const isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY\n      const isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX\n      const isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX\n\n      if (align.startsWith('xMid') && (\n        isMeetMinY || isSliceMaxY\n      )) {\n        ctx.translate(width / 2.0 - finalDesiredWidth / 2.0, 0)\n      }\n\n      if (align.endsWith('YMid') && (\n        isMeetMinX || isSliceMaxX\n      )) {\n        ctx.translate(0, height / 2.0 - finalDesiredHeight / 2.0)\n      }\n\n      if (align.startsWith('xMax') && (\n        isMeetMinY || isSliceMaxY\n      )) {\n        ctx.translate(width - finalDesiredWidth, 0)\n      }\n\n      if (align.endsWith('YMax') && (\n        isMeetMinX || isSliceMaxX\n      )) {\n        ctx.translate(0, height - finalDesiredHeight)\n      }\n    }\n\n    // scale\n    switch (true) {\n      case align === 'none':\n        ctx.scale(scaleX, scaleY)\n        break\n\n      case meetOrSlice === 'meet':\n        ctx.scale(scaleMin, scaleMin)\n        break\n\n      case meetOrSlice === 'slice':\n        ctx.scale(scaleMax, scaleMax)\n        break\n    }\n\n    // translate\n    ctx.translate(-minX, -minY)\n  }\n\n  start(\n    element: Element,\n    {\n      enableRedraw = false,\n      ignoreMouse = false,\n      ignoreAnimation = false,\n      ignoreDimensions = false,\n      ignoreClear = false,\n      forceRedraw,\n      scaleWidth,\n      scaleHeight,\n      offsetX,\n      offsetY\n    }: IScreenStartOptions = {}\n  ) {\n    const { mouse } = this\n    const frameDuration = 1000 / Screen.FRAMERATE\n\n    this.isReadyLock = false\n    this.frameDuration = frameDuration\n    this.readyPromise = new Promise((resolve) => {\n      this.resolveReady = resolve\n    })\n\n    if (this.isReady()) {\n      this.render(\n        element,\n        ignoreDimensions,\n        ignoreClear,\n        scaleWidth,\n        scaleHeight,\n        offsetX,\n        offsetY\n      )\n    }\n\n    if (!enableRedraw) {\n      return\n    }\n\n    let now = Date.now()\n    let then = now\n    let delta = 0\n    const tick = () => {\n      now = Date.now()\n      delta = now - then\n\n      if (delta >= frameDuration) {\n        then = now - (delta % frameDuration)\n\n        if (this.shouldUpdate(\n          ignoreAnimation,\n          forceRedraw\n        )) {\n          this.render(\n            element,\n            ignoreDimensions,\n            ignoreClear,\n            scaleWidth,\n            scaleHeight,\n            offsetX,\n            offsetY\n          )\n          mouse.runEvents()\n        }\n      }\n\n      this.intervalId = requestAnimationFrame(tick)\n    }\n\n    if (!ignoreMouse) {\n      mouse.start()\n    }\n\n    this.intervalId = requestAnimationFrame(tick)\n  }\n\n  stop() {\n    if (this.intervalId) {\n      requestAnimationFrame.cancel(this.intervalId)\n      this.intervalId = null\n    }\n\n    this.mouse.stop()\n  }\n\n  private shouldUpdate(\n    ignoreAnimation: boolean,\n    forceRedraw: (() => boolean) | undefined\n  ) {\n    // need update from animations?\n    if (!ignoreAnimation) {\n      const { frameDuration } = this\n      const shouldUpdate = this.animations.reduce(\n        (shouldUpdate, animation) => animation.update(frameDuration) || shouldUpdate,\n        false\n      )\n\n      if (shouldUpdate) {\n        return true\n      }\n    }\n\n    // need update from redraw?\n    if (typeof forceRedraw === 'function' && forceRedraw()) {\n      return true\n    }\n\n    if (!this.isReadyLock && this.isReady()) {\n      return true\n    }\n\n    // need update from mouse events?\n    if (this.mouse.hasEvents()) {\n      return true\n    }\n\n    return false\n  }\n\n  private render(\n    element: Element,\n    ignoreDimensions: boolean,\n    ignoreClear: boolean,\n    scaleWidth: number | undefined,\n    scaleHeight: number | undefined,\n    offsetX: number | undefined,\n    offsetY: number | undefined\n  ) {\n    const {\n      viewPort,\n      ctx,\n      isFirstRender\n    } = this\n    const canvas = ctx.canvas as HTMLCanvasElement\n\n    viewPort.clear()\n\n    if (canvas.width && canvas.height) {\n      viewPort.setCurrent(canvas.width, canvas.height)\n    }\n\n    const widthStyle = element.getStyle('width')\n    const heightStyle = element.getStyle('height')\n\n    if (!ignoreDimensions && (\n      isFirstRender\n      || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number'\n    )) {\n      // set canvas size\n      if (widthStyle.hasValue()) {\n        canvas.width = widthStyle.getPixels('x')\n\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (canvas.style) {\n          canvas.style.width = `${canvas.width}px`\n        }\n      }\n\n      if (heightStyle.hasValue()) {\n        canvas.height = heightStyle.getPixels('y')\n\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (canvas.style) {\n          canvas.style.height = `${canvas.height}px`\n        }\n      }\n    }\n\n    let cWidth = canvas.clientWidth || canvas.width\n    let cHeight = canvas.clientHeight || canvas.height\n\n    if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n      cWidth = widthStyle.getPixels('x')\n      cHeight = heightStyle.getPixels('y')\n    }\n\n    viewPort.setCurrent(cWidth, cHeight)\n\n    if (typeof offsetX === 'number') {\n      element.getAttribute('x', true).setValue(offsetX)\n    }\n\n    if (typeof offsetY === 'number') {\n      element.getAttribute('y', true).setValue(offsetY)\n    }\n\n    if (typeof scaleWidth === 'number'\n      || typeof scaleHeight === 'number'\n    ) {\n      const viewBox = toNumbers(element.getAttribute('viewBox').getString())\n      let xRatio = 0\n      let yRatio = 0\n\n      if (typeof scaleWidth === 'number') {\n        const widthStyle = element.getStyle('width')\n\n        if (widthStyle.hasValue()) {\n          xRatio = widthStyle.getPixels('x') / scaleWidth\n        } else\n        if (viewBox[2] && !isNaN(viewBox[2])) {\n          xRatio = viewBox[2] / scaleWidth\n        }\n      }\n\n      if (typeof scaleHeight === 'number') {\n        const heightStyle = element.getStyle('height')\n\n        if (heightStyle.hasValue()) {\n          yRatio = heightStyle.getPixels('y') / scaleHeight\n        } else\n        if (viewBox[3] && !isNaN(viewBox[3])) {\n          yRatio = viewBox[3] / scaleHeight\n        }\n      }\n\n      if (!xRatio) {\n        xRatio = yRatio\n      }\n\n      if (!yRatio) {\n        yRatio = xRatio\n      }\n\n      element.getAttribute('width', true).setValue(scaleWidth)\n      element.getAttribute('height', true).setValue(scaleHeight)\n\n      const transformStyle = element.getStyle('transform', true, true)\n\n      transformStyle.setValue(`${transformStyle.getString()} scale(${1.0 / xRatio}, ${1.0 / yRatio})`)\n    }\n\n    // clear and render\n    if (!ignoreClear) {\n      ctx.clearRect(0, 0, cWidth, cHeight)\n    }\n\n    element.render(ctx)\n\n    if (isFirstRender) {\n      this.isFirstRender = false\n    }\n  }\n}\n","import { Fetch } from './types'\nimport { Screen } from './Screen'\n\ntype DOMParserConstructor = typeof DOMParser\n\nexport interface IParserOptions {\n  /**\n   * WHATWG-compatible `fetch` function.\n   */\n  fetch?: Fetch\n  /**\n   * XML/HTML parser from string into DOM Document.\n   */\n  DOMParser?: DOMParserConstructor\n}\n\nconst { defaultFetch } = Screen\nconst DefaultDOMParser = typeof DOMParser !== 'undefined'\n  ? DOMParser\n  : undefined\n\nexport class Parser {\n  private readonly fetch: Fetch\n  private readonly DOMParser: DOMParserConstructor\n\n  constructor({\n    fetch = defaultFetch,\n    DOMParser = DefaultDOMParser\n  }: IParserOptions = {}) {\n    if (!fetch) {\n      throw new Error(`Can't find 'fetch' in 'globalThis', please provide it via options`)\n    }\n\n    if (!DOMParser) {\n      throw new Error(`Can't find 'DOMParser' in 'globalThis', please provide it via options`)\n    }\n\n    this.fetch = fetch\n    this.DOMParser = DOMParser\n  }\n\n  async parse(resource: string) {\n    if (resource.startsWith('<')) {\n      return this.parseFromString(resource)\n    }\n\n    return this.load(resource)\n  }\n\n  parseFromString(xml: string) {\n    const parser = new this.DOMParser()\n\n    try {\n      return this.checkDocument(\n        parser.parseFromString(xml, 'image/svg+xml')\n      )\n    } catch (err) {\n      return this.checkDocument(\n        parser.parseFromString(xml, 'text/xml')\n      )\n    }\n  }\n\n  private checkDocument(document: Document) {\n    const parserError = document.getElementsByTagName('parsererror')[0]\n\n    if (parserError) {\n      throw new Error(parserError.textContent || 'Unknown parse error')\n    }\n\n    return document\n  }\n\n  async load(url: string) {\n    const response = await this.fetch(url)\n    const xml = await response.text()\n\n    return this.parseFromString(xml)\n  }\n}\n","import { MatrixValue, RenderingContext2D } from '../types'\nimport { toMatrixValue } from '../util'\nimport { Document } from '../Document'\nimport { Point } from '../Point'\nimport { Property } from '../Property'\nimport { ITransform } from './types'\n\nexport class Matrix implements ITransform {\n  type = 'matrix'\n  protected matrix: MatrixValue\n  private readonly originX: Property\n  private readonly originY: Property\n\n  constructor(\n    _: Document,\n    matrix: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    this.matrix = toMatrixValue(matrix)\n    this.originX = transformOrigin[0]\n    this.originY = transformOrigin[1]\n  }\n\n  apply(ctx: RenderingContext2D) {\n    const {\n      originX,\n      originY,\n      matrix\n    } = this\n    const tx = originX.getPixels('x')\n    const ty = originY.getPixels('y')\n\n    ctx.translate(tx, ty)\n    ctx.transform(\n      matrix[0],\n      matrix[1],\n      matrix[2],\n      matrix[3],\n      matrix[4],\n      matrix[5]\n    )\n    ctx.translate(-tx, -ty)\n  }\n\n  unapply(ctx: RenderingContext2D) {\n    const {\n      originX,\n      originY,\n      matrix\n    } = this\n    const a = matrix[0]\n    const b = matrix[2]\n    const c = matrix[4]\n    const d = matrix[1]\n    const e = matrix[3]\n    const f = matrix[5]\n    const g = 0.0\n    const h = 0.0\n    const i = 1.0\n    const det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g))\n    const tx = originX.getPixels('x')\n    const ty = originY.getPixels('y')\n\n    ctx.translate(tx, ty)\n    ctx.transform(\n      det * (e * i - f * h),\n      det * (f * g - d * i),\n      det * (c * h - b * i),\n      det * (a * i - c * g),\n      det * (b * f - c * e),\n      det * (c * d - a * f)\n    )\n    ctx.translate(-tx, -ty)\n  }\n\n  applyToPoint(point: Point) {\n    point.applyTransform(this.matrix)\n  }\n}\n","import { Document } from '../Document'\nimport { Property } from '../Property'\nimport { Matrix } from './Matrix'\n\nexport class Skew extends Matrix {\n  override type = 'skew'\n  protected readonly angle: Property\n\n  constructor(\n    document: Document,\n    skew: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    super(document, skew, transformOrigin)\n\n    this.angle = new Property(document, 'angle', skew)\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { compressSpaces } from '../util'\nimport { Property } from '../Property'\nimport { Point } from '../Point'\nimport { Document, Element } from '../Document'\nimport { ITransform } from './types'\nimport { Translate } from './Translate'\nimport { Rotate } from './Rotate'\nimport { Scale } from './Scale'\nimport { Matrix } from './Matrix'\nimport { SkewX } from './SkewX'\nimport { SkewY } from './SkewY'\n\nfunction parseTransforms(transform: string) {\n  return compressSpaces(transform)\n    .trim()\n    .replace(/\\)([a-zA-Z])/g, ') $1')\n    .replace(/\\)(\\s?,\\s?)/g, ') ')\n    .split(/\\s(?=[a-z])/)\n}\n\nfunction parseTransform(transform: string) {\n  const [type = '', value = ''] = transform.split('(')\n\n  return [type.trim(), value.trim().replace(')', '')] as const\n}\n\ninterface ITransformConstructor {\n  prototype: ITransform\n  new (\n    document: Document,\n    value: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ): ITransform\n}\n\nexport class Transform {\n  static fromElement(document: Document, element: Element) {\n    const transformStyle = element.getStyle('transform', false, true)\n\n    if (transformStyle.hasValue()) {\n      const [transformOriginXProperty, transformOriginYProperty = transformOriginXProperty] = element.getStyle('transform-origin', false, true).split()\n\n      if (transformOriginXProperty && transformOriginYProperty) {\n        const transformOrigin = [transformOriginXProperty, transformOriginYProperty] as const\n\n        return new Transform(\n          document,\n          transformStyle.getString(),\n          transformOrigin\n        )\n      }\n    }\n\n    return null\n  }\n\n  static transformTypes: Record<string, ITransformConstructor> = {\n    translate: Translate,\n    rotate: Rotate,\n    scale: Scale,\n    matrix: Matrix,\n    skewX: SkewX,\n    skewY: SkewY\n  }\n\n  private readonly transforms: ITransform[] = []\n\n  constructor(\n    private readonly document: Document,\n    transform: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    const data = parseTransforms(transform)\n\n    data.forEach((transform) => {\n      if (transform === 'none') {\n        return\n      }\n\n      const [type, value] = parseTransform(transform)\n      const TransformType = Transform.transformTypes[type]\n\n      if (TransformType) {\n        this.transforms.push(new TransformType(this.document, value, transformOrigin))\n      }\n    })\n  }\n\n  apply(ctx: RenderingContext2D) {\n    this.transforms.forEach(transform => transform.apply(ctx))\n  }\n\n  unapply(ctx: RenderingContext2D) {\n    this.transforms.forEach(transform => transform.unapply(ctx))\n  }\n\n  // TODO: applyToPoint unused ... remove?\n  applyToPoint(point: Point) {\n    this.transforms.forEach(transform => transform.applyToPoint(point))\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Document } from '../Document'\nimport { Point } from '../Point'\n\nexport class Translate {\n  type = 'translate'\n  private readonly point: Point\n\n  constructor(\n    _: Document,\n    point: string\n  ) {\n    this.point = Point.parse(point)\n  }\n\n  apply(ctx: RenderingContext2D) {\n    const {\n      x,\n      y\n    } = this.point\n\n    ctx.translate(\n      x || 0.0,\n      y || 0.0\n    )\n  }\n\n  unapply(ctx: RenderingContext2D) {\n    const {\n      x,\n      y\n    } = this.point\n\n    ctx.translate(\n      -1.0 * x || 0.0,\n      -1.0 * y || 0.0\n    )\n  }\n\n  applyToPoint(point: Point) {\n    const {\n      x,\n      y\n    } = this.point\n\n    point.applyTransform([\n      1,\n      0,\n      0,\n      1,\n      x || 0.0,\n      y || 0.0\n    ])\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { toNumbers } from '../util'\nimport { Document } from '../Document'\nimport { Property } from '../Property'\nimport { Point } from '../Point'\n\nexport class Rotate {\n  type = 'rotate'\n  private readonly angle: Property\n  private readonly originX: Property\n  private readonly originY: Property\n  private readonly cx: number\n  private readonly cy: number\n\n  constructor(\n    document: Document,\n    rotate: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    const numbers = toNumbers(rotate)\n\n    this.angle = new Property(document, 'angle', numbers[0])\n    this.originX = transformOrigin[0]\n    this.originY = transformOrigin[1]\n    this.cx = numbers[1] || 0\n    this.cy = numbers[2] || 0\n  }\n\n  apply(ctx: RenderingContext2D) {\n    const {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this\n    const tx = cx + originX.getPixels('x')\n    const ty = cy + originY.getPixels('y')\n\n    ctx.translate(tx, ty)\n    ctx.rotate(angle.getRadians())\n    ctx.translate(-tx, -ty)\n  }\n\n  unapply(ctx: RenderingContext2D) {\n    const {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this\n    const tx = cx + originX.getPixels('x')\n    const ty = cy + originY.getPixels('y')\n\n    ctx.translate(tx, ty)\n    ctx.rotate(-1.0 * angle.getRadians())\n    ctx.translate(-tx, -ty)\n  }\n\n  applyToPoint(point: Point) {\n    const {\n      cx,\n      cy,\n      angle\n    } = this\n    const rad = angle.getRadians()\n\n    point.applyTransform([\n      1,\n      0,\n      0,\n      1,\n      cx || 0.0, // this.p.x\n      cy || 0.0 // this.p.y\n    ])\n    point.applyTransform([\n      Math.cos(rad),\n      Math.sin(rad),\n      -Math.sin(rad),\n      Math.cos(rad),\n      0,\n      0\n    ])\n    point.applyTransform([\n      1,\n      0,\n      0,\n      1,\n      -cx || 0.0, // -this.p.x\n      -cy || 0.0 // -this.p.y\n    ])\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { PSEUDO_ZERO } from '../util'\nimport { Document } from '../Document'\nimport { Point } from '../Point'\nimport { Property } from '../Property'\n\nexport class Scale {\n  type = 'scale'\n  private readonly scale: Point\n  private readonly originX: Property\n  private readonly originY: Property\n\n  constructor(\n    _: Document,\n    scale: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    const scaleSize = Point.parseScale(scale)\n\n    // Workaround for node-canvas\n    if (scaleSize.x === 0\n      || scaleSize.y === 0\n    ) {\n      scaleSize.x = PSEUDO_ZERO\n      scaleSize.y = PSEUDO_ZERO\n    }\n\n    this.scale = scaleSize\n    this.originX = transformOrigin[0]\n    this.originY = transformOrigin[1]\n  }\n\n  apply(ctx: RenderingContext2D) {\n    const {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this\n    const tx = originX.getPixels('x')\n    const ty = originY.getPixels('y')\n\n    ctx.translate(tx, ty)\n    ctx.scale(x, y || x)\n    ctx.translate(-tx, -ty)\n  }\n\n  unapply(ctx: RenderingContext2D) {\n    const {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this\n    const tx = originX.getPixels('x')\n    const ty = originY.getPixels('y')\n\n    ctx.translate(tx, ty)\n    ctx.scale(1.0 / x, 1.0 / y || x)\n    ctx.translate(-tx, -ty)\n  }\n\n  applyToPoint(point: Point) {\n    const {\n      x,\n      y\n    } = this.scale\n\n    point.applyTransform([\n      x || 0.0,\n      0,\n      0,\n      y || 0.0,\n      0,\n      0\n    ])\n  }\n}\n","import { Document } from '../Document'\nimport { Property } from '../Property'\nimport { Skew } from './Skew'\n\nexport class SkewX extends Skew {\n  override type = 'skewX'\n\n  constructor(\n    document: Document,\n    skew: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    super(document, skew, transformOrigin)\n\n    this.matrix = [\n      1,\n      0,\n      Math.tan(this.angle.getRadians()),\n      1,\n      0,\n      0\n    ]\n  }\n}\n","import { Document } from '../Document'\nimport { Property } from '../Property'\nimport { Skew } from './Skew'\n\nexport class SkewY extends Skew {\n  override type = 'skewY'\n\n  constructor(\n    document: Document,\n    skew: string,\n    transformOrigin: readonly [Property<string>, Property<string>]\n  ) {\n    super(document, skew, transformOrigin)\n\n    this.matrix = [\n      1,\n      Math.tan(this.angle.getRadians()),\n      0,\n      1,\n      0,\n      0\n    ]\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { normalizeAttributeName } from '../util'\nimport { Property } from '../Property'\nimport { Transform } from '../Transform'\nimport { Document } from './Document'\nimport { ClipPathElement } from './ClipPathElement'\nimport { MaskElement } from './MaskElement'\nimport { FilterElement } from './FilterElement'\n\nexport abstract class Element {\n  static readonly ignoreChildTypes = ['title']\n\n  readonly type: string = ''\n  readonly attributes: Record<string, Property> = {}\n  readonly styles: Record<string, Property> = {}\n  readonly stylesSpecificity: Record<string, string> = {}\n  animationFrozen = false\n  animationFrozenValue = ''\n  parent: Element | null = null\n  children: Element[] = []\n\n  constructor(\n    protected readonly document: Document,\n    protected readonly node?: HTMLElement,\n    protected readonly captureTextNodes = false\n  ) {\n    if (!node || node.nodeType !== 1) { // ELEMENT_NODE\n      return\n    }\n\n    // add attributes\n    Array.from(node.attributes).forEach((attribute) => {\n      const nodeName = normalizeAttributeName(attribute.nodeName)\n\n      this.attributes[nodeName] = new Property(document, nodeName, attribute.value)\n    })\n\n    this.addStylesFromStyleDefinition()\n\n    // add inline styles\n    if (this.getAttribute('style').hasValue()) {\n      const styles = this.getAttribute('style')\n        .getString()\n        .split(';')\n        .map(_ => _.trim())\n\n      styles.forEach((style) => {\n        if (!style) {\n          return\n        }\n\n        const [name, value] = style.split(':').map(_ => _.trim())\n\n        if (name) {\n          this.styles[name] = new Property(document, name, value)\n        }\n      })\n    }\n\n    const { definitions } = document\n    const id = this.getAttribute('id')\n\n    // add id\n    if (id.hasValue()) {\n      if (!definitions[id.getString()]) {\n        definitions[id.getString()] = this\n      }\n    }\n\n    Array.from(node.childNodes).forEach((childNode: HTMLElement) => {\n      if (childNode.nodeType === 1) {\n        this.addChild(childNode) // ELEMENT_NODE\n      } else\n      if (captureTextNodes && (\n        childNode.nodeType === 3\n        || childNode.nodeType === 4\n      )) {\n        const textNode = document.createTextNode(childNode)\n\n        if (textNode.getText().length > 0) {\n          this.addChild(textNode) // TEXT_NODE\n        }\n      }\n    })\n  }\n\n  getAttribute(name: string, createIfNotExists = false): Property {\n    const attr = this.attributes[name]\n\n    if (!attr && createIfNotExists) {\n      const attr = new Property(this.document, name, '')\n\n      this.attributes[name] = attr\n\n      return attr\n    }\n\n    return attr || Property.empty(this.document)\n  }\n\n  getHrefAttribute(): Property {\n    let href: Property | undefined\n\n    for (const key in this.attributes) {\n      if (key === 'href' || key.endsWith(':href')) {\n        href = this.attributes[key]\n        break\n      }\n    }\n\n    return href || Property.empty(this.document)\n  }\n\n  getStyle(name: string, createIfNotExists = false, skipAncestors = false): Property {\n    const style = this.styles[name]\n\n    if (style) {\n      return style\n    }\n\n    const attr = this.getAttribute(name)\n\n    if (attr.hasValue()) {\n      this.styles[name] = attr // move up to me to cache\n      return attr\n    }\n\n    if (!skipAncestors) {\n      const { parent } = this\n\n      if (parent) {\n        const parentStyle = parent.getStyle(name)\n\n        if (parentStyle.hasValue()) {\n          return parentStyle\n        }\n      }\n    }\n\n    if (createIfNotExists) {\n      const style = new Property(this.document, name, '')\n\n      this.styles[name] = style\n\n      return style\n    }\n\n    return Property.empty(this.document)\n  }\n\n  render(ctx: RenderingContext2D) {\n    // don't render display=none\n    // don't render visibility=hidden\n    if (this.getStyle('display').getString() === 'none'\n      || this.getStyle('visibility').getString() === 'hidden'\n    ) {\n      return\n    }\n\n    ctx.save()\n\n    if (this.getStyle('mask').hasValue()) { // mask\n      const mask = this.getStyle('mask').getDefinition<MaskElement>()\n\n      if (mask) {\n        this.applyEffects(ctx)\n        mask.apply(ctx, this)\n      }\n    } else\n    if (this.getStyle('filter').getValue('none') !== 'none') { // filter\n      const filter = this.getStyle('filter').getDefinition<FilterElement>()\n\n      if (filter) {\n        this.applyEffects(ctx)\n        filter.apply(ctx, this)\n      }\n    } else {\n      this.setContext(ctx)\n      this.renderChildren(ctx)\n      this.clearContext(ctx)\n    }\n\n    ctx.restore()\n  }\n\n  setContext(_: RenderingContext2D) {\n    // NO RENDER\n  }\n\n  protected applyEffects(ctx: RenderingContext2D) {\n    // transform\n    const transform = Transform.fromElement(this.document, this)\n\n    if (transform) {\n      transform.apply(ctx)\n    }\n\n    // clip\n    const clipPathStyleProp = this.getStyle('clip-path', false, true)\n\n    if (clipPathStyleProp.hasValue()) {\n      const clip = clipPathStyleProp.getDefinition<ClipPathElement>()\n\n      if (clip) {\n        clip.apply(ctx)\n      }\n    }\n  }\n\n  clearContext(_: RenderingContext2D) {\n    // NO RENDER\n  }\n\n  renderChildren(ctx: RenderingContext2D) {\n    this.children.forEach((child) => {\n      child.render(ctx)\n    })\n  }\n\n  protected addChild(childNode: Element|HTMLElement) {\n    const child = childNode instanceof Element\n      ? childNode\n      : this.document.createElement(childNode)\n\n    child.parent = this\n\n    if (!Element.ignoreChildTypes.includes(child.type)) {\n      this.children.push(child)\n    }\n  }\n\n  protected matchesSelector(selector: string) {\n    const { node } = this\n\n    if (typeof node.matches === 'function') {\n      return node.matches(selector)\n    }\n\n    const styleClasses = node.getAttribute?.('class')\n\n    if (!styleClasses || styleClasses === '') {\n      return false\n    }\n\n    return styleClasses.split(' ').some(styleClass => `.${styleClass}` === selector)\n  }\n\n  addStylesFromStyleDefinition() {\n    const {\n      styles,\n      stylesSpecificity\n    } = this.document\n    let styleProp: Property | undefined\n\n    for (const selector in styles) {\n      if (!selector.startsWith('@') && this.matchesSelector(selector)) {\n        const style = styles[selector]\n        const specificity = stylesSpecificity[selector]\n\n        if (style) {\n          for (const name in style) {\n            let existingSpecificity = this.stylesSpecificity[name]\n\n            if (typeof existingSpecificity === 'undefined') {\n              existingSpecificity = '000'\n            }\n\n            if (specificity && specificity >= existingSpecificity) {\n              styleProp = style[name]\n\n              if (styleProp) {\n                this.styles[name] = styleProp\n              }\n\n              this.stylesSpecificity[name] = specificity\n            }\n          }\n        }\n      }\n    }\n  }\n\n  protected removeStyles(element: Element, ignoreStyles: string[]) {\n    const toRestore = ignoreStyles.reduce<[string, string][]>((toRestore, name) => {\n      const styleProp = element.getStyle(name)\n\n      if (!styleProp.hasValue()) {\n        return toRestore\n      }\n\n      const value = styleProp.getString()\n\n      styleProp.setValue('')\n\n      return [...toRestore, [name, value]]\n    }, [])\n\n    return toRestore\n  }\n\n  protected restoreStyles(element: Element, styles: [string, string][]) {\n    styles.forEach(([name, value]) => {\n      element.getStyle(name, true).setValue(value)\n    })\n  }\n\n  isFirstChild() {\n    return this.parent?.children.indexOf(this) === 0\n  }\n}\n","import { Document } from './Document'\nimport { Element } from './Element'\n\nexport class UnknownElement extends Element {\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(`Element ${node.nodeName} not yet implemented.`)\n    }\n  }\n}\n","import { compressSpaces } from './util'\n\nfunction wrapFontFamily(fontFamily: string) {\n  const trimmed = fontFamily.trim()\n\n  return /^('|\")/.test(trimmed)\n    ? trimmed\n    : `\"${trimmed}\"`\n}\n\nfunction prepareFontFamily(fontFamily: string) {\n  return typeof process === 'undefined'\n    ? fontFamily\n    : fontFamily\n      .trim()\n      .split(',')\n      .map(wrapFontFamily)\n      .join(',')\n}\n\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\n * @param fontStyle\n * @returns CSS font style.\n */\nfunction prepareFontStyle(fontStyle: string) {\n  if (!fontStyle) {\n    return ''\n  }\n\n  const targetFontStyle = fontStyle.trim().toLowerCase()\n\n  switch (targetFontStyle) {\n    case 'normal':\n    case 'italic':\n    case 'oblique':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontStyle\n\n    default:\n\n      if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n        return targetFontStyle\n      }\n\n      return ''\n  }\n}\n\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n * @param fontWeight\n * @returns CSS font weight.\n */\nfunction prepareFontWeight(fontWeight: string) {\n  if (!fontWeight) {\n    return ''\n  }\n\n  const targetFontWeight = fontWeight.trim().toLowerCase()\n\n  switch (targetFontWeight) {\n    case 'normal':\n    case 'bold':\n    case 'lighter':\n    case 'bolder':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontWeight\n\n    default:\n\n      if (/^[\\d.]+$/.test(targetFontWeight)) {\n        return targetFontWeight\n      }\n\n      return ''\n  }\n}\n\nexport class Font {\n  static parse(\n    font = '',\n    inherit?: string | Font\n  ) {\n    let fontStyle = ''\n    let fontVariant = ''\n    let fontWeight = ''\n    let fontSize = ''\n    let fontFamily = ''\n    const parts = compressSpaces(font).trim().split(' ')\n    const set = {\n      fontSize: false,\n      fontStyle: false,\n      fontWeight: false,\n      fontVariant: false\n    }\n\n    parts.forEach((part) => {\n      switch (true) {\n        case !set.fontStyle && Font.styles.includes(part):\n\n          if (part !== 'inherit') {\n            fontStyle = part\n          }\n\n          set.fontStyle = true\n          break\n\n        case !set.fontVariant && Font.variants.includes(part):\n\n          if (part !== 'inherit') {\n            fontVariant = part\n          }\n\n          set.fontStyle = true\n          set.fontVariant = true\n          break\n\n        case !set.fontWeight && Font.weights.includes(part):\n\n          if (part !== 'inherit') {\n            fontWeight = part\n          }\n\n          set.fontStyle = true\n          set.fontVariant = true\n          set.fontWeight = true\n          break\n\n        case !set.fontSize:\n\n          if (part !== 'inherit') {\n            fontSize = part.split('/')[0] || ''\n          }\n\n          set.fontStyle = true\n          set.fontVariant = true\n          set.fontWeight = true\n          set.fontSize = true\n          break\n\n        default:\n\n          if (part !== 'inherit') {\n            fontFamily += part\n          }\n      }\n    })\n\n    return new Font(\n      fontStyle,\n      fontVariant,\n      fontWeight,\n      fontSize,\n      fontFamily,\n      inherit\n    )\n  }\n\n  static readonly styles = 'normal|italic|oblique|inherit'\n  static readonly variants = 'normal|small-caps|inherit'\n  static readonly weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit'\n\n  readonly fontFamily: string\n  readonly fontSize: string\n  readonly fontStyle: string\n  readonly fontWeight: string\n  readonly fontVariant: string\n\n  constructor(\n    fontStyle: string,\n    fontVariant: string,\n    fontWeight: string,\n    fontSize: string,\n    fontFamily: string,\n    inherit?: string | Font\n  ) {\n    const inheritFont = inherit\n      ? typeof inherit === 'string'\n        ? Font.parse(inherit)\n        : inherit\n      : {} as Font\n\n    this.fontFamily = fontFamily || inheritFont.fontFamily\n    this.fontSize = fontSize || inheritFont.fontSize\n    this.fontStyle = fontStyle || inheritFont.fontStyle\n    this.fontWeight = fontWeight || inheritFont.fontWeight\n    this.fontVariant = fontVariant || inheritFont.fontVariant\n  }\n\n  toString() {\n    return [\n      prepareFontStyle(this.fontStyle),\n      this.fontVariant,\n      prepareFontWeight(this.fontWeight),\n      this.fontSize,\n      // Wrap fontFamily only on nodejs and only for canvas.ctx\n      prepareFontFamily(this.fontFamily)\n    ].join(' ').trim()\n  }\n}\n","\nexport class BoundingBox {\n  constructor(\n    public x1 = Number.NaN,\n    public y1 = Number.NaN,\n    public x2 = Number.NaN,\n    public y2 = Number.NaN\n  ) {\n    this.addPoint(x1, y1)\n    this.addPoint(x2, y2)\n  }\n\n  get x() {\n    return this.x1\n  }\n\n  get y() {\n    return this.y1\n  }\n\n  get width() {\n    return this.x2 - this.x1\n  }\n\n  get height() {\n    return this.y2 - this.y1\n  }\n\n  addPoint(x: number | undefined, y: number | undefined) {\n    if (typeof x !== 'undefined') {\n      if (isNaN(this.x1) || isNaN(this.x2)) {\n        this.x1 = x\n        this.x2 = x\n      }\n\n      if (x < this.x1) {\n        this.x1 = x\n      }\n\n      if (x > this.x2) {\n        this.x2 = x\n      }\n    }\n\n    if (typeof y !== 'undefined') {\n      if (isNaN(this.y1) || isNaN(this.y2)) {\n        this.y1 = y\n        this.y2 = y\n      }\n\n      if (y < this.y1) {\n        this.y1 = y\n      }\n\n      if (y > this.y2) {\n        this.y2 = y\n      }\n    }\n  }\n\n  addX(x: number) {\n    this.addPoint(x, 0)\n  }\n\n  addY(y: number) {\n    this.addPoint(0, y)\n  }\n\n  addBoundingBox(boundingBox: BoundingBox | null) {\n    if (!boundingBox) {\n      return\n    }\n\n    const {\n      x1,\n      y1,\n      x2,\n      y2\n    } = boundingBox\n\n    this.addPoint(x1, y1)\n    this.addPoint(x2, y2)\n  }\n\n  private sumCubic(\n    t: number,\n    p0: number,\n    p1: number,\n    p2: number,\n    p3: number\n  ) {\n    return (\n      Math.pow(1 - t, 3) * p0\n      + 3 * Math.pow(1 - t, 2) * t * p1\n      + 3 * (1 - t) * Math.pow(t, 2) * p2\n      + Math.pow(t, 3) * p3\n    )\n  }\n\n  private bezierCurveAdd(\n    forX: boolean,\n    p0: number,\n    p1: number,\n    p2: number,\n    p3: number\n  ) {\n    const b = 6 * p0 - 12 * p1 + 6 * p2\n    const a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3\n    const c = 3 * p1 - 3 * p0\n\n    if (a === 0) {\n      if (b === 0) {\n        return\n      }\n\n      const t = -c / b\n\n      if (0 < t && t < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t, p0, p1, p2, p3))\n        } else {\n          this.addY(this.sumCubic(t, p0, p1, p2, p3))\n        }\n      }\n\n      return\n    }\n\n    const b2ac = Math.pow(b, 2) - 4 * c * a\n\n    if (b2ac < 0) {\n      return\n    }\n\n    const t1 = (-b + Math.sqrt(b2ac)) / (2 * a)\n\n    if (0 < t1 && t1 < 1) {\n      if (forX) {\n        this.addX(\n          this.sumCubic(t1, p0, p1, p2, p3)\n        )\n      } else {\n        this.addY(\n          this.sumCubic(t1, p0, p1, p2, p3)\n        )\n      }\n    }\n\n    const t2 = (-b - Math.sqrt(b2ac)) / (2 * a)\n\n    if (0 < t2 && t2 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t2, p0, p1, p2, p3))\n      } else {\n        this.addY(this.sumCubic(t2, p0, p1, p2, p3))\n      }\n    }\n  }\n\n  // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n  addBezierCurve(\n    p0x: number,\n    p0y: number,\n    p1x: number,\n    p1y: number,\n    p2x: number,\n    p2y: number,\n    p3x: number,\n    p3y: number\n  ) {\n    this.addPoint(p0x, p0y)\n    this.addPoint(p3x, p3y)\n    this.bezierCurveAdd(true, p0x, p1x, p2x, p3x)\n    this.bezierCurveAdd(false, p0y, p1y, p2y, p3y)\n  }\n\n  addQuadraticCurve(\n    p0x: number,\n    p0y: number,\n    p1x: number,\n    p1y: number,\n    p2x: number,\n    p2y: number\n  ) {\n    const cp1x = p0x + 2 / 3 * (p1x - p0x) // CP1 = QP0 + 2/3 *(QP1-QP0)\n    const cp1y = p0y + 2 / 3 * (p1y - p0y) // CP1 = QP0 + 2/3 *(QP1-QP0)\n    const cp2x = cp1x + 1 / 3 * (p2x - p0x) // CP2 = CP1 + 1/3 *(QP2-QP0)\n    const cp2y = cp1y + 1 / 3 * (p2y - p0y) // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y)\n  }\n\n  isPointInBox(\n    x: number,\n    y: number\n  ) {\n    const {\n      x1,\n      y1,\n      x2,\n      y2\n    } = this\n\n    return (\n      x1 <= x\n      && x <= x2\n      && y1 <= y\n      && y <= y2\n    )\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport {\n  PSEUDO_ZERO,\n  toNumbers\n} from '../util'\nimport { Font } from '../Font'\nimport { Property } from '../Property'\nimport { Element } from './Element'\n\nexport abstract class RenderedElement extends Element {\n  private modifiedEmSizeStack = false\n\n  protected calculateOpacity() {\n    let opacity = 1.0\n    // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n    let element: Element | null = this\n\n    while (element) {\n      const opacityStyle = element.getStyle('opacity', false, true) // no ancestors on style call\n\n      if (opacityStyle.hasValue(true)) {\n        opacity *= opacityStyle.getNumber()\n      }\n\n      element = element.parent\n    }\n\n    return opacity\n  }\n\n  override setContext(ctx: RenderingContext2D, fromMeasure = false) {\n    if (!fromMeasure) { // causes stack overflow when measuring text with gradients\n      // fill\n      const fillStyleProp = this.getStyle('fill')\n      const fillOpacityStyleProp = this.getStyle('fill-opacity')\n      const strokeStyleProp = this.getStyle('stroke')\n      const strokeOpacityProp = this.getStyle('stroke-opacity')\n\n      if (fillStyleProp.isUrlDefinition()) {\n        const fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp)\n\n        if (fillStyle) {\n          ctx.fillStyle = fillStyle\n        }\n      } else\n      if (fillStyleProp.hasValue()) {\n        if (fillStyleProp.getString() === 'currentColor') {\n          fillStyleProp.setValue(this.getStyle('color').getColor())\n        }\n\n        const fillStyle = fillStyleProp.getColor()\n\n        if (fillStyle !== 'inherit') {\n          ctx.fillStyle = fillStyle === 'none'\n            ? 'rgba(0,0,0,0)'\n            : fillStyle\n        }\n      }\n\n      if (fillOpacityStyleProp.hasValue()) {\n        const fillStyle = new Property(this.document, 'fill', ctx.fillStyle)\n          .addOpacity(fillOpacityStyleProp)\n          .getColor()\n\n        ctx.fillStyle = fillStyle\n      }\n\n      // stroke\n      if (strokeStyleProp.isUrlDefinition()) {\n        const strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp)\n\n        if (strokeStyle) {\n          ctx.strokeStyle = strokeStyle\n        }\n      } else\n      if (strokeStyleProp.hasValue()) {\n        if (strokeStyleProp.getString() === 'currentColor') {\n          strokeStyleProp.setValue(this.getStyle('color').getColor())\n        }\n\n        const strokeStyle = strokeStyleProp.getString()\n\n        if (strokeStyle !== 'inherit') {\n          ctx.strokeStyle = strokeStyle === 'none'\n            ? 'rgba(0,0,0,0)'\n            : strokeStyle\n        }\n      }\n\n      if (strokeOpacityProp.hasValue()) {\n        const strokeStyle = new Property(this.document, 'stroke', ctx.strokeStyle)\n          .addOpacity(strokeOpacityProp)\n          .getString()\n\n        ctx.strokeStyle = strokeStyle\n      }\n\n      const strokeWidthStyleProp = this.getStyle('stroke-width')\n\n      if (strokeWidthStyleProp.hasValue()) {\n        const newLineWidth = strokeWidthStyleProp.getPixels()\n\n        ctx.lineWidth = !newLineWidth\n          ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n          : newLineWidth\n      }\n\n      const strokeLinecapStyleProp = this.getStyle('stroke-linecap')\n      const strokeLinejoinStyleProp = this.getStyle('stroke-linejoin')\n      const strokeMiterlimitProp = this.getStyle('stroke-miterlimit')\n      // NEED TEST\n      // const pointOrderStyleProp = this.getStyle('paint-order');\n      const strokeDasharrayStyleProp = this.getStyle('stroke-dasharray')\n      const strokeDashoffsetProp = this.getStyle('stroke-dashoffset')\n\n      if (strokeLinecapStyleProp.hasValue()) {\n        ctx.lineCap = strokeLinecapStyleProp.getString() as CanvasLineCap\n      }\n\n      if (strokeLinejoinStyleProp.hasValue()) {\n        ctx.lineJoin = strokeLinejoinStyleProp.getString() as CanvasLineJoin\n      }\n\n      if (strokeMiterlimitProp.hasValue()) {\n        ctx.miterLimit = strokeMiterlimitProp.getNumber()\n      }\n\n      // NEED TEST\n      // if (pointOrderStyleProp.hasValue()) {\n      //   // ?\n      //   ctx.paintOrder = pointOrderStyleProp.getValue();\n      // }\n\n      if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n        const gaps = toNumbers(strokeDasharrayStyleProp.getString())\n\n        if (typeof ctx.setLineDash !== 'undefined') {\n          ctx.setLineDash(gaps)\n        } else\n        // @ts-expect-error Handle browser prefix.\n        if (typeof ctx.webkitLineDash !== 'undefined') {\n          // @ts-expect-error Handle browser prefix.\n          ctx.webkitLineDash = gaps\n        } else\n        // @ts-expect-error Handle browser prefix.\n        if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n          // @ts-expect-error Handle browser prefix.\n          ctx.mozDash = gaps\n        }\n\n        const offset = strokeDashoffsetProp.getPixels()\n\n        if (typeof ctx.lineDashOffset !== 'undefined') {\n          ctx.lineDashOffset = offset\n        } else\n        // @ts-expect-error Handle browser prefix.\n        if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n          // @ts-expect-error Handle browser prefix.\n          ctx.webkitLineDashOffset = offset\n        } else\n        // @ts-expect-error Handle browser prefix.\n        if (typeof ctx.mozDashOffset !== 'undefined') {\n          // @ts-expect-error Handle browser prefix.\n          ctx.mozDashOffset = offset\n        }\n      }\n    }\n\n    // font\n    this.modifiedEmSizeStack = false\n\n    if (typeof ctx.font !== 'undefined') {\n      const fontStyleProp = this.getStyle('font')\n      const fontStyleStyleProp = this.getStyle('font-style')\n      const fontVariantStyleProp = this.getStyle('font-variant')\n      const fontWeightStyleProp = this.getStyle('font-weight')\n      const fontSizeStyleProp = this.getStyle('font-size')\n      const fontFamilyStyleProp = this.getStyle('font-family')\n      const font = new Font(\n        fontStyleStyleProp.getString(),\n        fontVariantStyleProp.getString(),\n        fontWeightStyleProp.getString(),\n        fontSizeStyleProp.hasValue()\n          ? `${fontSizeStyleProp.getPixels(true)}px`\n          : '',\n        fontFamilyStyleProp.getString(),\n        Font.parse(\n          fontStyleProp.getString(),\n          ctx.font\n        )\n      )\n\n      fontStyleStyleProp.setValue(font.fontStyle)\n      fontVariantStyleProp.setValue(font.fontVariant)\n      fontWeightStyleProp.setValue(font.fontWeight)\n      fontSizeStyleProp.setValue(font.fontSize)\n      fontFamilyStyleProp.setValue(font.fontFamily)\n\n      ctx.font = font.toString()\n\n      if (fontSizeStyleProp.isPixels()) {\n        this.document.emSize = fontSizeStyleProp.getPixels()\n        this.modifiedEmSizeStack = true\n      }\n    }\n\n    if (!fromMeasure) {\n      // effects\n      this.applyEffects(ctx)\n      // opacity\n      ctx.globalAlpha = this.calculateOpacity()\n    }\n  }\n\n  override clearContext(ctx: RenderingContext2D) {\n    super.clearContext(ctx)\n\n    if (this.modifiedEmSizeStack) {\n      this.document.popEmSize()\n    }\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport {\n  toNumbers,\n  compressSpaces,\n  trimLeft,\n  trimRight\n} from '../util'\nimport { Font } from '../Font'\nimport { BoundingBox } from '../BoundingBox'\nimport { Document } from './Document'\nimport { Element } from './Element'\nimport { FontElement } from './FontElement'\nimport { ArabicForm, GlyphElement } from './GlyphElement'\nimport { RenderedElement } from './RenderedElement'\n\nexport class TextElement extends RenderedElement {\n  override type = 'text'\n  protected x = 0\n  protected y = 0\n  private leafTexts: TextElement[] = []\n  private textChunkStart = 0\n  private minX = Number.POSITIVE_INFINITY\n  private maxX = Number.NEGATIVE_INFINITY\n  private measureCache = -1\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(\n      document,\n      node,\n      new.target === TextElement\n        ? true\n        : captureTextNodes\n    )\n  }\n\n  override setContext(ctx: RenderingContext2D, fromMeasure = false) {\n    super.setContext(ctx, fromMeasure)\n\n    const textBaseline = this.getStyle('dominant-baseline').getTextBaseline()\n      || this.getStyle('alignment-baseline').getTextBaseline()\n\n    if (textBaseline) {\n      ctx.textBaseline = textBaseline as CanvasTextBaseline\n    }\n  }\n\n  protected initializeCoordinates() {\n    this.x = 0\n    this.y = 0\n    this.leafTexts = []\n    this.textChunkStart = 0\n    this.minX = Number.POSITIVE_INFINITY\n    this.maxX = Number.NEGATIVE_INFINITY\n  }\n\n  getBoundingBox(ctx: RenderingContext2D) {\n    if (this.type !== 'text') {\n      return this.getTElementBoundingBox(ctx)\n    }\n\n    // first, calculate child positions\n    this.initializeCoordinates()\n    this.adjustChildCoordinatesRecursive(ctx)\n\n    let boundingBox: BoundingBox | null = null\n\n    // then calculate bounding box\n    this.children.forEach((_, i) => {\n      const childBoundingBox = this.getChildBoundingBox(ctx, this, this, i)\n\n      if (!boundingBox) {\n        boundingBox = childBoundingBox\n      } else {\n        boundingBox.addBoundingBox(childBoundingBox)\n      }\n    })\n\n    return boundingBox\n  }\n\n  protected getFontSize() {\n    const {\n      document,\n      parent\n    } = this\n    const inheritFontSize = Font.parse(document.ctx.font).fontSize\n    const fontSize = parent.getStyle('font-size').getNumber(inheritFontSize)\n\n    return fontSize\n  }\n\n  protected getTElementBoundingBox(ctx: RenderingContext2D) {\n    const fontSize = this.getFontSize()\n\n    return new BoundingBox(\n      this.x,\n      this.y - fontSize,\n      this.x + this.measureText(ctx),\n      this.y\n    )\n  }\n\n  getGlyph(\n    font: FontElement,\n    text: string,\n    i: number\n  ) {\n    const char = text[i]\n    let glyph: GlyphElement | undefined\n\n    if (font.isArabic) {\n      const len = text.length\n      const prevChar = text[i - 1]\n      const nextChar = text[i + 1]\n      let arabicForm: ArabicForm = 'isolated'\n\n      if ((i === 0 || prevChar === ' ') && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'terminal'\n      }\n\n      if (i > 0 && prevChar !== ' ' && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'medial'\n      }\n\n      if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n        arabicForm = 'initial'\n      }\n\n      glyph = font.arabicGlyphs[char]?.[arabicForm] || font.glyphs[char]\n    } else {\n      glyph = font.glyphs[char]\n    }\n\n    if (!glyph) {\n      glyph = font.missingGlyph\n    }\n\n    return glyph\n  }\n\n  getText() {\n    return ''\n  }\n\n  protected getTextFromNode(node?: ChildNode) {\n    const textNode = node || this.node\n    const childNodes = Array.from(textNode.parentNode.childNodes)\n    const index = childNodes.indexOf(textNode)\n    const lastIndex = childNodes.length - 1\n    let text = compressSpaces(\n      // textNode.value\n      // || textNode.text\n      textNode.textContent\n      || ''\n    )\n\n    if (index === 0) {\n      text = trimLeft(text)\n    }\n\n    if (index === lastIndex) {\n      text = trimRight(text)\n    }\n\n    return text\n  }\n\n  override renderChildren(ctx: RenderingContext2D) {\n    if (this.type !== 'text') {\n      this.renderTElementChildren(ctx)\n      return\n    }\n\n    // first, calculate child positions\n    this.initializeCoordinates()\n    this.adjustChildCoordinatesRecursive(ctx)\n\n    // then render\n    this.children.forEach((_, i) => {\n      this.renderChild(ctx, this, this, i)\n    })\n\n    const { mouse } = this.document.screen\n\n    // Do not calc bounding box if mouse is not working.\n    if (mouse.isWorking()) {\n      mouse.checkBoundingBox(\n        this,\n        this.getBoundingBox(ctx)\n      )\n    }\n  }\n\n  protected renderTElementChildren(ctx: RenderingContext2D) {\n    const {\n      document,\n      parent\n    } = this\n    const renderText = this.getText()\n    const customFont = parent.getStyle('font-family').getDefinition<FontElement>()\n\n    if (customFont) {\n      const { unitsPerEm } = customFont.fontFace\n      const ctxFont = Font.parse(document.ctx.font)\n      const fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize)\n      const fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle)\n      const scale = fontSize / unitsPerEm\n      const text = customFont.isRTL\n        ? renderText.split('').reverse().join('')\n        : renderText\n      const dx = toNumbers(parent.getAttribute('dx').getString())\n      const len = text.length\n\n      for (let i = 0; i < len; i++) {\n        const glyph = this.getGlyph(customFont, text, i)\n\n        ctx.translate(this.x, this.y)\n        ctx.scale(scale, -scale)\n\n        const lw = ctx.lineWidth\n\n        ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize\n\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, .4, 1, 0, 0)\n        }\n\n        glyph.render(ctx)\n\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, -.4, 1, 0, 0)\n        }\n\n        ctx.lineWidth = lw\n        ctx.scale(1 / scale, -1 / scale)\n        ctx.translate(-this.x, -this.y)\n\n        this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm\n\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          this.x += dx[i]\n        }\n      }\n\n      return\n    }\n\n    const {\n      x,\n      y\n    } = this\n\n    // NEED TEST\n    // if (ctx.paintOrder === 'stroke') {\n    //   if (ctx.strokeStyle) {\n    //     ctx.strokeText(renderText, x, y);\n    //   }\n\n    //   if (ctx.fillStyle) {\n    //     ctx.fillText(renderText, x, y);\n    //   }\n    // } else {\n    if (ctx.fillStyle) {\n      ctx.fillText(renderText, x, y)\n    }\n\n    if (ctx.strokeStyle) {\n      ctx.strokeText(renderText, x, y)\n    }\n    // }\n  }\n\n  protected applyAnchoring() {\n    if (this.textChunkStart >= this.leafTexts.length) {\n      return\n    }\n\n    // This is basically the \"Apply anchoring\" part of https://www.w3.org/TR/SVG2/text.html#TextLayoutAlgorithm.\n    // The difference is that we apply the anchoring as soon as a chunk is finished. This saves some extra looping.\n    // Vertical text is not supported.\n\n    const firstElement = this.leafTexts[this.textChunkStart]\n    const textAnchor = firstElement.getStyle('text-anchor').getString('start')\n    const isRTL = false // we treat RTL like LTR\n    let shift = 0\n\n    if (textAnchor === 'start' && !isRTL || textAnchor === 'end' && isRTL) {\n      shift = firstElement.x - this.minX\n    } else if (textAnchor === 'end' && !isRTL || textAnchor === 'start' && isRTL) {\n      shift = firstElement.x - this.maxX\n    } else {\n      shift = firstElement.x - (this.minX + this.maxX) / 2\n    }\n\n    for (let i = this.textChunkStart; i < this.leafTexts.length; i++) {\n      this.leafTexts[i].x += shift\n    }\n\n    // start new chunk\n    this.minX = Number.POSITIVE_INFINITY\n    this.maxX = Number.NEGATIVE_INFINITY\n    this.textChunkStart = this.leafTexts.length\n  }\n\n  protected adjustChildCoordinatesRecursive(ctx: RenderingContext2D) {\n    this.children.forEach((_, i) => {\n      this.adjustChildCoordinatesRecursiveCore(ctx, this, this, i)\n    })\n    this.applyAnchoring()\n  }\n\n  protected adjustChildCoordinatesRecursiveCore(\n    ctx: RenderingContext2D,\n    textParent: TextElement,\n    parent: Element,\n    i: number\n  ): void {\n    const child = parent.children[i] as TextElement\n\n    if (child.children.length > 0) {\n      child.children.forEach((_, i) => {\n        textParent.adjustChildCoordinatesRecursiveCore(ctx, textParent, child, i)\n      })\n    } else {\n      // only leafs are relevant\n      this.adjustChildCoordinates(ctx, textParent, parent, i)\n    }\n  }\n\n  protected adjustChildCoordinates(\n    ctx: RenderingContext2D,\n    textParent: TextElement,\n    parent: Element,\n    i: number\n  ) {\n    const child = parent.children[i] as TextElement\n\n    if (typeof child.measureText !== 'function') {\n      return child\n    }\n\n    ctx.save()\n    child.setContext(ctx, true)\n\n    const xAttr = child.getAttribute('x')\n    const yAttr = child.getAttribute('y')\n    const dxAttr = child.getAttribute('dx')\n    const dyAttr = child.getAttribute('dy')\n    const customFont = child.getStyle('font-family').getDefinition<FontElement>()\n    const isRTL = Boolean(customFont?.isRTL)\n\n    if (i === 0) {\n      // First children inherit attributes from parent(s). Positional attributes\n      // are only inherited from a parent to it's first child.\n      if (!xAttr.hasValue()) {\n        xAttr.setValue(child.getInheritedAttribute('x'))\n      }\n\n      if (!yAttr.hasValue()) {\n        yAttr.setValue(child.getInheritedAttribute('y'))\n      }\n\n      if (!dxAttr.hasValue()) {\n        dxAttr.setValue(child.getInheritedAttribute('dx'))\n      }\n\n      if (!dyAttr.hasValue()) {\n        dyAttr.setValue(child.getInheritedAttribute('dy'))\n      }\n    }\n\n    const width = child.measureText(ctx)\n\n    if (isRTL) {\n      textParent.x -= width\n    }\n\n    if (xAttr.hasValue()) {\n      // an \"x\" attribute marks the start of a new chunk\n      textParent.applyAnchoring()\n\n      child.x = xAttr.getPixels('x')\n\n      if (dxAttr.hasValue()) {\n        child.x += dxAttr.getPixels('x')\n      }\n    } else {\n      if (dxAttr.hasValue()) {\n        textParent.x += dxAttr.getPixels('x')\n      }\n\n      child.x = textParent.x\n    }\n\n    textParent.x = child.x\n\n    if (!isRTL) {\n      textParent.x += width\n    }\n\n    if (yAttr.hasValue()) {\n      child.y = yAttr.getPixels('y')\n\n      if (dyAttr.hasValue()) {\n        child.y += dyAttr.getPixels('y')\n      }\n    } else {\n      if (dyAttr.hasValue()) {\n        textParent.y += dyAttr.getPixels('y')\n      }\n\n      child.y = textParent.y\n    }\n\n    textParent.y = child.y\n\n    // update the current chunk and it's bounds\n    textParent.leafTexts.push(child)\n    textParent.minX = Math.min(textParent.minX, child.x, child.x + width)\n    textParent.maxX = Math.max(textParent.maxX, child.x, child.x + width)\n\n    child.clearContext(ctx)\n    ctx.restore()\n\n    return child\n  }\n\n  protected getChildBoundingBox(\n    ctx: RenderingContext2D,\n    textParent: TextElement,\n    parent: Element,\n    i: number\n  ) {\n    const child = parent.children[i] as TextElement\n\n    // not a text node?\n    if (typeof child.getBoundingBox !== 'function') {\n      return null\n    }\n\n    const boundingBox = child.getBoundingBox(ctx)\n\n    if (boundingBox) {\n      child.children.forEach((_, i) => {\n        const childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i)\n\n        boundingBox.addBoundingBox(childBoundingBox)\n      })\n    }\n\n    return boundingBox\n  }\n\n  protected renderChild(\n    ctx: RenderingContext2D,\n    textParent: TextElement,\n    parent: Element,\n    i: number\n  ) {\n    const child = parent.children[i] as TextElement\n\n    child.render(ctx)\n    child.children.forEach((_, i) => {\n      textParent.renderChild(ctx, textParent, child, i)\n    })\n  }\n\n  protected measureText(ctx: RenderingContext2D) {\n    const { measureCache } = this\n\n    if (~measureCache) {\n      return measureCache\n    }\n\n    const renderText = this.getText()\n    const measure = this.measureTargetText(ctx, renderText)\n\n    this.measureCache = measure\n\n    return measure\n  }\n\n  protected measureTargetText(\n    ctx: RenderingContext2D,\n    targetText: string\n  ) {\n    if (!targetText.length) {\n      return 0\n    }\n\n    const { parent } = this\n    const customFont = parent.getStyle('font-family').getDefinition<FontElement>()\n\n    if (customFont) {\n      const fontSize = this.getFontSize()\n      const text = customFont.isRTL\n        ? targetText.split('').reverse().join('')\n        : targetText\n      const dx = toNumbers(parent.getAttribute('dx').getString())\n      const len = text.length\n      let measure = 0\n\n      for (let i = 0; i < len; i++) {\n        const glyph = this.getGlyph(customFont, text, i)\n\n        measure += (glyph.horizAdvX || customFont.horizAdvX)\n          * fontSize\n          / customFont.fontFace.unitsPerEm\n\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          measure += dx[i]\n        }\n      }\n\n      return measure\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (!ctx.measureText) {\n      return targetText.length * 10\n    }\n\n    ctx.save()\n    this.setContext(ctx, true)\n\n    const { width: measure } = ctx.measureText(targetText)\n\n    this.clearContext(ctx)\n    ctx.restore()\n\n    return measure\n  }\n\n  /**\n   * Inherits positional attributes from {@link TextElement} parent(s). Attributes\n   * are only inherited from a parent to its first child.\n   * @param name - The attribute name.\n   * @returns The attribute value or null.\n   */\n  protected getInheritedAttribute(name: string): string | null {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias,consistent-this\n    let current: Element | null = this\n\n    while (current instanceof TextElement && current.isFirstChild() && current.parent) {\n      const parentAttr = current.parent.getAttribute(name)\n\n      if (parentAttr.hasValue(true)) {\n        return parentAttr.getString('0')\n      }\n\n      current = current.parent\n    }\n\n    return null\n  }\n}\n","import { Document } from './Document'\nimport { TextElement } from './TextElement'\n\nexport class TSpanElement extends TextElement {\n  override type = 'tspan'\n  protected readonly text: string\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(\n      document,\n      node,\n      new.target === TSpanElement\n        ? true\n        : captureTextNodes\n    )\n\n    // if this node has children, then they own the text\n    this.text = this.children.length > 0\n      ? ''\n      : this.getTextFromNode()\n  }\n\n  override getText() {\n    return this.text\n  }\n}\n","import { TSpanElement } from './TSpanElement'\n\nexport class TextNode extends TSpanElement {\n  override type = 'textNode'\n}\n","import {\n  SVGCommand,\n  CommandM,\n  CommandL,\n  CommandH,\n  CommandV,\n  CommandZ,\n  CommandQ,\n  CommandT,\n  CommandC,\n  CommandS,\n  CommandA\n} from 'svg-pathdata/lib/types'\nimport { SVGPathData } from 'svg-pathdata'\nimport { Point } from './Point'\n\nexport type CommandType = SVGCommand['type']\nexport type Command = { type: CommandType }\n  & Omit<CommandM, 'type'>\n  & Omit<CommandL, 'type'>\n  & Omit<CommandH, 'type'>\n  & Omit<CommandV, 'type'>\n  & Omit<CommandZ, 'type'>\n  & Omit<CommandQ, 'type'>\n  & Omit<CommandT, 'type'>\n  & Omit<CommandC, 'type'>\n  & Omit<CommandS, 'type'>\n  & Omit<CommandA, 'type'>\n\nexport class PathParser extends SVGPathData {\n  control: Point = new Point(0, 0)\n  start: Point = new Point(0, 0)\n  current: Point = new Point(0, 0)\n  command: Command | null = null\n  override readonly commands: Command[] /* Babel fix: */ = this.commands\n  private i = -1\n  private previousCommand: Command | null = null\n  private points: Point[] = []\n  private angles: (number | null)[] = []\n\n  constructor(path: string) {\n    super(\n      path\n        // Fix spaces after signs.\n        .replace(/([+\\-.])\\s+/gm, '$1')\n        // Remove invalid part.\n        .replace(/[^MmZzLlHhVvCcSsQqTtAae\\d\\s.,+-].*/g, '')\n    )\n  }\n\n  reset() {\n    this.i = -1\n    this.command = null\n    this.previousCommand = null\n    this.start = new Point(0, 0)\n    this.control = new Point(0, 0)\n    this.current = new Point(0, 0)\n    this.points = []\n    this.angles = []\n  }\n\n  isEnd() {\n    const {\n      i,\n      commands\n    } = this\n\n    return i >= commands.length - 1\n  }\n\n  next() {\n    const command = this.commands[++this.i]\n\n    this.previousCommand = this.command\n    this.command = command\n\n    return command\n  }\n\n  getPoint(xProp = 'x', yProp = 'y') {\n    const point = new Point(\n      this.command[xProp] as number,\n      this.command[yProp] as number\n    )\n\n    return this.makeAbsolute(point)\n  }\n\n  getAsControlPoint(xProp?: string, yProp?: string) {\n    const point = this.getPoint(xProp, yProp)\n\n    this.control = point\n\n    return point\n  }\n\n  getAsCurrentPoint(xProp?: string, yProp?: string) {\n    const point = this.getPoint(xProp, yProp)\n\n    this.current = point\n\n    return point\n  }\n\n  getReflectedControlPoint() {\n    const previousCommand = this.previousCommand.type\n\n    if (previousCommand !== SVGPathData.CURVE_TO\n      && previousCommand !== SVGPathData.SMOOTH_CURVE_TO\n      && previousCommand !== SVGPathData.QUAD_TO\n      && previousCommand !== SVGPathData.SMOOTH_QUAD_TO\n    ) {\n      return this.current\n    }\n\n    // reflect point\n    const {\n      current: {\n        x: cx,\n        y: cy\n      },\n      control: {\n        x: ox,\n        y: oy\n      }\n    } = this\n    const point = new Point(2 * cx - ox, 2 * cy - oy)\n\n    return point\n  }\n\n  makeAbsolute(point: Point) {\n    if (this.command.relative) {\n      const {\n        x,\n        y\n      } = this.current\n\n      point.x += x\n      point.y += y\n    }\n\n    return point\n  }\n\n  addMarker(point: Point, from?: Point, priorTo?: Point) {\n    const {\n      points,\n      angles\n    } = this\n\n    // if the last angle isn't filled in because we didn't have this point yet ...\n    if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n      angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo)\n    }\n\n    this.addMarkerAngle(point, from ? from.angleTo(point) : null)\n  }\n\n  addMarkerAngle(point: Point, angle: number) {\n    this.points.push(point)\n    this.angles.push(angle)\n  }\n\n  getMarkerPoints() {\n    return this.points\n  }\n\n  getMarkerAngles() {\n    const { angles } = this\n    const len = angles.length\n\n    for (let i = 0; i < len; i++) {\n      if (!angles[i]) {\n        for (let j = i + 1; j < len; j++) {\n          if (angles[j]) {\n            angles[i] = angles[j]\n            break\n          }\n        }\n      }\n    }\n\n    return angles\n  }\n}\n","/* eslint-disable @typescript-eslint/member-ordering */\nimport { RenderingContext2D } from '../types'\nimport {\n  vectorsRatio,\n  vectorsAngle\n} from '../util'\nimport { Point } from '../Point'\nimport { BoundingBox } from '../BoundingBox'\nimport { PathParser } from '../PathParser'\nimport { Document } from './Document'\nimport { RenderedElement } from './RenderedElement'\nimport { MarkerElement } from './MarkerElement'\n\nexport type Marker = [Point, number]\n\nexport class PathElement extends RenderedElement {\n  override type = 'path'\n  readonly pathParser: PathParser\n\n  constructor(\n    document: Document,\n    node?: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.pathParser = new PathParser(this.getAttribute('d').getString())\n  }\n\n  path(ctx?: RenderingContext2D) {\n    const { pathParser } = this\n    const boundingBox = new BoundingBox()\n\n    pathParser.reset()\n\n    if (ctx) {\n      ctx.beginPath()\n    }\n\n    while (!pathParser.isEnd()) {\n      switch (pathParser.next().type) {\n        case PathParser.MOVE_TO:\n          this.pathM(ctx, boundingBox)\n          break\n\n        case PathParser.LINE_TO:\n          this.pathL(ctx, boundingBox)\n          break\n\n        case PathParser.HORIZ_LINE_TO:\n          this.pathH(ctx, boundingBox)\n          break\n\n        case PathParser.VERT_LINE_TO:\n          this.pathV(ctx, boundingBox)\n          break\n\n        case PathParser.CURVE_TO:\n          this.pathC(ctx, boundingBox)\n          break\n\n        case PathParser.SMOOTH_CURVE_TO:\n          this.pathS(ctx, boundingBox)\n          break\n\n        case PathParser.QUAD_TO:\n          this.pathQ(ctx, boundingBox)\n          break\n\n        case PathParser.SMOOTH_QUAD_TO:\n          this.pathT(ctx, boundingBox)\n          break\n\n        case PathParser.ARC:\n          this.pathA(ctx, boundingBox)\n          break\n\n        case PathParser.CLOSE_PATH:\n          this.pathZ(ctx, boundingBox)\n          break\n\n        default:\n      }\n    }\n\n    return boundingBox\n  }\n\n  getBoundingBox(_ctx: RenderingContext2D) {\n    return this.path()\n  }\n\n  getMarkers(): Marker[] {\n    const { pathParser } = this\n    const points = pathParser.getMarkerPoints()\n    const angles = pathParser.getMarkerAngles()\n    const markers = points.map((point, i): Marker => [point, angles[i]])\n\n    return markers\n  }\n\n  override renderChildren(ctx: RenderingContext2D) {\n    this.path(ctx)\n    this.document.screen.mouse.checkPath(this, ctx)\n\n    const fillRuleStyleProp = this.getStyle('fill-rule')\n\n    if (ctx.fillStyle !== '') {\n      if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n        ctx.fill(fillRuleStyleProp.getString() as CanvasFillRule)\n      } else {\n        ctx.fill()\n      }\n    }\n\n    if (ctx.strokeStyle !== '') {\n      if (this.getAttribute('vector-effect').getString() === 'non-scaling-stroke') {\n        ctx.save()\n        ctx.setTransform(1, 0, 0, 1, 0, 0)\n        ctx.stroke()\n        ctx.restore()\n      } else {\n        ctx.stroke()\n      }\n    }\n\n    const markers = this.getMarkers()\n\n    if (markers) {\n      const markersLastIndex = markers.length - 1\n      const markerStartStyleProp = this.getStyle('marker-start')\n      const markerMidStyleProp = this.getStyle('marker-mid')\n      const markerEndStyleProp = this.getStyle('marker-end')\n\n      if (markerStartStyleProp.isUrlDefinition()) {\n        const marker = markerStartStyleProp.getDefinition<MarkerElement>()\n        const [point, angle] = markers[0]\n\n        marker.render(ctx, point, angle)\n      }\n\n      if (markerMidStyleProp.isUrlDefinition()) {\n        const marker = markerMidStyleProp.getDefinition<MarkerElement>()\n\n        for (let i = 1; i < markersLastIndex; i++) {\n          const [point, angle] = markers[i]\n\n          marker.render(ctx, point, angle)\n        }\n      }\n\n      if (markerEndStyleProp.isUrlDefinition()) {\n        const marker = markerEndStyleProp.getDefinition<MarkerElement>()\n        const [point, angle] = markers[markersLastIndex]\n\n        marker.render(ctx, point, angle)\n      }\n    }\n  }\n\n  static pathM(pathParser: PathParser) {\n    const point = pathParser.getAsCurrentPoint()\n\n    pathParser.start = pathParser.current\n\n    return {\n      point\n    }\n  }\n\n  protected pathM(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const { point } = PathElement.pathM(pathParser)\n    const {\n      x,\n      y\n    } = point\n\n    pathParser.addMarker(point)\n    boundingBox.addPoint(x, y)\n\n    if (ctx) {\n      ctx.moveTo(x, y)\n    }\n  }\n\n  static pathL(pathParser: PathParser) {\n    const { current } = pathParser\n    const point = pathParser.getAsCurrentPoint()\n\n    return {\n      current,\n      point\n    }\n  }\n\n  protected pathL(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      point\n    } = PathElement.pathL(pathParser)\n    const {\n      x,\n      y\n    } = point\n\n    pathParser.addMarker(point, current)\n    boundingBox.addPoint(x, y)\n\n    if (ctx) {\n      ctx.lineTo(x, y)\n    }\n  }\n\n  static pathH(pathParser: PathParser) {\n    const {\n      current,\n      command\n    } = pathParser\n    const point = new Point(\n      (command.relative ? current.x : 0) + command.x,\n      current.y\n    )\n\n    pathParser.current = point\n\n    return {\n      current,\n      point\n    }\n  }\n\n  protected pathH(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      point\n    } = PathElement.pathH(pathParser)\n    const {\n      x,\n      y\n    } = point\n\n    pathParser.addMarker(point, current)\n    boundingBox.addPoint(x, y)\n\n    if (ctx) {\n      ctx.lineTo(x, y)\n    }\n  }\n\n  static pathV(pathParser: PathParser) {\n    const {\n      current,\n      command\n    } = pathParser\n    const point = new Point(\n      current.x,\n      (command.relative ? current.y : 0) + command.y\n    )\n\n    pathParser.current = point\n\n    return {\n      current,\n      point\n    }\n  }\n\n  protected pathV(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      point\n    } = PathElement.pathV(pathParser)\n    const {\n      x,\n      y\n    } = point\n\n    pathParser.addMarker(point, current)\n    boundingBox.addPoint(x, y)\n\n    if (ctx) {\n      ctx.lineTo(x, y)\n    }\n  }\n\n  static pathC(pathParser: PathParser) {\n    const { current } = pathParser\n    const point = pathParser.getPoint('x1', 'y1')\n    const controlPoint = pathParser.getAsControlPoint('x2', 'y2')\n    const currentPoint = pathParser.getAsCurrentPoint()\n\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    }\n  }\n\n  protected pathC(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser)\n\n    pathParser.addMarker(currentPoint, controlPoint, point)\n    boundingBox.addBezierCurve(\n      current.x,\n      current.y,\n      point.x,\n      point.y,\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n\n    if (ctx) {\n      ctx.bezierCurveTo(\n        point.x,\n        point.y,\n        controlPoint.x,\n        controlPoint.y,\n        currentPoint.x,\n        currentPoint.y\n      )\n    }\n  }\n\n  static pathS(pathParser: PathParser) {\n    const { current } = pathParser\n    const point = pathParser.getReflectedControlPoint()\n    const controlPoint = pathParser.getAsControlPoint('x2', 'y2')\n    const currentPoint = pathParser.getAsCurrentPoint()\n\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    }\n  }\n\n  protected pathS(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser)\n\n    pathParser.addMarker(currentPoint, controlPoint, point)\n    boundingBox.addBezierCurve(\n      current.x,\n      current.y,\n      point.x,\n      point.y,\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n\n    if (ctx) {\n      ctx.bezierCurveTo(\n        point.x,\n        point.y,\n        controlPoint.x,\n        controlPoint.y,\n        currentPoint.x,\n        currentPoint.y\n      )\n    }\n  }\n\n  static pathQ(pathParser: PathParser) {\n    const { current } = pathParser\n    const controlPoint = pathParser.getAsControlPoint('x1', 'y1')\n    const currentPoint = pathParser.getAsCurrentPoint()\n\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    }\n  }\n\n  protected pathQ(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser)\n\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint)\n    boundingBox.addQuadraticCurve(\n      current.x,\n      current.y,\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n\n    if (ctx) {\n      ctx.quadraticCurveTo(\n        controlPoint.x,\n        controlPoint.y,\n        currentPoint.x,\n        currentPoint.y\n      )\n    }\n  }\n\n  static pathT(pathParser: PathParser) {\n    const { current } = pathParser\n    const controlPoint = pathParser.getReflectedControlPoint()\n\n    pathParser.control = controlPoint\n\n    const currentPoint = pathParser.getAsCurrentPoint()\n\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    }\n  }\n\n  protected pathT(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser)\n\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint)\n    boundingBox.addQuadraticCurve(\n      current.x,\n      current.y,\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n\n    if (ctx) {\n      ctx.quadraticCurveTo(\n        controlPoint.x,\n        controlPoint.y,\n        currentPoint.x,\n        currentPoint.y\n      )\n    }\n  }\n\n  static pathA(pathParser: PathParser) {\n    const {\n      current,\n      command\n    } = pathParser\n    let {\n      rX,\n      rY,\n      xRot,\n      lArcFlag,\n      sweepFlag\n    } = command\n    const xAxisRotation = xRot * (Math.PI / 180.0)\n    const currentPoint = pathParser.getAsCurrentPoint()\n    // Conversion from endpoint to center parameterization\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    // x1', y1'\n    const currp = new Point(\n      Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0\n      + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0,\n      -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0\n      + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0\n    )\n    // adjust radii\n    const l =\n      Math.pow(currp.x, 2) / Math.pow(rX, 2)\n      + Math.pow(currp.y, 2) / Math.pow(rY, 2)\n\n    if (l > 1) {\n      rX *= Math.sqrt(l)\n      rY *= Math.sqrt(l)\n    }\n\n    // cx', cy'\n    let s = (lArcFlag === sweepFlag ? -1 : 1) * Math.sqrt(\n      (\n        (Math.pow(rX, 2) * Math.pow(rY, 2))\n        - (Math.pow(rX, 2) * Math.pow(currp.y, 2))\n        - (Math.pow(rY, 2) * Math.pow(currp.x, 2))\n      ) / (\n        Math.pow(rX, 2) * Math.pow(currp.y, 2)\n        + Math.pow(rY, 2) * Math.pow(currp.x, 2)\n      )\n    )\n\n    if (isNaN(s)) {\n      s = 0\n    }\n\n    const cpp = new Point(\n      s * rX * currp.y / rY,\n      s * -rY * currp.x / rX\n    )\n    // cx, cy\n    const centp = new Point(\n      (current.x + currentPoint.x) / 2.0\n      + Math.cos(xAxisRotation) * cpp.x\n      - Math.sin(xAxisRotation) * cpp.y,\n      (current.y + currentPoint.y) / 2.0\n      + Math.sin(xAxisRotation) * cpp.x\n      + Math.cos(xAxisRotation) * cpp.y\n    )\n    // initial angle\n    const a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY]) // 1\n    // angle delta\n    const u = [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY] as const\n    const v = [(-currp.x - cpp.x) / rX, (-currp.y - cpp.y) / rY] as const\n    let ad = vectorsAngle(u, v) // \n\n    if (vectorsRatio(u, v) <= -1) {\n      ad = Math.PI\n    }\n\n    if (vectorsRatio(u, v) >= 1) {\n      ad = 0\n    }\n\n    return {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    }\n  }\n\n  protected pathA(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    const { pathParser } = this\n    const {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser)\n    // for markers\n    const dir = 1 - sweepFlag ? 1.0 : -1.0\n    const ah = a1 + dir * (ad / 2.0)\n    const halfWay = new Point(\n      centp.x + rX * Math.cos(ah),\n      centp.y + rY * Math.sin(ah)\n    )\n\n    pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2)\n    pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI)\n    boundingBox.addPoint(currentPoint.x, currentPoint.y) // TODO: this is too naive, make it better\n\n    if (ctx && !isNaN(a1) && !isNaN(ad)) {\n      const r = rX > rY ? rX : rY\n      const sx = rX > rY ? 1 : rX / rY\n      const sy = rX > rY ? rY / rX : 1\n\n      ctx.translate(centp.x, centp.y)\n      ctx.rotate(xAxisRotation)\n      ctx.scale(sx, sy)\n      ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag))\n      ctx.scale(1 / sx, 1 / sy)\n      ctx.rotate(-xAxisRotation)\n      ctx.translate(-centp.x, -centp.y)\n    }\n  }\n\n  static pathZ(pathParser: PathParser) {\n    pathParser.current = pathParser.start\n  }\n\n  protected pathZ(\n    ctx: RenderingContext2D | undefined,\n    boundingBox: BoundingBox\n  ) {\n    PathElement.pathZ(this.pathParser)\n\n    if (ctx) {\n      // only close path if it is not a straight line\n      if (boundingBox.x1 !== boundingBox.x2\n        && boundingBox.y1 !== boundingBox.y2\n      ) {\n        ctx.closePath()\n      }\n    }\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { toNumbers } from '../util'\nimport { Property } from '../Property'\nimport { Font } from '../Font'\nimport { RenderedElement } from './RenderedElement'\n\nexport class SVGElement extends RenderedElement {\n  override type = 'svg'\n  root = false\n\n  override setContext(ctx: RenderingContext2D) {\n    const { document } = this\n    const {\n      screen,\n      window\n    } = document\n    const canvas = ctx.canvas\n\n    screen.setDefaults(ctx)\n\n    if ('style' in canvas\n      && typeof ctx.font !== 'undefined'\n      && window\n      && typeof window.getComputedStyle !== 'undefined'\n    ) {\n      ctx.font = window.getComputedStyle(canvas).getPropertyValue('font')\n\n      const fontSizeProp = new Property(\n        document,\n        'fontSize',\n        Font.parse(ctx.font).fontSize\n      )\n\n      if (fontSizeProp.hasValue()) {\n        document.rootEmSize = fontSizeProp.getPixels('y')\n        document.emSize = document.rootEmSize\n      }\n    }\n\n    // create new view port\n    if (!this.getAttribute('x').hasValue()) {\n      this.getAttribute('x', true).setValue(0)\n    }\n\n    if (!this.getAttribute('y').hasValue()) {\n      this.getAttribute('y', true).setValue(0)\n    }\n\n    let {\n      width,\n      height\n    } = screen.viewPort\n\n    if (!this.getStyle('width').hasValue()) {\n      this.getStyle('width', true).setValue('100%')\n    }\n\n    if (!this.getStyle('height').hasValue()) {\n      this.getStyle('height', true).setValue('100%')\n    }\n\n    if (!this.getStyle('color').hasValue()) {\n      this.getStyle('color', true).setValue('black')\n    }\n\n    const refXAttr = this.getAttribute('refX')\n    const refYAttr = this.getAttribute('refY')\n    const viewBoxAttr = this.getAttribute('viewBox')\n    const viewBox = viewBoxAttr.hasValue()\n      ? toNumbers(viewBoxAttr.getString())\n      : null\n    const clip = !this.root\n      && this.getStyle('overflow').getValue('hidden') !== 'visible'\n    let minX = 0\n    let minY = 0\n    let clipX = 0\n    let clipY = 0\n\n    if (viewBox) {\n      minX = viewBox[0]\n      minY = viewBox[1]\n    }\n\n    if (!this.root) {\n      width = this.getStyle('width').getPixels('x')\n      height = this.getStyle('height').getPixels('y')\n\n      if (this.type === 'marker') {\n        clipX = minX\n        clipY = minY\n        minX = 0\n        minY = 0\n      }\n    }\n\n    screen.viewPort.setCurrent(width, height)\n\n    // Default value of transform-origin is center only for root SVG elements\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform-origin\n    if (this.node // is not temporary SVGElement\n      && (!this.parent || this.node.parentNode?.nodeName === 'foreignObject')\n      && this.getStyle('transform', false, true).hasValue()\n      && !this.getStyle('transform-origin', false, true).hasValue()\n    ) {\n      this.getStyle('transform-origin', true, true).setValue('50% 50%')\n    }\n\n    super.setContext(ctx)\n\n    ctx.translate(\n      this.getAttribute('x').getPixels('x'),\n      this.getAttribute('y').getPixels('y')\n    )\n\n    if (viewBox) {\n      width = viewBox[2]\n      height = viewBox[3]\n    }\n\n    document.setViewBox({\n      ctx,\n      aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n      width: screen.viewPort.width,\n      desiredWidth: width,\n      height: screen.viewPort.height,\n      desiredHeight: height,\n      minX,\n      minY,\n      refX: refXAttr.getValue() as number,\n      refY: refYAttr.getValue() as number,\n      clip,\n      clipX,\n      clipY\n    })\n\n    if (viewBox) {\n      screen.viewPort.removeCurrent()\n      screen.viewPort.setCurrent(width, height)\n    }\n  }\n\n  override clearContext(ctx: RenderingContext2D) {\n    super.clearContext(ctx)\n\n    this.document.screen.viewPort.removeCurrent()\n  }\n\n  /**\n   * Resize SVG to fit in given size.\n   * @param width\n   * @param height\n   * @param preserveAspectRatio\n   */\n  resize(\n    width: number,\n    height = width,\n    preserveAspectRatio: boolean | string = false\n  ) {\n    const widthAttr = this.getAttribute('width', true)\n    const heightAttr = this.getAttribute('height', true)\n    const viewBoxAttr = this.getAttribute('viewBox')\n    const styleAttr = this.getAttribute('style')\n    const originWidth = widthAttr.getNumber(0)\n    const originHeight = heightAttr.getNumber(0)\n\n    if (preserveAspectRatio) {\n      if (typeof preserveAspectRatio === 'string') {\n        this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio)\n      } else {\n        const preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio')\n\n        if (preserveAspectRatioAttr.hasValue()) {\n          preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'))\n        }\n      }\n    }\n\n    widthAttr.setValue(width)\n    heightAttr.setValue(height)\n\n    if (!viewBoxAttr.hasValue()) {\n      viewBoxAttr.setValue(`0 0 ${originWidth || width} ${originHeight || height}`)\n    }\n\n    if (styleAttr.hasValue()) {\n      const widthStyle = this.getStyle('width')\n      const heightStyle = this.getStyle('height')\n\n      if (widthStyle.hasValue()) {\n        widthStyle.setValue(`${width}px`)\n      }\n\n      if (heightStyle.hasValue()) {\n        heightStyle.setValue(`${height}px`)\n      }\n    }\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { BoundingBox } from '../BoundingBox'\nimport { PathElement } from './PathElement'\n\nexport class RectElement extends PathElement {\n  override type = 'rect'\n\n  override path(ctx: RenderingContext2D) {\n    const x = this.getAttribute('x').getPixels('x')\n    const y = this.getAttribute('y').getPixels('y')\n    const width = this.getStyle('width', false, true).getPixels('x')\n    const height = this.getStyle('height', false, true).getPixels('y')\n    const rxAttr = this.getAttribute('rx')\n    const ryAttr = this.getAttribute('ry')\n    let rx = rxAttr.getPixels('x')\n    let ry = ryAttr.getPixels('y')\n\n    if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n      ry = rx\n    }\n\n    if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n      rx = ry\n    }\n\n    rx = Math.min(rx, width / 2.0)\n    ry = Math.min(ry, height / 2.0)\n\n    if (ctx) {\n      const KAPPA = 4 * ((Math.sqrt(2) - 1) / 3)\n\n      ctx.beginPath() // always start the path so we don't fill prior paths\n\n      if (height > 0 && width > 0) {\n        ctx.moveTo(x + rx, y)\n        ctx.lineTo(x + width - rx, y)\n        ctx.bezierCurveTo(x + width - rx + (KAPPA * rx), y, x + width, y + ry - (KAPPA * ry), x + width, y + ry)\n        ctx.lineTo(x + width, y + height - ry)\n        ctx.bezierCurveTo(\n          x + width,\n          y + height - ry + (KAPPA * ry),\n          x + width - rx + (KAPPA * rx),\n          y + height,\n          x + width - rx,\n          y + height\n        )\n        ctx.lineTo(x + rx, y + height)\n        ctx.bezierCurveTo(x + rx - (KAPPA * rx), y + height, x, y + height - ry + (KAPPA * ry), x, y + height - ry)\n        ctx.lineTo(x, y + ry)\n        ctx.bezierCurveTo(x, y + ry - (KAPPA * ry), x + rx - (KAPPA * rx), y, x + rx, y)\n        ctx.closePath()\n      }\n    }\n\n    return new BoundingBox(x, y, x + width, y + height)\n  }\n\n  override getMarkers() {\n    return null\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Point } from '../Point'\nimport { BoundingBox } from '../BoundingBox'\nimport { Document } from './Document'\nimport { PathElement, Marker } from './PathElement'\n\nexport class PolylineElement extends PathElement {\n  override type = 'polyline'\n  protected readonly points: Point[] = []\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.points = Point.parsePath(\n      this.getAttribute('points').getString()\n    )\n  }\n\n  override path(ctx: RenderingContext2D) {\n    const { points } = this\n    const [\n      {\n        x: x0,\n        y: y0\n      }\n    ] = points\n    const boundingBox = new BoundingBox(x0, y0)\n\n    if (ctx) {\n      ctx.beginPath()\n      ctx.moveTo(x0, y0)\n    }\n\n    points.forEach(({\n      x,\n      y\n    }) => {\n      boundingBox.addPoint(x, y)\n\n      if (ctx) {\n        ctx.lineTo(x, y)\n      }\n    })\n\n    return boundingBox\n  }\n\n  override getMarkers() {\n    const { points } = this\n    const lastIndex = points.length - 1\n    const markers: Marker[] = []\n\n    points.forEach((point, i) => {\n      if (i === lastIndex) {\n        return\n      }\n\n      markers.push([point, point.angleTo(points[i + 1])])\n    })\n\n    if (markers.length > 0) {\n      markers.push([points[points.length - 1], markers[markers.length - 1][1]])\n    }\n\n    return markers\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { BoundingBox } from '../BoundingBox'\nimport { PathElement } from './PathElement'\nimport { RenderedElement } from './RenderedElement'\n\nexport class GElement extends RenderedElement {\n  override type = 'g'\n\n  getBoundingBox(ctx: RenderingContext2D) {\n    const boundingBox = new BoundingBox()\n\n    this.children.forEach((child: PathElement) => {\n      boundingBox.addBoundingBox(child.getBoundingBox(ctx))\n    })\n\n    return boundingBox\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Screen } from '../Screen'\nimport { Property } from '../Property'\nimport { Document } from './Document'\nimport { Element } from './Element'\nimport { PathElement } from './PathElement'\nimport { SVGElement } from './SVGElement'\nimport { RectElement } from './RectElement'\nimport { StopElement } from './StopElement'\nimport { GElement } from './GElement'\n\nexport abstract class GradientElement extends Element {\n  readonly attributesToInherit = ['gradientUnits']\n\n  protected readonly stops: StopElement[] = []\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    const {\n      stops,\n      children\n    } = this\n\n    children.forEach((child) => {\n      if (child.type === 'stop') {\n        stops.push(child as StopElement)\n      }\n    })\n  }\n\n  abstract getGradient(ctx: RenderingContext2D, element: PathElement): CanvasGradient | null\n\n  getGradientUnits() {\n    return this.getAttribute('gradientUnits').getString('objectBoundingBox')\n  }\n\n  createGradient(\n    ctx: RenderingContext2D,\n    element: PathElement,\n    parentOpacityProp: Property\n  ) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n    let stopsContainer = this\n\n    if (this.getHrefAttribute().hasValue()) {\n      stopsContainer = this.getHrefAttribute().getDefinition()\n      this.inheritStopContainer(stopsContainer)\n    }\n\n    const { stops } = stopsContainer\n    const gradient = this.getGradient(ctx, element)\n\n    if (!gradient) {\n      return this.addParentOpacity(\n        parentOpacityProp,\n        stops[stops.length - 1].color\n      )\n    }\n\n    stops.forEach((stop: StopElement) => {\n      gradient.addColorStop(\n        stop.offset,\n        this.addParentOpacity(\n          parentOpacityProp,\n          stop.color\n        )\n      )\n    })\n\n    if (this.getAttribute('gradientTransform').hasValue()) {\n      // render as transformed pattern on temporary canvas\n      const { document } = this\n      const { MAX_VIRTUAL_PIXELS } = Screen\n      const { viewPort } = document.screen\n      const rootView = viewPort.getRoot()\n      const rect = new RectElement(document)\n\n      rect.attributes.x = new Property(\n        document,\n        'x',\n        -MAX_VIRTUAL_PIXELS / 3.0\n      )\n      rect.attributes.y = new Property(\n        document,\n        'y',\n        -MAX_VIRTUAL_PIXELS / 3.0\n      )\n      rect.attributes.width = new Property(\n        document,\n        'width',\n        MAX_VIRTUAL_PIXELS\n      )\n      rect.attributes.height = new Property(\n        document,\n        'height',\n        MAX_VIRTUAL_PIXELS\n      )\n\n      const group = new GElement(document)\n\n      group.attributes.transform = new Property(\n        document,\n        'transform',\n        this.getAttribute('gradientTransform').getValue()\n      )\n      group.children = [rect]\n\n      const patternSvg = new SVGElement(document)\n\n      patternSvg.attributes.x = new Property(\n        document,\n        'x',\n        0\n      )\n      patternSvg.attributes.y = new Property(\n        document,\n        'y',\n        0\n      )\n      patternSvg.attributes.width = new Property(\n        document,\n        'width',\n        rootView.width\n      )\n      patternSvg.attributes.height = new Property(\n        document,\n        'height',\n        rootView.height\n      )\n      patternSvg.children = [group]\n\n      const patternCanvas = document.createCanvas(rootView.width, rootView.height)\n      const patternCtx = patternCanvas.getContext('2d')\n\n      patternCtx.fillStyle = gradient\n      patternSvg.render(patternCtx)\n\n      return patternCtx.createPattern(patternCanvas as CanvasImageSource, 'no-repeat')\n    }\n\n    return gradient\n  }\n\n  protected inheritStopContainer(stopsContainer: Element) {\n    this.attributesToInherit.forEach((attributeToInherit) => {\n      if (!this.getAttribute(attributeToInherit).hasValue()\n        && stopsContainer.getAttribute(attributeToInherit).hasValue()\n      ) {\n        this.getAttribute(attributeToInherit, true)\n          .setValue(stopsContainer.getAttribute(attributeToInherit).getValue())\n      }\n    })\n  }\n\n  protected addParentOpacity(parentOpacityProp: Property, color: string) {\n    if (parentOpacityProp.hasValue()) {\n      const colorProp = new Property(\n        this.document,\n        'color',\n        color\n      )\n\n      return colorProp.addOpacity(parentOpacityProp).getColor()\n    }\n\n    return color\n  }\n}\n","import { Property } from '../Property'\nimport { Document } from './Document'\nimport { Element } from './Element'\n\nexport interface IProgress {\n  from: Property\n  to: Property\n  progress: number\n}\n\nexport class AnimateElement extends Element {\n  override type = 'animate'\n  protected readonly begin: number\n  protected readonly maxDuration: number\n  protected readonly from: Property\n  protected readonly to: Property\n  protected readonly values: Property<string[]>\n  protected duration = 0\n  protected initialValue: string | undefined\n  protected initialUnits = ''\n  protected removed = false\n  protected frozen = false\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    document.screen.animations.push(this)\n\n    this.begin = this.getAttribute('begin').getMilliseconds()\n    this.maxDuration = this.begin + this.getAttribute('dur').getMilliseconds()\n    this.from = this.getAttribute('from')\n    this.to = this.getAttribute('to')\n    this.values = new Property<string[] | null>(document, 'values', null)\n\n    const valuesAttr = this.getAttribute('values')\n\n    if (valuesAttr.hasValue()) {\n      this.values.setValue(valuesAttr.getString().split(';'))\n    }\n  }\n\n  protected getProperty() {\n    const attributeType = this.getAttribute('attributeType').getString()\n    const attributeName = this.getAttribute('attributeName').getString()\n\n    if (attributeType === 'CSS') {\n      return this.parent.getStyle(attributeName, true)\n    }\n\n    return this.parent.getAttribute(attributeName, true)\n  }\n\n  calcValue() {\n    const { initialUnits } = this\n    const {\n      progress,\n      from,\n      to\n    } = this.getProgress()\n    // tween value linearly\n    let newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress\n\n    if (initialUnits === '%') {\n      newValue *= 100.0 // numValue() returns 0-1 whereas properties are 0-100\n    }\n\n    return `${newValue}${initialUnits}`\n  }\n\n  update(delta: number) {\n    const { parent } = this\n    const prop = this.getProperty()\n\n    // set initial value\n    if (!this.initialValue) {\n      this.initialValue = prop.getString()\n      this.initialUnits = prop.getUnits()\n    }\n\n    // if we're past the end time\n    if (this.duration > this.maxDuration) {\n      const fill = this.getAttribute('fill').getString('remove')\n\n      // loop for indefinitely repeating animations\n      if (this.getAttribute('repeatCount').getString() === 'indefinite'\n        || this.getAttribute('repeatDur').getString() === 'indefinite'\n      ) {\n        this.duration = 0\n      } else\n      if (fill === 'freeze' && !this.frozen) {\n        this.frozen = true\n\n        if (parent && prop) {\n          parent.animationFrozen = true\n          parent.animationFrozenValue = prop.getString()\n        }\n      } else\n      if (fill === 'remove' && !this.removed) {\n        this.removed = true\n\n        if (parent && prop) {\n          prop.setValue(\n            parent.animationFrozen\n              ? parent.animationFrozenValue\n              : this.initialValue\n          )\n        }\n\n        return true\n      }\n\n      return false\n    }\n\n    this.duration += delta\n\n    // if we're past the begin time\n    let updated = false\n\n    if (this.begin < this.duration) {\n      let newValue = this.calcValue() // tween\n      const typeAttr = this.getAttribute('type')\n\n      if (typeAttr.hasValue()) {\n        // for transform, etc.\n        const type = typeAttr.getString()\n\n        newValue = `${type}(${newValue})`\n      }\n\n      prop.setValue(newValue)\n      updated = true\n    }\n\n    return updated\n  }\n\n  getProgress(): IProgress {\n    const {\n      document,\n      values\n    } = this\n    let progress = (this.duration - this.begin) / (this.maxDuration - this.begin)\n    let from: Property\n    let to: Property\n\n    if (values.hasValue()) {\n      const p = progress * (values.getValue().length - 1)\n      const lb = Math.floor(p)\n      const ub = Math.ceil(p)\n      let value: string | undefined\n\n      value = values.getValue()[lb]\n      from = new Property(\n        document,\n        'from',\n        value ? parseFloat(value) : 0\n      )\n\n      value = values.getValue()[ub]\n      to = new Property(\n        document,\n        'to',\n        value ? parseFloat(value) : 0\n      )\n\n      progress = (p - lb) / (ub - lb)\n    } else {\n      from = this.from\n      to = this.to\n    }\n\n    return {\n      progress,\n      from,\n      to\n    }\n  }\n}\n","import { Document } from './Document'\nimport { Element } from './Element'\n\nexport class FontFaceElement extends Element {\n  override type = 'font-face'\n  readonly ascent: number\n  readonly descent: number\n  readonly unitsPerEm: number\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.ascent = this.getAttribute('ascent').getNumber()\n    this.descent = this.getAttribute('descent').getNumber()\n    this.unitsPerEm = this.getAttribute('units-per-em').getNumber()\n  }\n}\n","import { Document } from './Document'\nimport { PathElement } from './PathElement'\n\nexport type ArabicForm = 'isolated' | 'terminal' | 'medial' | 'initial'\n\nexport class GlyphElement extends PathElement {\n  override type = 'glyph'\n  readonly horizAdvX: number\n  readonly unicode: string\n  readonly arabicForm: ArabicForm | undefined\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber()\n    this.unicode = this.getAttribute('unicode').getString()\n    this.arabicForm = this.getAttribute('arabic-form').getString() as ArabicForm\n  }\n}\n","import { GlyphElement } from './GlyphElement'\n\nexport class MissingGlyphElement extends GlyphElement {\n  override type = 'missing-glyph'\n  override readonly horizAdvX = 0\n}\n","import { RenderingContext2D } from '../types'\nimport { BoundingBox } from '../BoundingBox'\nimport { Document } from './Document'\nimport { RenderedElement } from './RenderedElement'\n\n// groups: 1: mime-type (+ charset), 2: mime-type (w/o charset), 3: charset, 4: base64?, 5: body\nconst dataUriRegex = /^\\s*data:(([^/,;]+\\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i\n\nexport class ImageElement extends RenderedElement {\n  override type = 'image'\n  loaded = false\n  protected image: CanvasImageSource | string | undefined\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    const href = this.getHrefAttribute().getString()\n\n    if (!href) {\n      return\n    }\n\n    const isSvg = href.endsWith('.svg') || /^\\s*data:image\\/svg\\+xml/i.test(href)\n\n    document.images.push(this)\n\n    if (!isSvg) {\n      void this.loadImage(href)\n    } else {\n      void this.loadSvg(href)\n    }\n  }\n\n  protected async loadImage(href: string) {\n    try {\n      const image = await this.document.createImage(href)\n\n      this.image = image\n    } catch (err) {\n      console.error(`Error while loading image \"${href}\":`, err)\n    }\n\n    this.loaded = true\n  }\n\n  protected async loadSvg(href: string) {\n    const match = dataUriRegex.exec(href)\n\n    if (match) {\n      const data = match[5]\n\n      if (data) {\n        if (match[4] === 'base64') {\n          this.image = atob(data)\n        } else {\n          this.image = decodeURIComponent(data)\n        }\n      }\n    } else {\n      try {\n        const response = await this.document.fetch(href)\n        const svg = await response.text()\n\n        this.image = svg\n      } catch (err) {\n        console.error(`Error while loading image \"${href}\":`, err)\n      }\n    }\n\n    this.loaded = true\n  }\n\n  override renderChildren(ctx: RenderingContext2D) {\n    const {\n      document,\n      image,\n      loaded\n    } = this\n    const x = this.getAttribute('x').getPixels('x')\n    const y = this.getAttribute('y').getPixels('y')\n    const width = this.getStyle('width').getPixels('x')\n    const height = this.getStyle('height').getPixels('y')\n\n    if (!loaded || !image\n      || !width || !height\n    ) {\n      return\n    }\n\n    ctx.save()\n    ctx.translate(x, y)\n\n    if (typeof image === 'string') {\n      const subDocument = document.canvg.forkString(\n        ctx,\n        image,\n        {\n          ignoreMouse: true,\n          ignoreAnimation: true,\n          ignoreDimensions: true,\n          ignoreClear: true,\n          offsetX: 0,\n          offsetY: 0,\n          scaleWidth: width,\n          scaleHeight: height\n        }\n      )\n      const { documentElement } = subDocument.document\n\n      if (documentElement) {\n        documentElement.parent = this\n      }\n\n      void subDocument.render()\n    } else {\n      document.setViewBox({\n        ctx,\n        aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n        width,\n        desiredWidth: image.width as number,\n        height,\n        desiredHeight: image.height as number\n      })\n\n      if (this.loaded) {\n        if (!('complete' in image) || image.complete) {\n          ctx.drawImage(image, 0, 0)\n        }\n      }\n    }\n\n    ctx.restore()\n  }\n\n  getBoundingBox() {\n    const x = this.getAttribute('x').getPixels('x')\n    const y = this.getAttribute('y').getPixels('y')\n    const width = this.getStyle('width').getPixels('x')\n    const height = this.getStyle('height').getPixels('y')\n\n    return new BoundingBox(x, y, x + width, y + height)\n  }\n}\n","import { Document } from './Document'\n\nexport class SVGFontLoader {\n  loaded = false\n\n  constructor(\n    private readonly document: Document\n  ) {\n    document.fonts.push(this)\n  }\n\n  async load(fontFamily: string, url: string) {\n    try {\n      const { document } = this\n      const svgDocument = await document.canvg.parser.load(url)\n      const fonts = svgDocument.getElementsByTagName('font')\n\n      Array.from(fonts).forEach((fontNode) => {\n        const font = document.createElement(fontNode)\n\n        document.definitions[fontFamily] = font\n      })\n    } catch (err) {\n      console.error(`Error while loading font \"${url}\":`, err)\n    }\n\n    this.loaded = true\n  }\n}\n","import {\n  compressSpaces,\n  getSelectorSpecificity,\n  parseExternalUrl\n} from '../util'\nimport { Property } from '../Property'\nimport { SVGFontLoader } from '../SVGFontLoader'\nimport { Document } from './Document'\nimport { Element } from './Element'\n\nexport class StyleElement extends Element {\n  static readonly parseExternalUrl = parseExternalUrl\n\n  override type = 'style'\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    const css = compressSpaces(\n      Array.from(node.childNodes)\n      // NEED TEST\n        .map(_ => _.textContent)\n        .join('')\n        .replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n        .replace(/@import.*;/g, '') // remove imports\n    )\n    const cssDefs = css.split('}')\n\n    cssDefs.forEach((_) => {\n      const def = _.trim()\n\n      if (!def) {\n        return\n      }\n\n      const cssParts = def.split('{')\n      const cssClasses = cssParts[0].split(',')\n      const cssProps = cssParts[1].split(';')\n\n      cssClasses.forEach((_) => {\n        const cssClass = _.trim()\n\n        if (!cssClass) {\n          return\n        }\n\n        const props = document.styles[cssClass] || {}\n\n        cssProps.forEach((cssProp) => {\n          const prop = cssProp.indexOf(':')\n          const name = cssProp.substr(0, prop).trim()\n          const value = cssProp.substr(prop + 1, cssProp.length - prop).trim()\n\n          if (name && value) {\n            props[name] = new Property(document, name, value)\n          }\n        })\n\n        document.styles[cssClass] = props\n        document.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass)\n\n        if (cssClass === '@font-face') { //  && !nodeEnv\n          const fontFamily = props['font-family'].getString().replace(/\"|'/g, '')\n          const srcs = props.src.getString().split(',')\n\n          srcs.forEach((src) => {\n            if (src.indexOf('format(\"svg\")') > 0) {\n              const url = parseExternalUrl(src)\n\n              if (url) {\n                void new SVGFontLoader(document).load(fontFamily, url)\n              }\n            }\n          })\n        }\n      })\n    })\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { toNumbers } from '../util'\nimport { Document } from './Document'\nimport { Element } from './Element'\n\nfunction imGet(\n  img: Uint8ClampedArray,\n  x: number,\n  y: number,\n  width: number,\n  _height: number,\n  rgba: number\n) {\n  return img[y * width * 4 + x * 4 + rgba]\n}\n\nfunction imSet(\n  img: Uint8ClampedArray,\n  x: number,\n  y: number,\n  width: number,\n  _height: number,\n  rgba: number,\n  val: number\n) {\n  img[y * width * 4 + x * 4 + rgba] = val\n}\n\nfunction m(\n  matrix: number[],\n  i: number,\n  v: number\n) {\n  const mi = matrix[i]\n\n  return mi * v\n}\n\nfunction c(\n  a: number,\n  m1: number,\n  m2: number,\n  m3: number\n) {\n  return m1 + Math.cos(a) * m2 + Math.sin(a) * m3\n}\n\nexport class FeColorMatrixElement extends Element {\n  override type = 'feColorMatrix'\n  protected readonly matrix: number[]\n  protected readonly includeOpacity: boolean\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    let matrix = toNumbers(this.getAttribute('values').getString())\n\n    switch (this.getAttribute('type').getString('matrix')) { // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate': {\n        const s = matrix[0]\n\n        /* eslint-disable array-element-newline */\n        matrix = [\n          0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0,\n          0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0,\n          0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0,\n          0, 0, 0, 1, 0,\n          0, 0, 0, 0, 1\n        ]\n        /* eslint-enable array-element-newline */\n        break\n      }\n\n      case 'hueRotate': {\n        const a = matrix[0] * Math.PI / 180.0\n\n        /* eslint-disable array-element-newline */\n        matrix = [\n          c(a, 0.213, 0.787, -0.213), c(a, 0.715, -0.715, -0.715), c(a, 0.072, -0.072, 0.928), 0, 0,\n          c(a, 0.213, -0.213, 0.143), c(a, 0.715, 0.285, 0.140), c(a, 0.072, -0.072, -0.283), 0, 0,\n          c(a, 0.213, -0.213, -0.787), c(a, 0.715, -0.715, 0.715), c(a, 0.072, 0.928, 0.072), 0, 0,\n          0, 0, 0, 1, 0,\n          0, 0, 0, 0, 1\n        ]\n        /* eslint-enable array-element-newline */\n        break\n      }\n\n      case 'luminanceToAlpha':\n        /* eslint-disable array-element-newline */\n        matrix = [\n          0, 0, 0, 0, 0,\n          0, 0, 0, 0, 0,\n          0, 0, 0, 0, 0,\n          0.2125, 0.7154, 0.0721, 0, 0,\n          0, 0, 0, 0, 1\n        ]\n        /* eslint-enable array-element-newline */\n        break\n\n      default:\n    }\n\n    this.matrix = matrix\n    this.includeOpacity = this.getAttribute('includeOpacity').hasValue()\n  }\n\n  apply(\n    ctx: RenderingContext2D,\n    _x: number,\n    _y: number,\n    width: number,\n    height: number\n  ) {\n    // assuming x==0 && y==0 for now\n    const {\n      includeOpacity,\n      matrix\n    } = this\n    const srcData = ctx.getImageData(0, 0, width, height)\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        const r = imGet(srcData.data, x, y, width, height, 0)\n        const g = imGet(srcData.data, x, y, width, height, 1)\n        const b = imGet(srcData.data, x, y, width, height, 2)\n        const a = imGet(srcData.data, x, y, width, height, 3)\n        let nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1)\n        let ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1)\n        let nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1)\n        let na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1)\n\n        if (includeOpacity) {\n          nr = 0\n          ng = 0\n          nb = 0\n          na *= a / 255\n        }\n\n        imSet(srcData.data, x, y, width, height, 0, nr)\n        imSet(srcData.data, x, y, width, height, 1, ng)\n        imSet(srcData.data, x, y, width, height, 2, nb)\n        imSet(srcData.data, x, y, width, height, 3, na)\n      }\n    }\n\n    ctx.clearRect(0, 0, width, height)\n    ctx.putImageData(srcData, 0, 0)\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { BoundingBox } from '../BoundingBox'\nimport { Element } from './Element'\nimport { PathElement } from './PathElement'\nimport { FeColorMatrixElement } from './FeColorMatrixElement'\n\nexport class MaskElement extends Element {\n  static ignoreStyles = [\n    'mask',\n    'transform',\n    'clip-path'\n  ]\n\n  override type = 'mask'\n\n  apply(ctx: RenderingContext2D, element: Element) {\n    const { document } = this\n    // render as temp svg\n    let x = this.getAttribute('x').getPixels('x')\n    let y = this.getAttribute('y').getPixels('y')\n    let width = this.getStyle('width').getPixels('x')\n    let height = this.getStyle('height').getPixels('y')\n\n    if (!width && !height) {\n      const boundingBox = new BoundingBox()\n\n      this.children.forEach((child: PathElement) => {\n        boundingBox.addBoundingBox(child.getBoundingBox(ctx))\n      })\n\n      x = Math.floor(boundingBox.x1)\n      y = Math.floor(boundingBox.y1)\n      width = Math.floor(boundingBox.width)\n      height = Math.floor(boundingBox.height)\n    }\n\n    const ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles)\n    const maskCanvas = document.createCanvas(x + width, y + height)\n    const maskCtx = maskCanvas.getContext('2d')\n\n    document.screen.setDefaults(maskCtx)\n    this.renderChildren(maskCtx)\n\n    // convert mask to alpha with a fake node\n    // TODO: refactor out apply from feColorMatrix\n    new FeColorMatrixElement(\n      document,\n      ({\n        nodeType: 1,\n        childNodes: [],\n        attributes: [\n          {\n            nodeName: 'type',\n            value: 'luminanceToAlpha'\n          },\n          {\n            nodeName: 'includeOpacity',\n            value: 'true'\n          }\n        ]\n      }) as unknown as HTMLElement\n    ).apply(maskCtx, 0, 0, x + width, y + height)\n\n    const tmpCanvas = document.createCanvas(x + width, y + height)\n    const tmpCtx = tmpCanvas.getContext('2d')\n\n    document.screen.setDefaults(tmpCtx)\n    element.render(tmpCtx)\n\n    tmpCtx.globalCompositeOperation = 'destination-in'\n    tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas as CanvasImageSource, 'no-repeat')\n    tmpCtx.fillRect(0, 0, x + width, y + height)\n\n    ctx.fillStyle = tmpCtx.createPattern(tmpCanvas as CanvasImageSource, 'no-repeat')\n    ctx.fillRect(0, 0, x + width, y + height)\n\n    // reassign mask\n    this.restoreStyles(element, ignoredStyles)\n  }\n\n  override render(_: RenderingContext2D) {\n    // NO RENDER\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Transform } from '../Transform'\nimport { Element } from './Element'\nimport { UseElement } from './UseElement'\n\nconst noop = () => {\n  // NOOP\n}\n\nexport class ClipPathElement extends Element {\n  override type = 'clipPath'\n\n  apply(ctx: RenderingContext2D) {\n    const { document } = this\n    const contextProto = Reflect.getPrototypeOf(ctx) as RenderingContext2D | null\n    const {\n      beginPath,\n      closePath\n    } = ctx\n\n    if (contextProto) {\n      contextProto.beginPath = noop\n      contextProto.closePath = noop\n    }\n\n    Reflect.apply(beginPath, ctx, [])\n\n    this.children.forEach((child: Element | UseElement) => {\n      if (!('path' in child)) {\n        return\n      }\n\n      let transform = 'elementTransform' in child\n        ? child.elementTransform()\n        : null // handle <use />\n\n      if (!transform) {\n        transform = Transform.fromElement(document, child)\n      }\n\n      if (transform) {\n        transform.apply(ctx)\n      }\n\n      child.path(ctx)\n\n      if (contextProto) {\n        contextProto.closePath = closePath\n      }\n\n      if (transform) {\n        transform.unapply(ctx)\n      }\n    })\n\n    Reflect.apply(closePath, ctx, [])\n    ctx.clip()\n\n    if (contextProto) {\n      contextProto.beginPath = beginPath\n      contextProto.closePath = closePath\n    }\n  }\n\n  override render(_: RenderingContext2D) {\n    // NO RENDER\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Element } from './Element'\nimport { PathElement } from './PathElement'\nimport { FeGaussianBlurElement } from './FeGaussianBlurElement'\n\nexport class FilterElement extends Element {\n  static ignoreStyles = [\n    'filter',\n    'transform',\n    'clip-path'\n  ]\n\n  override type = 'filter'\n\n  apply(ctx: RenderingContext2D, element: Element | PathElement) {\n    // render as temp svg\n    const {\n      document,\n      children\n    } = this\n    const boundingBox = 'getBoundingBox' in element\n      ? element.getBoundingBox(ctx)\n      : null\n\n    if (!boundingBox) {\n      return\n    }\n\n    let px = 0\n    let py = 0\n\n    children.forEach((child: FeGaussianBlurElement) => {\n      const efd = child.extraFilterDistance || 0\n\n      px = Math.max(px, efd)\n      py = Math.max(py, efd)\n    })\n\n    const width = Math.floor(boundingBox.width)\n    const height = Math.floor(boundingBox.height)\n    const tmpCanvasWidth = width + 2 * px\n    const tmpCanvasHeight = height + 2 * py\n\n    if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n      return\n    }\n\n    const x = Math.floor(boundingBox.x)\n    const y = Math.floor(boundingBox.y)\n    const ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles)\n    const tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight)\n    const tmpCtx = tmpCanvas.getContext('2d')\n\n    document.screen.setDefaults(tmpCtx)\n    tmpCtx.translate(-x + px, -y + py)\n    element.render(tmpCtx)\n\n    // apply filters\n    children.forEach((child: FeGaussianBlurElement) => {\n      if (typeof child.apply === 'function') {\n        child.apply(\n          tmpCtx,\n          0,\n          0,\n          tmpCanvasWidth,\n          tmpCanvasHeight\n        )\n      }\n    })\n\n    // render on me\n    ctx.drawImage(\n      tmpCanvas,\n      0,\n      0,\n      tmpCanvasWidth,\n      tmpCanvasHeight,\n      x - px,\n      y - py,\n      tmpCanvasWidth,\n      tmpCanvasHeight\n    )\n\n    this.restoreStyles(element, ignoredStyles)\n  }\n\n  override render(_: RenderingContext2D) {\n    // NO RENDER\n  }\n}\n","import { Element } from './Element'\nimport { UnknownElement } from './UnknownElement'\nimport { RenderedElement } from './RenderedElement'\nimport { PathElement } from './PathElement'\nimport { SVGElement } from './SVGElement'\nimport { RectElement } from './RectElement'\nimport { CircleElement } from './CircleElement'\nimport { EllipseElement } from './EllipseElement'\nimport { LineElement } from './LineElement'\nimport { PolylineElement } from './PolylineElement'\nimport { PolygonElement } from './PolygonElement'\nimport { PatternElement } from './PatternElement'\nimport { MarkerElement } from './MarkerElement'\nimport { DefsElement } from './DefsElement'\nimport { GradientElement } from './GradientElement'\nimport { LinearGradientElement } from './LinearGradientElement'\nimport { RadialGradientElement } from './RadialGradientElement'\nimport { StopElement } from './StopElement'\nimport { AnimateElement } from './AnimateElement'\nimport { AnimateColorElement } from './AnimateColorElement'\nimport { AnimateTransformElement } from './AnimateTransformElement'\nimport { FontElement } from './FontElement'\nimport { FontFaceElement } from './FontFaceElement'\nimport { MissingGlyphElement } from './MissingGlyphElement'\nimport { GlyphElement } from './GlyphElement'\nimport { TextElement } from './TextElement'\nimport { TSpanElement } from './TSpanElement'\nimport { TRefElement } from './TRefElement'\nimport { AElement } from './AElement'\nimport { TextPathElement } from './TextPathElement'\nimport { ImageElement } from './ImageElement'\nimport { GElement } from './GElement'\nimport { SymbolElement } from './SymbolElement'\nimport { StyleElement } from './StyleElement'\nimport { UseElement } from './UseElement'\nimport { MaskElement } from './MaskElement'\nimport { ClipPathElement } from './ClipPathElement'\nimport { FilterElement } from './FilterElement'\nimport { FeDropShadowElement } from './FeDropShadowElement'\nimport { FeMorphologyElement } from './FeMorphologyElement'\nimport { FeCompositeElement } from './FeCompositeElement'\nimport { FeColorMatrixElement } from './FeColorMatrixElement'\nimport { FeGaussianBlurElement } from './FeGaussianBlurElement'\nimport { TitleElement } from './TitleElement'\nimport { DescElement } from './DescElement'\n\nexport const elements = {\n  'svg': SVGElement,\n  'rect': RectElement,\n  'circle': CircleElement,\n  'ellipse': EllipseElement,\n  'line': LineElement,\n  'polyline': PolylineElement,\n  'polygon': PolygonElement,\n  'path': PathElement,\n  'pattern': PatternElement,\n  'marker': MarkerElement,\n  'defs': DefsElement,\n  'linearGradient': LinearGradientElement,\n  'radialGradient': RadialGradientElement,\n  'stop': StopElement,\n  'animate': AnimateElement,\n  'animateColor': AnimateColorElement,\n  'animateTransform': AnimateTransformElement,\n  'font': FontElement,\n  'font-face': FontFaceElement,\n  'missing-glyph': MissingGlyphElement,\n  'glyph': GlyphElement,\n  'text': TextElement,\n  'tspan': TSpanElement,\n  'tref': TRefElement,\n  'a': AElement,\n  'textPath': TextPathElement,\n  'image': ImageElement,\n  'g': GElement,\n  'symbol': SymbolElement,\n  'style': StyleElement,\n  'use': UseElement,\n  'mask': MaskElement,\n  'clipPath': ClipPathElement,\n  'filter': FilterElement,\n  'feDropShadow': FeDropShadowElement,\n  'feMorphology': FeMorphologyElement,\n  'feComposite': FeCompositeElement,\n  'feColorMatrix': FeColorMatrixElement,\n  'feGaussianBlur': FeGaussianBlurElement,\n  'title': TitleElement,\n  'desc': DescElement\n}\n\ntype Elements = typeof elements\n\nexport type AnyElement = Elements[keyof Elements]\n\nexport {\n  Element,\n  UnknownElement,\n  RenderedElement,\n  PathElement,\n  SVGElement,\n  RectElement,\n  CircleElement,\n  EllipseElement,\n  LineElement,\n  PolylineElement,\n  PolygonElement,\n  PatternElement,\n  MarkerElement,\n  DefsElement,\n  GradientElement,\n  LinearGradientElement,\n  RadialGradientElement,\n  StopElement,\n  AnimateElement,\n  AnimateColorElement,\n  AnimateTransformElement,\n  FontElement,\n  FontFaceElement,\n  MissingGlyphElement,\n  GlyphElement,\n  TextElement,\n  TSpanElement,\n  TRefElement,\n  AElement,\n  TextPathElement,\n  ImageElement,\n  GElement,\n  SymbolElement,\n  StyleElement,\n  UseElement,\n  MaskElement,\n  ClipPathElement,\n  FilterElement,\n  FeDropShadowElement,\n  FeMorphologyElement,\n  FeCompositeElement,\n  FeColorMatrixElement,\n  FeGaussianBlurElement,\n  TitleElement,\n  DescElement\n}\n","import { RenderingContext2D } from '../types'\nimport { BoundingBox } from '../BoundingBox'\nimport { PathElement } from './PathElement'\n\nexport class CircleElement extends PathElement {\n  override type = 'circle'\n\n  override path(ctx: RenderingContext2D) {\n    const cx = this.getAttribute('cx').getPixels('x')\n    const cy = this.getAttribute('cy').getPixels('y')\n    const r = this.getAttribute('r').getPixels()\n\n    if (ctx && r > 0) {\n      ctx.beginPath()\n      ctx.arc(cx, cy, r, 0, Math.PI * 2, false)\n      ctx.closePath()\n    }\n\n    return new BoundingBox(\n      cx - r,\n      cy - r,\n      cx + r,\n      cy + r\n    )\n  }\n\n  override getMarkers() {\n    return null\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { BoundingBox } from '../BoundingBox'\nimport { PathElement } from './PathElement'\n\nexport class EllipseElement extends PathElement {\n  override type = 'ellipse'\n\n  override path(ctx: RenderingContext2D) {\n    const KAPPA = 4 * ((Math.sqrt(2) - 1) / 3)\n    const rx = this.getAttribute('rx').getPixels('x')\n    const ry = this.getAttribute('ry').getPixels('y')\n    const cx = this.getAttribute('cx').getPixels('x')\n    const cy = this.getAttribute('cy').getPixels('y')\n\n    if (ctx && rx > 0 && ry > 0) {\n      ctx.beginPath()\n      ctx.moveTo(cx + rx, cy)\n      ctx.bezierCurveTo(\n        cx + rx,\n        cy + (KAPPA * ry),\n        cx + (KAPPA * rx),\n        cy + ry,\n        cx,\n        cy + ry\n      )\n      ctx.bezierCurveTo(\n        cx - (KAPPA * rx),\n        cy + ry,\n        cx - rx,\n        cy + (KAPPA * ry),\n        cx - rx,\n        cy\n      )\n      ctx.bezierCurveTo(\n        cx - rx,\n        cy - (KAPPA * ry),\n        cx - (KAPPA * rx),\n        cy - ry,\n        cx,\n        cy - ry\n      )\n      ctx.bezierCurveTo(\n        cx + (KAPPA * rx),\n        cy - ry,\n        cx + rx,\n        cy - (KAPPA * ry),\n        cx + rx,\n        cy\n      )\n      ctx.closePath()\n    }\n\n    return new BoundingBox(\n      cx - rx,\n      cy - ry,\n      cx + rx,\n      cy + ry\n    )\n  }\n\n  override getMarkers() {\n    return null\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Point } from '../Point'\nimport { BoundingBox } from '../BoundingBox'\nimport { PathElement, Marker } from './PathElement'\n\nexport class LineElement extends PathElement {\n  override type = 'line'\n\n  getPoints() {\n    return [\n      new Point(\n        this.getAttribute('x1').getPixels('x'),\n        this.getAttribute('y1').getPixels('y')\n      ),\n      new Point(\n        this.getAttribute('x2').getPixels('x'),\n        this.getAttribute('y2').getPixels('y')\n      )\n    ]\n  }\n\n  override path(ctx: RenderingContext2D) {\n    const [\n      {\n        x: x0,\n        y: y0\n      },\n      {\n        x: x1,\n        y: y1\n      }\n    ] = this.getPoints()\n\n    if (ctx) {\n      ctx.beginPath()\n      ctx.moveTo(x0, y0)\n      ctx.lineTo(x1, y1)\n    }\n\n    return new BoundingBox(\n      x0,\n      y0,\n      x1,\n      y1\n    )\n  }\n\n  override getMarkers(): Marker[] {\n    const [p0, p1] = this.getPoints()\n    const a = p0.angleTo(p1)\n\n    return [[p0, a], [p1, a]]\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { PolylineElement } from './PolylineElement'\n\nexport class PolygonElement extends PolylineElement {\n  override type = 'polygon'\n\n  override path(ctx: RenderingContext2D) {\n    const boundingBox = super.path(ctx)\n    const [\n      {\n        x,\n        y\n      }\n    ] = this.points\n\n    if (ctx) {\n      ctx.lineTo(x, y)\n      ctx.closePath()\n    }\n\n    return boundingBox\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Property } from '../Property'\nimport { Element } from './Element'\nimport { SVGElement } from './SVGElement'\n\nexport class PatternElement extends Element {\n  override type = 'pattern'\n\n  createPattern(\n    ctx: RenderingContext2D,\n    _: Element,\n    parentOpacityProp: Property\n  ) {\n    const width = this.getStyle('width').getPixels('x', true)\n    const height = this.getStyle('height').getPixels('y', true)\n    // render me using a temporary svg element\n    const patternSvg = new SVGElement(\n      this.document,\n      null\n    )\n\n    patternSvg.attributes.viewBox = new Property(\n      this.document,\n      'viewBox',\n      this.getAttribute('viewBox').getValue()\n    )\n    patternSvg.attributes.width = new Property(\n      this.document,\n      'width',\n      `${width}px`\n    )\n    patternSvg.attributes.height = new Property(\n      this.document,\n      'height',\n      `${height}px`\n    )\n    patternSvg.attributes.transform = new Property(\n      this.document,\n      'transform',\n      this.getAttribute('patternTransform').getValue()\n    )\n    patternSvg.children = this.children\n\n    const patternCanvas = this.document.createCanvas(width, height)\n    const patternCtx = patternCanvas.getContext('2d')\n    const xAttr = this.getAttribute('x')\n    const yAttr = this.getAttribute('y')\n\n    if (xAttr.hasValue() && yAttr.hasValue()) {\n      patternCtx.translate(\n        xAttr.getPixels('x', true),\n        yAttr.getPixels('y', true)\n      )\n    }\n\n    if (parentOpacityProp.hasValue()) {\n      this.styles['fill-opacity'] = parentOpacityProp\n    } else {\n      Reflect.deleteProperty(this.styles, 'fill-opacity')\n    }\n\n    // render 3x3 grid so when we transform there's no white space on edges\n    for (let x = -1; x <= 1; x++) {\n      for (let y = -1; y <= 1; y++) {\n        patternCtx.save()\n        patternSvg.attributes.x = new Property(\n          this.document,\n          'x',\n          x * patternCanvas.width\n        )\n        patternSvg.attributes.y = new Property(\n          this.document,\n          'y',\n          y * patternCanvas.height\n        )\n        patternSvg.render(patternCtx)\n        patternCtx.restore()\n      }\n    }\n\n    const pattern = ctx.createPattern(patternCanvas as CanvasImageSource, 'repeat')\n\n    return pattern\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Point } from '../Point'\nimport { Property } from '../Property'\nimport { Element } from './Element'\nimport { SVGElement } from './SVGElement'\n\nexport class MarkerElement extends Element {\n  override type = 'marker'\n\n  override render(ctx: RenderingContext2D, point?: Point, angle?: number) {\n    if (!point) {\n      return\n    }\n\n    const {\n      x,\n      y\n    } = point\n    const orient = this.getAttribute('orient').getString('auto')\n    const markerUnits = this.getAttribute('markerUnits').getString('strokeWidth')\n\n    ctx.translate(x, y)\n\n    if (orient === 'auto') {\n      ctx.rotate(angle)\n    }\n\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(ctx.lineWidth, ctx.lineWidth)\n    }\n\n    ctx.save()\n\n    // render me using a temporary svg element\n    const markerSvg = new SVGElement(this.document)\n\n    markerSvg.type = this.type\n    markerSvg.attributes.viewBox = new Property(\n      this.document,\n      'viewBox',\n      this.getAttribute('viewBox').getValue()\n    )\n    markerSvg.attributes.refX = new Property(\n      this.document,\n      'refX',\n      this.getAttribute('refX').getValue()\n    )\n    markerSvg.attributes.refY = new Property(\n      this.document,\n      'refY',\n      this.getAttribute('refY').getValue()\n    )\n    markerSvg.attributes.width = new Property(\n      this.document,\n      'width',\n      this.getAttribute('markerWidth').getValue()\n    )\n    markerSvg.attributes.height = new Property(\n      this.document,\n      'height',\n      this.getAttribute('markerHeight').getValue()\n    )\n    markerSvg.attributes.overflow = new Property(\n      this.document,\n      'overflow',\n      this.getAttribute('overflow').getValue()\n    )\n    markerSvg.attributes.fill = new Property(\n      this.document,\n      'fill',\n      this.getAttribute('fill').getColor('black')\n    )\n    markerSvg.attributes.stroke = new Property(\n      this.document,\n      'stroke',\n      this.getAttribute('stroke').getValue('none')\n    )\n    markerSvg.children = this.children\n\n    markerSvg.render(ctx)\n\n    ctx.restore()\n\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth)\n    }\n\n    if (orient === 'auto') {\n      ctx.rotate(-angle)\n    }\n\n    ctx.translate(-x, -y)\n  }\n}\n","import { Element } from './Element'\n\nexport class DefsElement extends Element {\n  override type = 'defs'\n\n  override render() {\n    // NOOP\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Document } from './Document'\nimport { PathElement } from './PathElement'\nimport { GradientElement } from './GradientElement'\n\nexport class LinearGradientElement extends GradientElement {\n  override type = 'linearGradient'\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.attributesToInherit.push(\n      'x1',\n      'y1',\n      'x2',\n      'y2'\n    )\n  }\n\n  getGradient(ctx: RenderingContext2D, element: PathElement) {\n    const isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox'\n    const boundingBox = isBoundingBoxUnits\n      ? element.getBoundingBox(ctx)\n      : null\n\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null\n    }\n\n    if (!this.getAttribute('x1').hasValue()\n      && !this.getAttribute('y1').hasValue()\n      && !this.getAttribute('x2').hasValue()\n      && !this.getAttribute('y2').hasValue()\n    ) {\n      this.getAttribute('x1', true).setValue(0)\n      this.getAttribute('y1', true).setValue(0)\n      this.getAttribute('x2', true).setValue(1)\n      this.getAttribute('y2', true).setValue(0)\n    }\n\n    const x1 = isBoundingBoxUnits\n      ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber()\n      : this.getAttribute('x1').getPixels('x')\n    const y1 = isBoundingBoxUnits\n      ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber()\n      : this.getAttribute('y1').getPixels('y')\n    const x2 = isBoundingBoxUnits\n      ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber()\n      : this.getAttribute('x2').getPixels('x')\n    const y2 = isBoundingBoxUnits\n      ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber()\n      : this.getAttribute('y2').getPixels('y')\n\n    if (x1 === x2 && y1 === y2) {\n      return null\n    }\n\n    return ctx.createLinearGradient(x1, y1, x2, y2)\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Document } from './Document'\nimport { PathElement } from './PathElement'\nimport { GradientElement } from './GradientElement'\n\nexport class RadialGradientElement extends GradientElement {\n  override type = 'radialGradient'\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.attributesToInherit.push(\n      'cx',\n      'cy',\n      'r',\n      'fx',\n      'fy',\n      'fr'\n    )\n  }\n\n  getGradient(ctx: RenderingContext2D, element: PathElement) {\n    const isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox'\n    const boundingBox = element.getBoundingBox(ctx)\n\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null\n    }\n\n    if (!this.getAttribute('cx').hasValue()) {\n      this.getAttribute('cx', true).setValue('50%')\n    }\n\n    if (!this.getAttribute('cy').hasValue()) {\n      this.getAttribute('cy', true).setValue('50%')\n    }\n\n    if (!this.getAttribute('r').hasValue()) {\n      this.getAttribute('r', true).setValue('50%')\n    }\n\n    const cx = isBoundingBoxUnits\n      ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber()\n      : this.getAttribute('cx').getPixels('x')\n    const cy = isBoundingBoxUnits\n      ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber()\n      : this.getAttribute('cy').getPixels('y')\n    let fx = cx\n    let fy = cy\n\n    if (this.getAttribute('fx').hasValue()) {\n      fx = isBoundingBoxUnits\n        ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber()\n        : this.getAttribute('fx').getPixels('x')\n    }\n\n    if (this.getAttribute('fy').hasValue()) {\n      fy = isBoundingBoxUnits\n        ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber()\n        : this.getAttribute('fy').getPixels('y')\n    }\n\n    const r = isBoundingBoxUnits\n      ? (boundingBox.width + boundingBox.height) / 2.0 * this.getAttribute('r').getNumber()\n      : this.getAttribute('r').getPixels()\n    const fr = this.getAttribute('fr').getPixels()\n\n    return ctx.createRadialGradient(fx, fy, fr, cx, cy, r)\n  }\n}\n","import { Document } from './Document'\nimport { Element } from './Element'\n\nexport class StopElement extends Element {\n  override type = 'stop'\n  readonly offset: number\n  readonly color: string\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    const offset = Math.max(0, Math.min(1, this.getAttribute('offset').getNumber()))\n    const stopOpacity = this.getStyle('stop-opacity')\n    let stopColor = this.getStyle('stop-color', true)\n\n    if (stopColor.getString() === '') {\n      stopColor.setValue('#000')\n    }\n\n    if (stopOpacity.hasValue()) {\n      stopColor = stopColor.addOpacity(stopOpacity)\n    }\n\n    this.offset = offset\n    this.color = stopColor.getColor()\n  }\n}\n","import RGBColor from 'rgbcolor'\nimport { AnimateElement } from './AnimateElement'\n\nexport class AnimateColorElement extends AnimateElement {\n  override type = 'animateColor'\n\n  override calcValue() {\n    const {\n      progress,\n      from,\n      to\n    } = this.getProgress()\n    const colorFrom = new RGBColor(from.getColor())\n    const colorTo = new RGBColor(to.getColor())\n\n    if (colorFrom.ok && colorTo.ok) {\n      // tween color linearly\n      const r = colorFrom.r + (colorTo.r - colorFrom.r) * progress\n      const g = colorFrom.g + (colorTo.g - colorFrom.g) * progress\n      const b = colorFrom.b + (colorTo.b - colorFrom.b) * progress\n\n      // ? alpha\n      return `rgb(${\n        Math.floor(r)\n      }, ${\n        Math.floor(g)\n      }, ${\n        Math.floor(b)\n      })`\n    }\n\n    return this.getAttribute('from').getColor()\n  }\n}\n","import { toNumbers } from '../util'\nimport { AnimateElement } from './AnimateElement'\n\nexport class AnimateTransformElement extends AnimateElement {\n  override type = 'animateTransform'\n\n  override calcValue() {\n    const {\n      progress,\n      from,\n      to\n    } = this.getProgress()\n    // tween value linearly\n    const transformFrom = toNumbers(from.getString())\n    const transformTo = toNumbers(to.getString())\n    const newValue = transformFrom.map((from, i) => {\n      const to = transformTo[i]\n\n      return from + (to - from) * progress\n    }).join(' ')\n\n    return newValue\n  }\n}\n","import { Document } from './Document'\nimport { Element } from './Element'\nimport { FontFaceElement } from './FontFaceElement'\nimport { MissingGlyphElement } from './MissingGlyphElement'\nimport { ArabicForm, GlyphElement } from './GlyphElement'\n\nexport class FontElement extends Element {\n  override type = 'font'\n  readonly isArabic: boolean = false\n  readonly missingGlyph: MissingGlyphElement | undefined\n  readonly glyphs: Record<string, GlyphElement> = {}\n  readonly arabicGlyphs: Record<string, Partial<Record<ArabicForm, GlyphElement>>> = {}\n  readonly horizAdvX: number\n  readonly isRTL: boolean = false\n  readonly fontFace: FontFaceElement | undefined\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber()\n\n    const { definitions } = document\n    const { children } = this\n\n    for (const child of children) {\n      if (child instanceof FontFaceElement) {\n        this.fontFace = child\n\n        const fontFamilyStyle = child.getStyle('font-family')\n\n        if (fontFamilyStyle.hasValue()) {\n          definitions[fontFamilyStyle.getString()] = this\n        }\n      } else\n      if (child instanceof MissingGlyphElement) {\n        this.missingGlyph = child\n      } else\n      if (child instanceof GlyphElement) {\n        if (child.arabicForm) {\n          this.isRTL = true\n          this.isArabic = true\n\n          const arabicGlyph = this.arabicGlyphs[child.unicode]\n\n          if (typeof arabicGlyph === 'undefined') {\n            this.arabicGlyphs[child.unicode] = {\n              [child.arabicForm]: child\n            }\n          } else {\n            arabicGlyph[child.arabicForm] = child\n          }\n        } else {\n          this.glyphs[child.unicode] = child\n        }\n      }\n    }\n  }\n\n  override render() {\n    // NO RENDER\n  }\n}\n","import { TextElement } from './TextElement'\n\nexport class TRefElement extends TextElement {\n  override type = 'tref'\n\n  override getText() {\n    const element = this.getHrefAttribute().getDefinition()\n\n    if (element) {\n      const firstChild = element.children[0] as TextElement\n\n      if (firstChild) {\n        return firstChild.getText()\n      }\n    }\n\n    return ''\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Property } from '../Property'\nimport { Font } from '../Font'\nimport { BoundingBox } from '../BoundingBox'\nimport { Document } from './Document'\nimport { TextElement } from './TextElement'\nimport { GElement } from './GElement'\n\nexport class AElement extends TextElement {\n  override type = 'a'\n  protected readonly hasText: boolean\n  protected readonly text: string\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    const { childNodes } = node\n    const firstChild = childNodes[0]\n    const hasText = childNodes.length > 0\n      && Array.from(childNodes).every(node => node.nodeType === 3)\n\n    this.hasText = hasText\n    this.text = hasText\n      ? this.getTextFromNode(firstChild)\n      : ''\n  }\n\n  override getText() {\n    return this.text\n  }\n\n  override renderChildren(ctx: RenderingContext2D) {\n    if (this.hasText) {\n      // render as text element\n      super.renderChildren(ctx)\n\n      const {\n        document,\n        x,\n        y\n      } = this\n      const { mouse } = document.screen\n      const fontSize = new Property(\n        document,\n        'fontSize',\n        Font.parse(document.ctx.font).fontSize\n      )\n\n      // Do not calc bounding box if mouse is not working.\n      if (mouse.isWorking()) {\n        mouse.checkBoundingBox(\n          this,\n          new BoundingBox(\n            x,\n            y - fontSize.getPixels('y'),\n            x + this.measureText(ctx),\n            y\n          )\n        )\n      }\n    } else\n    if (this.children.length > 0) {\n      // render as temporary group\n      const g = new GElement(this.document)\n\n      g.children = this.children\n      g.parent = this\n      g.render(ctx)\n    }\n  }\n\n  onClick() {\n    const { window } = this.document\n\n    if (window) {\n      window.open(this.getHrefAttribute().getString())\n    }\n  }\n\n  onMouseMove() {\n    const ctx = this.document.ctx as CanvasRenderingContext2D\n\n    ctx.canvas.style.cursor = 'pointer'\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport {\n  PSEUDO_ZERO,\n  CB1,\n  CB2,\n  CB3,\n  CB4,\n  QB1,\n  QB2,\n  QB3\n} from '../util'\nimport { PathParser, CommandType } from '../PathParser'\nimport { Document } from './Document'\nimport { TextElement } from './TextElement'\nimport { PathElement } from './PathElement'\n\nexport interface IPoint {\n  x: number\n  y: number\n}\n\nexport interface IPathCommand {\n  type: CommandType\n  points: number[]\n  start?: IPoint\n  pathLength: number\n}\n\ninterface ICachedPoint extends IPoint {\n  distance: number\n}\n\ninterface IEquidistantCache {\n  step: number\n  precision: number\n  points: ICachedPoint[]\n}\n\ninterface IGlyphInfo {\n  // transposeX: number;\n  // transposeY: number;\n  text: string\n  rotation: number\n  p0: ICachedPoint\n  p1: ICachedPoint\n}\n\nexport class TextPathElement extends TextElement {\n  override type = 'textPath'\n  protected textWidth = 0\n  protected textHeight = 0\n  protected pathLength = -1\n  protected glyphInfo: IGlyphInfo[] = null\n  protected readonly text: string\n  protected readonly dataArray: IPathCommand[]\n  private letterSpacingCache: number[] = []\n  private equidistantCache: IEquidistantCache\n  private readonly measuresCache = new Map<string, number>([['', 0]])\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    const pathElement = this.getHrefAttribute().getDefinition<PathElement>()\n\n    this.text = this.getTextFromNode()\n    this.dataArray = this.parsePathData(pathElement)\n  }\n\n  override getText() {\n    return this.text\n  }\n\n  path(ctx: RenderingContext2D) {\n    const { dataArray } = this\n\n    if (ctx) {\n      ctx.beginPath()\n    }\n\n    dataArray.forEach(({\n      type,\n      points\n    }) => {\n      switch (type) {\n        case PathParser.LINE_TO:\n\n          if (ctx) {\n            ctx.lineTo(points[0], points[1])\n          }\n\n          break\n\n        case PathParser.MOVE_TO:\n\n          if (ctx) {\n            ctx.moveTo(points[0], points[1])\n          }\n\n          break\n\n        case PathParser.CURVE_TO:\n\n          if (ctx) {\n            ctx.bezierCurveTo(\n              points[0],\n              points[1],\n              points[2],\n              points[3],\n              points[4],\n              points[5]\n            )\n          }\n\n          break\n\n        case PathParser.QUAD_TO:\n\n          if (ctx) {\n            ctx.quadraticCurveTo(\n              points[0],\n              points[1],\n              points[2],\n              points[3]\n            )\n          }\n\n          break\n\n        case PathParser.ARC: {\n          const [\n            cx,\n            cy,\n            rx,\n            ry,\n            theta,\n            dTheta,\n            psi,\n            fs\n          ] = points\n          const r = rx > ry ? rx : ry\n          const scaleX = rx > ry ? 1 : rx / ry\n          const scaleY = rx > ry ? ry / rx : 1\n\n          if (ctx) {\n            ctx.translate(cx, cy)\n            ctx.rotate(psi)\n            ctx.scale(scaleX, scaleY)\n            ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs))\n            ctx.scale(1 / scaleX, 1 / scaleY)\n            ctx.rotate(-psi)\n            ctx.translate(-cx, -cy)\n          }\n\n          break\n        }\n\n        case PathParser.CLOSE_PATH:\n\n          if (ctx) {\n            ctx.closePath()\n          }\n\n          break\n\n        default:\n      }\n    })\n  }\n\n  override renderChildren(ctx: RenderingContext2D) {\n    this.setTextData(ctx)\n    ctx.save()\n\n    const textDecoration = this.parent.getStyle('text-decoration').getString()\n    const fontSize = this.getFontSize()\n    const { glyphInfo } = this\n    const fill = ctx.fillStyle\n\n    if (textDecoration === 'underline') {\n      ctx.beginPath()\n    }\n\n    glyphInfo.forEach((glyph, i) => {\n      const {\n        p0,\n        p1,\n        rotation,\n        text: partialText\n      } = glyph\n\n      ctx.save()\n      ctx.translate(p0.x, p0.y)\n      ctx.rotate(rotation)\n\n      if (ctx.fillStyle) {\n        ctx.fillText(partialText, 0, 0)\n      }\n\n      if (ctx.strokeStyle) {\n        ctx.strokeText(partialText, 0, 0)\n      }\n\n      ctx.restore()\n\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          ctx.moveTo(p0.x, p0.y + fontSize / 8)\n        }\n\n        ctx.lineTo(p1.x, p1.y + fontSize / 5)\n      }\n\n      // // To assist with debugging visually, uncomment following\n      //\n      // ctx.beginPath();\n      // if (i % 2)\n      //   ctx.strokeStyle = 'red';\n      // else\n      //   ctx.strokeStyle = 'green';\n      // ctx.moveTo(p0.x, p0.y);\n      // ctx.lineTo(p1.x, p1.y);\n      // ctx.stroke();\n      // ctx.closePath();\n    })\n\n    if (textDecoration === 'underline') {\n      ctx.lineWidth = fontSize / 20\n      ctx.strokeStyle = fill\n      ctx.stroke()\n      ctx.closePath()\n    }\n\n    ctx.restore()\n  }\n\n  protected getLetterSpacingAt(idx = 0) {\n    return this.letterSpacingCache[idx] || 0\n  }\n\n  protected findSegmentToFitChar(\n    ctx: RenderingContext2D,\n    anchor: string,\n    textFullWidth: number,\n    fullPathWidth: number,\n    spacesNumber: number,\n    inputOffset: number,\n    dy: number,\n    c: string,\n    charI: number\n  ) {\n    let offset = inputOffset\n    let glyphWidth = this.measureText(ctx, c)\n\n    if (c === ' '\n      && anchor === 'justify'\n      && textFullWidth < fullPathWidth\n    ) {\n      glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber\n    }\n\n    if (charI > -1) {\n      offset += this.getLetterSpacingAt(charI)\n    }\n\n    const splineStep = this.textHeight / 20\n    const p0 = this.getEquidistantPointOnPath(offset, splineStep, 0)\n    const p1 = this.getEquidistantPointOnPath(offset + glyphWidth, splineStep, 0)\n    const segment = {\n      p0,\n      p1\n    }\n    const rotation = p0 && p1\n      ? Math.atan2(\n        p1.y - p0.y,\n        p1.x - p0.x\n      )\n      : 0\n\n    if (dy) {\n      const dyX = Math.cos(Math.PI / 2 + rotation) * dy\n      const dyY = Math.cos(-rotation) * dy\n\n      segment.p0 = {\n        ...p0,\n        x: p0.x + dyX,\n        y: p0.y + dyY\n      }\n      segment.p1 = {\n        ...p1,\n        x: p1.x + dyX,\n        y: p1.y + dyY\n      }\n    }\n\n    offset += glyphWidth\n\n    return {\n      offset,\n      segment,\n      rotation\n    }\n  }\n\n  protected override measureText(\n    ctx: RenderingContext2D,\n    text?: string\n  ) {\n    const { measuresCache } = this\n    const targetText = text || this.getText()\n\n    if (measuresCache.has(targetText)) {\n      return measuresCache.get(targetText)\n    }\n\n    const measure = this.measureTargetText(ctx, targetText)\n\n    measuresCache.set(targetText, measure)\n\n    return measure\n  }\n\n  // This method supposes what all custom fonts already loaded.\n  // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n  // You need to call this method manually to update glyphs cache.\n  protected setTextData(ctx: RenderingContext2D) {\n    if (this.glyphInfo) {\n      return\n    }\n\n    const renderText = this.getText()\n    const chars = renderText.split('')\n    const spacesNumber = renderText.split(' ').length - 1\n    const dx = this.parent.getAttribute('dx').split().map(_ => _.getPixels('x'))\n    const dy = this.parent.getAttribute('dy').getPixels('y')\n    const anchor = this.parent.getStyle('text-anchor').getString('start')\n    const thisSpacing = this.getStyle('letter-spacing')\n    const parentSpacing = this.parent.getStyle('letter-spacing')\n    let letterSpacing = 0\n\n    if (!thisSpacing.hasValue()\n      || thisSpacing.getValue() === 'inherit'\n    ) {\n      letterSpacing = parentSpacing.getPixels()\n    } else\n    if (thisSpacing.hasValue()) {\n      if (thisSpacing.getValue() !== 'initial'\n        && thisSpacing.getValue() !== 'unset'\n      ) {\n        letterSpacing = thisSpacing.getPixels()\n      }\n    }\n\n    // fill letter-spacing cache\n    const letterSpacingCache: number[] = []\n    const textLen = renderText.length\n\n    this.letterSpacingCache = letterSpacingCache\n\n    for (let i = 0; i < textLen; i++) {\n      letterSpacingCache.push(\n        typeof dx[i] !== 'undefined'\n          ? dx[i]\n          : letterSpacing\n      )\n    }\n\n    const dxSum = letterSpacingCache.reduce(\n      (acc, cur, i) => (\n        i === 0\n          ? 0\n          : acc + cur || 0\n      ),\n      0\n    )\n    const textWidth = this.measureText(ctx)\n    const textFullWidth = Math.max(textWidth + dxSum, 0)\n\n    this.textWidth = textWidth\n    this.textHeight = this.getFontSize()\n    this.glyphInfo = []\n\n    const fullPathWidth = this.getPathLength()\n    const startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth\n    let offset = 0\n\n    if (anchor === 'middle'\n      || anchor === 'center'\n    ) {\n      offset = -textFullWidth / 2\n    }\n\n    if (anchor === 'end'\n      || anchor === 'right'\n    ) {\n      offset = -textFullWidth\n    }\n\n    offset += startOffset\n\n    chars.forEach((char, i) => {\n      // Find such segment what distance between p0 and p1 is approx. width of glyph\n      const {\n        offset: nextOffset,\n        segment,\n        rotation\n      } = this.findSegmentToFitChar(\n        ctx,\n        anchor,\n        textFullWidth,\n        fullPathWidth,\n        spacesNumber,\n        offset,\n        dy,\n        char,\n        i\n      )\n\n      offset = nextOffset\n\n      if (!segment.p0 || !segment.p1) {\n        return\n      }\n\n      // const width = this.getLineLength(\n      //   segment.p0.x,\n      //   segment.p0.y,\n      //   segment.p1.x,\n      //   segment.p1.y\n      // );\n      // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n      // Can foresee having a rough pair table built in that the developer can override as needed.\n      // Or use \"dx\" attribute of the <text> node as a naive replacement\n      // const kern = 0;\n      // placeholder for future implementation\n      // const midpoint = this.getPointOnLine(\n      //   kern + width / 2.0,\n      //   segment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y\n      // );\n\n      this.glyphInfo.push({\n        // transposeX: midpoint.x,\n        // transposeY: midpoint.y,\n        text: chars[i],\n        p0: segment.p0,\n        p1: segment.p1,\n        rotation\n      })\n    })\n  }\n\n  protected parsePathData(path: PathElement) {\n    this.pathLength = -1 // reset path length\n\n    if (!path) {\n      return []\n    }\n\n    const pathCommands: IPathCommand[] = []\n    const { pathParser } = path\n\n    pathParser.reset()\n\n    // convert l, H, h, V, and v to L\n    while (!pathParser.isEnd()) {\n      const { current } = pathParser\n      const startX = current ? current.x : 0\n      const startY = current ? current.y : 0\n      const command = pathParser.next()\n      let nextCommandType: CommandType = command.type\n      let points: number[] = []\n\n      switch (command.type) {\n        case PathParser.MOVE_TO:\n          this.pathM(pathParser, points)\n          break\n\n        case PathParser.LINE_TO:\n          nextCommandType = this.pathL(pathParser, points)\n          break\n\n        case PathParser.HORIZ_LINE_TO:\n          nextCommandType = this.pathH(pathParser, points)\n          break\n\n        case PathParser.VERT_LINE_TO:\n          nextCommandType = this.pathV(pathParser, points)\n          break\n\n        case PathParser.CURVE_TO:\n          this.pathC(pathParser, points)\n          break\n\n        case PathParser.SMOOTH_CURVE_TO:\n          nextCommandType = this.pathS(pathParser, points)\n          break\n\n        case PathParser.QUAD_TO:\n          this.pathQ(pathParser, points)\n          break\n\n        case PathParser.SMOOTH_QUAD_TO:\n          nextCommandType = this.pathT(pathParser, points)\n          break\n\n        case PathParser.ARC:\n          points = this.pathA(pathParser)\n          break\n\n        case PathParser.CLOSE_PATH:\n          PathElement.pathZ(pathParser)\n          break\n\n        default:\n      }\n\n      if (command.type !== PathParser.CLOSE_PATH) {\n        pathCommands.push({\n          type: nextCommandType,\n          points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, nextCommandType, points)\n        })\n      } else {\n        pathCommands.push({\n          type: PathParser.CLOSE_PATH,\n          points: [],\n          pathLength: 0\n        })\n      }\n    }\n\n    return pathCommands\n  }\n\n  protected pathM(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      x,\n      y\n    } = PathElement.pathM(pathParser).point\n\n    points.push(x, y)\n  }\n\n  protected pathL(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      x,\n      y\n    } = PathElement.pathL(pathParser).point\n\n    points.push(x, y)\n\n    return PathParser.LINE_TO\n  }\n\n  protected pathH(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      x,\n      y\n    } = PathElement.pathH(pathParser).point\n\n    points.push(x, y)\n\n    return PathParser.LINE_TO\n  }\n\n  protected pathV(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      x,\n      y\n    } = PathElement.pathV(pathParser).point\n\n    points.push(x, y)\n\n    return PathParser.LINE_TO\n  }\n\n  protected pathC(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser)\n\n    points.push(\n      point.x,\n      point.y,\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n  }\n\n  protected pathS(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser)\n\n    points.push(\n      point.x,\n      point.y,\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n\n    return PathParser.CURVE_TO\n  }\n\n  protected pathQ(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser)\n\n    points.push(\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n  }\n\n  protected pathT(\n    pathParser: PathParser,\n    points: number[]\n  ) {\n    const {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser)\n\n    points.push(\n      controlPoint.x,\n      controlPoint.y,\n      currentPoint.x,\n      currentPoint.y\n    )\n\n    return PathParser.QUAD_TO\n  }\n\n  protected pathA(\n    pathParser: PathParser\n  ) {\n    let {\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser)\n\n    if (sweepFlag === 0 && ad > 0) {\n      ad -= 2 * Math.PI\n    }\n\n    if (sweepFlag === 1 && ad < 0) {\n      ad += 2 * Math.PI\n    }\n\n    return [\n      centp.x,\n      centp.y,\n      rX,\n      rY,\n      a1,\n      ad,\n      xAxisRotation,\n      sweepFlag\n    ]\n  }\n\n  protected calcLength(\n    x: number,\n    y: number,\n    commandType: CommandType,\n    points: number[]\n  ) {\n    let len = 0\n    let p1: IPoint = null\n    let p2: IPoint = null\n    let t = 0\n\n    switch (commandType) {\n      case PathParser.LINE_TO:\n        return this.getLineLength(x, y, points[0], points[1])\n\n      case PathParser.CURVE_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0\n        p1 = this.getPointOnCubicBezier(\n          0,\n          x,\n          y,\n          points[0],\n          points[1],\n          points[2],\n          points[3],\n          points[4],\n          points[5]\n        )\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnCubicBezier(\n            t,\n            x,\n            y,\n            points[0],\n            points[1],\n            points[2],\n            points[3],\n            points[4],\n            points[5]\n          )\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y)\n          p1 = p2\n        }\n\n        return len\n\n      case PathParser.QUAD_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0\n        p1 = this.getPointOnQuadraticBezier(\n          0,\n          x,\n          y,\n          points[0],\n          points[1],\n          points[2],\n          points[3]\n        )\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnQuadraticBezier(\n            t,\n            x,\n            y,\n            points[0],\n            points[1],\n            points[2],\n            points[3]\n          )\n          len += this.getLineLength(\n            p1.x,\n            p1.y,\n            p2.x,\n            p2.y\n          )\n          p1 = p2\n        }\n\n        return len\n\n      case PathParser.ARC: {\n        // Approximates by breaking curve into line segments\n        len = 0.0\n\n        const start = points[4]\n        // 4 = theta\n        const dTheta = points[5]\n        // 5 = dTheta\n        const end = points[4] + dTheta\n        let inc = Math.PI / 180.0\n\n        // 1 degree resolution\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end)\n        }\n\n        // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n        p1 = this.getPointOnEllipticalArc(\n          points[0],\n          points[1],\n          points[2],\n          points[3],\n          start,\n          0\n        )\n\n        if (dTheta < 0) { // clockwise\n          for (t = start - inc; t > end; t -= inc) {\n            p2 = this.getPointOnEllipticalArc(\n              points[0],\n              points[1],\n              points[2],\n              points[3],\n              t,\n              0\n            )\n            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y)\n            p1 = p2\n          }\n        } else { // counter-clockwise\n          for (t = start + inc; t < end; t += inc) {\n            p2 = this.getPointOnEllipticalArc(\n              points[0],\n              points[1],\n              points[2],\n              points[3],\n              t,\n              0\n            )\n            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y)\n            p1 = p2\n          }\n        }\n\n        p2 = this.getPointOnEllipticalArc(\n          points[0],\n          points[1],\n          points[2],\n          points[3],\n          end,\n          0\n        )\n        len += this.getLineLength(p1.x, p1.y, p2.x, p2.y)\n\n        return len\n      }\n\n      default:\n    }\n\n    return 0\n  }\n\n  protected getPointOnLine(\n    dist: number,\n    p1x: number,\n    p1y: number,\n    p2x: number,\n    p2y: number,\n    fromX = p1x,\n    fromY = p1y\n  ) {\n    const m = (p2y - p1y) / ((p2x - p1x) + PSEUDO_ZERO)\n    let run = Math.sqrt(dist * dist / (1 + m * m))\n\n    if (p2x < p1x) {\n      run *= -1\n    }\n\n    let rise = m * run\n    let pt: IPoint = null\n\n    if (p2x === p1x) { // vertical line\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      }\n    } else\n    if ((fromY - p1y) / ((fromX - p1x) + PSEUDO_ZERO) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      }\n    } else {\n      let ix = 0\n      let iy = 0\n      const len = this.getLineLength(p1x, p1y, p2x, p2y)\n\n      if (len < PSEUDO_ZERO) {\n        return null\n      }\n\n      let u =\n        ((fromX - p1x) * (p2x - p1x))\n        + ((fromY - p1y) * (p2y - p1y))\n\n      u /= len * len\n      ix = p1x + u * (p2x - p1x)\n      iy = p1y + u * (p2y - p1y)\n\n      const pRise = this.getLineLength(fromX, fromY, ix, iy)\n      const pRun = Math.sqrt(dist * dist - pRise * pRise)\n\n      run = Math.sqrt(pRun * pRun / (1 + m * m))\n\n      if (p2x < p1x) {\n        run *= -1\n      }\n\n      rise = m * run\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      }\n    }\n\n    return pt\n  }\n\n  protected getPointOnPath(distance: number) {\n    const fullLen = this.getPathLength()\n    let cumulativePathLength = 0\n    let p: IPoint = null\n\n    if (distance < -0.00005\n      || distance - 0.00005 > fullLen\n    ) {\n      return null\n    }\n\n    const { dataArray } = this\n\n    for (const command of dataArray) {\n      if (command\n        && (\n          command.pathLength < 0.00005\n          || cumulativePathLength + command.pathLength + 0.00005 < distance\n        )\n      ) {\n        cumulativePathLength += command.pathLength\n        continue\n      }\n\n      const delta = distance - cumulativePathLength\n      let currentT = 0\n\n      switch (command.type) {\n        case PathParser.LINE_TO:\n          p = this.getPointOnLine(\n            delta,\n            command.start.x,\n            command.start.y,\n            command.points[0],\n            command.points[1],\n            command.start.x,\n            command.start.y\n          )\n          break\n\n        case PathParser.ARC: {\n          const start = command.points[4]\n          // 4 = theta\n          const dTheta = command.points[5]\n          // 5 = dTheta\n          const end = command.points[4] + dTheta\n\n          currentT = start + delta / command.pathLength * dTheta\n\n          if (dTheta < 0 && currentT < end\n            || dTheta >= 0 && currentT > end\n          ) {\n            break\n          }\n\n          p = this.getPointOnEllipticalArc(\n            command.points[0],\n            command.points[1],\n            command.points[2],\n            command.points[3],\n            currentT,\n            command.points[6]\n          )\n          break\n        }\n\n        case PathParser.CURVE_TO:\n\n          currentT = delta / command.pathLength\n\n          if (currentT > 1) {\n            currentT = 1\n          }\n\n          p = this.getPointOnCubicBezier(\n            currentT,\n            command.start.x,\n            command.start.y,\n            command.points[0],\n            command.points[1],\n            command.points[2],\n            command.points[3],\n            command.points[4],\n            command.points[5]\n          )\n          break\n\n        case PathParser.QUAD_TO:\n\n          currentT = delta / command.pathLength\n\n          if (currentT > 1) {\n            currentT = 1\n          }\n\n          p = this.getPointOnQuadraticBezier(\n            currentT,\n            command.start.x,\n            command.start.y,\n            command.points[0],\n            command.points[1],\n            command.points[2],\n            command.points[3]\n          )\n          break\n\n        default:\n      }\n\n      if (p) {\n        return p\n      }\n\n      break\n    }\n\n    return null\n  }\n\n  protected getLineLength(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number\n  ) {\n    return Math.sqrt(\n      (x2 - x1) * (x2 - x1)\n      + (y2 - y1) * (y2 - y1)\n    )\n  }\n\n  protected getPathLength() {\n    if (this.pathLength === -1) {\n      this.pathLength = this.dataArray.reduce<number>(\n        (length, command: IPathCommand) => (\n          command.pathLength > 0\n            ? length + command.pathLength\n            : length\n        ),\n        0\n      )\n    }\n\n    return this.pathLength\n  }\n\n  protected getPointOnCubicBezier(\n    pct: number,\n    p1x: number,\n    p1y: number,\n    p2x: number,\n    p2y: number,\n    p3x: number,\n    p3y: number,\n    p4x: number,\n    p4y: number\n  ): IPoint {\n    const x = p4x * CB1(pct) + p3x * CB2(pct) + p2x * CB3(pct) + p1x * CB4(pct)\n    const y = p4y * CB1(pct) + p3y * CB2(pct) + p2y * CB3(pct) + p1y * CB4(pct)\n\n    return {\n      x,\n      y\n    }\n  }\n\n  protected getPointOnQuadraticBezier(\n    pct: number,\n    p1x: number,\n    p1y: number,\n    p2x: number,\n    p2y: number,\n    p3x: number,\n    p3y: number\n  ): IPoint {\n    const x = p3x * QB1(pct) + p2x * QB2(pct) + p1x * QB3(pct)\n    const y = p3y * QB1(pct) + p2y * QB2(pct) + p1y * QB3(pct)\n\n    return {\n      x,\n      y\n    }\n  }\n\n  protected getPointOnEllipticalArc(\n    cx: number,\n    cy: number,\n    rx: number,\n    ry: number,\n    theta: number,\n    psi: number\n  ): IPoint {\n    const cosPsi = Math.cos(psi)\n    const sinPsi = Math.sin(psi)\n    const pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    }\n\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    }\n  }\n\n  // TODO need some optimisations. possibly build cache only for curved segments?\n  protected buildEquidistantCache(\n    inputStep: number,\n    inputPrecision: number\n  ) {\n    const fullLen = this.getPathLength()\n    const precision = inputPrecision || 0.25 // accuracy vs performance\n    const step = inputStep || fullLen / 100\n\n    if (!this.equidistantCache\n      || this.equidistantCache.step !== step\n      || this.equidistantCache.precision !== precision\n    ) {\n      // Prepare cache\n      this.equidistantCache = {\n        step,\n        precision,\n        points: []\n      }\n\n      // Calculate points\n      let s = 0\n\n      for (let l = 0; l <= fullLen; l += precision) {\n        const p0 = this.getPointOnPath(l)\n        const p1 = this.getPointOnPath(l + precision)\n\n        if (!p0 || !p1) {\n          continue\n        }\n\n        s += this.getLineLength(p0.x, p0.y, p1.x, p1.y)\n\n        if (s >= step) {\n          this.equidistantCache.points.push({\n            x: p0.x,\n            y: p0.y,\n            distance: l\n          })\n          s -= step\n        }\n      }\n    }\n  }\n\n  protected getEquidistantPointOnPath(\n    targetDistance: number,\n    step?: number,\n    precision?: number\n  ) {\n    this.buildEquidistantCache(step, precision)\n\n    if (targetDistance < 0\n      || targetDistance - this.getPathLength() > 0.00005\n    ) {\n      return null\n    }\n\n    const idx = Math.round(\n      targetDistance\n      / this.getPathLength()\n      * (this.equidistantCache.points.length - 1)\n    )\n\n    return this.equidistantCache.points[idx] || null\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { RenderedElement } from './RenderedElement'\n\nexport class SymbolElement extends RenderedElement {\n  override type = 'symbol'\n\n  override render(_: RenderingContext2D) {\n    // NO RENDER\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Property } from '../Property'\nimport { Transform } from '../Transform'\nimport { RenderedElement } from './RenderedElement'\nimport { PathElement } from './PathElement'\nimport { SVGElement } from './SVGElement'\n\nexport class UseElement extends RenderedElement {\n  override type = 'use'\n  private cachedElement: PathElement | undefined\n\n  override setContext(ctx: RenderingContext2D) {\n    super.setContext(ctx)\n\n    const xAttr = this.getAttribute('x')\n    const yAttr = this.getAttribute('y')\n\n    if (xAttr.hasValue()) {\n      ctx.translate(xAttr.getPixels('x'), 0)\n    }\n\n    if (yAttr.hasValue()) {\n      ctx.translate(0, yAttr.getPixels('y'))\n    }\n  }\n\n  path(ctx: RenderingContext2D) {\n    const { element } = this\n\n    if (element) {\n      element.path(ctx)\n    }\n  }\n\n  override renderChildren(ctx: RenderingContext2D) {\n    const {\n      document,\n      element\n    } = this\n\n    if (element) {\n      let tempSvg: RenderedElement = element\n\n      if (element.type === 'symbol') {\n        // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n        tempSvg = new SVGElement(document)\n        tempSvg.attributes.viewBox = new Property(\n          document,\n          'viewBox',\n          element.getAttribute('viewBox').getString()\n        )\n        tempSvg.attributes.preserveAspectRatio = new Property(\n          document,\n          'preserveAspectRatio',\n          element.getAttribute('preserveAspectRatio').getString()\n        )\n        tempSvg.attributes.overflow = new Property(\n          document,\n          'overflow',\n          element.getAttribute('overflow').getString()\n        )\n        tempSvg.children = element.children\n\n        // element is still the parent of the children\n        element.styles.opacity = new Property(\n          document,\n          'opacity',\n          this.calculateOpacity()\n        )\n      }\n\n      if (tempSvg.type === 'svg') {\n        const widthStyle = this.getStyle('width', false, true)\n        const heightStyle = this.getStyle('height', false, true)\n\n        // if symbol or svg, inherit width/height from me\n        if (widthStyle.hasValue()) {\n          tempSvg.attributes.width = new Property(\n            document,\n            'width',\n            widthStyle.getString()\n          )\n        }\n\n        if (heightStyle.hasValue()) {\n          tempSvg.attributes.height = new Property(\n            document,\n            'height',\n            heightStyle.getString()\n          )\n        }\n      }\n\n      const oldParent = tempSvg.parent\n\n      tempSvg.parent = this\n      tempSvg.render(ctx)\n      tempSvg.parent = oldParent\n    }\n  }\n\n  getBoundingBox(ctx: CanvasRenderingContext2D) {\n    const { element } = this\n\n    if (element) {\n      return element.getBoundingBox(ctx)\n    }\n\n    return null\n  }\n\n  elementTransform() {\n    const {\n      document,\n      element\n    } = this\n\n    if (!element) {\n      return null\n    }\n\n    return Transform.fromElement(document, element)\n  }\n\n  protected get element() {\n    if (!this.cachedElement) {\n      this.cachedElement = this.getHrefAttribute().getDefinition()\n    }\n\n    return this.cachedElement\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Document } from './Document'\nimport { Element } from './Element'\n\nexport class FeDropShadowElement extends Element {\n  override type = 'feDropShadow'\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.addStylesFromStyleDefinition()\n  }\n\n  apply(\n    _: RenderingContext2D,\n    _x: number,\n    _y: number,\n    _width: number,\n    _height: number\n  ) {\n    // TODO: implement\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Element } from './Element'\n\nexport class FeMorphologyElement extends Element {\n  override type = 'feMorphology'\n\n  apply(\n    _: RenderingContext2D,\n    _x: number,\n    _y: number,\n    _width: number,\n    _height: number\n  ) {\n    // TODO: implement\n  }\n}\n","import { RenderingContext2D } from '../types'\nimport { Element } from './Element'\n\nexport class FeCompositeElement extends Element {\n  override type = 'feComposite'\n\n  apply(\n    _: RenderingContext2D,\n    _x: number,\n    _y: number,\n    _width: number,\n    _height: number\n  ) {\n    // TODO: implement\n  }\n}\n","import { canvasRGBA } from 'stackblur-canvas'\nimport { RenderingContext2D } from '../types'\nimport { Document } from './Document'\nimport { Element } from './Element'\n\nexport class FeGaussianBlurElement extends Element {\n  override type = 'feGaussianBlur'\n  readonly extraFilterDistance: number\n  protected readonly blurRadius: number\n\n  constructor(\n    document: Document,\n    node: HTMLElement,\n    captureTextNodes?: boolean\n  ) {\n    super(document, node, captureTextNodes)\n\n    this.blurRadius = Math.floor(this.getAttribute('stdDeviation').getNumber())\n    this.extraFilterDistance = this.blurRadius\n  }\n\n  apply(\n    ctx: RenderingContext2D,\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ) {\n    const {\n      document,\n      blurRadius\n    } = this\n    const body = document.window\n      ? document.window.document.body\n      : null\n    const canvas = ctx.canvas as HTMLCanvasElement\n\n    // StackBlur requires canvas be on document\n    canvas.id = document.getUniqueId()\n\n    if (body) {\n      canvas.style.display = 'none'\n      body.appendChild(canvas)\n    }\n\n    canvasRGBA(canvas, x, y, width, height, blurRadius)\n\n    if (body) {\n      body.removeChild(canvas)\n    }\n  }\n}\n","import { Element } from './Element'\n\nexport class TitleElement extends Element {\n  override type = 'title'\n}\n","import { Element } from './Element'\n\nexport class DescElement extends Element {\n  override type = 'desc'\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { Canvg } from '../Canvg'\nimport { IScreenViewBoxConfig, Screen } from '../Screen'\nimport { Property } from '../Property'\nimport { SVGFontLoader } from '../SVGFontLoader'\nimport { Element } from './Element'\nimport { UnknownElement } from './UnknownElement'\nimport { TextNode } from './TextNode'\nimport { ImageElement } from './ImageElement'\nimport { SVGElement } from './SVGElement'\nimport {\n  AnyElement,\n  elements as elementTypes\n} from './elements'\n\n/**\n * Function to create new canvas.\n */\nexport type CreateCanvas = (width: number, height: number) => HTMLCanvasElement | OffscreenCanvas\n\n/**\n * Function to create new image.\n */\nexport type CreateImage = (src: string, anonymousCrossOrigin?: boolean) => Promise<CanvasImageSource>\n\nexport interface IDocumentOptions {\n  /**\n   * Default `rem` size.\n   */\n  rootEmSize?: number\n  /**\n   * Default `em` size.\n   */\n  emSize?: number\n  /**\n   * Function to create new canvas.\n   */\n  createCanvas?: CreateCanvas\n  /**\n   * Function to create new image.\n   */\n  createImage?: CreateImage\n  /**\n   * Load images anonymously.\n   */\n  anonymousCrossOrigin?: boolean\n}\n\nexport type IViewBoxConfig = Omit<IScreenViewBoxConfig, 'document'>\n\ntype DOMDocument = typeof window.document\n\nfunction createCanvas(width: number, height: number) {\n  const canvas = document.createElement('canvas')\n\n  canvas.width = width\n  canvas.height = height\n\n  return canvas\n}\n\nasync function createImage(src: string, anonymousCrossOrigin = false) {\n  const image = document.createElement('img')\n\n  if (anonymousCrossOrigin) {\n    image.crossOrigin = 'Anonymous'\n  }\n\n  return new Promise<HTMLImageElement>((resolve, reject) => {\n    image.onload = () => {\n      resolve(image)\n    }\n\n    image.onerror = (_event, _source, _lineno, _colno, error) => {\n      reject(error)\n    }\n\n    image.src = src\n  })\n}\n\nconst DEFAULT_EM_SIZE = 12\n\nexport class Document {\n  static readonly createCanvas = createCanvas\n  static readonly createImage = createImage\n  static readonly elementTypes: Record<string, AnyElement> = elementTypes\n\n  rootEmSize: number\n  documentElement?: SVGElement\n  readonly screen: Screen\n  readonly createCanvas: CreateCanvas\n  readonly createImage: CreateImage\n  readonly definitions: Record<string, Element> = {}\n  readonly styles: Record<string, Record<string, Property>> = {}\n  readonly stylesSpecificity: Record<string, string> = {}\n  readonly images: ImageElement[] = []\n  readonly fonts: SVGFontLoader[] = []\n  private readonly emSizeStack: number[] = []\n  private uniqueId = 0\n\n  constructor(\n    readonly canvg: Canvg,\n    {\n      rootEmSize = DEFAULT_EM_SIZE,\n      emSize = DEFAULT_EM_SIZE,\n      createCanvas = Document.createCanvas,\n      createImage = Document.createImage,\n      anonymousCrossOrigin\n    }: IDocumentOptions = {}\n  ) {\n    this.screen = canvg.screen\n    this.rootEmSize = rootEmSize\n    this.emSize = emSize\n    this.createCanvas = createCanvas\n    this.createImage = this.bindCreateImage(createImage, anonymousCrossOrigin)\n\n    this.screen.wait(() => this.isImagesLoaded())\n    this.screen.wait(() => this.isFontsLoaded())\n  }\n\n  private bindCreateImage(createImage: CreateImage, anonymousCrossOrigin?: boolean) {\n    if (typeof anonymousCrossOrigin === 'boolean') {\n      return (source: string, forceAnonymousCrossOrigin?: boolean) => createImage(\n        source,\n        typeof forceAnonymousCrossOrigin === 'boolean'\n          ? forceAnonymousCrossOrigin\n          : anonymousCrossOrigin\n      )\n    }\n\n    return createImage\n  }\n\n  get window() {\n    return this.screen.window\n  }\n\n  get fetch() {\n    return this.screen.fetch\n  }\n\n  get ctx() {\n    return this.screen.ctx\n  }\n\n  get emSize() {\n    const { emSizeStack } = this\n\n    return emSizeStack[emSizeStack.length - 1] || DEFAULT_EM_SIZE\n  }\n\n  set emSize(value: number) {\n    const { emSizeStack } = this\n\n    emSizeStack.push(value)\n  }\n\n  popEmSize() {\n    const { emSizeStack } = this\n\n    emSizeStack.pop()\n  }\n\n  getUniqueId() {\n    return `canvg${++this.uniqueId}`\n  }\n\n  isImagesLoaded() {\n    return this.images.every(_ => _.loaded)\n  }\n\n  isFontsLoaded() {\n    return this.fonts.every(_ => _.loaded)\n  }\n\n  createDocumentElement(document: DOMDocument) {\n    const documentElement = this.createElement<SVGElement>(document.documentElement)\n\n    documentElement.root = true\n    documentElement.addStylesFromStyleDefinition()\n\n    this.documentElement = documentElement\n\n    return documentElement\n  }\n\n  createElement<T extends Element>(node: HTMLElement) {\n    const elementType = node.nodeName.replace(/^[^:]+:/, '')\n    const ElementType = Document.elementTypes[elementType]\n\n    if (ElementType) {\n      return new ElementType(this, node) as T\n    }\n\n    return new UnknownElement(this, node) as T\n  }\n\n  createTextNode(node: HTMLElement) {\n    return new TextNode(this, node)\n  }\n\n  setViewBox(config: IViewBoxConfig) {\n    this.screen.setViewBox({\n      document: this,\n      ...config\n    })\n  }\n}\n","import { RenderingContext2D } from './types'\nimport { IParserOptions, Parser } from './Parser'\nimport {\n  IScreenOptions,\n  IScreenStartOptions,\n  Screen\n} from './Screen'\nimport {\n  IDocumentOptions,\n  Document,\n  SVGElement\n} from './Document'\n\ntype DOMDocument = typeof window.document\n\nexport interface IOptions extends IParserOptions,\n  IScreenOptions,\n  IScreenStartOptions,\n  IDocumentOptions {}\n\n/**\n * SVG renderer on canvas.\n */\nexport class Canvg {\n  /**\n   * Create Canvg instance from SVG source string or URL.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string or URL.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */\n  static async from(\n    ctx: RenderingContext2D,\n    svg: string,\n    options: IOptions = {}\n  ) {\n    const parser = new Parser(options)\n    const svgDocument = await parser.parse(svg)\n\n    return new Canvg(ctx, svgDocument, options)\n  }\n\n  /**\n   * Create Canvg instance from SVG source string.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */\n  static fromString(\n    ctx: RenderingContext2D,\n    svg: string,\n    options: IOptions = {}\n  ) {\n    const parser = new Parser(options)\n    const svgDocument = parser.parseFromString(svg)\n\n    return new Canvg(ctx, svgDocument, options)\n  }\n\n  /**\n   * XML/HTML parser instance.\n   */\n  readonly parser: Parser\n  /**\n   * Screen instance.\n   */\n  readonly screen: Screen\n  /**\n   * Canvg Document.\n   */\n  readonly document: Document\n  private readonly documentElement: SVGElement\n  private readonly options: IOptions\n\n  /**\n   * Main constructor.\n   * @param ctx - Rendering context.\n   * @param svg - SVG Document.\n   * @param options - Rendering options.\n   */\n  constructor(\n    ctx: RenderingContext2D,\n    svg: DOMDocument,\n    options: IOptions = {}\n  ) {\n    this.parser = new Parser(options)\n    this.screen = new Screen(ctx, options)\n    this.options = options\n\n    const document = new Document(this, options)\n    const documentElement = document.createDocumentElement(svg)\n\n    this.document = document\n    this.documentElement = documentElement\n  }\n\n  /**\n   * Create new Canvg instance with inherited options.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string or URL.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */\n  fork(\n    ctx: RenderingContext2D,\n    svg: string,\n    options: IOptions = {}\n  ) {\n    return Canvg.from(ctx, svg, {\n      ...this.options,\n      ...options\n    })\n  }\n\n  /**\n   * Create new Canvg instance with inherited options.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */\n  forkString(\n    ctx: RenderingContext2D,\n    svg: string,\n    options: IOptions = {}\n  ) {\n    return Canvg.fromString(ctx, svg, {\n      ...this.options,\n      ...options\n    })\n  }\n\n  /**\n   * Document is ready promise.\n   * @returns Ready promise.\n   */\n  ready() {\n    return this.screen.ready()\n  }\n\n  /**\n   * Document is ready value.\n   * @returns Is ready or not.\n   */\n  isReady() {\n    return this.screen.isReady()\n  }\n\n  /**\n   * Render only first frame, ignoring animations and mouse.\n   * @param options - Rendering options.\n   */\n  async render(options: IScreenStartOptions = {}) {\n    this.start({\n      enableRedraw: true,\n      ignoreAnimation: true,\n      ignoreMouse: true,\n      ...options\n    })\n\n    await this.ready()\n\n    this.stop()\n  }\n\n  /**\n   * Start rendering.\n   * @param options - Render options.\n   */\n  start(options: IScreenStartOptions = {}) {\n    const {\n      documentElement,\n      screen,\n      options: baseOptions\n    } = this\n\n    screen.start(documentElement, {\n      enableRedraw: true,\n      ...baseOptions,\n      ...options\n    })\n  }\n\n  /**\n   * Stop rendering.\n   */\n  stop() {\n    this.screen.stop()\n  }\n\n  /**\n   * Resize SVG to fit in given size.\n   * @param width\n   * @param height\n   * @param preserveAspectRatio\n   */\n  resize(\n    width: number,\n    height = width,\n    preserveAspectRatio: boolean | string = false\n  ) {\n    this.documentElement.resize(width, height, preserveAspectRatio)\n  }\n}\n","import { Canvg } from \"canvg\";\n\nexport const decodeUserData = (encoded) => {\n  if (typeof encoded !== \"string\") {\n    return [];\n  }\n  return JSON.parse(atob(encoded));\n};\n\nconst toUserData = (originalData, userData) => ({\n  ...originalData,\n  data: userData.filter((d) => d.selected).map((d) => ({ key: d.key })),\n});\n\nexport const encodeUserData = (originalData, userData) => {\n  return btoa(JSON.stringify(toUserData(originalData, userData)));\n};\n\nexport const copyPermaLink = (originalData, data) => {\n  const url = new URL(document.location);\n  url.searchParams.set(\"data\", encodeUserData(originalData, data));\n  navigator.clipboard.writeText(url.toString());\n};\n\nexport const exportData = (originalData, userData) => {\n  const userDataForDownload = JSON.stringify(\n    toUserData(originalData, userData)\n  );\n  const url = window.URL.createObjectURL(new Blob([userDataForDownload]));\n  downloadFile({\n    file: url,\n    name: \"gyhbr\",\n    format: \"json\",\n  });\n};\n\nexport const exportImage = async (chartWidth, chartHeight, svg) => {\n  const svgData = new XMLSerializer().serializeToString(svg);\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n\n  canvas.width = chartWidth;\n  canvas.height = chartHeight;\n\n  const v = Canvg.fromString(ctx, svgData);\n\n  await v.render();\n  const dataUrl = canvas.toDataURL(`image/png`);\n  downloadFile({\n    file: dataUrl,\n    name: \"gyhbr\",\n    format: \"png\",\n  });\n};\n\nconst downloadFile = ({ file, name, format }) => {\n  let a = document.createElement(\"a\");\n  a.download = `${name}.${format}`;\n  a.href = file;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n};\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bqd2F\")).toString();","{\n  \"version\": \"1.5\",\n  \"data\": [\n    { \"key\": \"0-0\" },\n    { \"key\": \"0-1\" },\n    { \"key\": \"0-2\" },\n    { \"key\": \"0-3\" },\n    { \"key\": \"0-4\" },\n    { \"key\": \"0-5\" },\n    { \"key\": \"1-0\" },\n    { \"key\": \"1-1\" },\n    { \"key\": \"1-2\" },\n    { \"key\": \"1-3\" },\n    { \"key\": \"1-4\" },\n    { \"key\": \"1-5\" },\n    { \"key\": \"2-0\" },\n    { \"key\": \"2-1\" },\n    { \"key\": \"2-2\" },\n    { \"key\": \"2-3\" },\n    { \"key\": \"2-4\" },\n    { \"key\": \"2-5\" },\n    { \"key\": \"3-0\" },\n    { \"key\": \"3-1\" },\n    { \"key\": \"3-2\" },\n    { \"key\": \"3-3\" },\n    { \"key\": \"3-4\" },\n    { \"key\": \"3-5\" },\n    { \"key\": \"4-0\" },\n    { \"key\": \"4-1\" },\n    { \"key\": \"4-2\" },\n    { \"key\": \"4-3\" },\n    { \"key\": \"4-4\" },\n    { \"key\": \"4-5\" },\n    { \"key\": \"5-0\" },\n    { \"key\": \"5-1\" },\n    { \"key\": \"5-2\" },\n    { \"key\": \"5-3\" },\n    { \"key\": \"5-4\" },\n    { \"key\": \"5-5\" },\n    { \"key\": \"6-0\" },\n    { \"key\": \"6-1\" },\n    { \"key\": \"6-2\" },\n    { \"key\": \"6-3\" },\n    { \"key\": \"6-4\" },\n    { \"key\": \"6-5\" },\n    { \"key\": \"7-0\" },\n    { \"key\": \"7-1\" },\n    { \"key\": \"7-2\" },\n    { \"key\": \"7-3\" },\n    { \"key\": \"7-4\" },\n    { \"key\": \"7-5\" },\n    { \"key\": \"8-0\" },\n    { \"key\": \"8-1\" },\n    { \"key\": \"8-2\" },\n    { \"key\": \"8-3\" },\n    { \"key\": \"8-4\" },\n    { \"key\": \"8-5\" },\n    { \"key\": \"9-0\" },\n    { \"key\": \"9-1\" },\n    { \"key\": \"9-2\" },\n    { \"key\": \"9-3\" },\n    { \"key\": \"9-4\" },\n    { \"key\": \"9-5\" },\n    { \"key\": \"10-0\" },\n    { \"key\": \"10-1\" },\n    { \"key\": \"10-2\" },\n    { \"key\": \"10-3\" },\n    { \"key\": \"10-4\" },\n    { \"key\": \"10-5\" },\n    { \"key\": \"11-0\" },\n    { \"key\": \"11-1\" },\n    { \"key\": \"11-2\" },\n    { \"key\": \"11-3\" },\n    { \"key\": \"11-4\" },\n    { \"key\": \"11-5\" },\n    { \"key\": \"12-0\" },\n    { \"key\": \"12-1\" },\n    { \"key\": \"12-2\" },\n    { \"key\": \"12-3\" },\n    { \"key\": \"12-4\" },\n    { \"key\": \"12-5\" },\n    { \"key\": \"13-0\" },\n    { \"key\": \"13-1\" },\n    { \"key\": \"13-2\" },\n    { \"key\": \"13-3\" },\n    { \"key\": \"13-4\" },\n    { \"key\": \"13-5\" },\n    { \"key\": \"14-0\" },\n    { \"key\": \"14-1\" },\n    { \"key\": \"14-2\" },\n    { \"key\": \"14-3\" },\n    { \"key\": \"14-4\" },\n    { \"key\": \"14-5\" },\n    { \"key\": \"15-0\" },\n    { \"key\": \"15-1\" },\n    { \"key\": \"15-2\" },\n    { \"key\": \"15-3\" },\n    { \"key\": \"15-4\" },\n    { \"key\": \"15-5\" },\n    { \"key\": \"16-0\" },\n    { \"key\": \"16-1\" },\n    { \"key\": \"16-2\" },\n    { \"key\": \"16-3\" },\n    { \"key\": \"16-4\" },\n    { \"key\": \"16-5\" },\n    { \"key\": \"17-0\" },\n    { \"key\": \"17-1\" },\n    { \"key\": \"17-2\" },\n    { \"key\": \"17-3\" },\n    { \"key\": \"17-4\" },\n    { \"key\": \"17-5\" },\n    { \"key\": \"18-0\" },\n    { \"key\": \"18-1\" },\n    { \"key\": \"18-2\" },\n    { \"key\": \"18-3\" },\n    { \"key\": \"18-4\" },\n    { \"key\": \"18-5\" },\n    { \"key\": \"19-0\" },\n    { \"key\": \"19-1\" },\n    { \"key\": \"19-2\" },\n    { \"key\": \"19-3\" },\n    { \"key\": \"19-4\" },\n    { \"key\": \"19-5\" },\n    { \"key\": \"20-0\" },\n    { \"key\": \"20-1\" },\n    { \"key\": \"20-2\" },\n    { \"key\": \"20-3\" },\n    { \"key\": \"20-4\" },\n    { \"key\": \"20-5\" },\n    { \"key\": \"21-0\" },\n    { \"key\": \"21-1\" },\n    { \"key\": \"21-2\" },\n    { \"key\": \"21-3\" },\n    { \"key\": \"21-4\" },\n    { \"key\": \"21-5\" },\n    { \"key\": \"22-0\" },\n    { \"key\": \"22-1\" },\n    { \"key\": \"22-2\" },\n    { \"key\": \"22-3\" },\n    { \"key\": \"22-4\" },\n    { \"key\": \"22-5\" },\n    { \"key\": \"23-0\" },\n    { \"key\": \"23-1\" },\n    { \"key\": \"23-2\" },\n    { \"key\": \"23-3\" },\n    { \"key\": \"23-4\" },\n    { \"key\": \"23-5\" }\n  ]\n}\n","import * as d3 from \"d3\";\nimport * as utils from \"./utils\";\nimport v1_5Img from \"../assets/v1_5.png\";\nimport v1_5 from \"../assets/v1_5.json\";\nimport * as styles from \"../css/app.module.css\";\n\nfunction renderChart() {\n  const params = new URL(document.location).searchParams;\n  const userData = utils.decodeUserData(params.get(\"data\"));\n\n  const data = v1_5.data;\n\n  data.forEach((datum) => {\n    datum.selected =\n      userData && userData.data\n        ? userData.data.find((d) => d.key === datum.key)\n        : false;\n  });\n\n  const getKeyElement = (p) => (d) => d.key.split(\"-\")[p];\n  const getKeyCol = getKeyElement(0);\n  const getKeyRow = getKeyElement(1);\n\n  const chartWidth = 4296;\n  const chartHeight = 2271;\n  const selectionMargin = { left: 115, top: 325 };\n  const selectionWidth = 173;\n  const selectionHeight = 320;\n\n  const element = document.getElementById(\"hbr-chart-container\");\n  const svg = d3\n    .select(element)\n    .append(\"svg\")\n    .attr(\"viewBox\", `0 0 ${chartWidth} ${chartHeight}`);\n\n  svg\n    .append(\"image\")\n    .attr(\"href\", v1_5Img)\n    .attr(\"width\", chartWidth)\n    .attr(\"height\", chartHeight);\n\n  const selectionGroup = svg\n    .append(\"g\")\n    .attr(\n      \"transform\",\n      `translate(${selectionMargin.left}, ${selectionMargin.top})`\n    );\n\n  const renderSelection = () => {\n    const updateSelection = (e, d) => {\n      data.forEach((datum) => {\n        if (datum.key === d.key) {\n          datum.selected = !datum.selected;\n        }\n      });\n\n      renderSelection();\n    };\n\n    selectionGroup\n      .selectAll(\"rect\")\n      .data(data)\n      .join(\"rect\")\n      .attr(\"x\", (d) => getKeyCol(d) * selectionWidth)\n      .attr(\"y\", (d) => getKeyRow(d) * selectionHeight)\n      .attr(\"width\", selectionWidth)\n      .attr(\"height\", selectionHeight)\n      .attr(\"rx\", 8)\n      .attr(\"ry\", 8)\n      .attr(\"fill-opacity\", 0)\n      .attr(\"stroke\", (d) => (d.selected ? \"red\" : null))\n      .attr(\"stroke-width\", 12)\n      .on(\"click\", updateSelection);\n  };\n\n  const onCopyLink = () => {\n    utils.copyPermaLink(v1_5, data);\n    alert(\"\");\n  };\n\n  const onExportData = () => {\n    utils.exportData(v1_5, data);\n  };\n\n  const onExportImage = () => {\n    utils.exportImage(chartWidth, chartHeight, svg.node());\n  };\n\n  document.getElementById(\"button-copy-link\").onclick = onCopyLink;\n  document.getElementById(\"button-export-data\").onclick = onExportData;\n  document.getElementById(\"button-export-image\").onclick = onExportImage;\n\n  renderSelection();\n}\n\nfunction main() {\n  renderChart();\n}\n\nmain();\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$7c4cf709d1826294$var$noop","value","$7c4cf709d1826294$var$dispatch","t","n","arguments","_","test","$7c4cf709d1826294$var$Dispatch","this","$7c4cf709d1826294$var$get","type","name","c","$7c4cf709d1826294$var$set","callback","slice","concat","push","prototype","constructor","on","typename","types","T","trim","split","map","indexOf","hasOwnProperty","copy","call","that","args","Array","apply","$7c4cf709d1826294$export$2e2bcd8739ae039","$6e0da2549057218e$var$none","$6e0da2549057218e$export$2e2bcd8739ae039","selector","querySelector","$7d92e4f75dbef49d$var$empty","$7d92e4f75dbef49d$export$2e2bcd8739ae039","querySelectorAll","$a3d7edd03ec30cc1$var$arrayAll","select","x","isArray","from","$5fb24786d2a5f87a$export$2e2bcd8739ae039","matches","$5fb24786d2a5f87a$export$90c2759c036528","node","$31ffd623f27a3a65$var$find","find","$31ffd623f27a3a65$var$childFirst","firstElementChild","$956143cec557381d$var$filter","filter","$956143cec557381d$var$children","children","$e7fb628d3a97a780$export$2e2bcd8739ae039","update","$3e99928b06782938$export$67b01759a14cf6a4","parent","datum","ownerDocument","namespaceURI","_next","_parent","__data__","$cf943aeeeea8dffb$var$bindIndex","group","enter","exit","data","groupLength","dataLength","$cf943aeeeea8dffb$var$bindKey","key","keyValue","nodeByKeyValue","Map","keyValues","has","set","get","delete","$cf943aeeeea8dffb$var$datum","$cf943aeeeea8dffb$var$arraylike","$faed8eab1469f61d$var$ascending","a","b","NaN","appendChild","child","insertBefore","next","$53f2bc3e7847f93d$export$201a3f7520ccc326","$53f2bc3e7847f93d$export$2e2bcd8739ae039","svg","xhtml","xlink","xml","xmlns","$b659c67af9335162$export$2e2bcd8739ae039","prefix","space","local","$8ba31651ad7591ba$var$attrRemove","removeAttribute","$8ba31651ad7591ba$var$attrRemoveNS","fullname","removeAttributeNS","$8ba31651ad7591ba$var$attrConstant","setAttribute","$8ba31651ad7591ba$var$attrConstantNS","setAttributeNS","$8ba31651ad7591ba$var$attrFunction","v","$8ba31651ad7591ba$var$attrFunctionNS","$89f2562a5a0d5a13$export$2e2bcd8739ae039","defaultView","document","$6abb942964e997ae$var$styleRemove","style","removeProperty","$6abb942964e997ae$var$styleConstant","priority","setProperty","$6abb942964e997ae$var$styleFunction","$6abb942964e997ae$export$5e3cec964f0b5efd","getPropertyValue","getComputedStyle","$2b37810bbc11c28b$var$propertyRemove","$2b37810bbc11c28b$var$propertyConstant","$2b37810bbc11c28b$var$propertyFunction","$6515c3ccac9efd7a$var$classArray","string","$6515c3ccac9efd7a$var$classList","classList","$6515c3ccac9efd7a$var$ClassList","_node","_names","getAttribute","$6515c3ccac9efd7a$var$classedAdd","names","list","add","$6515c3ccac9efd7a$var$classedRemove","remove","$6515c3ccac9efd7a$var$classedTrue","$6515c3ccac9efd7a$var$classedFalse","$6515c3ccac9efd7a$var$classedFunction","$23bcbc7d81179ba9$var$textRemove","textContent","$23bcbc7d81179ba9$var$textConstant","$23bcbc7d81179ba9$var$textFunction","$d5514f1406649954$var$htmlRemove","innerHTML","$d5514f1406649954$var$htmlConstant","$d5514f1406649954$var$htmlFunction","$c6aae8ef09c3d03d$var$raise","nextSibling","parentNode","$4669a19c71181bd1$var$lower","previousSibling","firstChild","$8408c2f95f59818f$var$creatorInherit","uri","documentElement","createElement","createElementNS","$8408c2f95f59818f$var$creatorFixed","$8408c2f95f59818f$export$2e2bcd8739ae039","$45485f4f27d149f8$var$constantNull","$d587d6535138580c$var$remove","removeChild","$3323c835dc2d74de$var$selection_cloneShallow","clone","cloneNode","$3323c835dc2d74de$var$selection_cloneDeep","$dd1fb49221ad966f$var$onRemove","__on","o","j","m","removeEventListener","listener","options","$dd1fb49221ad966f$var$onAdd","event","$dd1fb49221ad966f$var$contextListener","addEventListener","$27c639e461d8a390$var$dispatchEvent","params","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchEvent","$27c639e461d8a390$var$dispatchConstant","$27c639e461d8a390$var$dispatchFunction","join","splice","contains","$28a9f77d63e1ff25$export$e8e78c978b129247","$28a9f77d63e1ff25$export$52baac22726c72bf","groups","parents","_groups","_parents","$28a9f77d63e1ff25$var$selection","subgroups","subnode","subgroup","selectAll","selectChild","match","$31ffd623f27a3a65$var$childFind","selectChildren","$956143cec557381d$var$childrenFilter","bind","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","onenter","onupdate","onexit","selection","append","merge","order","context","groups0","groups1","m0","m1","Math","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","nodes","size","empty","each","attr","getAttributeNS","property","classed","text","html","raise","lower","create","insert","before","deep","typenames","$dd1fb49221ad966f$var$parseTypenames","dispatch","Symbol","iterator","$28a9f77d63e1ff25$export$2e2bcd8739ae039","$831e9a7deaab9d1d$export$2e2bcd8739ae039","factory","$831e9a7deaab9d1d$export$8b58be045bf06082","definition","$8b7826cd7970b69e$export$892596cec99bc70e","$8b7826cd7970b69e$export$4adafc6ed0600c10","$8b7826cd7970b69e$export$9eace2cc0d12c98d","$8b7826cd7970b69e$var$reI","$8b7826cd7970b69e$var$reN","$8b7826cd7970b69e$var$reP","$8b7826cd7970b69e$var$reHex","$8b7826cd7970b69e$var$reRgbInteger","RegExp","$8b7826cd7970b69e$var$reRgbPercent","$8b7826cd7970b69e$var$reRgbaInteger","$8b7826cd7970b69e$var$reRgbaPercent","$8b7826cd7970b69e$var$reHslPercent","$8b7826cd7970b69e$var$reHslaPercent","$8b7826cd7970b69e$var$named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","$8b7826cd7970b69e$var$color_formatHex","rgb","formatHex","$8b7826cd7970b69e$var$color_formatRgb","formatRgb","$8b7826cd7970b69e$export$2e2bcd8739ae039","format","l","toLowerCase","exec","parseInt","$8b7826cd7970b69e$var$rgbn","$8b7826cd7970b69e$export$5e05a94393ac29e3","$8b7826cd7970b69e$var$rgba","$8b7826cd7970b69e$var$hsla","r","g","$8b7826cd7970b69e$export$8972dc0e6ad9238f","opacity","$8b7826cd7970b69e$var$rgb_formatHex","$8b7826cd7970b69e$var$hex","$8b7826cd7970b69e$var$rgb_formatRgb","$8b7826cd7970b69e$var$clampa","$8b7826cd7970b69e$var$clampi","isNaN","max","round","toString","h","s","$8b7826cd7970b69e$var$Hsl","$8b7826cd7970b69e$export$8133dc3fa904d6d1","$8b7826cd7970b69e$var$clamph","$8b7826cd7970b69e$var$clampt","$8b7826cd7970b69e$var$hsl2rgb","m2","$dd5733431a2d0880$export$4e41033bfeec1a4c","t1","v0","v1","v2","v3","t2","t3","channels","assign","displayable","hex","formatHex8","formatHsl","brighter","k","pow","darker","clamp","$78a660cd70c52f6f$export$2e2bcd8739ae039","$529dc8928f6a4077$var$linear","d","$529dc8928f6a4077$export$a7ebe8cc6aaf8d37","y","$529dc8928f6a4077$export$2e2bcd8739ae039","$529dc8928f6a4077$var$exponential","$e7e88f7f6ed95eef$export$2e2bcd8739ae039","rgbGamma","color","start","end","gamma","$e7e88f7f6ed95eef$var$rgbSpline","spline","colors","values","floor","$bebed377ddb9d3af$export$2e2bcd8739ae039","$020916edd93bff72$var$reA","$020916edd93bff72$var$reB","source","$020916edd93bff72$export$2e2bcd8739ae039","am","bm","bs","bi","lastIndex","q","index","$020916edd93bff72$var$one","$020916edd93bff72$var$zero","$e782289d8bd71451$var$taskHead","$e782289d8bd71451$var$taskTail","$e782289d8bd71451$var$frame","$e782289d8bd71451$var$timeout","$e782289d8bd71451$var$interval","$e782289d8bd71451$var$pokeDelay","$e782289d8bd71451$var$clockLast","$e782289d8bd71451$var$clockNow","$e782289d8bd71451$var$clockSkew","$e782289d8bd71451$var$clock","performance","now","Date","$e782289d8bd71451$var$setFrame","requestAnimationFrame","f","setTimeout","$e782289d8bd71451$export$461939dd4422153","$e782289d8bd71451$var$clearNow","$e782289d8bd71451$export$c57e9b2d8b9e4de","_call","_time","$e782289d8bd71451$export$9dc4ecf953986f04","delay","time","restart","$e782289d8bd71451$var$wake","e","undefined","$e782289d8bd71451$export$d60154c1d7f3990e","t0","Infinity","$e782289d8bd71451$var$sleep","$e782289d8bd71451$var$nap","$e782289d8bd71451$var$poke","clearTimeout","clearInterval","setInterval","$d15c972f8843a0f2$export$2e2bcd8739ae039","elapsed","stop","TypeError","$150ba4634a330696$var$emptyOn","$150ba4634a330696$var$emptyTween","$150ba4634a330696$export$ff39ebd4bb12b718","$150ba4634a330696$export$584530fe98d14a84","$150ba4634a330696$export$a5d151aee16efd42","$150ba4634a330696$export$fb935ab5849a0db9","$150ba4634a330696$export$1573e22b087389af","$150ba4634a330696$export$a2e792214ded83b2","$150ba4634a330696$export$9d38167254403955","$150ba4634a330696$export$2e2bcd8739ae039","timing","schedules","__transition","self","tween","schedule","state","timer","tick","duration","ease","$150ba4634a330696$var$create","$150ba4634a330696$export$2cd8252107eb640b","$150ba4634a330696$export$3988ae62b71be9a3","$150ba4634a330696$export$adaa4cf7ef1b65be","$b05ce272ee11a654$export$2e2bcd8739ae039","active","$4a001faa54972590$var$svgNode","$2938f7d64470581a$var$degrees","PI","$2938f7d64470581a$export$f0954fd7d5368655","translateX","translateY","rotate","skewX","scaleX","scaleY","$2938f7d64470581a$export$2e2bcd8739ae039","sqrt","atan2","atan","$e4d1a233c7242264$var$interpolateTransform","pxComma","pxParen","degParen","pop","xa","ya","xb","yb","translate","scale","$e4d1a233c7242264$export$56bec7123bb3589a","DOMMatrix","WebKitCSSMatrix","isIdentity","$e4d1a233c7242264$export$da8cba906d64c082","transform","baseVal","consolidate","matrix","$922feb1dfe9c8dcf$var$tweenRemove","tween0","tween1","$922feb1dfe9c8dcf$var$tweenFunction","$922feb1dfe9c8dcf$export$f78ce6ab10405d82","transition","_id","$8a713565676b726d$export$2e2bcd8739ae039","$2a651cfc4e49b53d$var$attrRemove","$2a651cfc4e49b53d$var$attrRemoveNS","$2a651cfc4e49b53d$var$attrConstant","interpolate","value1","string00","interpolate0","string1","string0","$2a651cfc4e49b53d$var$attrConstantNS","$2a651cfc4e49b53d$var$attrFunction","string10","$2a651cfc4e49b53d$var$attrFunctionNS","$cad13035adb29669$var$attrTweenNS","$cad13035adb29669$var$attrInterpolateNS","_value","$cad13035adb29669$var$attrTween","$cad13035adb29669$var$attrInterpolate","$09cd57996bd81614$var$delayFunction","$09cd57996bd81614$var$delayConstant","$9c9f124117d5bf14$var$durationFunction","$9c9f124117d5bf14$var$durationConstant","$13be595fcf5febb7$var$Selection","$d0bf366fdef4c332$var$styleRemove","$a4d5b9ef4f9cfabb$var$id","$a4d5b9ef4f9cfabb$export$be58926105124dd4","_name","$a4d5b9ef4f9cfabb$export$9ffd10a3fbdc175b","$a4d5b9ef4f9cfabb$var$selection_prototype","inherit","id0","id1","on0","on1","sit","every","$fd664209e896113c$var$start","$fd664209e896113c$var$onFunction","attrTween","styleTween","$d0bf366fdef4c332$var$styleNull","$d0bf366fdef4c332$var$styleFunction","listener0","$d0bf366fdef4c332$var$styleMaybeRemove","$d0bf366fdef4c332$var$styleConstant","$83672080502c9717$var$styleInterpolate","$83672080502c9717$var$styleTween","$e62b6dd5e7df40e7$var$textFunction","$e62b6dd5e7df40e7$var$textConstant","textTween","$64d823b28aa7019a$var$textInterpolate","$64d823b28aa7019a$var$textTween","$8ea7852b6976e6d1$var$easeConstant","easeVarying","$9d186bb80d60f6c9$var$easeVarying","Promise","resolve","reject","cancel","interrupt","$b5b43281074f9351$var$defaultTiming","$b5b43281074f9351$var$inherit","abs","$5c8970f4694d4107$var$abs","$5c8970f4694d4107$var$max","$5c8970f4694d4107$var$min","$5c8970f4694d4107$var$number1","$5c8970f4694d4107$var$number2","$5c8970f4694d4107$var$type","$e4199827a75856fd$var$cosh","exp","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","log","d1","b0","b1","r0","r1","coshr0","u","$e4199827a75856fd$var$sinh","SQRT2","_1","_2","$a3c1094a2e8782d7$export$563a914cafbdc389","point","applyX","applyY","invert","location","invertX","invertY","rescaleX","domain","range","rescaleY","$cfae44f0dfdf62c0$var$cachedSetTimeout","$cfae44f0dfdf62c0$var$cachedClearTimeout","$cfae44f0dfdf62c0$var$process","$cfae44f0dfdf62c0$exports","$cfae44f0dfdf62c0$var$defaultSetTimout","$cfae44f0dfdf62c0$var$defaultClearTimeout","$cfae44f0dfdf62c0$var$runTimeout","fun","$cfae44f0dfdf62c0$var$currentQueue","$cfae44f0dfdf62c0$var$queue","$cfae44f0dfdf62c0$var$draining","$cfae44f0dfdf62c0$var$queueIndex","$cfae44f0dfdf62c0$var$cleanUpNextTick","$cfae44f0dfdf62c0$var$drainQueue","timeout","len","run","marker","$cfae44f0dfdf62c0$var$runClearTimeout","$cfae44f0dfdf62c0$var$Item","array","$cfae44f0dfdf62c0$var$noop","nextTick","title","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","$ad07a536a7534694$exports","hr","uptime","getTime","$9161a37c5225314c$var$root","$parcel$global","$9161a37c5225314c$var$vendors","$9161a37c5225314c$var$suffix","$9161a37c5225314c$var$raf","$9161a37c5225314c$var$caf","$9161a37c5225314c$var$i","$9161a37c5225314c$var$last","$9161a37c5225314c$var$id","$9161a37c5225314c$var$queue","_now","cp","cancelled","handle","$9161a37c5225314c$exports","fn","polyfill","object","cancelAnimationFrame","$396f605711fc18d5$exports","color_string","ok","alpha","charAt","substr","replace","simple_colors","feldspar","lightslateblue","violetred","color_defs","re","example","process","bits","parseFloat","processor","toRGB","toRGBA","toHex","getHelpXML","examples","sc","list_item","list_color","RGBColor","example_div","cssText","createTextNode","list_item_value","extendStatics","setPrototypeOf","__proto__","p","__extends","String","__","str","_a","rad","cos","sin","assertNumbers","_i","numbers","annotateArcCommand","x1","y1","lArcFlag","sweepFlag","rX","rY","xRot","x1_","y1_","testValue","c_ScaleTemp","c_Scale","cx_","cy_","cRot","cX","cY","phi1","phi2","intersectionUnitCircleLine","termSqr","term","SVGPathDataTransformer","DEG","lerp","arcAt","x2","phiDeg","bezierRoot","x0","x3","EPS","x01","x12","PRECISION","discriminantX4","root","bezierAt","TO_ABS","INFO","command","prevX","prevY","relative","y2","NORMALIZE_ST","prevCurveC2X","prevCurveC2Y","prevQuadCX","prevQuadCY","SVGPathData","SMOOTH_CURVE_TO","CURVE_TO","SMOOTH_QUAD_TO","QUAD_TO","QT_TO_C","prevQuadX1","prevQuadY1","prevXAbs","prevYAbs","pathStartXAbs","pathStartYAbs","MOVE_TO","result","CLOSE_PATH","MATRIX","pathStartX","origX1","origX2","comRel","sqr","HORIZ_LINE_TO","LINE_TO","VERT_LINE_TO","det","sinRot","cosRot","xCurve","yCurve","A","B","C","A1","B1","C1","newXRot","newSinRot","newCosRot","roundVal","rf","val","normalizeZ","normalizeH","normalizeV","pathStartY","ARC","skip","x1Rel","y1Rel","LINE_COMMANDS","xRel","yRel","x2Rel","y2Rel","dX","dY","xOffset","yOffset","arc","y0","phiMin","deltaPhi","partCount","ceil","phiStart","phiEnd","deltaPhi_1","_e","_f","_g","xTemp","yTemp","_b","_c","_d","toAbs","qtToC","normST","fixX","absX","maxX","minX","fixY","absY","maxY","minY","DRAWING_COMMANDS","xDerivRoots_1","derivRoot","yDerivRoots_1","xRotRad","x90","y90","phiMin_1","phiMax","normalizeXiEta","xi","eta","phi","xDerivRoots_2","H","yDerivRoots_2","$476e72a94ce3adba$var$O","$476e72a94ce3adba$var$l","TransformableSVG","ROUND","TO_REL","NORMALIZE_HVZ","A_TO_C","eps","SANITIZE","TRANSLATE","SCALE","ROTATE","SKEW_X","SKEW_Y","X_AXIS_SYMMETRY","Y_AXIS_SYMMETRY","ANNOTATE_ARCS","isWhiteSpace","isDigit","charCodeAt","$476e72a94ce3adba$export$93ceea106e074429","_super","_this","SVGPathDataParser","commands","curArgs","canParseCommandOrComma","SyntaxError","finishCommand","isAArcFlag","curCommandType","curNumber","isEndingDigit","curNumberHasExp","curNumberHasExpDigits","curNumberHasDecimal","Number","COMMAND_ARG_COUNTS","curCommandRelative","chunk","parsedCommands_1","getPrototypeOf","cT","content","encode","boundsTransform","CALCULATE_BOUNDS","transformFunction","newCommands","transformedCommand","encodeSVGPath","path","parser","finish","$a03863992cdf6103$var$_typeof","obj","$a03863992cdf6103$var$mulTable","$a03863992cdf6103$var$shgTable","$a03863992cdf6103$var$getImageDataFromCanvas","canvas","topX","topY","width","height","getElementById","getContext","getImageData","$a03863992cdf6103$export$2dd10362761f44f5","radius","imageData","stackEnd","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","$a03863992cdf6103$export$c7ee5523f3ead121","stack","stackIn","stackOut","yw","yi","mulSum","shgSum","pr","pg","pb","pa","rInSum","gInSum","bInSum","aInSum","rOutSum","gOutSum","bOutSum","aOutSum","rSum","gSum","bSum","aSum","_i2","rbs","paInitial","_a2","_p","_stackOut","_r","_x","_pr","_pg","_pb","_pa","_rOutSum","_gOutSum","_bOutSum","_aOutSum","_rSum","_gSum","_bSum","_aSum","_i3","yp","_gInSum","_bInSum","_aInSum","_rInSum","_i4","_rbs","_y","_p2","$a03863992cdf6103$export$95ea1a5e72bf4fa5","putImageData","BlurStack","instance","Constructor","$a03863992cdf6103$var$_classCallCheck","compressSpaces","toNumbers","allUppercase","parseExternalUrl","url","urlMatch","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","findSelectorMatch","regex","PSEUDO_ZERO","vectorMagnitude","vectorsRatio","vectorsAngle","acos","CB1","CB2","CB3","CB4","QB1","QB2","QB3","Property","separator","getString","hasValue","zeroIsValue","isString","regexp","isUrlDefinition","isPixels","asString","endsWith","setValue","getValue","def","getNumber","getColor","isNormalizedColor","normalizeColor","startsWith","rgbParts","num","isFloat","getDpi","getRem","rootEmSize","getEm","emSize","getUnits","getPixels","axisOrIsFontSize","processPercent","axis","isFontSize","viewPort","screen","computeSize","getMilliseconds","getRadians","getDefinition","definitions","getFillStyleDefinition","element","createGradient","ctx","createPattern","getHrefAttribute","patternTransform","getTextBaseline","textBaselineMapping","addOpacity","commas","baseline","middle","central","ideographic","alphabetic","hanging","mathematical","ViewPort","clear","viewPorts","setCurrent","removeCurrent","getRoot","getDefault","getCurrent","current","DEFAULT_VIEWPORT_WIDTH","DEFAULT_VIEWPORT_HEIGHT","Point","defaultValue","parseScale","parsePath","points","pathPoints","angleTo","applyTransform","xp","Mouse","isWorking","working","onClick","onMouseMove","onclick","onmousemove","hasEvents","events","runEvents","eventElements","cursor","forEach","param","checkPath","isPointInPath","checkBoundingBox","boundingBox","isPointInBox","mapXY","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","clientX","clientY","eventTarget","defaultWindow","defaultFetch","fetch","Screen","wait","checker","waits","ready","readyPromise","isReady","isReadyLock","resolveReady","setDefaults","strokeStyle","lineCap","lineJoin","miterLimit","setViewBox","aspectRatio","desiredWidth","desiredHeight","refX","refY","clip","clipX","clipY","cleanAspectRatio","aspectRatioAlign","aspectRatioMeetOrSlice","align","meetOrSlice","scaleMin","scaleMax","finalDesiredWidth","finalDesiredHeight","refXProp","refYProp","hasRefs","scaledClipX","scaledClipY","beginPath","moveTo","lineTo","closePath","isMeetMinY","isSliceMaxY","isMeetMinX","isSliceMaxX","enableRedraw","ignoreMouse","ignoreAnimation","ignoreDimensions","ignoreClear","forceRedraw","scaleWidth","scaleHeight","offsetX","offsetY","mouse","frameDuration","FRAMERATE","render","then","delta","shouldUpdate","intervalId","animations","reduce","animation","isFirstRender","widthStyle","getStyle","heightStyle","cWidth","clientWidth","cHeight","clientHeight","viewBox","xRatio","yRatio","transformStyle","clearRect","MAX_VIRTUAL_PIXELS","DefaultDOMParser","DOMParser","Parser","resource","parseFromString","load","checkDocument","err","parserError","getElementsByTagName","response","Matrix","originX","originY","tx","ty","unapply","applyToPoint","transformOrigin","toMatrixValue","Skew","skew","super","angle","Transform","fromElement","transformOriginXProperty","transformOriginYProperty","transforms","parseTransform","TransformType","transformTypes","Translate","Rotate","cx","cy","Scale","scaleSize","SkewX","skewY","SkewY","Element","createIfNotExists","attributes","href","skipAncestors","styles","parentStyle","save","mask","applyEffects","setContext","renderChildren","clearContext","restore","clipPathStyleProp","addChild","childNode","ignoreChildTypes","includes","matchesSelector","styleClasses","some","styleClass","addStylesFromStyleDefinition","stylesSpecificity","styleProp","specificity","existingSpecificity","removeStyles","ignoreStyles","toRestore","restoreStyles","isFirstChild","ref","captureTextNodes","animationFrozen","animationFrozenValue","nodeType","attribute","nodeName","normalizeAttributeName","childNodes","textNode","getText","UnknownElement","wrapFontFamily","fontFamily","trimmed","prepareFontStyle","fontStyle","targetFontStyle","prepareFontWeight","fontWeight","targetFontWeight","Font","font","fontVariant","fontSize","parts","part","variants","weights","prepareFontFamily","inheritFont","BoundingBox","addPoint","addX","addY","addBoundingBox","sumCubic","p2","p3","bezierCurveAdd","forX","b2ac","addBezierCurve","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","addQuadraticCurve","cp1x","cp1y","cp2x","cp2y","RenderedElement","calculateOpacity","opacityStyle","fromMeasure","fillStyleProp","fillOpacityStyleProp","strokeStyleProp","strokeOpacityProp","fillStyle","strokeWidthStyleProp","newLineWidth","lineWidth","strokeLinecapStyleProp","strokeLinejoinStyleProp","strokeMiterlimitProp","strokeDasharrayStyleProp","strokeDashoffsetProp","gaps","setLineDash","webkitLineDash","mozDash","offset","lineDashOffset","webkitLineDashOffset","mozDashOffset","modifiedEmSizeStack","fontStyleProp","fontStyleStyleProp","fontVariantStyleProp","fontWeightStyleProp","fontSizeStyleProp","fontFamilyStyleProp","globalAlpha","popEmSize","TextElement","textBaseline","initializeCoordinates","leafTexts","textChunkStart","POSITIVE_INFINITY","NEGATIVE_INFINITY","getBoundingBox","getTElementBoundingBox","adjustChildCoordinatesRecursive","childBoundingBox","getChildBoundingBox","getFontSize","inheritFontSize","measureText","getGlyph","char","glyph","isArabic","prevChar","nextChar","arabicForm","arabicGlyphs","glyphs","missingGlyph","getTextFromNode","trimRight","renderTElementChildren","renderChild","renderText","customFont","unitsPerEm","fontFace","ctxFont","isRTL","reverse","lw","horizAdvX","fillText","strokeText","applyAnchoring","firstElement","textAnchor","shift","adjustChildCoordinatesRecursiveCore","textParent","adjustChildCoordinates","xAttr","yAttr","dxAttr","dyAttr","Boolean","getInheritedAttribute","measureCache","measure","measureTargetText","targetText","parentAttr","TSpanElement","TextNode","PathParser","reset","previousCommand","control","angles","isEnd","getPoint","xProp","yProp","makeAbsolute","getAsControlPoint","getAsCurrentPoint","getReflectedControlPoint","ox","oy","addMarker","priorTo","addMarkerAngle","getMarkerPoints","getMarkerAngles","PathElement","pathParser","pathM","pathL","pathH","pathV","pathC","pathS","pathQ","pathT","pathA","pathZ","_ctx","getMarkers","fillRuleStyleProp","fill","setTransform","stroke","markers","markersLastIndex","markerStartStyleProp","markerMidStyleProp","markerEndStyleProp","controlPoint","currentPoint","bezierCurveTo","quadraticCurveTo","xAxisRotation","currp","cpp","centp","a1","ad","ah","halfWay","sx","sy","SVGElement","fontSizeProp","refXAttr","refYAttr","viewBoxAttr","resize","preserveAspectRatio","widthAttr","heightAttr","styleAttr","originWidth","originHeight","preserveAspectRatioAttr","RectElement","rxAttr","ryAttr","rx","ry","KAPPA","PolylineElement","GElement","GradientElement","getGradientUnits","parentOpacityProp","stopsContainer","inheritStopContainer","stops","gradient","getGradient","addParentOpacity","addColorStop","rootView","rect","patternSvg","patternCanvas","createCanvas","patternCtx","attributesToInherit","attributeToInherit","AnimateElement","getProperty","attributeType","attributeName","calcValue","initialUnits","progress","to","getProgress","newValue","prop","initialValue","maxDuration","frozen","removed","updated","begin","typeAttr","lb","ub","valuesAttr","FontFaceElement","ascent","descent","GlyphElement","unicode","MissingGlyphElement","dataUriRegex","SVGFontLoader","fonts","canvg","fontNode","console","error","loaded","StyleElement","cssParts","cssClasses","cssProps","cssClass","props","cssProp","getSelectorSpecificity","currentSelector","src","imGet","img","_height","rgba","imSet","m3","FeColorMatrixElement","includeOpacity","srcData","nr","ng","nb","na","MaskElement","ignoredStyles","maskCanvas","maskCtx","tmpCanvas","tmpCtx","globalCompositeOperation","fillRect","noop","FilterElement","px","py","efd","extraFilterDistance","tmpCanvasWidth","tmpCanvasHeight","drawImage","elements","circle","CircleElement","ellipse","EllipseElement","line","LineElement","getPoints","polyline","polygon","PolygonElement","pattern","PatternElement","Reflect","deleteProperty","MarkerElement","orient","markerUnits","markerSvg","overflow","defs","DefsElement","linearGradient","LinearGradientElement","isBoundingBoxUnits","createLinearGradient","radialGradient","RadialGradientElement","fx","fy","fr","createRadialGradient","StopElement","stopOpacity","stopColor","animate","animateColor","AnimateColorElement","colorFrom","colorTo","animateTransform","AnimateTransformElement","transformFrom","transformTo","FontElement","fontFamilyStyle","arabicGlyph","tspan","tref","TRefElement","AElement","hasText","open","textPath","TextPathElement","dataArray","theta","dTheta","psi","fs","setTextData","textDecoration","glyphInfo","rotation","partialText","getLetterSpacingAt","idx","letterSpacingCache","findSegmentToFitChar","anchor","textFullWidth","fullPathWidth","spacesNumber","inputOffset","charI","glyphWidth","splineStep","textHeight","getEquidistantPointOnPath","segment","dyX","dyY","measuresCache","chars","thisSpacing","parentSpacing","letterSpacing","textLen","dxSum","acc","cur","textWidth","getPathLength","startOffset","nextOffset","parsePathData","pathLength","pathCommands","startX","startY","nextCommandType","calcLength","commandType","getLineLength","getPointOnCubicBezier","getPointOnQuadraticBezier","inc","getPointOnEllipticalArc","getPointOnLine","dist","fromX","fromY","rise","pt","ix","iy","pRise","pRun","getPointOnPath","distance","fullLen","cumulativePathLength","currentT","pct","p4x","p4y","cosPsi","sinPsi","buildEquidistantCache","inputStep","inputPrecision","precision","step","equidistantCache","targetDistance","pathElement","image","ImageElement","loadImage","createImage","loadSvg","atob","decodeURIComponent","subDocument","forkString","complete","isSvg","images","symbol","SymbolElement","use","UseElement","tempSvg","oldParent","elementTransform","cachedElement","clipPath","ClipPathElement","contextProto","feDropShadow","FeDropShadowElement","_width","feMorphology","FeMorphologyElement","feComposite","FeCompositeElement","feColorMatrix","feGaussianBlur","FeGaussianBlurElement","blurRadius","body","getUniqueId","display","canvasRGBA","TitleElement","desc","DescElement","Document","bindCreateImage","anonymousCrossOrigin","forceAnonymousCrossOrigin","emSizeStack","uniqueId","isImagesLoaded","isFontsLoaded","createDocumentElement","elementType","ElementType","elementTypes","config","DEFAULT_EM_SIZE","crossOrigin","onload","onerror","_event","_source","_lineno","_colno","Canvg","svgDocument","fromString","fork","baseOptions","$a6df9c40ba402dc9$export$91cdf2d44352938c","encoded","$a6df9c40ba402dc9$var$toUserData","originalData","userData","selected","$a6df9c40ba402dc9$export$15ff1df8f24a7755","URL","searchParams","btoa","stringify","$a6df9c40ba402dc9$export$74cddf083a9b9631","navigator","clipboard","writeText","$a6df9c40ba402dc9$export$5e3bc6f9d5e187a3","userDataForDownload","createObjectURL","Blob","$a6df9c40ba402dc9$var$downloadFile","file","$a6df9c40ba402dc9$export$cf629b29f6b8313d","async","chartWidth","chartHeight","svgData","XMLSerializer","serializeToString","$93fc0d1658f0115d$export$c401b789680a0e53","dataUrl","toDataURL","download","click","$613de9ab76ae1b70$exports","$dde3d2082d2857ac$exports","$parcel$interopDefault","getKeyElement","getKeyCol","getKeyRow","selectionMargin","$22b18e23564de7e8$exports","selectionGroup","renderSelection","alert","$388b617130f03bd4$var$renderChart"],"version":3,"file":"index.ffe43587.js.map"}